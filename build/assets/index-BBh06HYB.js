function TL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var ele=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function XN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zx={exports:{}},Xc={},Ux={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC;function ML(){if(XC)return Ge;XC=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),i=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function x(N){return N===null||typeof N!="object"?null:(N=m&&N[m]||N["@@iterator"],typeof N=="function"?N:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function k(N,L,V){this.props=N,this.context=L,this.refs=y,this.updater=V||w}k.prototype.isReactComponent={},k.prototype.setState=function(N,L){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,L,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function C(){}C.prototype=k.prototype;function _(N,L,V){this.props=N,this.context=L,this.refs=y,this.updater=V||w}var j=_.prototype=new C;j.constructor=_,v(j,k.prototype),j.isPureReactComponent=!0;var M=Array.isArray,O=Object.prototype.hasOwnProperty,T={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function A(N,L,V){var Q,ce={},H=null,B=null;if(L!=null)for(Q in L.ref!==void 0&&(B=L.ref),L.key!==void 0&&(H=""+L.key),L)O.call(L,Q)&&!I.hasOwnProperty(Q)&&(ce[Q]=L[Q]);var K=arguments.length-2;if(K===1)ce.children=V;else if(1<K){for(var q=Array(K),se=0;se<K;se++)q[se]=arguments[se+2];ce.children=q}if(N&&N.defaultProps)for(Q in K=N.defaultProps,K)ce[Q]===void 0&&(ce[Q]=K[Q]);return{$$typeof:t,type:N,key:H,ref:B,props:ce,_owner:T.current}}function F(N,L){return{$$typeof:t,type:N.type,key:L,ref:N.ref,props:N.props,_owner:N._owner}}function U(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function W(N){var L={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(V){return L[V]})}var Z=/\/+/g;function oe(N,L){return typeof N=="object"&&N!==null&&N.key!=null?W(""+N.key):L.toString(36)}function ee(N,L,V,Q,ce){var H=typeof N;(H==="undefined"||H==="boolean")&&(N=null);var B=!1;if(N===null)B=!0;else switch(H){case"string":case"number":B=!0;break;case"object":switch(N.$$typeof){case t:case e:B=!0}}if(B)return B=N,ce=ce(B),N=Q===""?"."+oe(B,0):Q,M(ce)?(V="",N!=null&&(V=N.replace(Z,"$&/")+"/"),ee(ce,L,V,"",function(se){return se})):ce!=null&&(U(ce)&&(ce=F(ce,V+(!ce.key||B&&B.key===ce.key?"":(""+ce.key).replace(Z,"$&/")+"/")+N)),L.push(ce)),1;if(B=0,Q=Q===""?".":Q+":",M(N))for(var K=0;K<N.length;K++){H=N[K];var q=Q+oe(H,K);B+=ee(H,L,V,q,ce)}else if(q=x(N),typeof q=="function")for(N=q.call(N),K=0;!(H=N.next()).done;)H=H.value,q=Q+oe(H,K++),B+=ee(H,L,V,q,ce);else if(H==="object")throw L=String(N),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return B}function re(N,L,V){if(N==null)return N;var Q=[],ce=0;return ee(N,Q,"","",function(H){return L.call(V,H,ce++)}),Q}function J(N){if(N._status===-1){var L=N._result;L=L(),L.then(function(V){(N._status===0||N._status===-1)&&(N._status=1,N._result=V)},function(V){(N._status===0||N._status===-1)&&(N._status=2,N._result=V)}),N._status===-1&&(N._status=0,N._result=L)}if(N._status===1)return N._result.default;throw N._result}var z={current:null},R={transition:null},D={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:R,ReactCurrentOwner:T};function G(){throw Error("act(...) is not supported in production builds of React.")}return Ge.Children={map:re,forEach:function(N,L,V){re(N,function(){L.apply(this,arguments)},V)},count:function(N){var L=0;return re(N,function(){L++}),L},toArray:function(N){return re(N,function(L){return L})||[]},only:function(N){if(!U(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ge.Component=k,Ge.Fragment=n,Ge.Profiler=s,Ge.PureComponent=_,Ge.StrictMode=r,Ge.Suspense=u,Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,Ge.act=G,Ge.cloneElement=function(N,L,V){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Q=v({},N.props),ce=N.key,H=N.ref,B=N._owner;if(L!=null){if(L.ref!==void 0&&(H=L.ref,B=T.current),L.key!==void 0&&(ce=""+L.key),N.type&&N.type.defaultProps)var K=N.type.defaultProps;for(q in L)O.call(L,q)&&!I.hasOwnProperty(q)&&(Q[q]=L[q]===void 0&&K!==void 0?K[q]:L[q])}var q=arguments.length-2;if(q===1)Q.children=V;else if(1<q){K=Array(q);for(var se=0;se<q;se++)K[se]=arguments[se+2];Q.children=K}return{$$typeof:t,type:N.type,key:ce,ref:H,props:Q,_owner:B}},Ge.createContext=function(N){return N={$$typeof:i,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:o,_context:N},N.Consumer=N},Ge.createElement=A,Ge.createFactory=function(N){var L=A.bind(null,N);return L.type=N,L},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(N){return{$$typeof:l,render:N}},Ge.isValidElement=U,Ge.lazy=function(N){return{$$typeof:f,_payload:{_status:-1,_result:N},_init:J}},Ge.memo=function(N,L){return{$$typeof:h,type:N,compare:L===void 0?null:L}},Ge.startTransition=function(N){var L=R.transition;R.transition={};try{N()}finally{R.transition=L}},Ge.unstable_act=G,Ge.useCallback=function(N,L){return z.current.useCallback(N,L)},Ge.useContext=function(N){return z.current.useContext(N)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(N){return z.current.useDeferredValue(N)},Ge.useEffect=function(N,L){return z.current.useEffect(N,L)},Ge.useId=function(){return z.current.useId()},Ge.useImperativeHandle=function(N,L,V){return z.current.useImperativeHandle(N,L,V)},Ge.useInsertionEffect=function(N,L){return z.current.useInsertionEffect(N,L)},Ge.useLayoutEffect=function(N,L){return z.current.useLayoutEffect(N,L)},Ge.useMemo=function(N,L){return z.current.useMemo(N,L)},Ge.useReducer=function(N,L,V){return z.current.useReducer(N,L,V)},Ge.useRef=function(N){return z.current.useRef(N)},Ge.useState=function(N){return z.current.useState(N)},Ge.useSyncExternalStore=function(N,L,V){return z.current.useSyncExternalStore(N,L,V)},Ge.useTransition=function(){return z.current.useTransition()},Ge.version="18.3.1",Ge}var GC;function Up(){return GC||(GC=1,Ux.exports=ML()),Ux.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JC;function OL(){if(JC)return Xc;JC=1;var t=Up(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function i(l,u,h){var f,m={},x=null,w=null;h!==void 0&&(x=""+h),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(w=u.ref);for(f in u)r.call(u,f)&&!o.hasOwnProperty(f)&&(m[f]=u[f]);if(l&&l.defaultProps)for(f in u=l.defaultProps,u)m[f]===void 0&&(m[f]=u[f]);return{$$typeof:e,type:l,key:x,ref:w,props:m,_owner:s.current}}return Xc.Fragment=n,Xc.jsx=i,Xc.jsxs=i,Xc}var QC;function PL(){return QC||(QC=1,zx.exports=OL()),zx.exports}var c=PL(),Dh={},Hx={exports:{}},Vn={},Wx={exports:{}},Vx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC;function RL(){return ZC||(ZC=1,(function(t){function e(R,D){var G=R.length;R.push(D);e:for(;0<G;){var N=G-1>>>1,L=R[N];if(0<s(L,D))R[N]=D,R[G]=L,G=N;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var D=R[0],G=R.pop();if(G!==D){R[0]=G;e:for(var N=0,L=R.length,V=L>>>1;N<V;){var Q=2*(N+1)-1,ce=R[Q],H=Q+1,B=R[H];if(0>s(ce,G))H<L&&0>s(B,ce)?(R[N]=B,R[H]=G,N=H):(R[N]=ce,R[Q]=G,N=Q);else if(H<L&&0>s(B,G))R[N]=B,R[H]=G,N=H;else break e}}return D}function s(R,D){var G=R.sortIndex-D.sortIndex;return G!==0?G:R.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var u=[],h=[],f=1,m=null,x=3,w=!1,v=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(R){for(var D=n(h);D!==null;){if(D.callback===null)r(h);else if(D.startTime<=R)r(h),D.sortIndex=D.expirationTime,e(u,D);else break;D=n(h)}}function M(R){if(y=!1,j(R),!v)if(n(u)!==null)v=!0,J(O);else{var D=n(h);D!==null&&z(M,D.startTime-R)}}function O(R,D){v=!1,y&&(y=!1,C(A),A=-1),w=!0;var G=x;try{for(j(D),m=n(u);m!==null&&(!(m.expirationTime>D)||R&&!W());){var N=m.callback;if(typeof N=="function"){m.callback=null,x=m.priorityLevel;var L=N(m.expirationTime<=D);D=t.unstable_now(),typeof L=="function"?m.callback=L:m===n(u)&&r(u),j(D)}else r(u);m=n(u)}if(m!==null)var V=!0;else{var Q=n(h);Q!==null&&z(M,Q.startTime-D),V=!1}return V}finally{m=null,x=G,w=!1}}var T=!1,I=null,A=-1,F=5,U=-1;function W(){return!(t.unstable_now()-U<F)}function Z(){if(I!==null){var R=t.unstable_now();U=R;var D=!0;try{D=I(!0,R)}finally{D?oe():(T=!1,I=null)}}else T=!1}var oe;if(typeof _=="function")oe=function(){_(Z)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=Z,oe=function(){re.postMessage(null)}}else oe=function(){k(Z,0)};function J(R){I=R,T||(T=!0,oe())}function z(R,D){A=k(function(){R(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){v||w||(v=!0,J(O))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(R){switch(x){case 1:case 2:case 3:var D=3;break;default:D=x}var G=x;x=D;try{return R()}finally{x=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,D){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=x;x=R;try{return D()}finally{x=G}},t.unstable_scheduleCallback=function(R,D,G){var N=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?N+G:N):G=N,R){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=G+L,R={id:f++,callback:D,priorityLevel:R,startTime:G,expirationTime:L,sortIndex:-1},G>N?(R.sortIndex=G,e(h,R),n(u)===null&&R===n(h)&&(y?(C(A),A=-1):y=!0,z(M,G-N))):(R.sortIndex=L,e(u,R),v||w||(v=!0,J(O))),R},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(R){var D=x;return function(){var G=x;x=D;try{return R.apply(this,arguments)}finally{x=G}}}})(Vx)),Vx}var e_;function AL(){return e_||(e_=1,Wx.exports=RL()),Wx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function IL(){if(t_)return Vn;t_=1;var t=Up(),e=AL();function n(a){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+a,p=1;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+a+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(a,d){i(a,d),i(a+"Capture",d)}function i(a,d){for(s[a]=d,a=0;a<d.length;a++)r.add(d[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function x(a){return u.call(m,a)?!0:u.call(f,a)?!1:h.test(a)?m[a]=!0:(f[a]=!0,!1)}function w(a,d,p,g){if(p!==null&&p.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return g?!1:p!==null?!p.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function v(a,d,p,g){if(d===null||typeof d>"u"||w(a,d,p,g))return!0;if(g)return!1;if(p!==null)switch(p.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function y(a,d,p,g,S,E,P){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=p,this.propertyName=a,this.type=d,this.sanitizeURL=E,this.removeEmptyString=P}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){k[a]=new y(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var d=a[0];k[d]=new y(d,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){k[a]=new y(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){k[a]=new y(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){k[a]=new y(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){k[a]=new y(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){k[a]=new y(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){k[a]=new y(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){k[a]=new y(a,5,!1,a.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function _(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var d=a.replace(C,_);k[d]=new y(d,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var d=a.replace(C,_);k[d]=new y(d,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var d=a.replace(C,_);k[d]=new y(d,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){k[a]=new y(a,1,!1,a.toLowerCase(),null,!1,!1)}),k.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){k[a]=new y(a,1,!1,a.toLowerCase(),null,!0,!0)});function j(a,d,p,g){var S=k.hasOwnProperty(d)?k[d]:null;(S!==null?S.type!==0:g||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(v(d,p,S,g)&&(p=null),g||S===null?x(d)&&(p===null?a.removeAttribute(d):a.setAttribute(d,""+p)):S.mustUseProperty?a[S.propertyName]=p===null?S.type===3?!1:"":p:(d=S.attributeName,g=S.attributeNamespace,p===null?a.removeAttribute(d):(S=S.type,p=S===3||S===4&&p===!0?"":""+p,g?a.setAttributeNS(g,d,p):a.setAttribute(d,p))))}var M=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),T=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),W=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),R=Symbol.iterator;function D(a){return a===null||typeof a!="object"?null:(a=R&&a[R]||a["@@iterator"],typeof a=="function"?a:null)}var G=Object.assign,N;function L(a){if(N===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);N=d&&d[1]||""}return`
`+N+a}var V=!1;function Q(a,d){if(!a||V)return"";V=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ie){var g=ie}Reflect.construct(a,[],d)}else{try{d.call()}catch(ie){g=ie}a.call(d.prototype)}else{try{throw Error()}catch(ie){g=ie}a()}}catch(ie){if(ie&&g&&typeof ie.stack=="string"){for(var S=ie.stack.split(`
`),E=g.stack.split(`
`),P=S.length-1,$=E.length-1;1<=P&&0<=$&&S[P]!==E[$];)$--;for(;1<=P&&0<=$;P--,$--)if(S[P]!==E[$]){if(P!==1||$!==1)do if(P--,$--,0>$||S[P]!==E[$]){var Y=`
`+S[P].replace(" at new "," at ");return a.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",a.displayName)),Y}while(1<=P&&0<=$);break}}}finally{V=!1,Error.prepareStackTrace=p}return(a=a?a.displayName||a.name:"")?L(a):""}function ce(a){switch(a.tag){case 5:return L(a.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return a=Q(a.type,!1),a;case 11:return a=Q(a.type.render,!1),a;case 1:return a=Q(a.type,!0),a;default:return""}}function H(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case I:return"Fragment";case T:return"Portal";case F:return"Profiler";case A:return"StrictMode";case oe:return"Suspense";case ee:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case W:return(a.displayName||"Context")+".Consumer";case U:return(a._context.displayName||"Context")+".Provider";case Z:var d=a.render;return a=a.displayName,a||(a=d.displayName||d.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case re:return d=a.displayName||null,d!==null?d:H(a.type)||"Memo";case J:d=a._payload,a=a._init;try{return H(a(d))}catch{}}return null}function B(a){var d=a.type;switch(a.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=d.render,a=a.displayName||a.name||"",d.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(d);case 8:return d===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function K(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function q(a){var d=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function se(a){var d=q(a)?"checked":"value",p=Object.getOwnPropertyDescriptor(a.constructor.prototype,d),g=""+a[d];if(!a.hasOwnProperty(d)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,E=p.set;return Object.defineProperty(a,d,{configurable:!0,get:function(){return S.call(this)},set:function(P){g=""+P,E.call(this,P)}}),Object.defineProperty(a,d,{enumerable:p.enumerable}),{getValue:function(){return g},setValue:function(P){g=""+P},stopTracking:function(){a._valueTracker=null,delete a[d]}}}}function he(a){a._valueTracker||(a._valueTracker=se(a))}function ae(a){if(!a)return!1;var d=a._valueTracker;if(!d)return!0;var p=d.getValue(),g="";return a&&(g=q(a)?a.checked?"true":"false":a.value),a=g,a!==p?(d.setValue(a),!0):!1}function ge(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function ke(a,d){var p=d.checked;return G({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??a._wrapperState.initialChecked})}function ue(a,d){var p=d.defaultValue==null?"":d.defaultValue,g=d.checked!=null?d.checked:d.defaultChecked;p=K(d.value!=null?d.value:p),a._wrapperState={initialChecked:g,initialValue:p,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function fe(a,d){d=d.checked,d!=null&&j(a,"checked",d,!1)}function Se(a,d){fe(a,d);var p=K(d.value),g=d.type;if(p!=null)g==="number"?(p===0&&a.value===""||a.value!=p)&&(a.value=""+p):a.value!==""+p&&(a.value=""+p);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}d.hasOwnProperty("value")?We(a,d.type,p):d.hasOwnProperty("defaultValue")&&We(a,d.type,K(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(a.defaultChecked=!!d.defaultChecked)}function ze(a,d,p){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var g=d.type;if(!(g!=="submit"&&g!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+a._wrapperState.initialValue,p||d===a.value||(a.value=d),a.defaultValue=d}p=a.name,p!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,p!==""&&(a.name=p)}function We(a,d,p){(d!=="number"||ge(a.ownerDocument)!==a)&&(p==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+p&&(a.defaultValue=""+p))}var mt=Array.isArray;function Ze(a,d,p,g){if(a=a.options,d){d={};for(var S=0;S<p.length;S++)d["$"+p[S]]=!0;for(p=0;p<a.length;p++)S=d.hasOwnProperty("$"+a[p].value),a[p].selected!==S&&(a[p].selected=S),S&&g&&(a[p].defaultSelected=!0)}else{for(p=""+K(p),d=null,S=0;S<a.length;S++){if(a[S].value===p){a[S].selected=!0,g&&(a[S].defaultSelected=!0);return}d!==null||a[S].disabled||(d=a[S])}d!==null&&(d.selected=!0)}}function at(a,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},d,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function nn(a,d){var p=d.value;if(p==null){if(p=d.children,d=d.defaultValue,p!=null){if(d!=null)throw Error(n(92));if(mt(p)){if(1<p.length)throw Error(n(93));p=p[0]}d=p}d==null&&(d=""),p=d}a._wrapperState={initialValue:K(p)}}function yn(a,d){var p=K(d.value),g=K(d.defaultValue);p!=null&&(p=""+p,p!==a.value&&(a.value=p),d.defaultValue==null&&a.defaultValue!==p&&(a.defaultValue=p)),g!=null&&(a.defaultValue=""+g)}function rr(a){var d=a.textContent;d===a._wrapperState.initialValue&&d!==""&&d!==null&&(a.value=d)}function Yr(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sr(a,d){return a==null||a==="http://www.w3.org/1999/xhtml"?Yr(d):a==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Vs,fs=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,p,g,S){MSApp.execUnsafeLocalFunction(function(){return a(d,p,g,S)})}:a})(function(a,d){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=d;else{for(Vs=Vs||document.createElement("div"),Vs.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Vs.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;d.firstChild;)a.appendChild(d.firstChild)}});function Fn(a,d){if(d){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=d;return}}a.textContent=d}var _o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Eo=["Webkit","ms","Moz","O"];Object.keys(_o).forEach(function(a){Eo.forEach(function(d){d=d+a.charAt(0).toUpperCase()+a.substring(1),_o[d]=_o[a]})});function ju(a,d,p){return d==null||typeof d=="boolean"||d===""?"":p||typeof d!="number"||d===0||_o.hasOwnProperty(a)&&_o[a]?(""+d).trim():d+"px"}function Tu(a,d){a=a.style;for(var p in d)if(d.hasOwnProperty(p)){var g=p.indexOf("--")===0,S=ju(p,d[p],g);p==="float"&&(p="cssFloat"),g?a.setProperty(p,S):a[p]=S}}var Mu=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ia(a,d){if(d){if(Mu[a]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function hc(a,d){if(a.indexOf("-")===-1)return typeof d.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mi=null;function wr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var fc=null,No=null,Ys=null;function pc(a){if(a=Ac(a)){if(typeof fc!="function")throw Error(n(280));var d=a.stateNode;d&&(d=Ju(d),fc(a.stateNode,a.type,d))}}function Ue(a){No?Ys?Ys.push(a):Ys=[a]:No=a}function It(){if(No){var a=No,d=Ys;if(Ys=No=null,pc(a),d)for(a=0;a<d.length;a++)pc(d[a])}}function Yt(a,d){return a(d)}function bn(){}var jo=!1;function zt(a,d,p){if(jo)return a(d,p);jo=!0;try{return Yt(a,d,p)}finally{jo=!1,(No!==null||Ys!==null)&&(bn(),It())}}function rn(a,d){var p=a.stateNode;if(p===null)return null;var g=Ju(p);if(g===null)return null;p=g[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(n(231,d,typeof p));return p}var To=!1;if(l)try{var pn={};Object.defineProperty(pn,"passive",{get:function(){To=!0}}),window.addEventListener("test",pn,pn),window.removeEventListener("test",pn,pn)}catch{To=!1}function or(a,d,p,g,S,E,P,$,Y){var ie=Array.prototype.slice.call(arguments,3);try{d.apply(p,ie)}catch(ve){this.onError(ve)}}var Mo=!1,kr=null,mc=!1,ig=null,DD={onError:function(a){Mo=!0,kr=a}};function LD(a,d,p,g,S,E,P,$,Y){Mo=!1,kr=null,or.apply(DD,arguments)}function BD(a,d,p,g,S,E,P,$,Y){if(LD.apply(this,arguments),Mo){if(Mo){var ie=kr;Mo=!1,kr=null}else throw Error(n(198));mc||(mc=!0,ig=ie)}}function Oi(a){var d=a,p=a;if(a.alternate)for(;d.return;)d=d.return;else{a=d;do d=a,(d.flags&4098)!==0&&(p=d.return),a=d.return;while(a)}return d.tag===3?p:null}function vk(a){if(a.tag===13){var d=a.memoizedState;if(d===null&&(a=a.alternate,a!==null&&(d=a.memoizedState)),d!==null)return d.dehydrated}return null}function yk(a){if(Oi(a)!==a)throw Error(n(188))}function FD(a){var d=a.alternate;if(!d){if(d=Oi(a),d===null)throw Error(n(188));return d!==a?null:a}for(var p=a,g=d;;){var S=p.return;if(S===null)break;var E=S.alternate;if(E===null){if(g=S.return,g!==null){p=g;continue}break}if(S.child===E.child){for(E=S.child;E;){if(E===p)return yk(S),a;if(E===g)return yk(S),d;E=E.sibling}throw Error(n(188))}if(p.return!==g.return)p=S,g=E;else{for(var P=!1,$=S.child;$;){if($===p){P=!0,p=S,g=E;break}if($===g){P=!0,g=S,p=E;break}$=$.sibling}if(!P){for($=E.child;$;){if($===p){P=!0,p=E,g=S;break}if($===g){P=!0,g=E,p=S;break}$=$.sibling}if(!P)throw Error(n(189))}}if(p.alternate!==g)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?a:d}function bk(a){return a=FD(a),a!==null?wk(a):null}function wk(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var d=wk(a);if(d!==null)return d;a=a.sibling}return null}var kk=e.unstable_scheduleCallback,Sk=e.unstable_cancelCallback,$D=e.unstable_shouldYield,zD=e.unstable_requestPaint,Dt=e.unstable_now,UD=e.unstable_getCurrentPriorityLevel,ag=e.unstable_ImmediatePriority,Ck=e.unstable_UserBlockingPriority,Ou=e.unstable_NormalPriority,HD=e.unstable_LowPriority,_k=e.unstable_IdlePriority,Pu=null,ps=null;function WD(a){if(ps&&typeof ps.onCommitFiberRoot=="function")try{ps.onCommitFiberRoot(Pu,a,void 0,(a.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:qD,VD=Math.log,YD=Math.LN2;function qD(a){return a>>>=0,a===0?32:31-(VD(a)/YD|0)|0}var Ru=64,Au=4194304;function gc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Iu(a,d){var p=a.pendingLanes;if(p===0)return 0;var g=0,S=a.suspendedLanes,E=a.pingedLanes,P=p&268435455;if(P!==0){var $=P&~S;$!==0?g=gc($):(E&=P,E!==0&&(g=gc(E)))}else P=p&~S,P!==0?g=gc(P):E!==0&&(g=gc(E));if(g===0)return 0;if(d!==0&&d!==g&&(d&S)===0&&(S=g&-g,E=d&-d,S>=E||S===16&&(E&4194240)!==0))return d;if((g&4)!==0&&(g|=p&16),d=a.entangledLanes,d!==0)for(a=a.entanglements,d&=g;0<d;)p=31-qr(d),S=1<<p,g|=a[p],d&=~S;return g}function KD(a,d){switch(a){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XD(a,d){for(var p=a.suspendedLanes,g=a.pingedLanes,S=a.expirationTimes,E=a.pendingLanes;0<E;){var P=31-qr(E),$=1<<P,Y=S[P];Y===-1?(($&p)===0||($&g)!==0)&&(S[P]=KD($,d)):Y<=d&&(a.expiredLanes|=$),E&=~$}}function lg(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ek(){var a=Ru;return Ru<<=1,(Ru&4194240)===0&&(Ru=64),a}function cg(a){for(var d=[],p=0;31>p;p++)d.push(a);return d}function xc(a,d,p){a.pendingLanes|=d,d!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,d=31-qr(d),a[d]=p}function GD(a,d){var p=a.pendingLanes&~d;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=d,a.mutableReadLanes&=d,a.entangledLanes&=d,d=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<p;){var S=31-qr(p),E=1<<S;d[S]=0,g[S]=-1,a[S]=-1,p&=~E}}function dg(a,d){var p=a.entangledLanes|=d;for(a=a.entanglements;p;){var g=31-qr(p),S=1<<g;S&d|a[g]&d&&(a[g]|=d),p&=~S}}var ut=0;function Nk(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var jk,ug,Tk,Mk,Ok,hg=!1,Du=[],Oo=null,Po=null,Ro=null,vc=new Map,yc=new Map,Ao=[],JD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pk(a,d){switch(a){case"focusin":case"focusout":Oo=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":vc.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(d.pointerId)}}function bc(a,d,p,g,S,E){return a===null||a.nativeEvent!==E?(a={blockedOn:d,domEventName:p,eventSystemFlags:g,nativeEvent:E,targetContainers:[S]},d!==null&&(d=Ac(d),d!==null&&ug(d)),a):(a.eventSystemFlags|=g,d=a.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),a)}function QD(a,d,p,g,S){switch(d){case"focusin":return Oo=bc(Oo,a,d,p,g,S),!0;case"dragenter":return Po=bc(Po,a,d,p,g,S),!0;case"mouseover":return Ro=bc(Ro,a,d,p,g,S),!0;case"pointerover":var E=S.pointerId;return vc.set(E,bc(vc.get(E)||null,a,d,p,g,S)),!0;case"gotpointercapture":return E=S.pointerId,yc.set(E,bc(yc.get(E)||null,a,d,p,g,S)),!0}return!1}function Rk(a){var d=Pi(a.target);if(d!==null){var p=Oi(d);if(p!==null){if(d=p.tag,d===13){if(d=vk(p),d!==null){a.blockedOn=d,Ok(a.priority,function(){Tk(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Lu(a){if(a.blockedOn!==null)return!1;for(var d=a.targetContainers;0<d.length;){var p=pg(a.domEventName,a.eventSystemFlags,d[0],a.nativeEvent);if(p===null){p=a.nativeEvent;var g=new p.constructor(p.type,p);Mi=g,p.target.dispatchEvent(g),Mi=null}else return d=Ac(p),d!==null&&ug(d),a.blockedOn=p,!1;d.shift()}return!0}function Ak(a,d,p){Lu(a)&&p.delete(d)}function ZD(){hg=!1,Oo!==null&&Lu(Oo)&&(Oo=null),Po!==null&&Lu(Po)&&(Po=null),Ro!==null&&Lu(Ro)&&(Ro=null),vc.forEach(Ak),yc.forEach(Ak)}function wc(a,d){a.blockedOn===d&&(a.blockedOn=null,hg||(hg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ZD)))}function kc(a){function d(S){return wc(S,a)}if(0<Du.length){wc(Du[0],a);for(var p=1;p<Du.length;p++){var g=Du[p];g.blockedOn===a&&(g.blockedOn=null)}}for(Oo!==null&&wc(Oo,a),Po!==null&&wc(Po,a),Ro!==null&&wc(Ro,a),vc.forEach(d),yc.forEach(d),p=0;p<Ao.length;p++)g=Ao[p],g.blockedOn===a&&(g.blockedOn=null);for(;0<Ao.length&&(p=Ao[0],p.blockedOn===null);)Rk(p),p.blockedOn===null&&Ao.shift()}var Da=M.ReactCurrentBatchConfig,Bu=!0;function e4(a,d,p,g){var S=ut,E=Da.transition;Da.transition=null;try{ut=1,fg(a,d,p,g)}finally{ut=S,Da.transition=E}}function t4(a,d,p,g){var S=ut,E=Da.transition;Da.transition=null;try{ut=4,fg(a,d,p,g)}finally{ut=S,Da.transition=E}}function fg(a,d,p,g){if(Bu){var S=pg(a,d,p,g);if(S===null)Og(a,d,g,Fu,p),Pk(a,g);else if(QD(S,a,d,p,g))g.stopPropagation();else if(Pk(a,g),d&4&&-1<JD.indexOf(a)){for(;S!==null;){var E=Ac(S);if(E!==null&&jk(E),E=pg(a,d,p,g),E===null&&Og(a,d,g,Fu,p),E===S)break;S=E}S!==null&&g.stopPropagation()}else Og(a,d,g,null,p)}}var Fu=null;function pg(a,d,p,g){if(Fu=null,a=wr(g),a=Pi(a),a!==null)if(d=Oi(a),d===null)a=null;else if(p=d.tag,p===13){if(a=vk(d),a!==null)return a;a=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;a=null}else d!==a&&(a=null);return Fu=a,null}function Ik(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UD()){case ag:return 1;case Ck:return 4;case Ou:case HD:return 16;case _k:return 536870912;default:return 16}default:return 16}}var Io=null,mg=null,$u=null;function Dk(){if($u)return $u;var a,d=mg,p=d.length,g,S="value"in Io?Io.value:Io.textContent,E=S.length;for(a=0;a<p&&d[a]===S[a];a++);var P=p-a;for(g=1;g<=P&&d[p-g]===S[E-g];g++);return $u=S.slice(a,1<g?1-g:void 0)}function zu(a){var d=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&d===13&&(a=13)):a=d,a===10&&(a=13),32<=a||a===13?a:0}function Uu(){return!0}function Lk(){return!1}function ir(a){function d(p,g,S,E,P){this._reactName=p,this._targetInst=S,this.type=g,this.nativeEvent=E,this.target=P,this.currentTarget=null;for(var $ in a)a.hasOwnProperty($)&&(p=a[$],this[$]=p?p(E):E[$]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Uu:Lk,this.isPropagationStopped=Lk,this}return G(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Uu)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Uu)},persist:function(){},isPersistent:Uu}),d}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gg=ir(La),Sc=G({},La,{view:0,detail:0}),n4=ir(Sc),xg,vg,Cc,Hu=G({},Sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Cc&&(Cc&&a.type==="mousemove"?(xg=a.screenX-Cc.screenX,vg=a.screenY-Cc.screenY):vg=xg=0,Cc=a),xg)},movementY:function(a){return"movementY"in a?a.movementY:vg}}),Bk=ir(Hu),r4=G({},Hu,{dataTransfer:0}),s4=ir(r4),o4=G({},Sc,{relatedTarget:0}),yg=ir(o4),i4=G({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),a4=ir(i4),l4=G({},La,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),c4=ir(l4),d4=G({},La,{data:0}),Fk=ir(d4),u4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p4(a){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(a):(a=f4[a])?!!d[a]:!1}function bg(){return p4}var m4=G({},Sc,{key:function(a){if(a.key){var d=u4[a.key]||a.key;if(d!=="Unidentified")return d}return a.type==="keypress"?(a=zu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?h4[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bg,charCode:function(a){return a.type==="keypress"?zu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?zu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),g4=ir(m4),x4=G({},Hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$k=ir(x4),v4=G({},Sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bg}),y4=ir(v4),b4=G({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),w4=ir(b4),k4=G({},Hu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),S4=ir(k4),C4=[9,13,27,32],wg=l&&"CompositionEvent"in window,_c=null;l&&"documentMode"in document&&(_c=document.documentMode);var _4=l&&"TextEvent"in window&&!_c,zk=l&&(!wg||_c&&8<_c&&11>=_c),Uk=" ",Hk=!1;function Wk(a,d){switch(a){case"keyup":return C4.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vk(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ba=!1;function E4(a,d){switch(a){case"compositionend":return Vk(d);case"keypress":return d.which!==32?null:(Hk=!0,Uk);case"textInput":return a=d.data,a===Uk&&Hk?null:a;default:return null}}function N4(a,d){if(Ba)return a==="compositionend"||!wg&&Wk(a,d)?(a=Dk(),$u=mg=Io=null,Ba=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return zk&&d.locale!=="ko"?null:d.data;default:return null}}var j4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yk(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d==="input"?!!j4[a.type]:d==="textarea"}function qk(a,d,p,g){Ue(g),d=Ku(d,"onChange"),0<d.length&&(p=new gg("onChange","change",null,p,g),a.push({event:p,listeners:d}))}var Ec=null,Nc=null;function T4(a){uS(a,0)}function Wu(a){var d=Ha(a);if(ae(d))return a}function M4(a,d){if(a==="change")return d}var Kk=!1;if(l){var kg;if(l){var Sg="oninput"in document;if(!Sg){var Xk=document.createElement("div");Xk.setAttribute("oninput","return;"),Sg=typeof Xk.oninput=="function"}kg=Sg}else kg=!1;Kk=kg&&(!document.documentMode||9<document.documentMode)}function Gk(){Ec&&(Ec.detachEvent("onpropertychange",Jk),Nc=Ec=null)}function Jk(a){if(a.propertyName==="value"&&Wu(Nc)){var d=[];qk(d,Nc,a,wr(a)),zt(T4,d)}}function O4(a,d,p){a==="focusin"?(Gk(),Ec=d,Nc=p,Ec.attachEvent("onpropertychange",Jk)):a==="focusout"&&Gk()}function P4(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Wu(Nc)}function R4(a,d){if(a==="click")return Wu(d)}function A4(a,d){if(a==="input"||a==="change")return Wu(d)}function I4(a,d){return a===d&&(a!==0||1/a===1/d)||a!==a&&d!==d}var Kr=typeof Object.is=="function"?Object.is:I4;function jc(a,d){if(Kr(a,d))return!0;if(typeof a!="object"||a===null||typeof d!="object"||d===null)return!1;var p=Object.keys(a),g=Object.keys(d);if(p.length!==g.length)return!1;for(g=0;g<p.length;g++){var S=p[g];if(!u.call(d,S)||!Kr(a[S],d[S]))return!1}return!0}function Qk(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Zk(a,d){var p=Qk(a);a=0;for(var g;p;){if(p.nodeType===3){if(g=a+p.textContent.length,a<=d&&g>=d)return{node:p,offset:d-a};a=g}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Qk(p)}}function eS(a,d){return a&&d?a===d?!0:a&&a.nodeType===3?!1:d&&d.nodeType===3?eS(a,d.parentNode):"contains"in a?a.contains(d):a.compareDocumentPosition?!!(a.compareDocumentPosition(d)&16):!1:!1}function tS(){for(var a=window,d=ge();d instanceof a.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)a=d.contentWindow;else break;d=ge(a.document)}return d}function Cg(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d&&(d==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||d==="textarea"||a.contentEditable==="true")}function D4(a){var d=tS(),p=a.focusedElem,g=a.selectionRange;if(d!==p&&p&&p.ownerDocument&&eS(p.ownerDocument.documentElement,p)){if(g!==null&&Cg(p)){if(d=g.start,a=g.end,a===void 0&&(a=d),"selectionStart"in p)p.selectionStart=d,p.selectionEnd=Math.min(a,p.value.length);else if(a=(d=p.ownerDocument||document)&&d.defaultView||window,a.getSelection){a=a.getSelection();var S=p.textContent.length,E=Math.min(g.start,S);g=g.end===void 0?E:Math.min(g.end,S),!a.extend&&E>g&&(S=g,g=E,E=S),S=Zk(p,E);var P=Zk(p,g);S&&P&&(a.rangeCount!==1||a.anchorNode!==S.node||a.anchorOffset!==S.offset||a.focusNode!==P.node||a.focusOffset!==P.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),a.removeAllRanges(),E>g?(a.addRange(d),a.extend(P.node,P.offset)):(d.setEnd(P.node,P.offset),a.addRange(d)))}}for(d=[],a=p;a=a.parentNode;)a.nodeType===1&&d.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<d.length;p++)a=d[p],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var L4=l&&"documentMode"in document&&11>=document.documentMode,Fa=null,_g=null,Tc=null,Eg=!1;function nS(a,d,p){var g=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Eg||Fa==null||Fa!==ge(g)||(g=Fa,"selectionStart"in g&&Cg(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Tc&&jc(Tc,g)||(Tc=g,g=Ku(_g,"onSelect"),0<g.length&&(d=new gg("onSelect","select",null,d,p),a.push({event:d,listeners:g}),d.target=Fa)))}function Vu(a,d){var p={};return p[a.toLowerCase()]=d.toLowerCase(),p["Webkit"+a]="webkit"+d,p["Moz"+a]="moz"+d,p}var $a={animationend:Vu("Animation","AnimationEnd"),animationiteration:Vu("Animation","AnimationIteration"),animationstart:Vu("Animation","AnimationStart"),transitionend:Vu("Transition","TransitionEnd")},Ng={},rS={};l&&(rS=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Yu(a){if(Ng[a])return Ng[a];if(!$a[a])return a;var d=$a[a],p;for(p in d)if(d.hasOwnProperty(p)&&p in rS)return Ng[a]=d[p];return a}var sS=Yu("animationend"),oS=Yu("animationiteration"),iS=Yu("animationstart"),aS=Yu("transitionend"),lS=new Map,cS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(a,d){lS.set(a,d),o(d,[a])}for(var jg=0;jg<cS.length;jg++){var Tg=cS[jg],B4=Tg.toLowerCase(),F4=Tg[0].toUpperCase()+Tg.slice(1);Do(B4,"on"+F4)}Do(sS,"onAnimationEnd"),Do(oS,"onAnimationIteration"),Do(iS,"onAnimationStart"),Do("dblclick","onDoubleClick"),Do("focusin","onFocus"),Do("focusout","onBlur"),Do(aS,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mc));function dS(a,d,p){var g=a.type||"unknown-event";a.currentTarget=p,BD(g,d,void 0,a),a.currentTarget=null}function uS(a,d){d=(d&4)!==0;for(var p=0;p<a.length;p++){var g=a[p],S=g.event;g=g.listeners;e:{var E=void 0;if(d)for(var P=g.length-1;0<=P;P--){var $=g[P],Y=$.instance,ie=$.currentTarget;if($=$.listener,Y!==E&&S.isPropagationStopped())break e;dS(S,$,ie),E=Y}else for(P=0;P<g.length;P++){if($=g[P],Y=$.instance,ie=$.currentTarget,$=$.listener,Y!==E&&S.isPropagationStopped())break e;dS(S,$,ie),E=Y}}}if(mc)throw a=ig,mc=!1,ig=null,a}function wt(a,d){var p=d[Lg];p===void 0&&(p=d[Lg]=new Set);var g=a+"__bubble";p.has(g)||(hS(d,a,2,!1),p.add(g))}function Mg(a,d,p){var g=0;d&&(g|=4),hS(p,a,g,d)}var qu="_reactListening"+Math.random().toString(36).slice(2);function Oc(a){if(!a[qu]){a[qu]=!0,r.forEach(function(p){p!=="selectionchange"&&($4.has(p)||Mg(p,!1,a),Mg(p,!0,a))});var d=a.nodeType===9?a:a.ownerDocument;d===null||d[qu]||(d[qu]=!0,Mg("selectionchange",!1,d))}}function hS(a,d,p,g){switch(Ik(d)){case 1:var S=e4;break;case 4:S=t4;break;default:S=fg}p=S.bind(null,d,p,a),S=void 0,!To||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),g?S!==void 0?a.addEventListener(d,p,{capture:!0,passive:S}):a.addEventListener(d,p,!0):S!==void 0?a.addEventListener(d,p,{passive:S}):a.addEventListener(d,p,!1)}function Og(a,d,p,g,S){var E=g;if((d&1)===0&&(d&2)===0&&g!==null)e:for(;;){if(g===null)return;var P=g.tag;if(P===3||P===4){var $=g.stateNode.containerInfo;if($===S||$.nodeType===8&&$.parentNode===S)break;if(P===4)for(P=g.return;P!==null;){var Y=P.tag;if((Y===3||Y===4)&&(Y=P.stateNode.containerInfo,Y===S||Y.nodeType===8&&Y.parentNode===S))return;P=P.return}for(;$!==null;){if(P=Pi($),P===null)return;if(Y=P.tag,Y===5||Y===6){g=E=P;continue e}$=$.parentNode}}g=g.return}zt(function(){var ie=E,ve=wr(p),ye=[];e:{var xe=lS.get(a);if(xe!==void 0){var Ee=gg,je=a;switch(a){case"keypress":if(zu(p)===0)break e;case"keydown":case"keyup":Ee=g4;break;case"focusin":je="focus",Ee=yg;break;case"focusout":je="blur",Ee=yg;break;case"beforeblur":case"afterblur":Ee=yg;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=Bk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=s4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=y4;break;case sS:case oS:case iS:Ee=a4;break;case aS:Ee=w4;break;case"scroll":Ee=n4;break;case"wheel":Ee=S4;break;case"copy":case"cut":case"paste":Ee=c4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=$k}var Oe=(d&4)!==0,Lt=!Oe&&a==="scroll",te=Oe?xe!==null?xe+"Capture":null:xe;Oe=[];for(var X=ie,ne;X!==null;){ne=X;var we=ne.stateNode;if(ne.tag===5&&we!==null&&(ne=we,te!==null&&(we=rn(X,te),we!=null&&Oe.push(Pc(X,we,ne)))),Lt)break;X=X.return}0<Oe.length&&(xe=new Ee(xe,je,null,p,ve),ye.push({event:xe,listeners:Oe}))}}if((d&7)===0){e:{if(xe=a==="mouseover"||a==="pointerover",Ee=a==="mouseout"||a==="pointerout",xe&&p!==Mi&&(je=p.relatedTarget||p.fromElement)&&(Pi(je)||je[qs]))break e;if((Ee||xe)&&(xe=ve.window===ve?ve:(xe=ve.ownerDocument)?xe.defaultView||xe.parentWindow:window,Ee?(je=p.relatedTarget||p.toElement,Ee=ie,je=je?Pi(je):null,je!==null&&(Lt=Oi(je),je!==Lt||je.tag!==5&&je.tag!==6)&&(je=null)):(Ee=null,je=ie),Ee!==je)){if(Oe=Bk,we="onMouseLeave",te="onMouseEnter",X="mouse",(a==="pointerout"||a==="pointerover")&&(Oe=$k,we="onPointerLeave",te="onPointerEnter",X="pointer"),Lt=Ee==null?xe:Ha(Ee),ne=je==null?xe:Ha(je),xe=new Oe(we,X+"leave",Ee,p,ve),xe.target=Lt,xe.relatedTarget=ne,we=null,Pi(ve)===ie&&(Oe=new Oe(te,X+"enter",je,p,ve),Oe.target=ne,Oe.relatedTarget=Lt,we=Oe),Lt=we,Ee&&je)t:{for(Oe=Ee,te=je,X=0,ne=Oe;ne;ne=za(ne))X++;for(ne=0,we=te;we;we=za(we))ne++;for(;0<X-ne;)Oe=za(Oe),X--;for(;0<ne-X;)te=za(te),ne--;for(;X--;){if(Oe===te||te!==null&&Oe===te.alternate)break t;Oe=za(Oe),te=za(te)}Oe=null}else Oe=null;Ee!==null&&fS(ye,xe,Ee,Oe,!1),je!==null&&Lt!==null&&fS(ye,Lt,je,Oe,!0)}}e:{if(xe=ie?Ha(ie):window,Ee=xe.nodeName&&xe.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&xe.type==="file")var Re=M4;else if(Yk(xe))if(Kk)Re=A4;else{Re=P4;var Ie=O4}else(Ee=xe.nodeName)&&Ee.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(Re=R4);if(Re&&(Re=Re(a,ie))){qk(ye,Re,p,ve);break e}Ie&&Ie(a,xe,ie),a==="focusout"&&(Ie=xe._wrapperState)&&Ie.controlled&&xe.type==="number"&&We(xe,"number",xe.value)}switch(Ie=ie?Ha(ie):window,a){case"focusin":(Yk(Ie)||Ie.contentEditable==="true")&&(Fa=Ie,_g=ie,Tc=null);break;case"focusout":Tc=_g=Fa=null;break;case"mousedown":Eg=!0;break;case"contextmenu":case"mouseup":case"dragend":Eg=!1,nS(ye,p,ve);break;case"selectionchange":if(L4)break;case"keydown":case"keyup":nS(ye,p,ve)}var De;if(wg)e:{switch(a){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Ba?Wk(a,p)&&(Fe="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(Fe="onCompositionStart");Fe&&(zk&&p.locale!=="ko"&&(Ba||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Ba&&(De=Dk()):(Io=ve,mg="value"in Io?Io.value:Io.textContent,Ba=!0)),Ie=Ku(ie,Fe),0<Ie.length&&(Fe=new Fk(Fe,a,null,p,ve),ye.push({event:Fe,listeners:Ie}),De?Fe.data=De:(De=Vk(p),De!==null&&(Fe.data=De)))),(De=_4?E4(a,p):N4(a,p))&&(ie=Ku(ie,"onBeforeInput"),0<ie.length&&(ve=new Fk("onBeforeInput","beforeinput",null,p,ve),ye.push({event:ve,listeners:ie}),ve.data=De))}uS(ye,d)})}function Pc(a,d,p){return{instance:a,listener:d,currentTarget:p}}function Ku(a,d){for(var p=d+"Capture",g=[];a!==null;){var S=a,E=S.stateNode;S.tag===5&&E!==null&&(S=E,E=rn(a,p),E!=null&&g.unshift(Pc(a,E,S)),E=rn(a,d),E!=null&&g.push(Pc(a,E,S))),a=a.return}return g}function za(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function fS(a,d,p,g,S){for(var E=d._reactName,P=[];p!==null&&p!==g;){var $=p,Y=$.alternate,ie=$.stateNode;if(Y!==null&&Y===g)break;$.tag===5&&ie!==null&&($=ie,S?(Y=rn(p,E),Y!=null&&P.unshift(Pc(p,Y,$))):S||(Y=rn(p,E),Y!=null&&P.push(Pc(p,Y,$)))),p=p.return}P.length!==0&&a.push({event:d,listeners:P})}var z4=/\r\n?/g,U4=/\u0000|\uFFFD/g;function pS(a){return(typeof a=="string"?a:""+a).replace(z4,`
`).replace(U4,"")}function Xu(a,d,p){if(d=pS(d),pS(a)!==d&&p)throw Error(n(425))}function Gu(){}var Pg=null,Rg=null;function Ag(a,d){return a==="textarea"||a==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Ig=typeof setTimeout=="function"?setTimeout:void 0,H4=typeof clearTimeout=="function"?clearTimeout:void 0,mS=typeof Promise=="function"?Promise:void 0,W4=typeof queueMicrotask=="function"?queueMicrotask:typeof mS<"u"?function(a){return mS.resolve(null).then(a).catch(V4)}:Ig;function V4(a){setTimeout(function(){throw a})}function Dg(a,d){var p=d,g=0;do{var S=p.nextSibling;if(a.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(g===0){a.removeChild(S),kc(d);return}g--}else p!=="$"&&p!=="$?"&&p!=="$!"||g++;p=S}while(p);kc(d)}function Lo(a){for(;a!=null;a=a.nextSibling){var d=a.nodeType;if(d===1||d===3)break;if(d===8){if(d=a.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return a}function gS(a){a=a.previousSibling;for(var d=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"){if(d===0)return a;d--}else p==="/$"&&d++}a=a.previousSibling}return null}var Ua=Math.random().toString(36).slice(2),ms="__reactFiber$"+Ua,Rc="__reactProps$"+Ua,qs="__reactContainer$"+Ua,Lg="__reactEvents$"+Ua,Y4="__reactListeners$"+Ua,q4="__reactHandles$"+Ua;function Pi(a){var d=a[ms];if(d)return d;for(var p=a.parentNode;p;){if(d=p[qs]||p[ms]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(a=gS(a);a!==null;){if(p=a[ms])return p;a=gS(a)}return d}a=p,p=a.parentNode}return null}function Ac(a){return a=a[ms]||a[qs],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Ha(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function Ju(a){return a[Rc]||null}var Bg=[],Wa=-1;function Bo(a){return{current:a}}function kt(a){0>Wa||(a.current=Bg[Wa],Bg[Wa]=null,Wa--)}function yt(a,d){Wa++,Bg[Wa]=a.current,a.current=d}var Fo={},wn=Bo(Fo),$n=Bo(!1),Ri=Fo;function Va(a,d){var p=a.type.contextTypes;if(!p)return Fo;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===d)return g.__reactInternalMemoizedMaskedChildContext;var S={},E;for(E in p)S[E]=d[E];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=d,a.__reactInternalMemoizedMaskedChildContext=S),S}function zn(a){return a=a.childContextTypes,a!=null}function Qu(){kt($n),kt(wn)}function xS(a,d,p){if(wn.current!==Fo)throw Error(n(168));yt(wn,d),yt($n,p)}function vS(a,d,p){var g=a.stateNode;if(d=d.childContextTypes,typeof g.getChildContext!="function")return p;g=g.getChildContext();for(var S in g)if(!(S in d))throw Error(n(108,B(a)||"Unknown",S));return G({},p,g)}function Zu(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Fo,Ri=wn.current,yt(wn,a),yt($n,$n.current),!0}function yS(a,d,p){var g=a.stateNode;if(!g)throw Error(n(169));p?(a=vS(a,d,Ri),g.__reactInternalMemoizedMergedChildContext=a,kt($n),kt(wn),yt(wn,a)):kt($n),yt($n,p)}var Ks=null,eh=!1,Fg=!1;function bS(a){Ks===null?Ks=[a]:Ks.push(a)}function K4(a){eh=!0,bS(a)}function $o(){if(!Fg&&Ks!==null){Fg=!0;var a=0,d=ut;try{var p=Ks;for(ut=1;a<p.length;a++){var g=p[a];do g=g(!0);while(g!==null)}Ks=null,eh=!1}catch(S){throw Ks!==null&&(Ks=Ks.slice(a+1)),kk(ag,$o),S}finally{ut=d,Fg=!1}}return null}var Ya=[],qa=0,th=null,nh=0,Sr=[],Cr=0,Ai=null,Xs=1,Gs="";function Ii(a,d){Ya[qa++]=nh,Ya[qa++]=th,th=a,nh=d}function wS(a,d,p){Sr[Cr++]=Xs,Sr[Cr++]=Gs,Sr[Cr++]=Ai,Ai=a;var g=Xs;a=Gs;var S=32-qr(g)-1;g&=~(1<<S),p+=1;var E=32-qr(d)+S;if(30<E){var P=S-S%5;E=(g&(1<<P)-1).toString(32),g>>=P,S-=P,Xs=1<<32-qr(d)+S|p<<S|g,Gs=E+a}else Xs=1<<E|p<<S|g,Gs=a}function $g(a){a.return!==null&&(Ii(a,1),wS(a,1,0))}function zg(a){for(;a===th;)th=Ya[--qa],Ya[qa]=null,nh=Ya[--qa],Ya[qa]=null;for(;a===Ai;)Ai=Sr[--Cr],Sr[Cr]=null,Gs=Sr[--Cr],Sr[Cr]=null,Xs=Sr[--Cr],Sr[Cr]=null}var ar=null,lr=null,_t=!1,Xr=null;function kS(a,d){var p=jr(5,null,null,0);p.elementType="DELETED",p.stateNode=d,p.return=a,d=a.deletions,d===null?(a.deletions=[p],a.flags|=16):d.push(p)}function SS(a,d){switch(a.tag){case 5:var p=a.type;return d=d.nodeType!==1||p.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(a.stateNode=d,ar=a,lr=Lo(d.firstChild),!0):!1;case 6:return d=a.pendingProps===""||d.nodeType!==3?null:d,d!==null?(a.stateNode=d,ar=a,lr=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(p=Ai!==null?{id:Xs,overflow:Gs}:null,a.memoizedState={dehydrated:d,treeContext:p,retryLane:1073741824},p=jr(18,null,null,0),p.stateNode=d,p.return=a,a.child=p,ar=a,lr=null,!0):!1;default:return!1}}function Ug(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Hg(a){if(_t){var d=lr;if(d){var p=d;if(!SS(a,d)){if(Ug(a))throw Error(n(418));d=Lo(p.nextSibling);var g=ar;d&&SS(a,d)?kS(g,p):(a.flags=a.flags&-4097|2,_t=!1,ar=a)}}else{if(Ug(a))throw Error(n(418));a.flags=a.flags&-4097|2,_t=!1,ar=a}}}function CS(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;ar=a}function rh(a){if(a!==ar)return!1;if(!_t)return CS(a),_t=!0,!1;var d;if((d=a.tag!==3)&&!(d=a.tag!==5)&&(d=a.type,d=d!=="head"&&d!=="body"&&!Ag(a.type,a.memoizedProps)),d&&(d=lr)){if(Ug(a))throw _S(),Error(n(418));for(;d;)kS(a,d),d=Lo(d.nextSibling)}if(CS(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,d=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"){if(d===0){lr=Lo(a.nextSibling);break e}d--}else p!=="$"&&p!=="$!"&&p!=="$?"||d++}a=a.nextSibling}lr=null}}else lr=ar?Lo(a.stateNode.nextSibling):null;return!0}function _S(){for(var a=lr;a;)a=Lo(a.nextSibling)}function Ka(){lr=ar=null,_t=!1}function Wg(a){Xr===null?Xr=[a]:Xr.push(a)}var X4=M.ReactCurrentBatchConfig;function Ic(a,d,p){if(a=p.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var g=p.stateNode}if(!g)throw Error(n(147,a));var S=g,E=""+a;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===E?d.ref:(d=function(P){var $=S.refs;P===null?delete $[E]:$[E]=P},d._stringRef=E,d)}if(typeof a!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,a))}return a}function sh(a,d){throw a=Object.prototype.toString.call(d),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":a))}function ES(a){var d=a._init;return d(a._payload)}function NS(a){function d(te,X){if(a){var ne=te.deletions;ne===null?(te.deletions=[X],te.flags|=16):ne.push(X)}}function p(te,X){if(!a)return null;for(;X!==null;)d(te,X),X=X.sibling;return null}function g(te,X){for(te=new Map;X!==null;)X.key!==null?te.set(X.key,X):te.set(X.index,X),X=X.sibling;return te}function S(te,X){return te=Ko(te,X),te.index=0,te.sibling=null,te}function E(te,X,ne){return te.index=ne,a?(ne=te.alternate,ne!==null?(ne=ne.index,ne<X?(te.flags|=2,X):ne):(te.flags|=2,X)):(te.flags|=1048576,X)}function P(te){return a&&te.alternate===null&&(te.flags|=2),te}function $(te,X,ne,we){return X===null||X.tag!==6?(X=Ix(ne,te.mode,we),X.return=te,X):(X=S(X,ne),X.return=te,X)}function Y(te,X,ne,we){var Re=ne.type;return Re===I?ve(te,X,ne.props.children,we,ne.key):X!==null&&(X.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===J&&ES(Re)===X.type)?(we=S(X,ne.props),we.ref=Ic(te,X,ne),we.return=te,we):(we=jh(ne.type,ne.key,ne.props,null,te.mode,we),we.ref=Ic(te,X,ne),we.return=te,we)}function ie(te,X,ne,we){return X===null||X.tag!==4||X.stateNode.containerInfo!==ne.containerInfo||X.stateNode.implementation!==ne.implementation?(X=Dx(ne,te.mode,we),X.return=te,X):(X=S(X,ne.children||[]),X.return=te,X)}function ve(te,X,ne,we,Re){return X===null||X.tag!==7?(X=Hi(ne,te.mode,we,Re),X.return=te,X):(X=S(X,ne),X.return=te,X)}function ye(te,X,ne){if(typeof X=="string"&&X!==""||typeof X=="number")return X=Ix(""+X,te.mode,ne),X.return=te,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case O:return ne=jh(X.type,X.key,X.props,null,te.mode,ne),ne.ref=Ic(te,null,X),ne.return=te,ne;case T:return X=Dx(X,te.mode,ne),X.return=te,X;case J:var we=X._init;return ye(te,we(X._payload),ne)}if(mt(X)||D(X))return X=Hi(X,te.mode,ne,null),X.return=te,X;sh(te,X)}return null}function xe(te,X,ne,we){var Re=X!==null?X.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return Re!==null?null:$(te,X,""+ne,we);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case O:return ne.key===Re?Y(te,X,ne,we):null;case T:return ne.key===Re?ie(te,X,ne,we):null;case J:return Re=ne._init,xe(te,X,Re(ne._payload),we)}if(mt(ne)||D(ne))return Re!==null?null:ve(te,X,ne,we,null);sh(te,ne)}return null}function Ee(te,X,ne,we,Re){if(typeof we=="string"&&we!==""||typeof we=="number")return te=te.get(ne)||null,$(X,te,""+we,Re);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case O:return te=te.get(we.key===null?ne:we.key)||null,Y(X,te,we,Re);case T:return te=te.get(we.key===null?ne:we.key)||null,ie(X,te,we,Re);case J:var Ie=we._init;return Ee(te,X,ne,Ie(we._payload),Re)}if(mt(we)||D(we))return te=te.get(ne)||null,ve(X,te,we,Re,null);sh(X,we)}return null}function je(te,X,ne,we){for(var Re=null,Ie=null,De=X,Fe=X=0,an=null;De!==null&&Fe<ne.length;Fe++){De.index>Fe?(an=De,De=null):an=De.sibling;var it=xe(te,De,ne[Fe],we);if(it===null){De===null&&(De=an);break}a&&De&&it.alternate===null&&d(te,De),X=E(it,X,Fe),Ie===null?Re=it:Ie.sibling=it,Ie=it,De=an}if(Fe===ne.length)return p(te,De),_t&&Ii(te,Fe),Re;if(De===null){for(;Fe<ne.length;Fe++)De=ye(te,ne[Fe],we),De!==null&&(X=E(De,X,Fe),Ie===null?Re=De:Ie.sibling=De,Ie=De);return _t&&Ii(te,Fe),Re}for(De=g(te,De);Fe<ne.length;Fe++)an=Ee(De,te,Fe,ne[Fe],we),an!==null&&(a&&an.alternate!==null&&De.delete(an.key===null?Fe:an.key),X=E(an,X,Fe),Ie===null?Re=an:Ie.sibling=an,Ie=an);return a&&De.forEach(function(Xo){return d(te,Xo)}),_t&&Ii(te,Fe),Re}function Oe(te,X,ne,we){var Re=D(ne);if(typeof Re!="function")throw Error(n(150));if(ne=Re.call(ne),ne==null)throw Error(n(151));for(var Ie=Re=null,De=X,Fe=X=0,an=null,it=ne.next();De!==null&&!it.done;Fe++,it=ne.next()){De.index>Fe?(an=De,De=null):an=De.sibling;var Xo=xe(te,De,it.value,we);if(Xo===null){De===null&&(De=an);break}a&&De&&Xo.alternate===null&&d(te,De),X=E(Xo,X,Fe),Ie===null?Re=Xo:Ie.sibling=Xo,Ie=Xo,De=an}if(it.done)return p(te,De),_t&&Ii(te,Fe),Re;if(De===null){for(;!it.done;Fe++,it=ne.next())it=ye(te,it.value,we),it!==null&&(X=E(it,X,Fe),Ie===null?Re=it:Ie.sibling=it,Ie=it);return _t&&Ii(te,Fe),Re}for(De=g(te,De);!it.done;Fe++,it=ne.next())it=Ee(De,te,Fe,it.value,we),it!==null&&(a&&it.alternate!==null&&De.delete(it.key===null?Fe:it.key),X=E(it,X,Fe),Ie===null?Re=it:Ie.sibling=it,Ie=it);return a&&De.forEach(function(jL){return d(te,jL)}),_t&&Ii(te,Fe),Re}function Lt(te,X,ne,we){if(typeof ne=="object"&&ne!==null&&ne.type===I&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case O:e:{for(var Re=ne.key,Ie=X;Ie!==null;){if(Ie.key===Re){if(Re=ne.type,Re===I){if(Ie.tag===7){p(te,Ie.sibling),X=S(Ie,ne.props.children),X.return=te,te=X;break e}}else if(Ie.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===J&&ES(Re)===Ie.type){p(te,Ie.sibling),X=S(Ie,ne.props),X.ref=Ic(te,Ie,ne),X.return=te,te=X;break e}p(te,Ie);break}else d(te,Ie);Ie=Ie.sibling}ne.type===I?(X=Hi(ne.props.children,te.mode,we,ne.key),X.return=te,te=X):(we=jh(ne.type,ne.key,ne.props,null,te.mode,we),we.ref=Ic(te,X,ne),we.return=te,te=we)}return P(te);case T:e:{for(Ie=ne.key;X!==null;){if(X.key===Ie)if(X.tag===4&&X.stateNode.containerInfo===ne.containerInfo&&X.stateNode.implementation===ne.implementation){p(te,X.sibling),X=S(X,ne.children||[]),X.return=te,te=X;break e}else{p(te,X);break}else d(te,X);X=X.sibling}X=Dx(ne,te.mode,we),X.return=te,te=X}return P(te);case J:return Ie=ne._init,Lt(te,X,Ie(ne._payload),we)}if(mt(ne))return je(te,X,ne,we);if(D(ne))return Oe(te,X,ne,we);sh(te,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,X!==null&&X.tag===6?(p(te,X.sibling),X=S(X,ne),X.return=te,te=X):(p(te,X),X=Ix(ne,te.mode,we),X.return=te,te=X),P(te)):p(te,X)}return Lt}var Xa=NS(!0),jS=NS(!1),oh=Bo(null),ih=null,Ga=null,Vg=null;function Yg(){Vg=Ga=ih=null}function qg(a){var d=oh.current;kt(oh),a._currentValue=d}function Kg(a,d,p){for(;a!==null;){var g=a.alternate;if((a.childLanes&d)!==d?(a.childLanes|=d,g!==null&&(g.childLanes|=d)):g!==null&&(g.childLanes&d)!==d&&(g.childLanes|=d),a===p)break;a=a.return}}function Ja(a,d){ih=a,Vg=Ga=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&d)!==0&&(Un=!0),a.firstContext=null)}function _r(a){var d=a._currentValue;if(Vg!==a)if(a={context:a,memoizedValue:d,next:null},Ga===null){if(ih===null)throw Error(n(308));Ga=a,ih.dependencies={lanes:0,firstContext:a}}else Ga=Ga.next=a;return d}var Di=null;function Xg(a){Di===null?Di=[a]:Di.push(a)}function TS(a,d,p,g){var S=d.interleaved;return S===null?(p.next=p,Xg(d)):(p.next=S.next,S.next=p),d.interleaved=p,Js(a,g)}function Js(a,d){a.lanes|=d;var p=a.alternate;for(p!==null&&(p.lanes|=d),p=a,a=a.return;a!==null;)a.childLanes|=d,p=a.alternate,p!==null&&(p.childLanes|=d),p=a,a=a.return;return p.tag===3?p.stateNode:null}var zo=!1;function Gg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MS(a,d){a=a.updateQueue,d.updateQueue===a&&(d.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Qs(a,d){return{eventTime:a,lane:d,tag:0,payload:null,callback:null,next:null}}function Uo(a,d,p){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(rt&2)!==0){var S=g.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),g.pending=d,Js(a,p)}return S=g.interleaved,S===null?(d.next=d,Xg(g)):(d.next=S.next,S.next=d),g.interleaved=d,Js(a,p)}function ah(a,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194240)!==0)){var g=d.lanes;g&=a.pendingLanes,p|=g,d.lanes=p,dg(a,p)}}function OS(a,d){var p=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,p===g)){var S=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var P={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};E===null?S=E=P:E=E.next=P,p=p.next}while(p!==null);E===null?S=E=d:E=E.next=d}else S=E=d;p={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:E,shared:g.shared,effects:g.effects},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=d:a.next=d,p.lastBaseUpdate=d}function lh(a,d,p,g){var S=a.updateQueue;zo=!1;var E=S.firstBaseUpdate,P=S.lastBaseUpdate,$=S.shared.pending;if($!==null){S.shared.pending=null;var Y=$,ie=Y.next;Y.next=null,P===null?E=ie:P.next=ie,P=Y;var ve=a.alternate;ve!==null&&(ve=ve.updateQueue,$=ve.lastBaseUpdate,$!==P&&($===null?ve.firstBaseUpdate=ie:$.next=ie,ve.lastBaseUpdate=Y))}if(E!==null){var ye=S.baseState;P=0,ve=ie=Y=null,$=E;do{var xe=$.lane,Ee=$.eventTime;if((g&xe)===xe){ve!==null&&(ve=ve.next={eventTime:Ee,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var je=a,Oe=$;switch(xe=d,Ee=p,Oe.tag){case 1:if(je=Oe.payload,typeof je=="function"){ye=je.call(Ee,ye,xe);break e}ye=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Oe.payload,xe=typeof je=="function"?je.call(Ee,ye,xe):je,xe==null)break e;ye=G({},ye,xe);break e;case 2:zo=!0}}$.callback!==null&&$.lane!==0&&(a.flags|=64,xe=S.effects,xe===null?S.effects=[$]:xe.push($))}else Ee={eventTime:Ee,lane:xe,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ve===null?(ie=ve=Ee,Y=ye):ve=ve.next=Ee,P|=xe;if($=$.next,$===null){if($=S.shared.pending,$===null)break;xe=$,$=xe.next,xe.next=null,S.lastBaseUpdate=xe,S.shared.pending=null}}while(!0);if(ve===null&&(Y=ye),S.baseState=Y,S.firstBaseUpdate=ie,S.lastBaseUpdate=ve,d=S.shared.interleaved,d!==null){S=d;do P|=S.lane,S=S.next;while(S!==d)}else E===null&&(S.shared.lanes=0);Fi|=P,a.lanes=P,a.memoizedState=ye}}function PS(a,d,p){if(a=d.effects,d.effects=null,a!==null)for(d=0;d<a.length;d++){var g=a[d],S=g.callback;if(S!==null){if(g.callback=null,g=p,typeof S!="function")throw Error(n(191,S));S.call(g)}}}var Dc={},gs=Bo(Dc),Lc=Bo(Dc),Bc=Bo(Dc);function Li(a){if(a===Dc)throw Error(n(174));return a}function Jg(a,d){switch(yt(Bc,d),yt(Lc,a),yt(gs,Dc),a=d.nodeType,a){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:sr(null,"");break;default:a=a===8?d.parentNode:d,d=a.namespaceURI||null,a=a.tagName,d=sr(d,a)}kt(gs),yt(gs,d)}function Qa(){kt(gs),kt(Lc),kt(Bc)}function RS(a){Li(Bc.current);var d=Li(gs.current),p=sr(d,a.type);d!==p&&(yt(Lc,a),yt(gs,p))}function Qg(a){Lc.current===a&&(kt(gs),kt(Lc))}var jt=Bo(0);function ch(a){for(var d=a;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Zg=[];function ex(){for(var a=0;a<Zg.length;a++)Zg[a]._workInProgressVersionPrimary=null;Zg.length=0}var dh=M.ReactCurrentDispatcher,tx=M.ReactCurrentBatchConfig,Bi=0,Tt=null,qt=null,sn=null,uh=!1,Fc=!1,$c=0,G4=0;function kn(){throw Error(n(321))}function nx(a,d){if(d===null)return!1;for(var p=0;p<d.length&&p<a.length;p++)if(!Kr(a[p],d[p]))return!1;return!0}function rx(a,d,p,g,S,E){if(Bi=E,Tt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,dh.current=a===null||a.memoizedState===null?eL:tL,a=p(g,S),Fc){E=0;do{if(Fc=!1,$c=0,25<=E)throw Error(n(301));E+=1,sn=qt=null,d.updateQueue=null,dh.current=nL,a=p(g,S)}while(Fc)}if(dh.current=ph,d=qt!==null&&qt.next!==null,Bi=0,sn=qt=Tt=null,uh=!1,d)throw Error(n(300));return a}function sx(){var a=$c!==0;return $c=0,a}function xs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Tt.memoizedState=sn=a:sn=sn.next=a,sn}function Er(){if(qt===null){var a=Tt.alternate;a=a!==null?a.memoizedState:null}else a=qt.next;var d=sn===null?Tt.memoizedState:sn.next;if(d!==null)sn=d,qt=a;else{if(a===null)throw Error(n(310));qt=a,a={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},sn===null?Tt.memoizedState=sn=a:sn=sn.next=a}return sn}function zc(a,d){return typeof d=="function"?d(a):d}function ox(a){var d=Er(),p=d.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var g=qt,S=g.baseQueue,E=p.pending;if(E!==null){if(S!==null){var P=S.next;S.next=E.next,E.next=P}g.baseQueue=S=E,p.pending=null}if(S!==null){E=S.next,g=g.baseState;var $=P=null,Y=null,ie=E;do{var ve=ie.lane;if((Bi&ve)===ve)Y!==null&&(Y=Y.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),g=ie.hasEagerState?ie.eagerState:a(g,ie.action);else{var ye={lane:ve,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};Y===null?($=Y=ye,P=g):Y=Y.next=ye,Tt.lanes|=ve,Fi|=ve}ie=ie.next}while(ie!==null&&ie!==E);Y===null?P=g:Y.next=$,Kr(g,d.memoizedState)||(Un=!0),d.memoizedState=g,d.baseState=P,d.baseQueue=Y,p.lastRenderedState=g}if(a=p.interleaved,a!==null){S=a;do E=S.lane,Tt.lanes|=E,Fi|=E,S=S.next;while(S!==a)}else S===null&&(p.lanes=0);return[d.memoizedState,p.dispatch]}function ix(a){var d=Er(),p=d.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=a;var g=p.dispatch,S=p.pending,E=d.memoizedState;if(S!==null){p.pending=null;var P=S=S.next;do E=a(E,P.action),P=P.next;while(P!==S);Kr(E,d.memoizedState)||(Un=!0),d.memoizedState=E,d.baseQueue===null&&(d.baseState=E),p.lastRenderedState=E}return[E,g]}function AS(){}function IS(a,d){var p=Tt,g=Er(),S=d(),E=!Kr(g.memoizedState,S);if(E&&(g.memoizedState=S,Un=!0),g=g.queue,ax(BS.bind(null,p,g,a),[a]),g.getSnapshot!==d||E||sn!==null&&sn.memoizedState.tag&1){if(p.flags|=2048,Uc(9,LS.bind(null,p,g,S,d),void 0,null),on===null)throw Error(n(349));(Bi&30)!==0||DS(p,d,S)}return S}function DS(a,d,p){a.flags|=16384,a={getSnapshot:d,value:p},d=Tt.updateQueue,d===null?(d={lastEffect:null,stores:null},Tt.updateQueue=d,d.stores=[a]):(p=d.stores,p===null?d.stores=[a]:p.push(a))}function LS(a,d,p,g){d.value=p,d.getSnapshot=g,FS(d)&&$S(a)}function BS(a,d,p){return p(function(){FS(d)&&$S(a)})}function FS(a){var d=a.getSnapshot;a=a.value;try{var p=d();return!Kr(a,p)}catch{return!0}}function $S(a){var d=Js(a,1);d!==null&&Zr(d,a,1,-1)}function zS(a){var d=xs();return typeof a=="function"&&(a=a()),d.memoizedState=d.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zc,lastRenderedState:a},d.queue=a,a=a.dispatch=Z4.bind(null,Tt,a),[d.memoizedState,a]}function Uc(a,d,p,g){return a={tag:a,create:d,destroy:p,deps:g,next:null},d=Tt.updateQueue,d===null?(d={lastEffect:null,stores:null},Tt.updateQueue=d,d.lastEffect=a.next=a):(p=d.lastEffect,p===null?d.lastEffect=a.next=a:(g=p.next,p.next=a,a.next=g,d.lastEffect=a)),a}function US(){return Er().memoizedState}function hh(a,d,p,g){var S=xs();Tt.flags|=a,S.memoizedState=Uc(1|d,p,void 0,g===void 0?null:g)}function fh(a,d,p,g){var S=Er();g=g===void 0?null:g;var E=void 0;if(qt!==null){var P=qt.memoizedState;if(E=P.destroy,g!==null&&nx(g,P.deps)){S.memoizedState=Uc(d,p,E,g);return}}Tt.flags|=a,S.memoizedState=Uc(1|d,p,E,g)}function HS(a,d){return hh(8390656,8,a,d)}function ax(a,d){return fh(2048,8,a,d)}function WS(a,d){return fh(4,2,a,d)}function VS(a,d){return fh(4,4,a,d)}function YS(a,d){if(typeof d=="function")return a=a(),d(a),function(){d(null)};if(d!=null)return a=a(),d.current=a,function(){d.current=null}}function qS(a,d,p){return p=p!=null?p.concat([a]):null,fh(4,4,YS.bind(null,d,a),p)}function lx(){}function KS(a,d){var p=Er();d=d===void 0?null:d;var g=p.memoizedState;return g!==null&&d!==null&&nx(d,g[1])?g[0]:(p.memoizedState=[a,d],a)}function XS(a,d){var p=Er();d=d===void 0?null:d;var g=p.memoizedState;return g!==null&&d!==null&&nx(d,g[1])?g[0]:(a=a(),p.memoizedState=[a,d],a)}function GS(a,d,p){return(Bi&21)===0?(a.baseState&&(a.baseState=!1,Un=!0),a.memoizedState=p):(Kr(p,d)||(p=Ek(),Tt.lanes|=p,Fi|=p,a.baseState=!0),d)}function J4(a,d){var p=ut;ut=p!==0&&4>p?p:4,a(!0);var g=tx.transition;tx.transition={};try{a(!1),d()}finally{ut=p,tx.transition=g}}function JS(){return Er().memoizedState}function Q4(a,d,p){var g=Yo(a);if(p={lane:g,action:p,hasEagerState:!1,eagerState:null,next:null},QS(a))ZS(d,p);else if(p=TS(a,d,p,g),p!==null){var S=An();Zr(p,a,g,S),eC(p,d,g)}}function Z4(a,d,p){var g=Yo(a),S={lane:g,action:p,hasEagerState:!1,eagerState:null,next:null};if(QS(a))ZS(d,S);else{var E=a.alternate;if(a.lanes===0&&(E===null||E.lanes===0)&&(E=d.lastRenderedReducer,E!==null))try{var P=d.lastRenderedState,$=E(P,p);if(S.hasEagerState=!0,S.eagerState=$,Kr($,P)){var Y=d.interleaved;Y===null?(S.next=S,Xg(d)):(S.next=Y.next,Y.next=S),d.interleaved=S;return}}catch{}finally{}p=TS(a,d,S,g),p!==null&&(S=An(),Zr(p,a,g,S),eC(p,d,g))}}function QS(a){var d=a.alternate;return a===Tt||d!==null&&d===Tt}function ZS(a,d){Fc=uh=!0;var p=a.pending;p===null?d.next=d:(d.next=p.next,p.next=d),a.pending=d}function eC(a,d,p){if((p&4194240)!==0){var g=d.lanes;g&=a.pendingLanes,p|=g,d.lanes=p,dg(a,p)}}var ph={readContext:_r,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},eL={readContext:_r,useCallback:function(a,d){return xs().memoizedState=[a,d===void 0?null:d],a},useContext:_r,useEffect:HS,useImperativeHandle:function(a,d,p){return p=p!=null?p.concat([a]):null,hh(4194308,4,YS.bind(null,d,a),p)},useLayoutEffect:function(a,d){return hh(4194308,4,a,d)},useInsertionEffect:function(a,d){return hh(4,2,a,d)},useMemo:function(a,d){var p=xs();return d=d===void 0?null:d,a=a(),p.memoizedState=[a,d],a},useReducer:function(a,d,p){var g=xs();return d=p!==void 0?p(d):d,g.memoizedState=g.baseState=d,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:d},g.queue=a,a=a.dispatch=Q4.bind(null,Tt,a),[g.memoizedState,a]},useRef:function(a){var d=xs();return a={current:a},d.memoizedState=a},useState:zS,useDebugValue:lx,useDeferredValue:function(a){return xs().memoizedState=a},useTransition:function(){var a=zS(!1),d=a[0];return a=J4.bind(null,a[1]),xs().memoizedState=a,[d,a]},useMutableSource:function(){},useSyncExternalStore:function(a,d,p){var g=Tt,S=xs();if(_t){if(p===void 0)throw Error(n(407));p=p()}else{if(p=d(),on===null)throw Error(n(349));(Bi&30)!==0||DS(g,d,p)}S.memoizedState=p;var E={value:p,getSnapshot:d};return S.queue=E,HS(BS.bind(null,g,E,a),[a]),g.flags|=2048,Uc(9,LS.bind(null,g,E,p,d),void 0,null),p},useId:function(){var a=xs(),d=on.identifierPrefix;if(_t){var p=Gs,g=Xs;p=(g&~(1<<32-qr(g)-1)).toString(32)+p,d=":"+d+"R"+p,p=$c++,0<p&&(d+="H"+p.toString(32)),d+=":"}else p=G4++,d=":"+d+"r"+p.toString(32)+":";return a.memoizedState=d},unstable_isNewReconciler:!1},tL={readContext:_r,useCallback:KS,useContext:_r,useEffect:ax,useImperativeHandle:qS,useInsertionEffect:WS,useLayoutEffect:VS,useMemo:XS,useReducer:ox,useRef:US,useState:function(){return ox(zc)},useDebugValue:lx,useDeferredValue:function(a){var d=Er();return GS(d,qt.memoizedState,a)},useTransition:function(){var a=ox(zc)[0],d=Er().memoizedState;return[a,d]},useMutableSource:AS,useSyncExternalStore:IS,useId:JS,unstable_isNewReconciler:!1},nL={readContext:_r,useCallback:KS,useContext:_r,useEffect:ax,useImperativeHandle:qS,useInsertionEffect:WS,useLayoutEffect:VS,useMemo:XS,useReducer:ix,useRef:US,useState:function(){return ix(zc)},useDebugValue:lx,useDeferredValue:function(a){var d=Er();return qt===null?d.memoizedState=a:GS(d,qt.memoizedState,a)},useTransition:function(){var a=ix(zc)[0],d=Er().memoizedState;return[a,d]},useMutableSource:AS,useSyncExternalStore:IS,useId:JS,unstable_isNewReconciler:!1};function Gr(a,d){if(a&&a.defaultProps){d=G({},d),a=a.defaultProps;for(var p in a)d[p]===void 0&&(d[p]=a[p]);return d}return d}function cx(a,d,p,g){d=a.memoizedState,p=p(g,d),p=p==null?d:G({},d,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var mh={isMounted:function(a){return(a=a._reactInternals)?Oi(a)===a:!1},enqueueSetState:function(a,d,p){a=a._reactInternals;var g=An(),S=Yo(a),E=Qs(g,S);E.payload=d,p!=null&&(E.callback=p),d=Uo(a,E,S),d!==null&&(Zr(d,a,S,g),ah(d,a,S))},enqueueReplaceState:function(a,d,p){a=a._reactInternals;var g=An(),S=Yo(a),E=Qs(g,S);E.tag=1,E.payload=d,p!=null&&(E.callback=p),d=Uo(a,E,S),d!==null&&(Zr(d,a,S,g),ah(d,a,S))},enqueueForceUpdate:function(a,d){a=a._reactInternals;var p=An(),g=Yo(a),S=Qs(p,g);S.tag=2,d!=null&&(S.callback=d),d=Uo(a,S,g),d!==null&&(Zr(d,a,g,p),ah(d,a,g))}};function tC(a,d,p,g,S,E,P){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,E,P):d.prototype&&d.prototype.isPureReactComponent?!jc(p,g)||!jc(S,E):!0}function nC(a,d,p){var g=!1,S=Fo,E=d.contextType;return typeof E=="object"&&E!==null?E=_r(E):(S=zn(d)?Ri:wn.current,g=d.contextTypes,E=(g=g!=null)?Va(a,S):Fo),d=new d(p,E),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=mh,a.stateNode=d,d._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=E),d}function rC(a,d,p,g){a=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,g),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,g),d.state!==a&&mh.enqueueReplaceState(d,d.state,null)}function dx(a,d,p,g){var S=a.stateNode;S.props=p,S.state=a.memoizedState,S.refs={},Gg(a);var E=d.contextType;typeof E=="object"&&E!==null?S.context=_r(E):(E=zn(d)?Ri:wn.current,S.context=Va(a,E)),S.state=a.memoizedState,E=d.getDerivedStateFromProps,typeof E=="function"&&(cx(a,d,E,p),S.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(d=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),d!==S.state&&mh.enqueueReplaceState(S,S.state,null),lh(a,p,S,g),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function Za(a,d){try{var p="",g=d;do p+=ce(g),g=g.return;while(g);var S=p}catch(E){S=`
Error generating stack: `+E.message+`
`+E.stack}return{value:a,source:d,stack:S,digest:null}}function ux(a,d,p){return{value:a,source:null,stack:p??null,digest:d??null}}function hx(a,d){try{console.error(d.value)}catch(p){setTimeout(function(){throw p})}}var rL=typeof WeakMap=="function"?WeakMap:Map;function sC(a,d,p){p=Qs(-1,p),p.tag=3,p.payload={element:null};var g=d.value;return p.callback=function(){kh||(kh=!0,Nx=g),hx(a,d)},p}function oC(a,d,p){p=Qs(-1,p),p.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var S=d.value;p.payload=function(){return g(S)},p.callback=function(){hx(a,d)}}var E=a.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(p.callback=function(){hx(a,d),typeof g!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var P=d.stack;this.componentDidCatch(d.value,{componentStack:P!==null?P:""})}),p}function iC(a,d,p){var g=a.pingCache;if(g===null){g=a.pingCache=new rL;var S=new Set;g.set(d,S)}else S=g.get(d),S===void 0&&(S=new Set,g.set(d,S));S.has(p)||(S.add(p),a=xL.bind(null,a,d,p),d.then(a,a))}function aC(a){do{var d;if((d=a.tag===13)&&(d=a.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return a;a=a.return}while(a!==null);return null}function lC(a,d,p,g,S){return(a.mode&1)===0?(a===d?a.flags|=65536:(a.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(d=Qs(-1,1),d.tag=2,Uo(p,d,1))),p.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var sL=M.ReactCurrentOwner,Un=!1;function Rn(a,d,p,g){d.child=a===null?jS(d,null,p,g):Xa(d,a.child,p,g)}function cC(a,d,p,g,S){p=p.render;var E=d.ref;return Ja(d,S),g=rx(a,d,p,g,E,S),p=sx(),a!==null&&!Un?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~S,Zs(a,d,S)):(_t&&p&&$g(d),d.flags|=1,Rn(a,d,g,S),d.child)}function dC(a,d,p,g,S){if(a===null){var E=p.type;return typeof E=="function"&&!Ax(E)&&E.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(d.tag=15,d.type=E,uC(a,d,E,g,S)):(a=jh(p.type,null,g,d,d.mode,S),a.ref=d.ref,a.return=d,d.child=a)}if(E=a.child,(a.lanes&S)===0){var P=E.memoizedProps;if(p=p.compare,p=p!==null?p:jc,p(P,g)&&a.ref===d.ref)return Zs(a,d,S)}return d.flags|=1,a=Ko(E,g),a.ref=d.ref,a.return=d,d.child=a}function uC(a,d,p,g,S){if(a!==null){var E=a.memoizedProps;if(jc(E,g)&&a.ref===d.ref)if(Un=!1,d.pendingProps=g=E,(a.lanes&S)!==0)(a.flags&131072)!==0&&(Un=!0);else return d.lanes=a.lanes,Zs(a,d,S)}return fx(a,d,p,g,S)}function hC(a,d,p){var g=d.pendingProps,S=g.children,E=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(tl,cr),cr|=p;else{if((p&1073741824)===0)return a=E!==null?E.baseLanes|p:p,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:a,cachePool:null,transitions:null},d.updateQueue=null,yt(tl,cr),cr|=a,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=E!==null?E.baseLanes:p,yt(tl,cr),cr|=g}else E!==null?(g=E.baseLanes|p,d.memoizedState=null):g=p,yt(tl,cr),cr|=g;return Rn(a,d,S,p),d.child}function fC(a,d){var p=d.ref;(a===null&&p!==null||a!==null&&a.ref!==p)&&(d.flags|=512,d.flags|=2097152)}function fx(a,d,p,g,S){var E=zn(p)?Ri:wn.current;return E=Va(d,E),Ja(d,S),p=rx(a,d,p,g,E,S),g=sx(),a!==null&&!Un?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~S,Zs(a,d,S)):(_t&&g&&$g(d),d.flags|=1,Rn(a,d,p,S),d.child)}function pC(a,d,p,g,S){if(zn(p)){var E=!0;Zu(d)}else E=!1;if(Ja(d,S),d.stateNode===null)xh(a,d),nC(d,p,g),dx(d,p,g,S),g=!0;else if(a===null){var P=d.stateNode,$=d.memoizedProps;P.props=$;var Y=P.context,ie=p.contextType;typeof ie=="object"&&ie!==null?ie=_r(ie):(ie=zn(p)?Ri:wn.current,ie=Va(d,ie));var ve=p.getDerivedStateFromProps,ye=typeof ve=="function"||typeof P.getSnapshotBeforeUpdate=="function";ye||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||($!==g||Y!==ie)&&rC(d,P,g,ie),zo=!1;var xe=d.memoizedState;P.state=xe,lh(d,g,P,S),Y=d.memoizedState,$!==g||xe!==Y||$n.current||zo?(typeof ve=="function"&&(cx(d,p,ve,g),Y=d.memoizedState),($=zo||tC(d,p,$,g,xe,Y,ie))?(ye||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(d.flags|=4194308)):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=g,d.memoizedState=Y),P.props=g,P.state=Y,P.context=ie,g=$):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),g=!1)}else{P=d.stateNode,MS(a,d),$=d.memoizedProps,ie=d.type===d.elementType?$:Gr(d.type,$),P.props=ie,ye=d.pendingProps,xe=P.context,Y=p.contextType,typeof Y=="object"&&Y!==null?Y=_r(Y):(Y=zn(p)?Ri:wn.current,Y=Va(d,Y));var Ee=p.getDerivedStateFromProps;(ve=typeof Ee=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||($!==ye||xe!==Y)&&rC(d,P,g,Y),zo=!1,xe=d.memoizedState,P.state=xe,lh(d,g,P,S);var je=d.memoizedState;$!==ye||xe!==je||$n.current||zo?(typeof Ee=="function"&&(cx(d,p,Ee,g),je=d.memoizedState),(ie=zo||tC(d,p,ie,g,xe,je,Y)||!1)?(ve||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(g,je,Y),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(g,je,Y)),typeof P.componentDidUpdate=="function"&&(d.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof P.componentDidUpdate!="function"||$===a.memoizedProps&&xe===a.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&xe===a.memoizedState||(d.flags|=1024),d.memoizedProps=g,d.memoizedState=je),P.props=g,P.state=je,P.context=Y,g=ie):(typeof P.componentDidUpdate!="function"||$===a.memoizedProps&&xe===a.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&xe===a.memoizedState||(d.flags|=1024),g=!1)}return px(a,d,p,g,E,S)}function px(a,d,p,g,S,E){fC(a,d);var P=(d.flags&128)!==0;if(!g&&!P)return S&&yS(d,p,!1),Zs(a,d,E);g=d.stateNode,sL.current=d;var $=P&&typeof p.getDerivedStateFromError!="function"?null:g.render();return d.flags|=1,a!==null&&P?(d.child=Xa(d,a.child,null,E),d.child=Xa(d,null,$,E)):Rn(a,d,$,E),d.memoizedState=g.state,S&&yS(d,p,!0),d.child}function mC(a){var d=a.stateNode;d.pendingContext?xS(a,d.pendingContext,d.pendingContext!==d.context):d.context&&xS(a,d.context,!1),Jg(a,d.containerInfo)}function gC(a,d,p,g,S){return Ka(),Wg(S),d.flags|=256,Rn(a,d,p,g),d.child}var mx={dehydrated:null,treeContext:null,retryLane:0};function gx(a){return{baseLanes:a,cachePool:null,transitions:null}}function xC(a,d,p){var g=d.pendingProps,S=jt.current,E=!1,P=(d.flags&128)!==0,$;if(($=P)||($=a!==null&&a.memoizedState===null?!1:(S&2)!==0),$?(E=!0,d.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),yt(jt,S&1),a===null)return Hg(d),a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((d.mode&1)===0?d.lanes=1:a.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(P=g.children,a=g.fallback,E?(g=d.mode,E=d.child,P={mode:"hidden",children:P},(g&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=P):E=Th(P,g,0,null),a=Hi(a,g,p,null),E.return=d,a.return=d,E.sibling=a,d.child=E,d.child.memoizedState=gx(p),d.memoizedState=mx,a):xx(d,P));if(S=a.memoizedState,S!==null&&($=S.dehydrated,$!==null))return oL(a,d,P,g,$,S,p);if(E){E=g.fallback,P=d.mode,S=a.child,$=S.sibling;var Y={mode:"hidden",children:g.children};return(P&1)===0&&d.child!==S?(g=d.child,g.childLanes=0,g.pendingProps=Y,d.deletions=null):(g=Ko(S,Y),g.subtreeFlags=S.subtreeFlags&14680064),$!==null?E=Ko($,E):(E=Hi(E,P,p,null),E.flags|=2),E.return=d,g.return=d,g.sibling=E,d.child=g,g=E,E=d.child,P=a.child.memoizedState,P=P===null?gx(p):{baseLanes:P.baseLanes|p,cachePool:null,transitions:P.transitions},E.memoizedState=P,E.childLanes=a.childLanes&~p,d.memoizedState=mx,g}return E=a.child,a=E.sibling,g=Ko(E,{mode:"visible",children:g.children}),(d.mode&1)===0&&(g.lanes=p),g.return=d,g.sibling=null,a!==null&&(p=d.deletions,p===null?(d.deletions=[a],d.flags|=16):p.push(a)),d.child=g,d.memoizedState=null,g}function xx(a,d){return d=Th({mode:"visible",children:d},a.mode,0,null),d.return=a,a.child=d}function gh(a,d,p,g){return g!==null&&Wg(g),Xa(d,a.child,null,p),a=xx(d,d.pendingProps.children),a.flags|=2,d.memoizedState=null,a}function oL(a,d,p,g,S,E,P){if(p)return d.flags&256?(d.flags&=-257,g=ux(Error(n(422))),gh(a,d,P,g)):d.memoizedState!==null?(d.child=a.child,d.flags|=128,null):(E=g.fallback,S=d.mode,g=Th({mode:"visible",children:g.children},S,0,null),E=Hi(E,S,P,null),E.flags|=2,g.return=d,E.return=d,g.sibling=E,d.child=g,(d.mode&1)!==0&&Xa(d,a.child,null,P),d.child.memoizedState=gx(P),d.memoizedState=mx,E);if((d.mode&1)===0)return gh(a,d,P,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var $=g.dgst;return g=$,E=Error(n(419)),g=ux(E,g,void 0),gh(a,d,P,g)}if($=(P&a.childLanes)!==0,Un||$){if(g=on,g!==null){switch(P&-P){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(g.suspendedLanes|P))!==0?0:S,S!==0&&S!==E.retryLane&&(E.retryLane=S,Js(a,S),Zr(g,a,S,-1))}return Rx(),g=ux(Error(n(421))),gh(a,d,P,g)}return S.data==="$?"?(d.flags|=128,d.child=a.child,d=vL.bind(null,a),S._reactRetry=d,null):(a=E.treeContext,lr=Lo(S.nextSibling),ar=d,_t=!0,Xr=null,a!==null&&(Sr[Cr++]=Xs,Sr[Cr++]=Gs,Sr[Cr++]=Ai,Xs=a.id,Gs=a.overflow,Ai=d),d=xx(d,g.children),d.flags|=4096,d)}function vC(a,d,p){a.lanes|=d;var g=a.alternate;g!==null&&(g.lanes|=d),Kg(a.return,d,p)}function vx(a,d,p,g,S){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:g,tail:p,tailMode:S}:(E.isBackwards=d,E.rendering=null,E.renderingStartTime=0,E.last=g,E.tail=p,E.tailMode=S)}function yC(a,d,p){var g=d.pendingProps,S=g.revealOrder,E=g.tail;if(Rn(a,d,g.children,p),g=jt.current,(g&2)!==0)g=g&1|2,d.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=d.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vC(a,p,d);else if(a.tag===19)vC(a,p,d);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===d)break e;for(;a.sibling===null;){if(a.return===null||a.return===d)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(yt(jt,g),(d.mode&1)===0)d.memoizedState=null;else switch(S){case"forwards":for(p=d.child,S=null;p!==null;)a=p.alternate,a!==null&&ch(a)===null&&(S=p),p=p.sibling;p=S,p===null?(S=d.child,d.child=null):(S=p.sibling,p.sibling=null),vx(d,!1,S,p,E);break;case"backwards":for(p=null,S=d.child,d.child=null;S!==null;){if(a=S.alternate,a!==null&&ch(a)===null){d.child=S;break}a=S.sibling,S.sibling=p,p=S,S=a}vx(d,!0,p,null,E);break;case"together":vx(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function xh(a,d){(d.mode&1)===0&&a!==null&&(a.alternate=null,d.alternate=null,d.flags|=2)}function Zs(a,d,p){if(a!==null&&(d.dependencies=a.dependencies),Fi|=d.lanes,(p&d.childLanes)===0)return null;if(a!==null&&d.child!==a.child)throw Error(n(153));if(d.child!==null){for(a=d.child,p=Ko(a,a.pendingProps),d.child=p,p.return=d;a.sibling!==null;)a=a.sibling,p=p.sibling=Ko(a,a.pendingProps),p.return=d;p.sibling=null}return d.child}function iL(a,d,p){switch(d.tag){case 3:mC(d),Ka();break;case 5:RS(d);break;case 1:zn(d.type)&&Zu(d);break;case 4:Jg(d,d.stateNode.containerInfo);break;case 10:var g=d.type._context,S=d.memoizedProps.value;yt(oh,g._currentValue),g._currentValue=S;break;case 13:if(g=d.memoizedState,g!==null)return g.dehydrated!==null?(yt(jt,jt.current&1),d.flags|=128,null):(p&d.child.childLanes)!==0?xC(a,d,p):(yt(jt,jt.current&1),a=Zs(a,d,p),a!==null?a.sibling:null);yt(jt,jt.current&1);break;case 19:if(g=(p&d.childLanes)!==0,(a.flags&128)!==0){if(g)return yC(a,d,p);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),yt(jt,jt.current),g)break;return null;case 22:case 23:return d.lanes=0,hC(a,d,p)}return Zs(a,d,p)}var bC,yx,wC,kC;bC=function(a,d){for(var p=d.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},yx=function(){},wC=function(a,d,p,g){var S=a.memoizedProps;if(S!==g){a=d.stateNode,Li(gs.current);var E=null;switch(p){case"input":S=ke(a,S),g=ke(a,g),E=[];break;case"select":S=G({},S,{value:void 0}),g=G({},g,{value:void 0}),E=[];break;case"textarea":S=at(a,S),g=at(a,g),E=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=Gu)}Ia(p,g);var P;p=null;for(ie in S)if(!g.hasOwnProperty(ie)&&S.hasOwnProperty(ie)&&S[ie]!=null)if(ie==="style"){var $=S[ie];for(P in $)$.hasOwnProperty(P)&&(p||(p={}),p[P]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(s.hasOwnProperty(ie)?E||(E=[]):(E=E||[]).push(ie,null));for(ie in g){var Y=g[ie];if($=S?.[ie],g.hasOwnProperty(ie)&&Y!==$&&(Y!=null||$!=null))if(ie==="style")if($){for(P in $)!$.hasOwnProperty(P)||Y&&Y.hasOwnProperty(P)||(p||(p={}),p[P]="");for(P in Y)Y.hasOwnProperty(P)&&$[P]!==Y[P]&&(p||(p={}),p[P]=Y[P])}else p||(E||(E=[]),E.push(ie,p)),p=Y;else ie==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,$=$?$.__html:void 0,Y!=null&&$!==Y&&(E=E||[]).push(ie,Y)):ie==="children"?typeof Y!="string"&&typeof Y!="number"||(E=E||[]).push(ie,""+Y):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(s.hasOwnProperty(ie)?(Y!=null&&ie==="onScroll"&&wt("scroll",a),E||$===Y||(E=[])):(E=E||[]).push(ie,Y))}p&&(E=E||[]).push("style",p);var ie=E;(d.updateQueue=ie)&&(d.flags|=4)}},kC=function(a,d,p,g){p!==g&&(d.flags|=4)};function Hc(a,d){if(!_t)switch(a.tailMode){case"hidden":d=a.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var g=null;p!==null;)p.alternate!==null&&(g=p),p=p.sibling;g===null?d||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Sn(a){var d=a.alternate!==null&&a.alternate.child===a.child,p=0,g=0;if(d)for(var S=a.child;S!==null;)p|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)p|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=g,a.childLanes=p,d}function aL(a,d,p){var g=d.pendingProps;switch(zg(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(d),null;case 1:return zn(d.type)&&Qu(),Sn(d),null;case 3:return g=d.stateNode,Qa(),kt($n),kt(wn),ex(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(rh(d)?d.flags|=4:a===null||a.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Xr!==null&&(Mx(Xr),Xr=null))),yx(a,d),Sn(d),null;case 5:Qg(d);var S=Li(Bc.current);if(p=d.type,a!==null&&d.stateNode!=null)wC(a,d,p,g,S),a.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!g){if(d.stateNode===null)throw Error(n(166));return Sn(d),null}if(a=Li(gs.current),rh(d)){g=d.stateNode,p=d.type;var E=d.memoizedProps;switch(g[ms]=d,g[Rc]=E,a=(d.mode&1)!==0,p){case"dialog":wt("cancel",g),wt("close",g);break;case"iframe":case"object":case"embed":wt("load",g);break;case"video":case"audio":for(S=0;S<Mc.length;S++)wt(Mc[S],g);break;case"source":wt("error",g);break;case"img":case"image":case"link":wt("error",g),wt("load",g);break;case"details":wt("toggle",g);break;case"input":ue(g,E),wt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!E.multiple},wt("invalid",g);break;case"textarea":nn(g,E),wt("invalid",g)}Ia(p,E),S=null;for(var P in E)if(E.hasOwnProperty(P)){var $=E[P];P==="children"?typeof $=="string"?g.textContent!==$&&(E.suppressHydrationWarning!==!0&&Xu(g.textContent,$,a),S=["children",$]):typeof $=="number"&&g.textContent!==""+$&&(E.suppressHydrationWarning!==!0&&Xu(g.textContent,$,a),S=["children",""+$]):s.hasOwnProperty(P)&&$!=null&&P==="onScroll"&&wt("scroll",g)}switch(p){case"input":he(g),ze(g,E,!0);break;case"textarea":he(g),rr(g);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(g.onclick=Gu)}g=S,d.updateQueue=g,g!==null&&(d.flags|=4)}else{P=S.nodeType===9?S:S.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Yr(p)),a==="http://www.w3.org/1999/xhtml"?p==="script"?(a=P.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=P.createElement(p,{is:g.is}):(a=P.createElement(p),p==="select"&&(P=a,g.multiple?P.multiple=!0:g.size&&(P.size=g.size))):a=P.createElementNS(a,p),a[ms]=d,a[Rc]=g,bC(a,d,!1,!1),d.stateNode=a;e:{switch(P=hc(p,g),p){case"dialog":wt("cancel",a),wt("close",a),S=g;break;case"iframe":case"object":case"embed":wt("load",a),S=g;break;case"video":case"audio":for(S=0;S<Mc.length;S++)wt(Mc[S],a);S=g;break;case"source":wt("error",a),S=g;break;case"img":case"image":case"link":wt("error",a),wt("load",a),S=g;break;case"details":wt("toggle",a),S=g;break;case"input":ue(a,g),S=ke(a,g),wt("invalid",a);break;case"option":S=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},S=G({},g,{value:void 0}),wt("invalid",a);break;case"textarea":nn(a,g),S=at(a,g),wt("invalid",a);break;default:S=g}Ia(p,S),$=S;for(E in $)if($.hasOwnProperty(E)){var Y=$[E];E==="style"?Tu(a,Y):E==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&fs(a,Y)):E==="children"?typeof Y=="string"?(p!=="textarea"||Y!=="")&&Fn(a,Y):typeof Y=="number"&&Fn(a,""+Y):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(s.hasOwnProperty(E)?Y!=null&&E==="onScroll"&&wt("scroll",a):Y!=null&&j(a,E,Y,P))}switch(p){case"input":he(a),ze(a,g,!1);break;case"textarea":he(a),rr(a);break;case"option":g.value!=null&&a.setAttribute("value",""+K(g.value));break;case"select":a.multiple=!!g.multiple,E=g.value,E!=null?Ze(a,!!g.multiple,E,!1):g.defaultValue!=null&&Ze(a,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(a.onclick=Gu)}switch(p){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Sn(d),null;case 6:if(a&&d.stateNode!=null)kC(a,d,a.memoizedProps,g);else{if(typeof g!="string"&&d.stateNode===null)throw Error(n(166));if(p=Li(Bc.current),Li(gs.current),rh(d)){if(g=d.stateNode,p=d.memoizedProps,g[ms]=d,(E=g.nodeValue!==p)&&(a=ar,a!==null))switch(a.tag){case 3:Xu(g.nodeValue,p,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Xu(g.nodeValue,p,(a.mode&1)!==0)}E&&(d.flags|=4)}else g=(p.nodeType===9?p:p.ownerDocument).createTextNode(g),g[ms]=d,d.stateNode=g}return Sn(d),null;case 13:if(kt(jt),g=d.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(_t&&lr!==null&&(d.mode&1)!==0&&(d.flags&128)===0)_S(),Ka(),d.flags|=98560,E=!1;else if(E=rh(d),g!==null&&g.dehydrated!==null){if(a===null){if(!E)throw Error(n(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[ms]=d}else Ka(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Sn(d),E=!1}else Xr!==null&&(Mx(Xr),Xr=null),E=!0;if(!E)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=p,d):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(d.child.flags|=8192,(d.mode&1)!==0&&(a===null||(jt.current&1)!==0?Kt===0&&(Kt=3):Rx())),d.updateQueue!==null&&(d.flags|=4),Sn(d),null);case 4:return Qa(),yx(a,d),a===null&&Oc(d.stateNode.containerInfo),Sn(d),null;case 10:return qg(d.type._context),Sn(d),null;case 17:return zn(d.type)&&Qu(),Sn(d),null;case 19:if(kt(jt),E=d.memoizedState,E===null)return Sn(d),null;if(g=(d.flags&128)!==0,P=E.rendering,P===null)if(g)Hc(E,!1);else{if(Kt!==0||a!==null&&(a.flags&128)!==0)for(a=d.child;a!==null;){if(P=ch(a),P!==null){for(d.flags|=128,Hc(E,!1),g=P.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),d.subtreeFlags=0,g=p,p=d.child;p!==null;)E=p,a=g,E.flags&=14680066,P=E.alternate,P===null?(E.childLanes=0,E.lanes=a,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=P.childLanes,E.lanes=P.lanes,E.child=P.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=P.memoizedProps,E.memoizedState=P.memoizedState,E.updateQueue=P.updateQueue,E.type=P.type,a=P.dependencies,E.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),p=p.sibling;return yt(jt,jt.current&1|2),d.child}a=a.sibling}E.tail!==null&&Dt()>nl&&(d.flags|=128,g=!0,Hc(E,!1),d.lanes=4194304)}else{if(!g)if(a=ch(P),a!==null){if(d.flags|=128,g=!0,p=a.updateQueue,p!==null&&(d.updateQueue=p,d.flags|=4),Hc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!P.alternate&&!_t)return Sn(d),null}else 2*Dt()-E.renderingStartTime>nl&&p!==1073741824&&(d.flags|=128,g=!0,Hc(E,!1),d.lanes=4194304);E.isBackwards?(P.sibling=d.child,d.child=P):(p=E.last,p!==null?p.sibling=P:d.child=P,E.last=P)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=Dt(),d.sibling=null,p=jt.current,yt(jt,g?p&1|2:p&1),d):(Sn(d),null);case 22:case 23:return Px(),g=d.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(d.flags|=8192),g&&(d.mode&1)!==0?(cr&1073741824)!==0&&(Sn(d),d.subtreeFlags&6&&(d.flags|=8192)):Sn(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function lL(a,d){switch(zg(d),d.tag){case 1:return zn(d.type)&&Qu(),a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 3:return Qa(),kt($n),kt(wn),ex(),a=d.flags,(a&65536)!==0&&(a&128)===0?(d.flags=a&-65537|128,d):null;case 5:return Qg(d),null;case 13:if(kt(jt),a=d.memoizedState,a!==null&&a.dehydrated!==null){if(d.alternate===null)throw Error(n(340));Ka()}return a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 19:return kt(jt),null;case 4:return Qa(),null;case 10:return qg(d.type._context),null;case 22:case 23:return Px(),null;case 24:return null;default:return null}}var vh=!1,Cn=!1,cL=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function el(a,d){var p=a.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(g){Ot(a,d,g)}else p.current=null}function bx(a,d,p){try{p()}catch(g){Ot(a,d,g)}}var SC=!1;function dL(a,d){if(Pg=Bu,a=tS(),Cg(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var g=p.getSelection&&p.getSelection();if(g&&g.rangeCount!==0){p=g.anchorNode;var S=g.anchorOffset,E=g.focusNode;g=g.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var P=0,$=-1,Y=-1,ie=0,ve=0,ye=a,xe=null;t:for(;;){for(var Ee;ye!==p||S!==0&&ye.nodeType!==3||($=P+S),ye!==E||g!==0&&ye.nodeType!==3||(Y=P+g),ye.nodeType===3&&(P+=ye.nodeValue.length),(Ee=ye.firstChild)!==null;)xe=ye,ye=Ee;for(;;){if(ye===a)break t;if(xe===p&&++ie===S&&($=P),xe===E&&++ve===g&&(Y=P),(Ee=ye.nextSibling)!==null)break;ye=xe,xe=ye.parentNode}ye=Ee}p=$===-1||Y===-1?null:{start:$,end:Y}}else p=null}p=p||{start:0,end:0}}else p=null;for(Rg={focusedElem:a,selectionRange:p},Bu=!1,Ne=d;Ne!==null;)if(d=Ne,a=d.child,(d.subtreeFlags&1028)!==0&&a!==null)a.return=d,Ne=a;else for(;Ne!==null;){d=Ne;try{var je=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var Oe=je.memoizedProps,Lt=je.memoizedState,te=d.stateNode,X=te.getSnapshotBeforeUpdate(d.elementType===d.type?Oe:Gr(d.type,Oe),Lt);te.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var ne=d.stateNode.containerInfo;ne.nodeType===1?ne.textContent="":ne.nodeType===9&&ne.documentElement&&ne.removeChild(ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(we){Ot(d,d.return,we)}if(a=d.sibling,a!==null){a.return=d.return,Ne=a;break}Ne=d.return}return je=SC,SC=!1,je}function Wc(a,d,p){var g=d.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&a)===a){var E=S.destroy;S.destroy=void 0,E!==void 0&&bx(d,p,E)}S=S.next}while(S!==g)}}function yh(a,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&a)===a){var g=p.create;p.destroy=g()}p=p.next}while(p!==d)}}function wx(a){var d=a.ref;if(d!==null){var p=a.stateNode;switch(a.tag){case 5:a=p;break;default:a=p}typeof d=="function"?d(a):d.current=a}}function CC(a){var d=a.alternate;d!==null&&(a.alternate=null,CC(d)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(d=a.stateNode,d!==null&&(delete d[ms],delete d[Rc],delete d[Lg],delete d[Y4],delete d[q4])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function _C(a){return a.tag===5||a.tag===3||a.tag===4}function EC(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||_C(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function kx(a,d,p){var g=a.tag;if(g===5||g===6)a=a.stateNode,d?p.nodeType===8?p.parentNode.insertBefore(a,d):p.insertBefore(a,d):(p.nodeType===8?(d=p.parentNode,d.insertBefore(a,p)):(d=p,d.appendChild(a)),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=Gu));else if(g!==4&&(a=a.child,a!==null))for(kx(a,d,p),a=a.sibling;a!==null;)kx(a,d,p),a=a.sibling}function Sx(a,d,p){var g=a.tag;if(g===5||g===6)a=a.stateNode,d?p.insertBefore(a,d):p.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(Sx(a,d,p),a=a.sibling;a!==null;)Sx(a,d,p),a=a.sibling}var mn=null,Jr=!1;function Ho(a,d,p){for(p=p.child;p!==null;)NC(a,d,p),p=p.sibling}function NC(a,d,p){if(ps&&typeof ps.onCommitFiberUnmount=="function")try{ps.onCommitFiberUnmount(Pu,p)}catch{}switch(p.tag){case 5:Cn||el(p,d);case 6:var g=mn,S=Jr;mn=null,Ho(a,d,p),mn=g,Jr=S,mn!==null&&(Jr?(a=mn,p=p.stateNode,a.nodeType===8?a.parentNode.removeChild(p):a.removeChild(p)):mn.removeChild(p.stateNode));break;case 18:mn!==null&&(Jr?(a=mn,p=p.stateNode,a.nodeType===8?Dg(a.parentNode,p):a.nodeType===1&&Dg(a,p),kc(a)):Dg(mn,p.stateNode));break;case 4:g=mn,S=Jr,mn=p.stateNode.containerInfo,Jr=!0,Ho(a,d,p),mn=g,Jr=S;break;case 0:case 11:case 14:case 15:if(!Cn&&(g=p.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var E=S,P=E.destroy;E=E.tag,P!==void 0&&((E&2)!==0||(E&4)!==0)&&bx(p,d,P),S=S.next}while(S!==g)}Ho(a,d,p);break;case 1:if(!Cn&&(el(p,d),g=p.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=p.memoizedProps,g.state=p.memoizedState,g.componentWillUnmount()}catch($){Ot(p,d,$)}Ho(a,d,p);break;case 21:Ho(a,d,p);break;case 22:p.mode&1?(Cn=(g=Cn)||p.memoizedState!==null,Ho(a,d,p),Cn=g):Ho(a,d,p);break;default:Ho(a,d,p)}}function jC(a){var d=a.updateQueue;if(d!==null){a.updateQueue=null;var p=a.stateNode;p===null&&(p=a.stateNode=new cL),d.forEach(function(g){var S=yL.bind(null,a,g);p.has(g)||(p.add(g),g.then(S,S))})}}function Qr(a,d){var p=d.deletions;if(p!==null)for(var g=0;g<p.length;g++){var S=p[g];try{var E=a,P=d,$=P;e:for(;$!==null;){switch($.tag){case 5:mn=$.stateNode,Jr=!1;break e;case 3:mn=$.stateNode.containerInfo,Jr=!0;break e;case 4:mn=$.stateNode.containerInfo,Jr=!0;break e}$=$.return}if(mn===null)throw Error(n(160));NC(E,P,S),mn=null,Jr=!1;var Y=S.alternate;Y!==null&&(Y.return=null),S.return=null}catch(ie){Ot(S,d,ie)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)TC(d,a),d=d.sibling}function TC(a,d){var p=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Qr(d,a),vs(a),g&4){try{Wc(3,a,a.return),yh(3,a)}catch(Oe){Ot(a,a.return,Oe)}try{Wc(5,a,a.return)}catch(Oe){Ot(a,a.return,Oe)}}break;case 1:Qr(d,a),vs(a),g&512&&p!==null&&el(p,p.return);break;case 5:if(Qr(d,a),vs(a),g&512&&p!==null&&el(p,p.return),a.flags&32){var S=a.stateNode;try{Fn(S,"")}catch(Oe){Ot(a,a.return,Oe)}}if(g&4&&(S=a.stateNode,S!=null)){var E=a.memoizedProps,P=p!==null?p.memoizedProps:E,$=a.type,Y=a.updateQueue;if(a.updateQueue=null,Y!==null)try{$==="input"&&E.type==="radio"&&E.name!=null&&fe(S,E),hc($,P);var ie=hc($,E);for(P=0;P<Y.length;P+=2){var ve=Y[P],ye=Y[P+1];ve==="style"?Tu(S,ye):ve==="dangerouslySetInnerHTML"?fs(S,ye):ve==="children"?Fn(S,ye):j(S,ve,ye,ie)}switch($){case"input":Se(S,E);break;case"textarea":yn(S,E);break;case"select":var xe=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!E.multiple;var Ee=E.value;Ee!=null?Ze(S,!!E.multiple,Ee,!1):xe!==!!E.multiple&&(E.defaultValue!=null?Ze(S,!!E.multiple,E.defaultValue,!0):Ze(S,!!E.multiple,E.multiple?[]:"",!1))}S[Rc]=E}catch(Oe){Ot(a,a.return,Oe)}}break;case 6:if(Qr(d,a),vs(a),g&4){if(a.stateNode===null)throw Error(n(162));S=a.stateNode,E=a.memoizedProps;try{S.nodeValue=E}catch(Oe){Ot(a,a.return,Oe)}}break;case 3:if(Qr(d,a),vs(a),g&4&&p!==null&&p.memoizedState.isDehydrated)try{kc(d.containerInfo)}catch(Oe){Ot(a,a.return,Oe)}break;case 4:Qr(d,a),vs(a);break;case 13:Qr(d,a),vs(a),S=a.child,S.flags&8192&&(E=S.memoizedState!==null,S.stateNode.isHidden=E,!E||S.alternate!==null&&S.alternate.memoizedState!==null||(Ex=Dt())),g&4&&jC(a);break;case 22:if(ve=p!==null&&p.memoizedState!==null,a.mode&1?(Cn=(ie=Cn)||ve,Qr(d,a),Cn=ie):Qr(d,a),vs(a),g&8192){if(ie=a.memoizedState!==null,(a.stateNode.isHidden=ie)&&!ve&&(a.mode&1)!==0)for(Ne=a,ve=a.child;ve!==null;){for(ye=Ne=ve;Ne!==null;){switch(xe=Ne,Ee=xe.child,xe.tag){case 0:case 11:case 14:case 15:Wc(4,xe,xe.return);break;case 1:el(xe,xe.return);var je=xe.stateNode;if(typeof je.componentWillUnmount=="function"){g=xe,p=xe.return;try{d=g,je.props=d.memoizedProps,je.state=d.memoizedState,je.componentWillUnmount()}catch(Oe){Ot(g,p,Oe)}}break;case 5:el(xe,xe.return);break;case 22:if(xe.memoizedState!==null){PC(ye);continue}}Ee!==null?(Ee.return=xe,Ne=Ee):PC(ye)}ve=ve.sibling}e:for(ve=null,ye=a;;){if(ye.tag===5){if(ve===null){ve=ye;try{S=ye.stateNode,ie?(E=S.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):($=ye.stateNode,Y=ye.memoizedProps.style,P=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,$.style.display=ju("display",P))}catch(Oe){Ot(a,a.return,Oe)}}}else if(ye.tag===6){if(ve===null)try{ye.stateNode.nodeValue=ie?"":ye.memoizedProps}catch(Oe){Ot(a,a.return,Oe)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===a)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===a)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===a)break e;ve===ye&&(ve=null),ye=ye.return}ve===ye&&(ve=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:Qr(d,a),vs(a),g&4&&jC(a);break;case 21:break;default:Qr(d,a),vs(a)}}function vs(a){var d=a.flags;if(d&2){try{e:{for(var p=a.return;p!==null;){if(_C(p)){var g=p;break e}p=p.return}throw Error(n(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(Fn(S,""),g.flags&=-33);var E=EC(a);Sx(a,E,S);break;case 3:case 4:var P=g.stateNode.containerInfo,$=EC(a);kx(a,$,P);break;default:throw Error(n(161))}}catch(Y){Ot(a,a.return,Y)}a.flags&=-3}d&4096&&(a.flags&=-4097)}function uL(a,d,p){Ne=a,MC(a)}function MC(a,d,p){for(var g=(a.mode&1)!==0;Ne!==null;){var S=Ne,E=S.child;if(S.tag===22&&g){var P=S.memoizedState!==null||vh;if(!P){var $=S.alternate,Y=$!==null&&$.memoizedState!==null||Cn;$=vh;var ie=Cn;if(vh=P,(Cn=Y)&&!ie)for(Ne=S;Ne!==null;)P=Ne,Y=P.child,P.tag===22&&P.memoizedState!==null?RC(S):Y!==null?(Y.return=P,Ne=Y):RC(S);for(;E!==null;)Ne=E,MC(E),E=E.sibling;Ne=S,vh=$,Cn=ie}OC(a)}else(S.subtreeFlags&8772)!==0&&E!==null?(E.return=S,Ne=E):OC(a)}}function OC(a){for(;Ne!==null;){var d=Ne;if((d.flags&8772)!==0){var p=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Cn||yh(5,d);break;case 1:var g=d.stateNode;if(d.flags&4&&!Cn)if(p===null)g.componentDidMount();else{var S=d.elementType===d.type?p.memoizedProps:Gr(d.type,p.memoizedProps);g.componentDidUpdate(S,p.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var E=d.updateQueue;E!==null&&PS(d,E,g);break;case 3:var P=d.updateQueue;if(P!==null){if(p=null,d.child!==null)switch(d.child.tag){case 5:p=d.child.stateNode;break;case 1:p=d.child.stateNode}PS(d,P,p)}break;case 5:var $=d.stateNode;if(p===null&&d.flags&4){p=$;var Y=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&p.focus();break;case"img":Y.src&&(p.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ie=d.alternate;if(ie!==null){var ve=ie.memoizedState;if(ve!==null){var ye=ve.dehydrated;ye!==null&&kc(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Cn||d.flags&512&&wx(d)}catch(xe){Ot(d,d.return,xe)}}if(d===a){Ne=null;break}if(p=d.sibling,p!==null){p.return=d.return,Ne=p;break}Ne=d.return}}function PC(a){for(;Ne!==null;){var d=Ne;if(d===a){Ne=null;break}var p=d.sibling;if(p!==null){p.return=d.return,Ne=p;break}Ne=d.return}}function RC(a){for(;Ne!==null;){var d=Ne;try{switch(d.tag){case 0:case 11:case 15:var p=d.return;try{yh(4,d)}catch(Y){Ot(d,p,Y)}break;case 1:var g=d.stateNode;if(typeof g.componentDidMount=="function"){var S=d.return;try{g.componentDidMount()}catch(Y){Ot(d,S,Y)}}var E=d.return;try{wx(d)}catch(Y){Ot(d,E,Y)}break;case 5:var P=d.return;try{wx(d)}catch(Y){Ot(d,P,Y)}}}catch(Y){Ot(d,d.return,Y)}if(d===a){Ne=null;break}var $=d.sibling;if($!==null){$.return=d.return,Ne=$;break}Ne=d.return}}var hL=Math.ceil,bh=M.ReactCurrentDispatcher,Cx=M.ReactCurrentOwner,Nr=M.ReactCurrentBatchConfig,rt=0,on=null,Ut=null,gn=0,cr=0,tl=Bo(0),Kt=0,Vc=null,Fi=0,wh=0,_x=0,Yc=null,Hn=null,Ex=0,nl=1/0,eo=null,kh=!1,Nx=null,Wo=null,Sh=!1,Vo=null,Ch=0,qc=0,jx=null,_h=-1,Eh=0;function An(){return(rt&6)!==0?Dt():_h!==-1?_h:_h=Dt()}function Yo(a){return(a.mode&1)===0?1:(rt&2)!==0&&gn!==0?gn&-gn:X4.transition!==null?(Eh===0&&(Eh=Ek()),Eh):(a=ut,a!==0||(a=window.event,a=a===void 0?16:Ik(a.type)),a)}function Zr(a,d,p,g){if(50<qc)throw qc=0,jx=null,Error(n(185));xc(a,p,g),((rt&2)===0||a!==on)&&(a===on&&((rt&2)===0&&(wh|=p),Kt===4&&qo(a,gn)),Wn(a,g),p===1&&rt===0&&(d.mode&1)===0&&(nl=Dt()+500,eh&&$o()))}function Wn(a,d){var p=a.callbackNode;XD(a,d);var g=Iu(a,a===on?gn:0);if(g===0)p!==null&&Sk(p),a.callbackNode=null,a.callbackPriority=0;else if(d=g&-g,a.callbackPriority!==d){if(p!=null&&Sk(p),d===1)a.tag===0?K4(IC.bind(null,a)):bS(IC.bind(null,a)),W4(function(){(rt&6)===0&&$o()}),p=null;else{switch(Nk(g)){case 1:p=ag;break;case 4:p=Ck;break;case 16:p=Ou;break;case 536870912:p=_k;break;default:p=Ou}p=HC(p,AC.bind(null,a))}a.callbackPriority=d,a.callbackNode=p}}function AC(a,d){if(_h=-1,Eh=0,(rt&6)!==0)throw Error(n(327));var p=a.callbackNode;if(rl()&&a.callbackNode!==p)return null;var g=Iu(a,a===on?gn:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||d)d=Nh(a,g);else{d=g;var S=rt;rt|=2;var E=LC();(on!==a||gn!==d)&&(eo=null,nl=Dt()+500,zi(a,d));do try{mL();break}catch($){DC(a,$)}while(!0);Yg(),bh.current=E,rt=S,Ut!==null?d=0:(on=null,gn=0,d=Kt)}if(d!==0){if(d===2&&(S=lg(a),S!==0&&(g=S,d=Tx(a,S))),d===1)throw p=Vc,zi(a,0),qo(a,g),Wn(a,Dt()),p;if(d===6)qo(a,g);else{if(S=a.current.alternate,(g&30)===0&&!fL(S)&&(d=Nh(a,g),d===2&&(E=lg(a),E!==0&&(g=E,d=Tx(a,E))),d===1))throw p=Vc,zi(a,0),qo(a,g),Wn(a,Dt()),p;switch(a.finishedWork=S,a.finishedLanes=g,d){case 0:case 1:throw Error(n(345));case 2:Ui(a,Hn,eo);break;case 3:if(qo(a,g),(g&130023424)===g&&(d=Ex+500-Dt(),10<d)){if(Iu(a,0)!==0)break;if(S=a.suspendedLanes,(S&g)!==g){An(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=Ig(Ui.bind(null,a,Hn,eo),d);break}Ui(a,Hn,eo);break;case 4:if(qo(a,g),(g&4194240)===g)break;for(d=a.eventTimes,S=-1;0<g;){var P=31-qr(g);E=1<<P,P=d[P],P>S&&(S=P),g&=~E}if(g=S,g=Dt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*hL(g/1960))-g,10<g){a.timeoutHandle=Ig(Ui.bind(null,a,Hn,eo),g);break}Ui(a,Hn,eo);break;case 5:Ui(a,Hn,eo);break;default:throw Error(n(329))}}}return Wn(a,Dt()),a.callbackNode===p?AC.bind(null,a):null}function Tx(a,d){var p=Yc;return a.current.memoizedState.isDehydrated&&(zi(a,d).flags|=256),a=Nh(a,d),a!==2&&(d=Hn,Hn=p,d!==null&&Mx(d)),a}function Mx(a){Hn===null?Hn=a:Hn.push.apply(Hn,a)}function fL(a){for(var d=a;;){if(d.flags&16384){var p=d.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var g=0;g<p.length;g++){var S=p[g],E=S.getSnapshot;S=S.value;try{if(!Kr(E(),S))return!1}catch{return!1}}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function qo(a,d){for(d&=~_x,d&=~wh,a.suspendedLanes|=d,a.pingedLanes&=~d,a=a.expirationTimes;0<d;){var p=31-qr(d),g=1<<p;a[p]=-1,d&=~g}}function IC(a){if((rt&6)!==0)throw Error(n(327));rl();var d=Iu(a,0);if((d&1)===0)return Wn(a,Dt()),null;var p=Nh(a,d);if(a.tag!==0&&p===2){var g=lg(a);g!==0&&(d=g,p=Tx(a,g))}if(p===1)throw p=Vc,zi(a,0),qo(a,d),Wn(a,Dt()),p;if(p===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=d,Ui(a,Hn,eo),Wn(a,Dt()),null}function Ox(a,d){var p=rt;rt|=1;try{return a(d)}finally{rt=p,rt===0&&(nl=Dt()+500,eh&&$o())}}function $i(a){Vo!==null&&Vo.tag===0&&(rt&6)===0&&rl();var d=rt;rt|=1;var p=Nr.transition,g=ut;try{if(Nr.transition=null,ut=1,a)return a()}finally{ut=g,Nr.transition=p,rt=d,(rt&6)===0&&$o()}}function Px(){cr=tl.current,kt(tl)}function zi(a,d){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;if(p!==-1&&(a.timeoutHandle=-1,H4(p)),Ut!==null)for(p=Ut.return;p!==null;){var g=p;switch(zg(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Qu();break;case 3:Qa(),kt($n),kt(wn),ex();break;case 5:Qg(g);break;case 4:Qa();break;case 13:kt(jt);break;case 19:kt(jt);break;case 10:qg(g.type._context);break;case 22:case 23:Px()}p=p.return}if(on=a,Ut=a=Ko(a.current,null),gn=cr=d,Kt=0,Vc=null,_x=wh=Fi=0,Hn=Yc=null,Di!==null){for(d=0;d<Di.length;d++)if(p=Di[d],g=p.interleaved,g!==null){p.interleaved=null;var S=g.next,E=p.pending;if(E!==null){var P=E.next;E.next=S,g.next=P}p.pending=g}Di=null}return a}function DC(a,d){do{var p=Ut;try{if(Yg(),dh.current=ph,uh){for(var g=Tt.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}uh=!1}if(Bi=0,sn=qt=Tt=null,Fc=!1,$c=0,Cx.current=null,p===null||p.return===null){Kt=1,Vc=d,Ut=null;break}e:{var E=a,P=p.return,$=p,Y=d;if(d=gn,$.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ie=Y,ve=$,ye=ve.tag;if((ve.mode&1)===0&&(ye===0||ye===11||ye===15)){var xe=ve.alternate;xe?(ve.updateQueue=xe.updateQueue,ve.memoizedState=xe.memoizedState,ve.lanes=xe.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var Ee=aC(P);if(Ee!==null){Ee.flags&=-257,lC(Ee,P,$,E,d),Ee.mode&1&&iC(E,ie,d),d=Ee,Y=ie;var je=d.updateQueue;if(je===null){var Oe=new Set;Oe.add(Y),d.updateQueue=Oe}else je.add(Y);break e}else{if((d&1)===0){iC(E,ie,d),Rx();break e}Y=Error(n(426))}}else if(_t&&$.mode&1){var Lt=aC(P);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),lC(Lt,P,$,E,d),Wg(Za(Y,$));break e}}E=Y=Za(Y,$),Kt!==4&&(Kt=2),Yc===null?Yc=[E]:Yc.push(E),E=P;do{switch(E.tag){case 3:E.flags|=65536,d&=-d,E.lanes|=d;var te=sC(E,Y,d);OS(E,te);break e;case 1:$=Y;var X=E.type,ne=E.stateNode;if((E.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Wo===null||!Wo.has(ne)))){E.flags|=65536,d&=-d,E.lanes|=d;var we=oC(E,$,d);OS(E,we);break e}}E=E.return}while(E!==null)}FC(p)}catch(Re){d=Re,Ut===p&&p!==null&&(Ut=p=p.return);continue}break}while(!0)}function LC(){var a=bh.current;return bh.current=ph,a===null?ph:a}function Rx(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),on===null||(Fi&268435455)===0&&(wh&268435455)===0||qo(on,gn)}function Nh(a,d){var p=rt;rt|=2;var g=LC();(on!==a||gn!==d)&&(eo=null,zi(a,d));do try{pL();break}catch(S){DC(a,S)}while(!0);if(Yg(),rt=p,bh.current=g,Ut!==null)throw Error(n(261));return on=null,gn=0,Kt}function pL(){for(;Ut!==null;)BC(Ut)}function mL(){for(;Ut!==null&&!$D();)BC(Ut)}function BC(a){var d=UC(a.alternate,a,cr);a.memoizedProps=a.pendingProps,d===null?FC(a):Ut=d,Cx.current=null}function FC(a){var d=a;do{var p=d.alternate;if(a=d.return,(d.flags&32768)===0){if(p=aL(p,d,cr),p!==null){Ut=p;return}}else{if(p=lL(p,d),p!==null){p.flags&=32767,Ut=p;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Kt=6,Ut=null;return}}if(d=d.sibling,d!==null){Ut=d;return}Ut=d=a}while(d!==null);Kt===0&&(Kt=5)}function Ui(a,d,p){var g=ut,S=Nr.transition;try{Nr.transition=null,ut=1,gL(a,d,p,g)}finally{Nr.transition=S,ut=g}return null}function gL(a,d,p,g){do rl();while(Vo!==null);if((rt&6)!==0)throw Error(n(327));p=a.finishedWork;var S=a.finishedLanes;if(p===null)return null;if(a.finishedWork=null,a.finishedLanes=0,p===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var E=p.lanes|p.childLanes;if(GD(a,E),a===on&&(Ut=on=null,gn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Sh||(Sh=!0,HC(Ou,function(){return rl(),null})),E=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||E){E=Nr.transition,Nr.transition=null;var P=ut;ut=1;var $=rt;rt|=4,Cx.current=null,dL(a,p),TC(p,a),D4(Rg),Bu=!!Pg,Rg=Pg=null,a.current=p,uL(p),zD(),rt=$,ut=P,Nr.transition=E}else a.current=p;if(Sh&&(Sh=!1,Vo=a,Ch=S),E=a.pendingLanes,E===0&&(Wo=null),WD(p.stateNode),Wn(a,Dt()),d!==null)for(g=a.onRecoverableError,p=0;p<d.length;p++)S=d[p],g(S.value,{componentStack:S.stack,digest:S.digest});if(kh)throw kh=!1,a=Nx,Nx=null,a;return(Ch&1)!==0&&a.tag!==0&&rl(),E=a.pendingLanes,(E&1)!==0?a===jx?qc++:(qc=0,jx=a):qc=0,$o(),null}function rl(){if(Vo!==null){var a=Nk(Ch),d=Nr.transition,p=ut;try{if(Nr.transition=null,ut=16>a?16:a,Vo===null)var g=!1;else{if(a=Vo,Vo=null,Ch=0,(rt&6)!==0)throw Error(n(331));var S=rt;for(rt|=4,Ne=a.current;Ne!==null;){var E=Ne,P=E.child;if((Ne.flags&16)!==0){var $=E.deletions;if($!==null){for(var Y=0;Y<$.length;Y++){var ie=$[Y];for(Ne=ie;Ne!==null;){var ve=Ne;switch(ve.tag){case 0:case 11:case 15:Wc(8,ve,E)}var ye=ve.child;if(ye!==null)ye.return=ve,Ne=ye;else for(;Ne!==null;){ve=Ne;var xe=ve.sibling,Ee=ve.return;if(CC(ve),ve===ie){Ne=null;break}if(xe!==null){xe.return=Ee,Ne=xe;break}Ne=Ee}}}var je=E.alternate;if(je!==null){var Oe=je.child;if(Oe!==null){je.child=null;do{var Lt=Oe.sibling;Oe.sibling=null,Oe=Lt}while(Oe!==null)}}Ne=E}}if((E.subtreeFlags&2064)!==0&&P!==null)P.return=E,Ne=P;else e:for(;Ne!==null;){if(E=Ne,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Wc(9,E,E.return)}var te=E.sibling;if(te!==null){te.return=E.return,Ne=te;break e}Ne=E.return}}var X=a.current;for(Ne=X;Ne!==null;){P=Ne;var ne=P.child;if((P.subtreeFlags&2064)!==0&&ne!==null)ne.return=P,Ne=ne;else e:for(P=X;Ne!==null;){if($=Ne,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:yh(9,$)}}catch(Re){Ot($,$.return,Re)}if($===P){Ne=null;break e}var we=$.sibling;if(we!==null){we.return=$.return,Ne=we;break e}Ne=$.return}}if(rt=S,$o(),ps&&typeof ps.onPostCommitFiberRoot=="function")try{ps.onPostCommitFiberRoot(Pu,a)}catch{}g=!0}return g}finally{ut=p,Nr.transition=d}}return!1}function $C(a,d,p){d=Za(p,d),d=sC(a,d,1),a=Uo(a,d,1),d=An(),a!==null&&(xc(a,1,d),Wn(a,d))}function Ot(a,d,p){if(a.tag===3)$C(a,a,p);else for(;d!==null;){if(d.tag===3){$C(d,a,p);break}else if(d.tag===1){var g=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Wo===null||!Wo.has(g))){a=Za(p,a),a=oC(d,a,1),d=Uo(d,a,1),a=An(),d!==null&&(xc(d,1,a),Wn(d,a));break}}d=d.return}}function xL(a,d,p){var g=a.pingCache;g!==null&&g.delete(d),d=An(),a.pingedLanes|=a.suspendedLanes&p,on===a&&(gn&p)===p&&(Kt===4||Kt===3&&(gn&130023424)===gn&&500>Dt()-Ex?zi(a,0):_x|=p),Wn(a,d)}function zC(a,d){d===0&&((a.mode&1)===0?d=1:(d=Au,Au<<=1,(Au&130023424)===0&&(Au=4194304)));var p=An();a=Js(a,d),a!==null&&(xc(a,d,p),Wn(a,p))}function vL(a){var d=a.memoizedState,p=0;d!==null&&(p=d.retryLane),zC(a,p)}function yL(a,d){var p=0;switch(a.tag){case 13:var g=a.stateNode,S=a.memoizedState;S!==null&&(p=S.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(d),zC(a,p)}var UC;UC=function(a,d,p){if(a!==null)if(a.memoizedProps!==d.pendingProps||$n.current)Un=!0;else{if((a.lanes&p)===0&&(d.flags&128)===0)return Un=!1,iL(a,d,p);Un=(a.flags&131072)!==0}else Un=!1,_t&&(d.flags&1048576)!==0&&wS(d,nh,d.index);switch(d.lanes=0,d.tag){case 2:var g=d.type;xh(a,d),a=d.pendingProps;var S=Va(d,wn.current);Ja(d,p),S=rx(null,d,g,a,S,p);var E=sx();return d.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,zn(g)?(E=!0,Zu(d)):E=!1,d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Gg(d),S.updater=mh,d.stateNode=S,S._reactInternals=d,dx(d,g,a,p),d=px(null,d,g,!0,E,p)):(d.tag=0,_t&&E&&$g(d),Rn(null,d,S,p),d=d.child),d;case 16:g=d.elementType;e:{switch(xh(a,d),a=d.pendingProps,S=g._init,g=S(g._payload),d.type=g,S=d.tag=wL(g),a=Gr(g,a),S){case 0:d=fx(null,d,g,a,p);break e;case 1:d=pC(null,d,g,a,p);break e;case 11:d=cC(null,d,g,a,p);break e;case 14:d=dC(null,d,g,Gr(g.type,a),p);break e}throw Error(n(306,g,""))}return d;case 0:return g=d.type,S=d.pendingProps,S=d.elementType===g?S:Gr(g,S),fx(a,d,g,S,p);case 1:return g=d.type,S=d.pendingProps,S=d.elementType===g?S:Gr(g,S),pC(a,d,g,S,p);case 3:e:{if(mC(d),a===null)throw Error(n(387));g=d.pendingProps,E=d.memoizedState,S=E.element,MS(a,d),lh(d,g,null,p);var P=d.memoizedState;if(g=P.element,E.isDehydrated)if(E={element:g,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},d.updateQueue.baseState=E,d.memoizedState=E,d.flags&256){S=Za(Error(n(423)),d),d=gC(a,d,g,p,S);break e}else if(g!==S){S=Za(Error(n(424)),d),d=gC(a,d,g,p,S);break e}else for(lr=Lo(d.stateNode.containerInfo.firstChild),ar=d,_t=!0,Xr=null,p=jS(d,null,g,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ka(),g===S){d=Zs(a,d,p);break e}Rn(a,d,g,p)}d=d.child}return d;case 5:return RS(d),a===null&&Hg(d),g=d.type,S=d.pendingProps,E=a!==null?a.memoizedProps:null,P=S.children,Ag(g,S)?P=null:E!==null&&Ag(g,E)&&(d.flags|=32),fC(a,d),Rn(a,d,P,p),d.child;case 6:return a===null&&Hg(d),null;case 13:return xC(a,d,p);case 4:return Jg(d,d.stateNode.containerInfo),g=d.pendingProps,a===null?d.child=Xa(d,null,g,p):Rn(a,d,g,p),d.child;case 11:return g=d.type,S=d.pendingProps,S=d.elementType===g?S:Gr(g,S),cC(a,d,g,S,p);case 7:return Rn(a,d,d.pendingProps,p),d.child;case 8:return Rn(a,d,d.pendingProps.children,p),d.child;case 12:return Rn(a,d,d.pendingProps.children,p),d.child;case 10:e:{if(g=d.type._context,S=d.pendingProps,E=d.memoizedProps,P=S.value,yt(oh,g._currentValue),g._currentValue=P,E!==null)if(Kr(E.value,P)){if(E.children===S.children&&!$n.current){d=Zs(a,d,p);break e}}else for(E=d.child,E!==null&&(E.return=d);E!==null;){var $=E.dependencies;if($!==null){P=E.child;for(var Y=$.firstContext;Y!==null;){if(Y.context===g){if(E.tag===1){Y=Qs(-1,p&-p),Y.tag=2;var ie=E.updateQueue;if(ie!==null){ie=ie.shared;var ve=ie.pending;ve===null?Y.next=Y:(Y.next=ve.next,ve.next=Y),ie.pending=Y}}E.lanes|=p,Y=E.alternate,Y!==null&&(Y.lanes|=p),Kg(E.return,p,d),$.lanes|=p;break}Y=Y.next}}else if(E.tag===10)P=E.type===d.type?null:E.child;else if(E.tag===18){if(P=E.return,P===null)throw Error(n(341));P.lanes|=p,$=P.alternate,$!==null&&($.lanes|=p),Kg(P,p,d),P=E.sibling}else P=E.child;if(P!==null)P.return=E;else for(P=E;P!==null;){if(P===d){P=null;break}if(E=P.sibling,E!==null){E.return=P.return,P=E;break}P=P.return}E=P}Rn(a,d,S.children,p),d=d.child}return d;case 9:return S=d.type,g=d.pendingProps.children,Ja(d,p),S=_r(S),g=g(S),d.flags|=1,Rn(a,d,g,p),d.child;case 14:return g=d.type,S=Gr(g,d.pendingProps),S=Gr(g.type,S),dC(a,d,g,S,p);case 15:return uC(a,d,d.type,d.pendingProps,p);case 17:return g=d.type,S=d.pendingProps,S=d.elementType===g?S:Gr(g,S),xh(a,d),d.tag=1,zn(g)?(a=!0,Zu(d)):a=!1,Ja(d,p),nC(d,g,S),dx(d,g,S,p),px(null,d,g,!0,a,p);case 19:return yC(a,d,p);case 22:return hC(a,d,p)}throw Error(n(156,d.tag))};function HC(a,d){return kk(a,d)}function bL(a,d,p,g){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(a,d,p,g){return new bL(a,d,p,g)}function Ax(a){return a=a.prototype,!(!a||!a.isReactComponent)}function wL(a){if(typeof a=="function")return Ax(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Z)return 11;if(a===re)return 14}return 2}function Ko(a,d){var p=a.alternate;return p===null?(p=jr(a.tag,d,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=d,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&14680064,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,d=a.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p}function jh(a,d,p,g,S,E){var P=2;if(g=a,typeof a=="function")Ax(a)&&(P=1);else if(typeof a=="string")P=5;else e:switch(a){case I:return Hi(p.children,S,E,d);case A:P=8,S|=8;break;case F:return a=jr(12,p,d,S|2),a.elementType=F,a.lanes=E,a;case oe:return a=jr(13,p,d,S),a.elementType=oe,a.lanes=E,a;case ee:return a=jr(19,p,d,S),a.elementType=ee,a.lanes=E,a;case z:return Th(p,S,E,d);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case U:P=10;break e;case W:P=9;break e;case Z:P=11;break e;case re:P=14;break e;case J:P=16,g=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return d=jr(P,p,d,S),d.elementType=a,d.type=g,d.lanes=E,d}function Hi(a,d,p,g){return a=jr(7,a,g,d),a.lanes=p,a}function Th(a,d,p,g){return a=jr(22,a,g,d),a.elementType=z,a.lanes=p,a.stateNode={isHidden:!1},a}function Ix(a,d,p){return a=jr(6,a,null,d),a.lanes=p,a}function Dx(a,d,p){return d=jr(4,a.children!==null?a.children:[],a.key,d),d.lanes=p,d.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},d}function kL(a,d,p,g,S){this.tag=d,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cg(0),this.expirationTimes=cg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cg(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Lx(a,d,p,g,S,E,P,$,Y){return a=new kL(a,d,p,$,Y),d===1?(d=1,E===!0&&(d|=8)):d=0,E=jr(3,null,null,d),a.current=E,E.stateNode=a,E.memoizedState={element:g,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gg(E),a}function SL(a,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:g==null?null:""+g,children:a,containerInfo:d,implementation:p}}function WC(a){if(!a)return Fo;a=a._reactInternals;e:{if(Oi(a)!==a||a.tag!==1)throw Error(n(170));var d=a;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(zn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(a.tag===1){var p=a.type;if(zn(p))return vS(a,p,d)}return d}function VC(a,d,p,g,S,E,P,$,Y){return a=Lx(p,g,!0,a,S,E,P,$,Y),a.context=WC(null),p=a.current,g=An(),S=Yo(p),E=Qs(g,S),E.callback=d??null,Uo(p,E,S),a.current.lanes=S,xc(a,S,g),Wn(a,g),a}function Mh(a,d,p,g){var S=d.current,E=An(),P=Yo(S);return p=WC(p),d.context===null?d.context=p:d.pendingContext=p,d=Qs(E,P),d.payload={element:a},g=g===void 0?null:g,g!==null&&(d.callback=g),a=Uo(S,d,P),a!==null&&(Zr(a,S,P,E),ah(a,S,P)),P}function Oh(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function YC(a,d){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<d?p:d}}function Bx(a,d){YC(a,d),(a=a.alternate)&&YC(a,d)}function CL(){return null}var qC=typeof reportError=="function"?reportError:function(a){console.error(a)};function Fx(a){this._internalRoot=a}Ph.prototype.render=Fx.prototype.render=function(a){var d=this._internalRoot;if(d===null)throw Error(n(409));Mh(a,d,null,null)},Ph.prototype.unmount=Fx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var d=a.containerInfo;$i(function(){Mh(null,a,null,null)}),d[qs]=null}};function Ph(a){this._internalRoot=a}Ph.prototype.unstable_scheduleHydration=function(a){if(a){var d=Mk();a={blockedOn:null,target:a,priority:d};for(var p=0;p<Ao.length&&d!==0&&d<Ao[p].priority;p++);Ao.splice(p,0,a),p===0&&Rk(a)}};function $x(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Rh(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function KC(){}function _L(a,d,p,g,S){if(S){if(typeof g=="function"){var E=g;g=function(){var ie=Oh(P);E.call(ie)}}var P=VC(d,g,a,0,null,!1,!1,"",KC);return a._reactRootContainer=P,a[qs]=P.current,Oc(a.nodeType===8?a.parentNode:a),$i(),P}for(;S=a.lastChild;)a.removeChild(S);if(typeof g=="function"){var $=g;g=function(){var ie=Oh(Y);$.call(ie)}}var Y=Lx(a,0,!1,null,null,!1,!1,"",KC);return a._reactRootContainer=Y,a[qs]=Y.current,Oc(a.nodeType===8?a.parentNode:a),$i(function(){Mh(d,Y,p,g)}),Y}function Ah(a,d,p,g,S){var E=p._reactRootContainer;if(E){var P=E;if(typeof S=="function"){var $=S;S=function(){var Y=Oh(P);$.call(Y)}}Mh(d,P,a,S)}else P=_L(p,d,a,S,g);return Oh(P)}jk=function(a){switch(a.tag){case 3:var d=a.stateNode;if(d.current.memoizedState.isDehydrated){var p=gc(d.pendingLanes);p!==0&&(dg(d,p|1),Wn(d,Dt()),(rt&6)===0&&(nl=Dt()+500,$o()))}break;case 13:$i(function(){var g=Js(a,1);if(g!==null){var S=An();Zr(g,a,1,S)}}),Bx(a,1)}},ug=function(a){if(a.tag===13){var d=Js(a,134217728);if(d!==null){var p=An();Zr(d,a,134217728,p)}Bx(a,134217728)}},Tk=function(a){if(a.tag===13){var d=Yo(a),p=Js(a,d);if(p!==null){var g=An();Zr(p,a,d,g)}Bx(a,d)}},Mk=function(){return ut},Ok=function(a,d){var p=ut;try{return ut=a,d()}finally{ut=p}},fc=function(a,d,p){switch(d){case"input":if(Se(a,p),d=p.name,p.type==="radio"&&d!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<p.length;d++){var g=p[d];if(g!==a&&g.form===a.form){var S=Ju(g);if(!S)throw Error(n(90));ae(g),Se(g,S)}}}break;case"textarea":yn(a,p);break;case"select":d=p.value,d!=null&&Ze(a,!!p.multiple,d,!1)}},Yt=Ox,bn=$i;var EL={usingClientEntryPoint:!1,Events:[Ac,Ha,Ju,Ue,It,Ox]},Kc={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NL={bundleType:Kc.bundleType,version:Kc.version,rendererPackageName:Kc.rendererPackageName,rendererConfig:Kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=bk(a),a===null?null:a.stateNode},findFiberByHostInstance:Kc.findFiberByHostInstance||CL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{Pu=Ih.inject(NL),ps=Ih}catch{}}return Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EL,Vn.createPortal=function(a,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$x(d))throw Error(n(200));return SL(a,d,null,p)},Vn.createRoot=function(a,d){if(!$x(a))throw Error(n(299));var p=!1,g="",S=qC;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(g=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),d=Lx(a,1,!1,null,null,p,!1,g,S),a[qs]=d.current,Oc(a.nodeType===8?a.parentNode:a),new Fx(d)},Vn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var d=a._reactInternals;if(d===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=bk(d),a=a===null?null:a.stateNode,a},Vn.flushSync=function(a){return $i(a)},Vn.hydrate=function(a,d,p){if(!Rh(d))throw Error(n(200));return Ah(null,a,d,!0,p)},Vn.hydrateRoot=function(a,d,p){if(!$x(a))throw Error(n(405));var g=p!=null&&p.hydratedSources||null,S=!1,E="",P=qC;if(p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onRecoverableError!==void 0&&(P=p.onRecoverableError)),d=VC(d,null,a,1,p??null,S,!1,E,P),a[qs]=d.current,Oc(a),g)for(a=0;a<g.length;a++)p=g[a],S=p._getVersion,S=S(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,S]:d.mutableSourceEagerHydrationData.push(p,S);return new Ph(d)},Vn.render=function(a,d,p){if(!Rh(d))throw Error(n(200));return Ah(null,a,d,!1,p)},Vn.unmountComponentAtNode=function(a){if(!Rh(a))throw Error(n(40));return a._reactRootContainer?($i(function(){Ah(null,null,a,!1,function(){a._reactRootContainer=null,a[qs]=null})}),!0):!1},Vn.unstable_batchedUpdates=Ox,Vn.unstable_renderSubtreeIntoContainer=function(a,d,p,g){if(!Rh(p))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Ah(a,d,p,!1,g)},Vn.version="18.3.1-next-f1338f8080-20240426",Vn}var n_;function GN(){if(n_)return Hx.exports;n_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hx.exports=IL(),Hx.exports}var r_;function DL(){if(r_)return Dh;r_=1;var t=GN();return Dh.createRoot=t.createRoot,Dh.hydrateRoot=t.hydrateRoot,Dh}var LL=DL(),b=Up();const be=XN(b),JN=TL({__proto__:null,default:be},[b]);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var s_="popstate";function BL(t={}){function e(r,s){let{pathname:o,search:i,hash:l}=r.location;return ey("",{pathname:o,search:i,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Nd(s)}return $L(e,n,null,t)}function Nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FL(){return Math.random().toString(36).substring(2,10)}function o_(t,e){return{usr:t.state,key:t.key,idx:e}}function ey(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ql(e):e,state:n,key:e&&e.key||r||FL()}}function Nd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ql(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function $L(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,l="POP",u=null,h=f();h==null&&(h=0,i.replaceState({...i.state,idx:h},""));function f(){return(i.state||{idx:null}).idx}function m(){l="POP";let k=f(),C=k==null?null:k-h;h=k,u&&u({action:l,location:y.location,delta:C})}function x(k,C){l="PUSH";let _=ey(y.location,k,C);h=f()+1;let j=o_(_,h),M=y.createHref(_);try{i.pushState(j,"",M)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(M)}o&&u&&u({action:l,location:y.location,delta:1})}function w(k,C){l="REPLACE";let _=ey(y.location,k,C);h=f();let j=o_(_,h),M=y.createHref(_);i.replaceState(j,"",M),o&&u&&u({action:l,location:y.location,delta:0})}function v(k){return zL(k)}let y={get action(){return l},get location(){return t(s,i)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(s_,m),u=k,()=>{s.removeEventListener(s_,m),u=null}},createHref(k){return e(s,k)},createURL:v,encodeLocation(k){let C=v(k);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:x,replace:w,go(k){return i.go(k)}};return y}function zL(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Nd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function QN(t,e,n="/"){return UL(t,e,n,!1)}function UL(t,e,n,r){let s=typeof e=="string"?ql(e):e,o=mo(s.pathname||"/",n);if(o==null)return null;let i=ZN(t);HL(i);let l=null;for(let u=0;l==null&&u<i.length;++u){let h=e5(o);l=QL(i[u],h,r)}return l}function ZN(t,e=[],n=[],r="",s=!1){let o=(i,l,u=s,h)=>{let f={relativePath:h===void 0?i.path||"":h,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;Nt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let m=fo([r,f.relativePath]),x=n.concat(f);i.children&&i.children.length>0&&(Nt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),ZN(i.children,e,x,m,u)),!(i.path==null&&!i.index)&&e.push({path:m,score:GL(m,i.index),routesMeta:x})};return t.forEach((i,l)=>{if(i.path===""||!i.path?.includes("?"))o(i,l);else for(let u of ej(i.path))o(i,l,!0,u)}),e}function ej(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=ej(r.join("/")),l=[];return l.push(...i.map(u=>u===""?o:[o,u].join("/"))),s&&l.push(...i),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function HL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:JL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var WL=/^:[\w-]+$/,VL=3,YL=2,qL=1,KL=10,XL=-2,i_=t=>t==="*";function GL(t,e){let n=t.split("/"),r=n.length;return n.some(i_)&&(r+=XL),e&&(r+=YL),n.filter(s=>!i_(s)).reduce((s,o)=>s+(WL.test(o)?VL:o===""?qL:KL),r)}function JL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function QL(t,e,n=!1){let{routesMeta:r}=t,s={},o="/",i=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,f=o==="/"?e:e.slice(o.length)||"/",m=Gf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),x=u.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=Gf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),i.push({params:s,pathname:fo([o,m.pathname]),pathnameBase:s5(fo([o,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(o=fo([o,m.pathnameBase]))}return i}function Gf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ZL(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,{paramName:f,isOptional:m},x)=>{if(f==="*"){let v=l[x]||"";i=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const w=l[x];return m&&!w?h[f]=void 0:h[f]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:i,pattern:t}}function ZL(t,e=!1,n=!0){Fr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function e5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function mo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function t5(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ql(t):t;return{pathname:n?n.startsWith("/")?n:n5(n,e):e,search:o5(r),hash:i5(s)}}function n5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Yx(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function r5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function h0(t){let e=r5(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function f0(t,e,n,r=!1){let s;typeof t=="string"?s=ql(t):(s={...t},Nt(!s.pathname||!s.pathname.includes("?"),Yx("?","pathname","search",s)),Nt(!s.pathname||!s.pathname.includes("#"),Yx("#","pathname","hash",s)),Nt(!s.search||!s.search.includes("#"),Yx("#","search","hash",s)));let o=t===""||s.pathname==="",i=o?"/":s.pathname,l;if(i==null)l=n;else{let m=e.length-1;if(!r&&i.startsWith("..")){let x=i.split("/");for(;x[0]==="..";)x.shift(),m-=1;s.pathname=x.join("/")}l=m>=0?e[m]:"/"}let u=t5(s,l),h=i&&i!=="/"&&i.endsWith("/"),f=(o||i===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}var fo=t=>t.join("/").replace(/\/\/+/g,"/"),s5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),o5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,i5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function a5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var tj=["POST","PUT","PATCH","DELETE"];new Set(tj);var l5=["GET",...tj];new Set(l5);var Kl=b.createContext(null);Kl.displayName="DataRouter";var Hp=b.createContext(null);Hp.displayName="DataRouterState";b.createContext(!1);var nj=b.createContext({isTransitioning:!1});nj.displayName="ViewTransition";var c5=b.createContext(new Map);c5.displayName="Fetchers";var d5=b.createContext(null);d5.displayName="Await";var cs=b.createContext(null);cs.displayName="Navigation";var nu=b.createContext(null);nu.displayName="Location";var Hr=b.createContext({outlet:null,matches:[],isDataRoute:!1});Hr.displayName="Route";var p0=b.createContext(null);p0.displayName="RouteError";function u5(t,{relative:e}={}){Nt(Xl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(cs),{hash:s,pathname:o,search:i}=ru(t,{relative:e}),l=o;return n!=="/"&&(l=o==="/"?n:fo([n,o])),r.createHref({pathname:l,search:i,hash:s})}function Xl(){return b.useContext(nu)!=null}function Us(){return Nt(Xl(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(nu).location}var rj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sj(t){b.useContext(cs).static||b.useLayoutEffect(t)}function Wr(){let{isDataRoute:t}=b.useContext(Hr);return t?E5():h5()}function h5(){Nt(Xl(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(Kl),{basename:e,navigator:n}=b.useContext(cs),{matches:r}=b.useContext(Hr),{pathname:s}=Us(),o=JSON.stringify(h0(r)),i=b.useRef(!1);return sj(()=>{i.current=!0}),b.useCallback((u,h={})=>{if(Fr(i.current,rj),!i.current)return;if(typeof u=="number"){n.go(u);return}let f=f0(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:fo([e,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[e,n,o,s,t])}var f5=b.createContext(null);function p5(t){let e=b.useContext(Hr).outlet;return b.useMemo(()=>e&&b.createElement(f5.Provider,{value:t},e),[e,t])}function m0(){let{matches:t}=b.useContext(Hr),e=t[t.length-1];return e?e.params:{}}function ru(t,{relative:e}={}){let{matches:n}=b.useContext(Hr),{pathname:r}=Us(),s=JSON.stringify(h0(n));return b.useMemo(()=>f0(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function m5(t,e){return oj(t,e)}function oj(t,e,n,r,s){Nt(Xl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=b.useContext(cs),{matches:i}=b.useContext(Hr),l=i[i.length-1],u=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",m=l&&l.route;{let _=m&&m.path||"";ij(h,!m||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let x=Us(),w;if(e){let _=typeof e=="string"?ql(e):e;Nt(f==="/"||_.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${_.pathname}" was given in the \`location\` prop.`),w=_}else w=x;let v=w.pathname||"/",y=v;if(f!=="/"){let _=f.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let k=QN(t,{pathname:y});Fr(m||k!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Fr(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=b5(k&&k.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:fo([f,o.encodeLocation?o.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?f:fo([f,o.encodeLocation?o.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),i,n,r,s);return e&&C?b.createElement(nu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},C):C}function g5(){let t=_5(),e=a5(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:o},"ErrorBoundary")," or"," ",b.createElement("code",{style:o},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,i)}var x5=b.createElement(g5,null),v5=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?b.createElement(Hr.Provider,{value:this.props.routeContext},b.createElement(p0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function y5({routeContext:t,match:e,children:n}){let r=b.useContext(Kl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(Hr.Provider,{value:t},n)}function b5(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,i=n?.errors;if(i!=null){let h=o.findIndex(f=>f.route.id&&i?.[f.route.id]!==void 0);Nt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:x}=n,w=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||w){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let x,w=!1,v=null,y=null;n&&(x=i&&f.route.id?i[f.route.id]:void 0,v=f.route.errorElement||x5,l&&(u<0&&m===0?(ij("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,y=null):u===m&&(w=!0,y=f.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,m+1)),C=()=>{let _;return x?_=v:w?_=y:f.route.Component?_=b.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,b.createElement(y5,{match:f,routeContext:{outlet:h,matches:k,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?b.createElement(v5,{location:n.location,revalidation:n.revalidation,component:v,error:x,children:C(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:r}):C()},null)}function g0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w5(t){let e=b.useContext(Kl);return Nt(e,g0(t)),e}function k5(t){let e=b.useContext(Hp);return Nt(e,g0(t)),e}function S5(t){let e=b.useContext(Hr);return Nt(e,g0(t)),e}function x0(t){let e=S5(t),n=e.matches[e.matches.length-1];return Nt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function C5(){return x0("useRouteId")}function _5(){let t=b.useContext(p0),e=k5("useRouteError"),n=x0("useRouteError");return t!==void 0?t:e.errors?.[n]}function E5(){let{router:t}=w5("useNavigate"),e=x0("useNavigate"),n=b.useRef(!1);return sj(()=>{n.current=!0}),b.useCallback(async(s,o={})=>{Fr(n.current,rj),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var a_={};function ij(t,e,n){!e&&!a_[t]&&(a_[t]=!0,Fr(!1,n))}b.memo(N5);function N5({routes:t,future:e,state:n,unstable_onError:r}){return oj(t,void 0,n,r,e)}function ty({to:t,replace:e,state:n,relative:r}){Nt(Xl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=b.useContext(cs);Fr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=b.useContext(Hr),{pathname:i}=Us(),l=Wr(),u=f0(t,h0(o),i,r==="path"),h=JSON.stringify(u);return b.useEffect(()=>{l(JSON.parse(h),{replace:e,state:n,relative:r})},[l,h,r,e,n]),null}function aj(t){return p5(t.context)}function Pt(t){Nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function j5({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:o=!1}){Nt(!Xl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),l=b.useMemo(()=>({basename:i,navigator:s,static:o,future:{}}),[i,s,o]);typeof n=="string"&&(n=ql(n));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:x="default"}=n,w=b.useMemo(()=>{let v=mo(u,i);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:x},navigationType:r}},[i,u,h,f,m,x,r]);return Fr(w!=null,`<Router basename="${i}"> is not able to match the URL "${u}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:b.createElement(cs.Provider,{value:l},b.createElement(nu.Provider,{children:e,value:w}))}function T5({children:t,location:e}){return m5(ny(t),e)}function ny(t,e=[]){let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let o=[...e,s];if(r.type===b.Fragment){n.push.apply(n,ny(r.props.children,o));return}Nt(r.type===Pt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=ny(r.props.children,o)),n.push(i)}),n}var yf="get",bf="application/x-www-form-urlencoded";function Wp(t){return t!=null&&typeof t.tagName=="string"}function M5(t){return Wp(t)&&t.tagName.toLowerCase()==="button"}function O5(t){return Wp(t)&&t.tagName.toLowerCase()==="form"}function P5(t){return Wp(t)&&t.tagName.toLowerCase()==="input"}function R5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function A5(t,e){return t.button===0&&(!e||e==="_self")&&!R5(t)}function ry(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function I5(t,e){let n=ry(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}var Lh=null;function D5(){if(Lh===null)try{new FormData(document.createElement("form"),0),Lh=!1}catch{Lh=!0}return Lh}var L5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qx(t){return t!=null&&!L5.has(t)?(Fr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bf}"`),null):t}function B5(t,e){let n,r,s,o,i;if(O5(t)){let l=t.getAttribute("action");r=l?mo(l,e):null,n=t.getAttribute("method")||yf,s=qx(t.getAttribute("enctype"))||bf,o=new FormData(t)}else if(M5(t)||P5(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(r=u?mo(u,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||yf,s=qx(t.getAttribute("formenctype"))||qx(l.getAttribute("enctype"))||bf,o=new FormData(l,t),!D5()){let{name:h,type:f,value:m}=t;if(f==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,m)}}else{if(Wp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yf,r=null,s=bf,i=t}return o&&s==="text/plain"&&(i=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function v0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function F5(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&mo(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function $5(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function z5(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function U5(t,e,n){let r=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let i=await $5(o,n);return i.links?i.links():[]}return[]}));return Y5(r.flat(1).filter(z5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function l_(t,e,n,r,s,o){let i=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,l=(u,h)=>n[h].pathname!==u.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==u.params["*"];return o==="assets"?e.filter((u,h)=>i(u,h)||l(u,h)):o==="data"?e.filter((u,h)=>{let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(i(u,h)||l(u,h))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function H5(t,e,{includeHydrateFallback:n}={}){return W5(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function W5(t){return[...new Set(t)]}function V5(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Y5(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let o=JSON.stringify(V5(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}function lj(){let t=b.useContext(Kl);return v0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function q5(){let t=b.useContext(Hp);return v0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var y0=b.createContext(void 0);y0.displayName="FrameworkContext";function cj(){let t=b.useContext(y0);return v0(t,"You must render this element inside a <HydratedRouter> element"),t}function K5(t,e){let n=b.useContext(y0),[r,s]=b.useState(!1),[o,i]=b.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:h,onMouseLeave:f,onTouchStart:m}=e,x=b.useRef(null);b.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let y=C=>{C.forEach(_=>{i(_.isIntersecting)})},k=new IntersectionObserver(y,{threshold:.5});return x.current&&k.observe(x.current),()=>{k.disconnect()}}},[t]),b.useEffect(()=>{if(r){let y=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(y)}}},[r]);let w=()=>{s(!0)},v=()=>{s(!1),i(!1)};return n?t!=="intent"?[o,x,{}]:[o,x,{onFocus:Gc(l,w),onBlur:Gc(u,v),onMouseEnter:Gc(h,w),onMouseLeave:Gc(f,v),onTouchStart:Gc(m,w)}]:[!1,x,{}]}function Gc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function X5({page:t,...e}){let{router:n}=lj(),r=b.useMemo(()=>QN(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?b.createElement(J5,{page:t,matches:r,...e}):null}function G5(t){let{manifest:e,routeModules:n}=cj(),[r,s]=b.useState([]);return b.useEffect(()=>{let o=!1;return U5(t,e,n).then(i=>{o||s(i)}),()=>{o=!0}},[t,e,n]),r}function J5({page:t,matches:e,...n}){let r=Us(),{manifest:s,routeModules:o}=cj(),{basename:i}=lj(),{loaderData:l,matches:u}=q5(),h=b.useMemo(()=>l_(t,e,u,s,r,"data"),[t,e,u,s,r]),f=b.useMemo(()=>l_(t,e,u,s,r,"assets"),[t,e,u,s,r]),m=b.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,y=!1;if(e.forEach(C=>{let _=s.routes[C.route.id];!_||!_.hasLoader||(!h.some(j=>j.route.id===C.route.id)&&C.route.id in l&&o[C.route.id]?.shouldRevalidate||_.hasClientLoader?y=!0:v.add(C.route.id))}),v.size===0)return[];let k=F5(t,i,"data");return y&&v.size>0&&k.searchParams.set("_routes",e.filter(C=>v.has(C.route.id)).map(C=>C.route.id).join(",")),[k.pathname+k.search]},[i,l,r,s,h,e,t,o]),x=b.useMemo(()=>H5(f,s),[f,s]),w=G5(f);return b.createElement(b.Fragment,null,m.map(v=>b.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),x.map(v=>b.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),w.map(({key:v,link:y})=>b.createElement("link",{key:v,nonce:n.nonce,...y})))}function Q5(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var dj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dj&&(window.__reactRouterVersion="7.9.4")}catch{}function Z5({basename:t,children:e,window:n}){let r=b.useRef();r.current==null&&(r.current=BL({window:n,v5Compat:!0}));let s=r.current,[o,i]=b.useState({action:s.action,location:s.location}),l=b.useCallback(u=>{b.startTransition(()=>i(u))},[i]);return b.useLayoutEffect(()=>s.listen(l),[s,l]),b.createElement(j5,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var uj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lt=b.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:i,state:l,target:u,to:h,preventScrollReset:f,viewTransition:m,...x},w){let{basename:v}=b.useContext(cs),y=typeof h=="string"&&uj.test(h),k,C=!1;if(typeof h=="string"&&y&&(k=h,dj))try{let F=new URL(window.location.href),U=h.startsWith("//")?new URL(F.protocol+h):new URL(h),W=mo(U.pathname,v);U.origin===F.origin&&W!=null?h=W+U.search+U.hash:C=!0}catch{Fr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=u5(h,{relative:s}),[j,M,O]=K5(r,x),T=rB(h,{replace:i,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function I(F){e&&e(F),F.defaultPrevented||T(F)}let A=b.createElement("a",{...x,...O,href:k||_,onClick:C||o?e:I,ref:Q5(w,M),target:u,"data-discover":!y&&n==="render"?"true":void 0});return j&&!y?b.createElement(b.Fragment,null,A,b.createElement(X5,{page:_})):A});lt.displayName="Link";var eB=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:i,viewTransition:l,children:u,...h},f){let m=ru(i,{relative:h.relative}),x=Us(),w=b.useContext(Hp),{navigator:v,basename:y}=b.useContext(cs),k=w!=null&&cB(m)&&l===!0,C=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,_=x.pathname,j=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(_=_.toLowerCase(),j=j?j.toLowerCase():null,C=C.toLowerCase()),j&&y&&(j=mo(j,y)||j);const M=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let O=_===C||!s&&_.startsWith(C)&&_.charAt(M)==="/",T=j!=null&&(j===C||!s&&j.startsWith(C)&&j.charAt(C.length)==="/"),I={isActive:O,isPending:T,isTransitioning:k},A=O?e:void 0,F;typeof r=="function"?F=r(I):F=[r,O?"active":null,T?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(I):o;return b.createElement(lt,{...h,"aria-current":A,className:F,ref:f,style:U,to:i,viewTransition:l},typeof u=="function"?u(I):u)});eB.displayName="NavLink";var tB=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:o,method:i=yf,action:l,onSubmit:u,relative:h,preventScrollReset:f,viewTransition:m,...x},w)=>{let v=aB(),y=lB(l,{relative:h}),k=i.toLowerCase()==="get"?"get":"post",C=typeof l=="string"&&uj.test(l),_=j=>{if(u&&u(j),j.defaultPrevented)return;j.preventDefault();let M=j.nativeEvent.submitter,O=M?.getAttribute("formmethod")||i;v(M||j.currentTarget,{fetcherKey:e,method:O,navigate:n,replace:s,state:o,relative:h,preventScrollReset:f,viewTransition:m})};return b.createElement("form",{ref:w,method:k,action:y,onSubmit:r?u:_,...x,"data-discover":!C&&t==="render"?"true":void 0})});tB.displayName="Form";function nB(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hj(t){let e=b.useContext(Kl);return Nt(e,nB(t)),e}function rB(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:i}={}){let l=Wr(),u=Us(),h=ru(t,{relative:o});return b.useCallback(f=>{if(A5(f,e)){f.preventDefault();let m=n!==void 0?n:Nd(u)===Nd(h);l(t,{replace:m,state:r,preventScrollReset:s,relative:o,viewTransition:i})}},[u,l,h,n,r,e,t,s,o,i])}function sB(t){Fr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=b.useRef(ry(t)),n=b.useRef(!1),r=Us(),s=b.useMemo(()=>I5(r.search,n.current?null:e.current),[r.search]),o=Wr(),i=b.useCallback((l,u)=>{const h=ry(typeof l=="function"?l(new URLSearchParams(s)):l);n.current=!0,o("?"+h,u)},[o,s]);return[s,i]}var oB=0,iB=()=>`__${String(++oB)}__`;function aB(){let{router:t}=hj("useSubmit"),{basename:e}=b.useContext(cs),n=C5();return b.useCallback(async(r,s={})=>{let{action:o,method:i,encType:l,formData:u,body:h}=B5(r,e);if(s.navigate===!1){let f=s.fetcherKey||iB();await t.fetch(f,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||i,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||i,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function lB(t,{relative:e}={}){let{basename:n}=b.useContext(cs),r=b.useContext(Hr);Nt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...ru(t||".",{relative:e})},i=Us();if(t==null){o.search=i.search;let l=new URLSearchParams(o.search),u=l.getAll("index");if(u.some(f=>f==="")){l.delete("index"),u.filter(m=>m).forEach(m=>l.append("index",m));let f=l.toString();o.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:fo([n,o.pathname])),Nd(o)}function cB(t,{relative:e}={}){let n=b.useContext(nj);Nt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=hj("useViewTransitionState"),s=ru(t,{relative:e});if(!n.isTransitioning)return!1;let o=mo(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=mo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Gf(s.pathname,i)!=null||Gf(s.pathname,o)!=null}var su=GN();const fj=XN(su);function c_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Vp(...t){return e=>{let n=!1;const r=t.map(s=>{const o=c_(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():c_(t[s],null)}}}}function Xe(...t){return b.useCallback(Vp(...t),t)}function gi(t){const e=dB(t),n=b.forwardRef((r,s)=>{const{children:o,...i}=r,l=b.Children.toArray(o),u=l.find(hB);if(u){const h=u.props.children,f=l.map(m=>m===u?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:m);return c.jsx(e,{...i,ref:s,children:b.isValidElement(h)?b.cloneElement(h,void 0,f):null})}return c.jsx(e,{...i,ref:s,children:o})});return n.displayName=`${t}.Slot`,n}var b0=gi("Slot");function dB(t){const e=b.forwardRef((n,r)=>{const{children:s,...o}=n;if(b.isValidElement(s)){const i=pB(s),l=fB(o,s.props);return s.type!==b.Fragment&&(l.ref=r?Vp(r,i):i),b.cloneElement(s,l)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var uB=Symbol("radix.slottable");function hB(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===uB}function fB(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{const u=o(...l);return s(...l),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}function pB(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function pj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=pj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mj(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=pj(t))&&(r&&(r+=" "),r+=e);return r}const d_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,u_=mj,gj=(t,e)=>n=>{var r;if(e?.variants==null)return u_(t,n?.class,n?.className);const{variants:s,defaultVariants:o}=e,i=Object.keys(s).map(h=>{const f=n?.[h],m=o?.[h];if(f===null)return null;const x=d_(f)||d_(m);return s[h][x]}),l=n&&Object.entries(n).reduce((h,f)=>{let[m,x]=f;return x===void 0||(h[m]=x),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:m,className:x,...w}=f;return Object.entries(w).every(v=>{let[y,k]=v;return Array.isArray(k)?k.includes({...o,...l}[y]):{...o,...l}[y]===k})?[...h,m,x]:h},[]);return u_(t,i,u,n?.class,n?.className)},w0="-",mB=t=>{const e=xB(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const l=i.split(w0);return l[0]===""&&l.length!==1&&l.shift(),xj(l,e)||gB(i)},getConflictingClassGroupIds:(i,l)=>{const u=n[i]||[];return l&&r[i]?[...u,...r[i]]:u}}},xj=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?xj(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(w0);return e.validators.find(({validator:i})=>i(o))?.classGroupId},h_=/^\[(.+)\]$/,gB=t=>{if(h_.test(t)){const e=h_.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},xB=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)sy(n[s],r,s,e);return r},sy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:f_(e,s);o.classGroupId=n;return}if(typeof s=="function"){if(vB(s)){sy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,i])=>{sy(i,f_(e,o),n,r)})})},f_=(t,e)=>{let n=t;return e.split(w0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},vB=t=>t.isThemeGetter,yB=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(o,i)=>{n.set(o,i),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return s(o,i),i},set(o,i){n.has(o)?n.set(o,i):s(o,i)}}},oy="!",iy=":",bB=iy.length,wB=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const o=[];let i=0,l=0,u=0,h;for(let v=0;v<s.length;v++){let y=s[v];if(i===0&&l===0){if(y===iy){o.push(s.slice(u,v)),u=v+bB;continue}if(y==="/"){h=v;continue}}y==="["?i++:y==="]"?i--:y==="("?l++:y===")"&&l--}const f=o.length===0?s:s.substring(u),m=kB(f),x=m!==f,w=h&&h>u?h-u:void 0;return{modifiers:o,hasImportantModifier:x,baseClassName:m,maybePostfixModifierPosition:w}};if(e){const s=e+iy,o=r;r=i=>i.startsWith(s)?o(i.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=o=>n({className:o,parseClassName:s})}return r},kB=t=>t.endsWith(oy)?t.substring(0,t.length-1):t.startsWith(oy)?t.substring(1):t,SB=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let o=[];return r.forEach(i=>{i[0]==="["||e[i]?(s.push(...o.sort(),i),o=[]):o.push(i)}),s.push(...o.sort()),s}},CB=t=>({cache:yB(t.cacheSize),parseClassName:wB(t),sortModifiers:SB(t),...mB(t)}),_B=/\s+/,EB=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,i=[],l=t.trim().split(_B);let u="";for(let h=l.length-1;h>=0;h-=1){const f=l[h],{isExternal:m,modifiers:x,hasImportantModifier:w,baseClassName:v,maybePostfixModifierPosition:y}=n(f);if(m){u=f+(u.length>0?" "+u:u);continue}let k=!!y,C=r(k?v.substring(0,y):v);if(!C){if(!k){u=f+(u.length>0?" "+u:u);continue}if(C=r(v),!C){u=f+(u.length>0?" "+u:u);continue}k=!1}const _=o(x).join(":"),j=w?_+oy:_,M=j+C;if(i.includes(M))continue;i.push(M);const O=s(C,k);for(let T=0;T<O.length;++T){const I=O[T];i.push(j+I)}u=f+(u.length>0?" "+u:u)}return u};function NB(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=vj(e))&&(r&&(r+=" "),r+=n);return r}const vj=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=vj(t[r]))&&(n&&(n+=" "),n+=e);return n};function jB(t,...e){let n,r,s,o=i;function i(u){const h=e.reduce((f,m)=>m(f),t());return n=CB(h),r=n.cache.get,s=n.cache.set,o=l,l(u)}function l(u){const h=r(u);if(h)return h;const f=EB(u,n);return s(u,f),f}return function(){return o(NB.apply(null,arguments))}}const Xt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},yj=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,bj=/^\((?:(\w[\w-]*):)?(.+)\)$/i,TB=/^\d+\/\d+$/,MB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,OB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,RB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,AB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,sl=t=>TB.test(t),Ye=t=>!!t&&!Number.isNaN(Number(t)),Go=t=>!!t&&Number.isInteger(Number(t)),Kx=t=>t.endsWith("%")&&Ye(t.slice(0,-1)),to=t=>MB.test(t),IB=()=>!0,DB=t=>OB.test(t)&&!PB.test(t),wj=()=>!1,LB=t=>RB.test(t),BB=t=>AB.test(t),FB=t=>!Te(t)&&!Me(t),$B=t=>Gl(t,Cj,wj),Te=t=>yj.test(t),Wi=t=>Gl(t,_j,DB),Xx=t=>Gl(t,VB,Ye),p_=t=>Gl(t,kj,wj),zB=t=>Gl(t,Sj,BB),Bh=t=>Gl(t,Ej,LB),Me=t=>bj.test(t),Jc=t=>Jl(t,_j),UB=t=>Jl(t,YB),m_=t=>Jl(t,kj),HB=t=>Jl(t,Cj),WB=t=>Jl(t,Sj),Fh=t=>Jl(t,Ej,!0),Gl=(t,e,n)=>{const r=yj.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Jl=(t,e,n=!1)=>{const r=bj.exec(t);return r?r[1]?e(r[1]):n:!1},kj=t=>t==="position"||t==="percentage",Sj=t=>t==="image"||t==="url",Cj=t=>t==="length"||t==="size"||t==="bg-size",_j=t=>t==="length",VB=t=>t==="number",YB=t=>t==="family-name",Ej=t=>t==="shadow",qB=()=>{const t=Xt("color"),e=Xt("font"),n=Xt("text"),r=Xt("font-weight"),s=Xt("tracking"),o=Xt("leading"),i=Xt("breakpoint"),l=Xt("container"),u=Xt("spacing"),h=Xt("radius"),f=Xt("shadow"),m=Xt("inset-shadow"),x=Xt("text-shadow"),w=Xt("drop-shadow"),v=Xt("blur"),y=Xt("perspective"),k=Xt("aspect"),C=Xt("ease"),_=Xt("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...M(),Me,Te],T=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],A=()=>[Me,Te,u],F=()=>[sl,"full","auto",...A()],U=()=>[Go,"none","subgrid",Me,Te],W=()=>["auto",{span:["full",Go,Me,Te]},Go,Me,Te],Z=()=>[Go,"auto",Me,Te],oe=()=>["auto","min","max","fr",Me,Te],ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...A()],z=()=>[sl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],R=()=>[t,Me,Te],D=()=>[...M(),m_,p_,{position:[Me,Te]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],N=()=>["auto","cover","contain",HB,$B,{size:[Me,Te]}],L=()=>[Kx,Jc,Wi],V=()=>["","none","full",h,Me,Te],Q=()=>["",Ye,Jc,Wi],ce=()=>["solid","dashed","dotted","double"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>[Ye,Kx,m_,p_],K=()=>["","none",v,Me,Te],q=()=>["none",Ye,Me,Te],se=()=>["none",Ye,Me,Te],he=()=>[Ye,Me,Te],ae=()=>[sl,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[to],breakpoint:[to],color:[IB],container:[to],"drop-shadow":[to],ease:["in","out","in-out"],font:[FB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[to],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[to],shadow:[to],spacing:["px",Ye],text:[to],"text-shadow":[to],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",sl,Te,Me,k]}],container:["container"],columns:[{columns:[Ye,Te,Me,l]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[Go,"auto",Me,Te]}],basis:[{basis:[sl,"full","auto",l,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ye,sl,"auto","initial","none",Te]}],grow:[{grow:["",Ye,Me,Te]}],shrink:[{shrink:["",Ye,Me,Te]}],order:[{order:[Go,"first","last","none",Me,Te]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":oe()}],"auto-rows":[{"auto-rows":oe()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...ee(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...ee()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":ee()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[l,"screen",...z()]}],"min-w":[{"min-w":[l,"screen","none",...z()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",n,Jc,Wi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Me,Xx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Kx,Te]}],"font-family":[{font:[UB,Te,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Me,Te]}],"line-clamp":[{"line-clamp":[Ye,"none",Me,Xx]}],leading:[{leading:[o,...A()]}],"list-image":[{"list-image":["none",Me,Te]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Me,Te]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ye,"from-font","auto",Me,Wi]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[Ye,"auto",Me,Te]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me,Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me,Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:D()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:N()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Go,Me,Te],radial:["",Me,Te],conic:[Go,Me,Te]},WB,zB]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:L()}],"gradient-via-pos":[{via:L()}],"gradient-to-pos":[{to:L()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:V()}],"rounded-s":[{"rounded-s":V()}],"rounded-e":[{"rounded-e":V()}],"rounded-t":[{"rounded-t":V()}],"rounded-r":[{"rounded-r":V()}],"rounded-b":[{"rounded-b":V()}],"rounded-l":[{"rounded-l":V()}],"rounded-ss":[{"rounded-ss":V()}],"rounded-se":[{"rounded-se":V()}],"rounded-ee":[{"rounded-ee":V()}],"rounded-es":[{"rounded-es":V()}],"rounded-tl":[{"rounded-tl":V()}],"rounded-tr":[{"rounded-tr":V()}],"rounded-br":[{"rounded-br":V()}],"rounded-bl":[{"rounded-bl":V()}],"border-w":[{border:Q()}],"border-w-x":[{"border-x":Q()}],"border-w-y":[{"border-y":Q()}],"border-w-s":[{"border-s":Q()}],"border-w-e":[{"border-e":Q()}],"border-w-t":[{"border-t":Q()}],"border-w-r":[{"border-r":Q()}],"border-w-b":[{"border-b":Q()}],"border-w-l":[{"border-l":Q()}],"divide-x":[{"divide-x":Q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ce(),"hidden","none"]}],"divide-style":[{divide:[...ce(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ye,Me,Te]}],"outline-w":[{outline:["",Ye,Jc,Wi]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",f,Fh,Bh]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",m,Fh,Bh]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[Ye,Wi]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":Q()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",x,Fh,Bh]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[Ye,Me,Te]}],"mix-blend":[{"mix-blend":[...H(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":H()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ye]}],"mask-image-linear-from-pos":[{"mask-linear-from":B()}],"mask-image-linear-to-pos":[{"mask-linear-to":B()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":B()}],"mask-image-t-to-pos":[{"mask-t-to":B()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":B()}],"mask-image-r-to-pos":[{"mask-r-to":B()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":B()}],"mask-image-b-to-pos":[{"mask-b-to":B()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":B()}],"mask-image-l-to-pos":[{"mask-l-to":B()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":B()}],"mask-image-x-to-pos":[{"mask-x-to":B()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":B()}],"mask-image-y-to-pos":[{"mask-y-to":B()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[Me,Te]}],"mask-image-radial-from-pos":[{"mask-radial-from":B()}],"mask-image-radial-to-pos":[{"mask-radial-to":B()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[Ye]}],"mask-image-conic-from-pos":[{"mask-conic-from":B()}],"mask-image-conic-to-pos":[{"mask-conic-to":B()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:D()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:N()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Me,Te]}],filter:[{filter:["","none",Me,Te]}],blur:[{blur:K()}],brightness:[{brightness:[Ye,Me,Te]}],contrast:[{contrast:[Ye,Me,Te]}],"drop-shadow":[{"drop-shadow":["","none",w,Fh,Bh]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",Ye,Me,Te]}],"hue-rotate":[{"hue-rotate":[Ye,Me,Te]}],invert:[{invert:["",Ye,Me,Te]}],saturate:[{saturate:[Ye,Me,Te]}],sepia:[{sepia:["",Ye,Me,Te]}],"backdrop-filter":[{"backdrop-filter":["","none",Me,Te]}],"backdrop-blur":[{"backdrop-blur":K()}],"backdrop-brightness":[{"backdrop-brightness":[Ye,Me,Te]}],"backdrop-contrast":[{"backdrop-contrast":[Ye,Me,Te]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ye,Me,Te]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ye,Me,Te]}],"backdrop-invert":[{"backdrop-invert":["",Ye,Me,Te]}],"backdrop-opacity":[{"backdrop-opacity":[Ye,Me,Te]}],"backdrop-saturate":[{"backdrop-saturate":[Ye,Me,Te]}],"backdrop-sepia":[{"backdrop-sepia":["",Ye,Me,Te]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Me,Te]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ye,"initial",Me,Te]}],ease:[{ease:["linear","initial",C,Me,Te]}],delay:[{delay:[Ye,Me,Te]}],animate:[{animate:["none",_,Me,Te]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Me,Te]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:q()}],"rotate-x":[{"rotate-x":q()}],"rotate-y":[{"rotate-y":q()}],"rotate-z":[{"rotate-z":q()}],scale:[{scale:se()}],"scale-x":[{"scale-x":se()}],"scale-y":[{"scale-y":se()}],"scale-z":[{"scale-z":se()}],"scale-3d":["scale-3d"],skew:[{skew:he()}],"skew-x":[{"skew-x":he()}],"skew-y":[{"skew-y":he()}],transform:[{transform:[Me,Te,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ae()}],"translate-x":[{"translate-x":ae()}],"translate-y":[{"translate-y":ae()}],"translate-z":[{"translate-z":ae()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me,Te]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me,Te]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[Ye,Jc,Wi,Xx]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},KB=jB(qB);function He(...t){return KB(mj(t))}const XB=gj("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),pe=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},o)=>{const i=r?b0:"button";return c.jsx(i,{"data-slot":"button",className:He(XB({variant:e,size:n,className:t})),ref:o,...s})});pe.displayName="Button";function Ke({className:t,type:e,...n}){return c.jsx("input",{type:e,"data-slot":"input",className:He("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var GB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=GB.reduce((t,e)=>{const n=gi(`Primitive.${e}`),r=b.forwardRef((s,o)=>{const{asChild:i,...l}=s,u=i?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(u,{...l,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Nj(t,e){t&&su.flushSync(()=>t.dispatchEvent(e))}var JB="Label",jj=b.forwardRef((t,e)=>c.jsx(Ae.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));jj.displayName=JB;var QB=jj;function ft({className:t,...e}){return c.jsx(QB,{"data-slot":"label",className:He("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function ZB(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const e3=t=>{switch(t){case"success":return r3;case"info":return o3;case"warning":return s3;case"error":return i3;default:return null}},t3=Array(12).fill(0),n3=({visible:t,className:e})=>be.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},be.createElement("div",{className:"sonner-spinner"},t3.map((n,r)=>be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),r3=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),s3=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),o3=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),i3=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),a3=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),l3=()=>{const[t,e]=be.useState(document.hidden);return be.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let ay=1;class c3{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,o=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:ay++,i=this.toasts.find(u=>u.id===o),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),i?this.toasts=this.toasts.map(u=>u.id===o?(this.publish({...u,...e,id:o,title:r}),{...u,...e,id:o,dismissible:l,title:r}):u):this.addToast({title:r,...s,dismissible:l,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,i;const l=s.then(async h=>{if(i=["resolve",h],be.isValidElement(h))o=!1,this.create({id:r,type:"default",message:h});else if(u3(h)&&!h.ok){o=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${h.status}`):n.error,x=typeof n.description=="function"?await n.description(`HTTP error! status: ${h.status}`):n.description,v=typeof m=="object"&&!be.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:x,...v})}else if(h instanceof Error){o=!1;const m=typeof n.error=="function"?await n.error(h):n.error,x=typeof n.description=="function"?await n.description(h):n.description,v=typeof m=="object"&&!be.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:x,...v})}else if(n.success!==void 0){o=!1;const m=typeof n.success=="function"?await n.success(h):n.success,x=typeof n.description=="function"?await n.description(h):n.description,v=typeof m=="object"&&!be.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:x,...v})}}).catch(async h=>{if(i=["reject",h],n.error!==void 0){o=!1;const f=typeof n.error=="function"?await n.error(h):n.error,m=typeof n.description=="function"?await n.description(h):n.description,w=typeof f=="object"&&!be.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:m,...w})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((h,f)=>l.then(()=>i[0]==="reject"?f(i[1]):h(i[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,n)=>{const r=n?.id||ay++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Kn=new c3,d3=(t,e)=>{const n=e?.id||ay++;return Kn.addToast({title:t,...e,id:n}),n},u3=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",h3=d3,f3=()=>Kn.toasts,p3=()=>Kn.getActiveToasts(),de=Object.assign(h3,{success:Kn.success,info:Kn.info,warning:Kn.warning,error:Kn.error,custom:Kn.custom,message:Kn.message,promise:Kn.promise,dismiss:Kn.dismiss,loading:Kn.loading},{getHistory:f3,getToasts:p3});ZB("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function $h(t){return t.label!==void 0}const m3=3,g3="24px",x3="16px",g_=4e3,v3=356,y3=14,b3=45,w3=200;function ys(...t){return t.filter(Boolean).join(" ")}function k3(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const S3=t=>{var e,n,r,s,o,i,l,u,h;const{invert:f,toast:m,unstyled:x,interacting:w,setHeights:v,visibleToasts:y,heights:k,index:C,toasts:_,expanded:j,removeToast:M,defaultRichColors:O,closeButton:T,style:I,cancelButtonStyle:A,actionButtonStyle:F,className:U="",descriptionClassName:W="",duration:Z,position:oe,gap:ee,expandByDefault:re,classNames:J,icons:z,closeButtonAriaLabel:R="Close toast"}=t,[D,G]=be.useState(null),[N,L]=be.useState(null),[V,Q]=be.useState(!1),[ce,H]=be.useState(!1),[B,K]=be.useState(!1),[q,se]=be.useState(!1),[he,ae]=be.useState(!1),[ge,ke]=be.useState(0),[ue,fe]=be.useState(0),Se=be.useRef(m.duration||Z||g_),ze=be.useRef(null),We=be.useRef(null),mt=C===0,Ze=C+1<=y,at=m.type,nn=m.dismissible!==!1,yn=m.className||"",rr=m.descriptionClassName||"",Yr=be.useMemo(()=>k.findIndex(Ue=>Ue.toastId===m.id)||0,[k,m.id]),sr=be.useMemo(()=>{var Ue;return(Ue=m.closeButton)!=null?Ue:T},[m.closeButton,T]),Vs=be.useMemo(()=>m.duration||Z||g_,[m.duration,Z]),fs=be.useRef(0),Fn=be.useRef(0),_o=be.useRef(0),Eo=be.useRef(null),[ju,Tu]=oe.split("-"),Mu=be.useMemo(()=>k.reduce((Ue,It,Yt)=>Yt>=Yr?Ue:Ue+It.height,0),[k,Yr]),Ia=l3(),hc=m.invert||f,Mi=at==="loading";Fn.current=be.useMemo(()=>Yr*ee+Mu,[Yr,Mu]),be.useEffect(()=>{Se.current=Vs},[Vs]),be.useEffect(()=>{Q(!0)},[]),be.useEffect(()=>{const Ue=We.current;if(Ue){const It=Ue.getBoundingClientRect().height;return fe(It),v(Yt=>[{toastId:m.id,height:It,position:m.position},...Yt]),()=>v(Yt=>Yt.filter(bn=>bn.toastId!==m.id))}},[v,m.id]),be.useLayoutEffect(()=>{if(!V)return;const Ue=We.current,It=Ue.style.height;Ue.style.height="auto";const Yt=Ue.getBoundingClientRect().height;Ue.style.height=It,fe(Yt),v(bn=>bn.find(zt=>zt.toastId===m.id)?bn.map(zt=>zt.toastId===m.id?{...zt,height:Yt}:zt):[{toastId:m.id,height:Yt,position:m.position},...bn])},[V,m.title,m.description,v,m.id]);const wr=be.useCallback(()=>{H(!0),ke(Fn.current),v(Ue=>Ue.filter(It=>It.toastId!==m.id)),setTimeout(()=>{M(m)},w3)},[m,M,v,Fn]);be.useEffect(()=>{if(m.promise&&at==="loading"||m.duration===1/0||m.type==="loading")return;let Ue;return j||w||Ia?(()=>{if(_o.current<fs.current){const bn=new Date().getTime()-fs.current;Se.current=Se.current-bn}_o.current=new Date().getTime()})():(()=>{Se.current!==1/0&&(fs.current=new Date().getTime(),Ue=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),wr()},Se.current))})(),()=>clearTimeout(Ue)},[j,w,m,at,Ia,wr]),be.useEffect(()=>{m.delete&&wr()},[wr,m.delete]);function fc(){var Ue;if(z?.loading){var It;return be.createElement("div",{className:ys(J?.loader,m==null||(It=m.classNames)==null?void 0:It.loader,"sonner-loader"),"data-visible":at==="loading"},z.loading)}return be.createElement(n3,{className:ys(J?.loader,m==null||(Ue=m.classNames)==null?void 0:Ue.loader),visible:at==="loading"})}const No=m.icon||z?.[at]||e3(at);var Ys,pc;return be.createElement("li",{tabIndex:0,ref:We,className:ys(U,yn,J?.toast,m==null||(e=m.classNames)==null?void 0:e.toast,J?.default,J?.[at],m==null||(n=m.classNames)==null?void 0:n[at]),"data-sonner-toast":"","data-rich-colors":(Ys=m.richColors)!=null?Ys:O,"data-styled":!(m.jsx||m.unstyled||x),"data-mounted":V,"data-promise":!!m.promise,"data-swiped":he,"data-removed":ce,"data-visible":Ze,"data-y-position":ju,"data-x-position":Tu,"data-index":C,"data-front":mt,"data-swiping":B,"data-dismissible":nn,"data-type":at,"data-invert":hc,"data-swipe-out":q,"data-swipe-direction":N,"data-expanded":!!(j||re&&V),style:{"--index":C,"--toasts-before":C,"--z-index":_.length-C,"--offset":`${ce?ge:Fn.current}px`,"--initial-height":re?"auto":`${ue}px`,...I,...m.style},onDragEnd:()=>{K(!1),G(null),Eo.current=null},onPointerDown:Ue=>{Mi||!nn||(ze.current=new Date,ke(Fn.current),Ue.target.setPointerCapture(Ue.pointerId),Ue.target.tagName!=="BUTTON"&&(K(!0),Eo.current={x:Ue.clientX,y:Ue.clientY}))},onPointerUp:()=>{var Ue,It,Yt;if(q||!nn)return;Eo.current=null;const bn=Number(((Ue=We.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),jo=Number(((It=We.current)==null?void 0:It.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),zt=new Date().getTime()-((Yt=ze.current)==null?void 0:Yt.getTime()),rn=D==="x"?bn:jo,To=Math.abs(rn)/zt;if(Math.abs(rn)>=b3||To>.11){ke(Fn.current),m.onDismiss==null||m.onDismiss.call(m,m),L(D==="x"?bn>0?"right":"left":jo>0?"down":"up"),wr(),se(!0);return}else{var pn,or;(pn=We.current)==null||pn.style.setProperty("--swipe-amount-x","0px"),(or=We.current)==null||or.style.setProperty("--swipe-amount-y","0px")}ae(!1),K(!1),G(null)},onPointerMove:Ue=>{var It,Yt,bn;if(!Eo.current||!nn||((It=window.getSelection())==null?void 0:It.toString().length)>0)return;const zt=Ue.clientY-Eo.current.y,rn=Ue.clientX-Eo.current.x;var To;const pn=(To=t.swipeDirections)!=null?To:k3(oe);!D&&(Math.abs(rn)>1||Math.abs(zt)>1)&&G(Math.abs(rn)>Math.abs(zt)?"x":"y");let or={x:0,y:0};const Mo=kr=>1/(1.5+Math.abs(kr)/20);if(D==="y"){if(pn.includes("top")||pn.includes("bottom"))if(pn.includes("top")&&zt<0||pn.includes("bottom")&&zt>0)or.y=zt;else{const kr=zt*Mo(zt);or.y=Math.abs(kr)<Math.abs(zt)?kr:zt}}else if(D==="x"&&(pn.includes("left")||pn.includes("right")))if(pn.includes("left")&&rn<0||pn.includes("right")&&rn>0)or.x=rn;else{const kr=rn*Mo(rn);or.x=Math.abs(kr)<Math.abs(rn)?kr:rn}(Math.abs(or.x)>0||Math.abs(or.y)>0)&&ae(!0),(Yt=We.current)==null||Yt.style.setProperty("--swipe-amount-x",`${or.x}px`),(bn=We.current)==null||bn.style.setProperty("--swipe-amount-y",`${or.y}px`)}},sr&&!m.jsx&&at!=="loading"?be.createElement("button",{"aria-label":R,"data-disabled":Mi,"data-close-button":!0,onClick:Mi||!nn?()=>{}:()=>{wr(),m.onDismiss==null||m.onDismiss.call(m,m)},className:ys(J?.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(pc=z?.close)!=null?pc:a3):null,(at||m.icon||m.promise)&&m.icon!==null&&(z?.[at]!==null||m.icon)?be.createElement("div",{"data-icon":"",className:ys(J?.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||fc():null,m.type!=="loading"?No:null):null,be.createElement("div",{"data-content":"",className:ys(J?.content,m==null||(o=m.classNames)==null?void 0:o.content)},be.createElement("div",{"data-title":"",className:ys(J?.title,m==null||(i=m.classNames)==null?void 0:i.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?be.createElement("div",{"data-description":"",className:ys(W,rr,J?.description,m==null||(l=m.classNames)==null?void 0:l.description)},typeof m.description=="function"?m.description():m.description):null),be.isValidElement(m.cancel)?m.cancel:m.cancel&&$h(m.cancel)?be.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:Ue=>{$h(m.cancel)&&nn&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,Ue),wr())},className:ys(J?.cancelButton,m==null||(u=m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,be.isValidElement(m.action)?m.action:m.action&&$h(m.action)?be.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||F,onClick:Ue=>{$h(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,Ue),!Ue.defaultPrevented&&wr())},className:ys(J?.actionButton,m==null||(h=m.classNames)==null?void 0:h.actionButton)},m.action.label):null)};function x_(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function C3(t,e){const n={};return[t,e].forEach((r,s)=>{const o=s===1,i=o?"--mobile-offset":"--offset",l=o?x3:g3;function u(h){["top","right","bottom","left"].forEach(f=>{n[`${i}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${i}-${h}`]=l:n[`${i}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):u(l)}),n}const _3=be.forwardRef(function(e,n){const{invert:r,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:i,closeButton:l,className:u,offset:h,mobileOffset:f,theme:m="light",richColors:x,duration:w,style:v,visibleToasts:y=m3,toastOptions:k,dir:C=x_(),gap:_=y3,icons:j,containerAriaLabel:M="Notifications"}=e,[O,T]=be.useState([]),I=be.useMemo(()=>Array.from(new Set([s].concat(O.filter(N=>N.position).map(N=>N.position)))),[O,s]),[A,F]=be.useState([]),[U,W]=be.useState(!1),[Z,oe]=be.useState(!1),[ee,re]=be.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=be.useRef(null),z=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=be.useRef(null),D=be.useRef(!1),G=be.useCallback(N=>{T(L=>{var V;return(V=L.find(Q=>Q.id===N.id))!=null&&V.delete||Kn.dismiss(N.id),L.filter(({id:Q})=>Q!==N.id)})},[]);return be.useEffect(()=>Kn.subscribe(N=>{if(N.dismiss){requestAnimationFrame(()=>{T(L=>L.map(V=>V.id===N.id?{...V,delete:!0}:V))});return}setTimeout(()=>{fj.flushSync(()=>{T(L=>{const V=L.findIndex(Q=>Q.id===N.id);return V!==-1?[...L.slice(0,V),{...L[V],...N},...L.slice(V+1)]:[N,...L]})})})}),[O]),be.useEffect(()=>{if(m!=="system"){re(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?re("dark"):re("light")),typeof window>"u")return;const N=window.matchMedia("(prefers-color-scheme: dark)");try{N.addEventListener("change",({matches:L})=>{re(L?"dark":"light")})}catch{N.addListener(({matches:V})=>{try{re(V?"dark":"light")}catch(Q){console.error(Q)}})}},[m]),be.useEffect(()=>{O.length<=1&&W(!1)},[O]),be.useEffect(()=>{const N=L=>{var V;if(o.every(H=>L[H]||L.code===H)){var ce;W(!0),(ce=J.current)==null||ce.focus()}L.code==="Escape"&&(document.activeElement===J.current||(V=J.current)!=null&&V.contains(document.activeElement))&&W(!1)};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[o]),be.useEffect(()=>{if(J.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,D.current=!1)}},[J.current]),be.createElement("section",{ref:n,"aria-label":`${M} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((N,L)=>{var V;const[Q,ce]=N.split("-");return O.length?be.createElement("ol",{key:N,dir:C==="auto"?x_():C,tabIndex:-1,ref:J,className:u,"data-sonner-toaster":!0,"data-sonner-theme":ee,"data-y-position":Q,"data-lifted":U&&O.length>1&&!i,"data-x-position":ce,style:{"--front-toast-height":`${((V=A[0])==null?void 0:V.height)||0}px`,"--width":`${v3}px`,"--gap":`${_}px`,...v,...C3(h,f)},onBlur:H=>{D.current&&!H.currentTarget.contains(H.relatedTarget)&&(D.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||D.current||(D.current=!0,R.current=H.relatedTarget)},onMouseEnter:()=>W(!0),onMouseMove:()=>W(!0),onMouseLeave:()=>{Z||W(!1)},onDragEnd:()=>W(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||oe(!0)},onPointerUp:()=>oe(!1)},O.filter(H=>!H.position&&L===0||H.position===N).map((H,B)=>{var K,q;return be.createElement(S3,{key:H.id,icons:j,index:B,toast:H,defaultRichColors:x,duration:(K=k?.duration)!=null?K:w,className:k?.className,descriptionClassName:k?.descriptionClassName,invert:r,visibleToasts:y,closeButton:(q=k?.closeButton)!=null?q:l,interacting:Z,position:N,style:k?.style,unstyled:k?.unstyled,classNames:k?.classNames,cancelButtonStyle:k?.cancelButtonStyle,actionButtonStyle:k?.actionButtonStyle,closeButtonAriaLabel:k?.closeButtonAriaLabel,removeToast:G,toasts:O.filter(se=>se.position==H.position),heights:A.filter(se=>se.position==H.position),setHeights:F,expandByDefault:i,gap:_,expanded:U,swipeDirections:e.swipeDirections})})):null}))});function Tj(t,e){return function(){return t.apply(e,arguments)}}const{toString:E3}=Object.prototype,{getPrototypeOf:k0}=Object,{iterator:Yp,toStringTag:Mj}=Symbol,qp=(t=>e=>{const n=E3.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ds=t=>(t=t.toLowerCase(),e=>qp(e)===t),Kp=t=>e=>typeof e===t,{isArray:Ql}=Array,Ol=Kp("undefined");function ou(t){return t!==null&&!Ol(t)&&t.constructor!==null&&!Ol(t.constructor)&&Qn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Oj=ds("ArrayBuffer");function N3(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Oj(t.buffer),e}const j3=Kp("string"),Qn=Kp("function"),Pj=Kp("number"),iu=t=>t!==null&&typeof t=="object",T3=t=>t===!0||t===!1,wf=t=>{if(qp(t)!=="object")return!1;const e=k0(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Mj in t)&&!(Yp in t)},M3=t=>{if(!iu(t)||ou(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},O3=ds("Date"),P3=ds("File"),R3=ds("Blob"),A3=ds("FileList"),I3=t=>iu(t)&&Qn(t.pipe),D3=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Qn(t.append)&&((e=qp(t))==="formdata"||e==="object"&&Qn(t.toString)&&t.toString()==="[object FormData]"))},L3=ds("URLSearchParams"),[B3,F3,$3,z3]=["ReadableStream","Request","Response","Headers"].map(ds),U3=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function au(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ql(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(ou(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let l;for(r=0;r<i;r++)l=o[r],e.call(null,t[l],l,t)}}function Rj(t,e){if(ou(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Zi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Aj=t=>!Ol(t)&&t!==Zi;function ly(){const{caseless:t,skipUndefined:e}=Aj(this)&&this||{},n={},r=(s,o)=>{const i=t&&Rj(n,o)||o;wf(n[i])&&wf(s)?n[i]=ly(n[i],s):wf(s)?n[i]=ly({},s):Ql(s)?n[i]=s.slice():(!e||!Ol(s))&&(n[i]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&au(arguments[s],r);return n}const H3=(t,e,n,{allOwnKeys:r}={})=>(au(e,(s,o)=>{n&&Qn(s)?t[o]=Tj(s,n):t[o]=s},{allOwnKeys:r}),t),W3=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),V3=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Y3=(t,e,n,r)=>{let s,o,i;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!r||r(i,t,e))&&!l[i]&&(e[i]=t[i],l[i]=!0);t=n!==!1&&k0(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},q3=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},K3=t=>{if(!t)return null;if(Ql(t))return t;let e=t.length;if(!Pj(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},X3=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&k0(Uint8Array)),G3=(t,e)=>{const r=(t&&t[Yp]).call(t);let s;for(;(s=r.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},J3=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Q3=ds("HTMLFormElement"),Z3=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),v_=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),e6=ds("RegExp"),Ij=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};au(n,(s,o)=>{let i;(i=e(s,o,t))!==!1&&(r[o]=i||s)}),Object.defineProperties(t,r)},t6=t=>{Ij(t,(e,n)=>{if(Qn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Qn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},n6=(t,e)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return Ql(t)?r(t):r(String(t).split(e)),n},r6=()=>{},s6=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function o6(t){return!!(t&&Qn(t.append)&&t[Mj]==="FormData"&&t[Yp])}const i6=t=>{const e=new Array(10),n=(r,s)=>{if(iu(r)){if(e.indexOf(r)>=0)return;if(ou(r))return r;if(!("toJSON"in r)){e[s]=r;const o=Ql(r)?[]:{};return au(r,(i,l)=>{const u=n(i,s+1);!Ol(u)&&(o[l]=u)}),e[s]=void 0,o}}return r};return n(t,0)},a6=ds("AsyncFunction"),l6=t=>t&&(iu(t)||Qn(t))&&Qn(t.then)&&Qn(t.catch),Dj=((t,e)=>t?setImmediate:e?((n,r)=>(Zi.addEventListener("message",({source:s,data:o})=>{s===Zi&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Zi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Qn(Zi.postMessage)),c6=typeof queueMicrotask<"u"?queueMicrotask.bind(Zi):typeof process<"u"&&process.nextTick||Dj,d6=t=>t!=null&&Qn(t[Yp]),le={isArray:Ql,isArrayBuffer:Oj,isBuffer:ou,isFormData:D3,isArrayBufferView:N3,isString:j3,isNumber:Pj,isBoolean:T3,isObject:iu,isPlainObject:wf,isEmptyObject:M3,isReadableStream:B3,isRequest:F3,isResponse:$3,isHeaders:z3,isUndefined:Ol,isDate:O3,isFile:P3,isBlob:R3,isRegExp:e6,isFunction:Qn,isStream:I3,isURLSearchParams:L3,isTypedArray:X3,isFileList:A3,forEach:au,merge:ly,extend:H3,trim:U3,stripBOM:W3,inherits:V3,toFlatObject:Y3,kindOf:qp,kindOfTest:ds,endsWith:q3,toArray:K3,forEachEntry:G3,matchAll:J3,isHTMLForm:Q3,hasOwnProperty:v_,hasOwnProp:v_,reduceDescriptors:Ij,freezeMethods:t6,toObjectSet:n6,toCamelCase:Z3,noop:r6,toFiniteNumber:s6,findKey:Rj,global:Zi,isContextDefined:Aj,isSpecCompliantForm:o6,toJSONObject:i6,isAsyncFn:a6,isThenable:l6,setImmediate:Dj,asap:c6,isIterable:d6};function Ve(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}le.inherits(Ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.status}}});const Lj=Ve.prototype,Bj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Bj[t]={value:t}});Object.defineProperties(Ve,Bj);Object.defineProperty(Lj,"isAxiosError",{value:!0});Ve.from=(t,e,n,r,s,o)=>{const i=Object.create(Lj);le.toFlatObject(t,i,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const l=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return Ve.call(i,l,u,n,r,s),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",o&&Object.assign(i,o),i};const u6=null;function cy(t){return le.isPlainObject(t)||le.isArray(t)}function Fj(t){return le.endsWith(t,"[]")?t.slice(0,-2):t}function y_(t,e,n){return t?t.concat(e).map(function(s,o){return s=Fj(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function h6(t){return le.isArray(t)&&!t.some(cy)}const f6=le.toFlatObject(le,{},null,function(e){return/^is[A-Z]/.test(e)});function Xp(t,e,n){if(!le.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=le.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,k){return!le.isUndefined(k[y])});const r=n.metaTokens,s=n.visitor||f,o=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(e);if(!le.isFunction(s))throw new TypeError("visitor must be a function");function h(v){if(v===null)return"";if(le.isDate(v))return v.toISOString();if(le.isBoolean(v))return v.toString();if(!u&&le.isBlob(v))throw new Ve("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(v)||le.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,y,k){let C=v;if(v&&!k&&typeof v=="object"){if(le.endsWith(y,"{}"))y=r?y:y.slice(0,-2),v=JSON.stringify(v);else if(le.isArray(v)&&h6(v)||(le.isFileList(v)||le.endsWith(y,"[]"))&&(C=le.toArray(v)))return y=Fj(y),C.forEach(function(j,M){!(le.isUndefined(j)||j===null)&&e.append(i===!0?y_([y],M,o):i===null?y:y+"[]",h(j))}),!1}return cy(v)?!0:(e.append(y_(k,y,o),h(v)),!1)}const m=[],x=Object.assign(f6,{defaultVisitor:f,convertValue:h,isVisitable:cy});function w(v,y){if(!le.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(v),le.forEach(v,function(C,_){(!(le.isUndefined(C)||C===null)&&s.call(e,C,le.isString(_)?_.trim():_,y,x))===!0&&w(C,y?y.concat(_):[_])}),m.pop()}}if(!le.isObject(t))throw new TypeError("data must be an object");return w(t),e}function b_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function S0(t,e){this._pairs=[],t&&Xp(t,this,e)}const $j=S0.prototype;$j.append=function(e,n){this._pairs.push([e,n])};$j.toString=function(e){const n=e?function(r){return e.call(this,r,b_)}:b_;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function p6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function zj(t,e,n){if(!e)return t;const r=n&&n.encode||p6;le.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(e,n):o=le.isURLSearchParams(e)?e.toString():new S0(e,n).toString(r),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class w_{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){le.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Uj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},m6=typeof URLSearchParams<"u"?URLSearchParams:S0,g6=typeof FormData<"u"?FormData:null,x6=typeof Blob<"u"?Blob:null,v6={isBrowser:!0,classes:{URLSearchParams:m6,FormData:g6,Blob:x6},protocols:["http","https","file","blob","url","data"]},C0=typeof window<"u"&&typeof document<"u",dy=typeof navigator=="object"&&navigator||void 0,y6=C0&&(!dy||["ReactNative","NativeScript","NS"].indexOf(dy.product)<0),b6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",w6=C0&&window.location.href||"http://localhost",k6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:C0,hasStandardBrowserEnv:y6,hasStandardBrowserWebWorkerEnv:b6,navigator:dy,origin:w6},Symbol.toStringTag,{value:"Module"})),En={...k6,...v6};function S6(t,e){return Xp(t,new En.classes.URLSearchParams,{visitor:function(n,r,s,o){return En.isNode&&le.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function C6(t){return le.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _6(t){const e={},n=Object.keys(t);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],e[o]=t[o];return e}function Hj(t){function e(n,r,s,o){let i=n[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),u=o>=n.length;return i=!i&&le.isArray(s)?s.length:i,u?(le.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!l):((!s[i]||!le.isObject(s[i]))&&(s[i]=[]),e(n,r,s[i],o)&&le.isArray(s[i])&&(s[i]=_6(s[i])),!l)}if(le.isFormData(t)&&le.isFunction(t.entries)){const n={};return le.forEachEntry(t,(r,s)=>{e(C6(r),s,n,0)}),n}return null}function E6(t,e,n){if(le.isString(t))try{return(e||JSON.parse)(t),le.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const lu={transitional:Uj,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=le.isObject(e);if(o&&le.isHTMLForm(e)&&(e=new FormData(e)),le.isFormData(e))return s?JSON.stringify(Hj(e)):e;if(le.isArrayBuffer(e)||le.isBuffer(e)||le.isStream(e)||le.isFile(e)||le.isBlob(e)||le.isReadableStream(e))return e;if(le.isArrayBufferView(e))return e.buffer;if(le.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return S6(e,this.formSerializer).toString();if((l=le.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Xp(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),E6(e)):e}],transformResponse:[function(e){const n=this.transitional||lu.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(le.isResponse(e)||le.isReadableStream(e))return e;if(e&&le.isString(e)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(l){if(i)throw l.name==="SyntaxError"?Ve.from(l,Ve.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:En.classes.FormData,Blob:En.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],t=>{lu.headers[t]={}});const N6=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),j6=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||e[n]&&N6[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},k_=Symbol("internals");function Qc(t){return t&&String(t).trim().toLowerCase()}function kf(t){return t===!1||t==null?t:le.isArray(t)?t.map(kf):String(t)}function T6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const M6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Gx(t,e,n,r,s){if(le.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!le.isString(e)){if(le.isString(r))return e.indexOf(r)!==-1;if(le.isRegExp(r))return r.test(e)}}function O6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function P6(t,e){const n=le.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,o,i){return this[r].call(this,e,s,o,i)},configurable:!0})})}let Zn=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function o(l,u,h){const f=Qc(u);if(!f)throw new Error("header name must be a non-empty string");const m=le.findKey(s,f);(!m||s[m]===void 0||h===!0||h===void 0&&s[m]!==!1)&&(s[m||u]=kf(l))}const i=(l,u)=>le.forEach(l,(h,f)=>o(h,f,u));if(le.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(le.isString(e)&&(e=e.trim())&&!M6(e))i(j6(e),n);else if(le.isObject(e)&&le.isIterable(e)){let l={},u,h;for(const f of e){if(!le.isArray(f))throw TypeError("Object iterator must return a key-value pair");l[h=f[0]]=(u=l[h])?le.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}i(l,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=Qc(e),e){const r=le.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return T6(s);if(le.isFunction(n))return n.call(this,s,r);if(le.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Qc(e),e){const r=le.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Gx(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function o(i){if(i=Qc(i),i){const l=le.findKey(r,i);l&&(!n||Gx(r,r[l],l,n))&&(delete r[l],s=!0)}}return le.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!e||Gx(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,r={};return le.forEach(this,(s,o)=>{const i=le.findKey(r,o);if(i){n[i]=kf(s),delete n[o];return}const l=e?O6(o):String(o).trim();l!==o&&delete n[o],n[l]=kf(s),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return le.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&le.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[k_]=this[k_]={accessors:{}}).accessors,s=this.prototype;function o(i){const l=Qc(i);r[l]||(P6(s,i),r[l]=!0)}return le.isArray(e)?e.forEach(o):o(e),this}};Zn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(Zn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});le.freezeMethods(Zn);function Jx(t,e){const n=this||lu,r=e||n,s=Zn.from(r.headers);let o=r.data;return le.forEach(t,function(l){o=l.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function Wj(t){return!!(t&&t.__CANCEL__)}function Zl(t,e,n){Ve.call(this,t??"canceled",Ve.ERR_CANCELED,e,n),this.name="CanceledError"}le.inherits(Zl,Ve,{__CANCEL__:!0});function Vj(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ve("Request failed with status code "+n.status,[Ve.ERR_BAD_REQUEST,Ve.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function R6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function A6(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,o=0,i;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),f=r[o];i||(i=h),n[s]=u,r[s]=h;let m=o,x=0;for(;m!==s;)x+=n[m++],m=m%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),h-i<e)return;const w=f&&h-f;return w?Math.round(x*1e3/w):void 0}}function I6(t,e){let n=0,r=1e3/e,s,o;const i=(h,f=Date.now())=>{n=f,s=null,o&&(clearTimeout(o),o=null),t(...h)};return[(...h)=>{const f=Date.now(),m=f-n;m>=r?i(h,f):(s=h,o||(o=setTimeout(()=>{o=null,i(s)},r-m)))},()=>s&&i(s)]}const Jf=(t,e,n=3)=>{let r=0;const s=A6(50,250);return I6(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,u=i-r,h=s(u),f=i<=l;r=i;const m={loaded:i,total:l,progress:l?i/l:void 0,bytes:u,rate:h||void 0,estimated:h&&l&&f?(l-i)/h:void 0,event:o,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(m)},n)},S_=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},C_=t=>(...e)=>le.asap(()=>t(...e)),D6=En.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,En.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(En.origin),En.navigator&&/(msie|trident)/i.test(En.navigator.userAgent)):()=>!0,L6=En.hasStandardBrowserEnv?{write(t,e,n,r,s,o,i){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(e)}`];le.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),le.isString(r)&&l.push(`path=${r}`),le.isString(s)&&l.push(`domain=${s}`),o===!0&&l.push("secure"),le.isString(i)&&l.push(`SameSite=${i}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function B6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function F6(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Yj(t,e,n){let r=!B6(e);return t&&(r||n==!1)?F6(t,e):e}const __=t=>t instanceof Zn?{...t}:t;function ua(t,e){e=e||{};const n={};function r(h,f,m,x){return le.isPlainObject(h)&&le.isPlainObject(f)?le.merge.call({caseless:x},h,f):le.isPlainObject(f)?le.merge({},f):le.isArray(f)?f.slice():f}function s(h,f,m,x){if(le.isUndefined(f)){if(!le.isUndefined(h))return r(void 0,h,m,x)}else return r(h,f,m,x)}function o(h,f){if(!le.isUndefined(f))return r(void 0,f)}function i(h,f){if(le.isUndefined(f)){if(!le.isUndefined(h))return r(void 0,h)}else return r(void 0,f)}function l(h,f,m){if(m in e)return r(h,f);if(m in t)return r(void 0,h)}const u={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(h,f,m)=>s(__(h),__(f),m,!0)};return le.forEach(Object.keys({...t,...e}),function(f){const m=u[f]||s,x=m(t[f],e[f],f);le.isUndefined(x)&&m!==l||(n[f]=x)}),n}const qj=t=>{const e=ua({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:l}=e;if(e.headers=i=Zn.from(i),e.url=zj(Yj(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),le.isFormData(n)){if(En.hasStandardBrowserEnv||En.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(le.isFunction(n.getHeaders)){const u=n.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([f,m])=>{h.includes(f.toLowerCase())&&i.set(f,m)})}}if(En.hasStandardBrowserEnv&&(r&&le.isFunction(r)&&(r=r(e)),r||r!==!1&&D6(e.url))){const u=s&&o&&L6.read(o);u&&i.set(s,u)}return e},$6=typeof XMLHttpRequest<"u",z6=$6&&function(t){return new Promise(function(n,r){const s=qj(t);let o=s.data;const i=Zn.from(s.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:h}=s,f,m,x,w,v;function y(){w&&w(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function C(){if(!k)return;const j=Zn.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),O={data:!l||l==="text"||l==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:j,config:t,request:k};Vj(function(I){n(I),y()},function(I){r(I),y()},O),k=null}"onloadend"in k?k.onloadend=C:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(C)},k.onabort=function(){k&&(r(new Ve("Request aborted",Ve.ECONNABORTED,t,k)),k=null)},k.onerror=function(M){const O=M&&M.message?M.message:"Network Error",T=new Ve(O,Ve.ERR_NETWORK,t,k);T.event=M||null,r(T),k=null},k.ontimeout=function(){let M=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const O=s.transitional||Uj;s.timeoutErrorMessage&&(M=s.timeoutErrorMessage),r(new Ve(M,O.clarifyTimeoutError?Ve.ETIMEDOUT:Ve.ECONNABORTED,t,k)),k=null},o===void 0&&i.setContentType(null),"setRequestHeader"in k&&le.forEach(i.toJSON(),function(M,O){k.setRequestHeader(O,M)}),le.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),l&&l!=="json"&&(k.responseType=s.responseType),h&&([x,v]=Jf(h,!0),k.addEventListener("progress",x)),u&&k.upload&&([m,w]=Jf(u),k.upload.addEventListener("progress",m),k.upload.addEventListener("loadend",w)),(s.cancelToken||s.signal)&&(f=j=>{k&&(r(!j||j.type?new Zl(null,t,k):j),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const _=R6(s.url);if(_&&En.protocols.indexOf(_)===-1){r(new Ve("Unsupported protocol "+_+":",Ve.ERR_BAD_REQUEST,t));return}k.send(o||null)})},U6=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const o=function(h){if(!s){s=!0,l();const f=h instanceof Error?h:this.reason;r.abort(f instanceof Ve?f:new Zl(f instanceof Error?f.message:f))}};let i=e&&setTimeout(()=>{i=null,o(new Ve(`timeout ${e} of ms exceeded`,Ve.ETIMEDOUT))},e);const l=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),t=null)};t.forEach(h=>h.addEventListener("abort",o));const{signal:u}=r;return u.unsubscribe=()=>le.asap(l),u}},H6=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},W6=async function*(t,e){for await(const n of V6(t))yield*H6(n,e)},V6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},E_=(t,e,n,r)=>{const s=W6(t,e);let o=0,i,l=u=>{i||(i=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:h,value:f}=await s.next();if(h){l(),u.close();return}let m=f.byteLength;if(n){let x=o+=m;n(x)}u.enqueue(new Uint8Array(f))}catch(h){throw l(h),h}},cancel(u){return l(u),s.return()}},{highWaterMark:2})},N_=64*1024,{isFunction:zh}=le,Y6=(({Request:t,Response:e})=>({Request:t,Response:e}))(le.global),{ReadableStream:j_,TextEncoder:T_}=le.global,M_=(t,...e)=>{try{return!!t(...e)}catch{return!1}},q6=t=>{t=le.merge.call({skipUndefined:!0},Y6,t);const{fetch:e,Request:n,Response:r}=t,s=e?zh(e):typeof fetch=="function",o=zh(n),i=zh(r);if(!s)return!1;const l=s&&zh(j_),u=s&&(typeof T_=="function"?(v=>y=>v.encode(y))(new T_):async v=>new Uint8Array(await new n(v).arrayBuffer())),h=o&&l&&M_(()=>{let v=!1;const y=new n(En.origin,{body:new j_,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!y}),f=i&&l&&M_(()=>le.isReadableStream(new r("").body)),m={stream:f&&(v=>v.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!m[v]&&(m[v]=(y,k)=>{let C=y&&y[v];if(C)return C.call(y);throw new Ve(`Response type '${v}' is not supported`,Ve.ERR_NOT_SUPPORT,k)})});const x=async v=>{if(v==null)return 0;if(le.isBlob(v))return v.size;if(le.isSpecCompliantForm(v))return(await new n(En.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(le.isArrayBufferView(v)||le.isArrayBuffer(v))return v.byteLength;if(le.isURLSearchParams(v)&&(v=v+""),le.isString(v))return(await u(v)).byteLength},w=async(v,y)=>{const k=le.toFiniteNumber(v.getContentLength());return k??x(y)};return async v=>{let{url:y,method:k,data:C,signal:_,cancelToken:j,timeout:M,onDownloadProgress:O,onUploadProgress:T,responseType:I,headers:A,withCredentials:F="same-origin",fetchOptions:U}=qj(v),W=e||fetch;I=I?(I+"").toLowerCase():"text";let Z=U6([_,j&&j.toAbortSignal()],M),oe=null;const ee=Z&&Z.unsubscribe&&(()=>{Z.unsubscribe()});let re;try{if(T&&h&&k!=="get"&&k!=="head"&&(re=await w(A,C))!==0){let N=new n(y,{method:"POST",body:C,duplex:"half"}),L;if(le.isFormData(C)&&(L=N.headers.get("content-type"))&&A.setContentType(L),N.body){const[V,Q]=S_(re,Jf(C_(T)));C=E_(N.body,N_,V,Q)}}le.isString(F)||(F=F?"include":"omit");const J=o&&"credentials"in n.prototype,z={...U,signal:Z,method:k.toUpperCase(),headers:A.normalize().toJSON(),body:C,duplex:"half",credentials:J?F:void 0};oe=o&&new n(y,z);let R=await(o?W(oe,U):W(y,z));const D=f&&(I==="stream"||I==="response");if(f&&(O||D&&ee)){const N={};["status","statusText","headers"].forEach(ce=>{N[ce]=R[ce]});const L=le.toFiniteNumber(R.headers.get("content-length")),[V,Q]=O&&S_(L,Jf(C_(O),!0))||[];R=new r(E_(R.body,N_,V,()=>{Q&&Q(),ee&&ee()}),N)}I=I||"text";let G=await m[le.findKey(m,I)||"text"](R,v);return!D&&ee&&ee(),await new Promise((N,L)=>{Vj(N,L,{data:G,headers:Zn.from(R.headers),status:R.status,statusText:R.statusText,config:v,request:oe})})}catch(J){throw ee&&ee(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new Ve("Network Error",Ve.ERR_NETWORK,v,oe),{cause:J.cause||J}):Ve.from(J,J&&J.code,v,oe)}}},K6=new Map,Kj=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,o=[r,s,n];let i=o.length,l=i,u,h,f=K6;for(;l--;)u=o[l],h=f.get(u),h===void 0&&f.set(u,h=l?new Map:q6(e)),f=h;return h};Kj();const _0={http:u6,xhr:z6,fetch:{get:Kj}};le.forEach(_0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const O_=t=>`- ${t}`,X6=t=>le.isFunction(t)||t===null||t===!1;function G6(t,e){t=le.isArray(t)?t:[t];const{length:n}=t;let r,s;const o={};for(let i=0;i<n;i++){r=t[i];let l;if(s=r,!X6(r)&&(s=_0[(l=String(r)).toLowerCase()],s===void 0))throw new Ve(`Unknown adapter '${l}'`);if(s&&(le.isFunction(s)||(s=s.get(e))))break;o[l||"#"+i]=s}if(!s){const i=Object.entries(o).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=n?i.length>1?`since :
`+i.map(O_).join(`
`):" "+O_(i[0]):"as no adapter specified";throw new Ve("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s}const Xj={getAdapter:G6,adapters:_0};function Qx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zl(null,t)}function P_(t){return Qx(t),t.headers=Zn.from(t.headers),t.data=Jx.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Xj.getAdapter(t.adapter||lu.adapter,t)(t).then(function(r){return Qx(t),r.data=Jx.call(t,t.transformResponse,r),r.headers=Zn.from(r.headers),r},function(r){return Wj(r)||(Qx(t),r&&r.response&&(r.response.data=Jx.call(t,t.transformResponse,r.response),r.response.headers=Zn.from(r.response.headers))),Promise.reject(r)})}const Gj="1.13.0",Gp={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Gp[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const R_={};Gp.transitional=function(e,n,r){function s(o,i){return"[Axios v"+Gj+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,l)=>{if(e===!1)throw new Ve(s(i," has been removed"+(n?" in "+n:"")),Ve.ERR_DEPRECATED);return n&&!R_[i]&&(R_[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,i,l):!0}};Gp.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function J6(t,e,n){if(typeof t!="object")throw new Ve("options must be an object",Ve.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const o=r[s],i=e[o];if(i){const l=t[o],u=l===void 0||i(l,o,t);if(u!==!0)throw new Ve("option "+o+" must be "+u,Ve.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ve("Unknown option "+o,Ve.ERR_BAD_OPTION)}}const Sf={assertOptions:J6,validators:Gp},bs=Sf.validators;let na=class{constructor(e){this.defaults=e||{},this.interceptors={request:new w_,response:new w_}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ua(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Sf.assertOptions(r,{silentJSONParsing:bs.transitional(bs.boolean),forcedJSONParsing:bs.transitional(bs.boolean),clarifyTimeoutError:bs.transitional(bs.boolean)},!1),s!=null&&(le.isFunction(s)?n.paramsSerializer={serialize:s}:Sf.assertOptions(s,{encode:bs.function,serialize:bs.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Sf.assertOptions(n,{baseUrl:bs.spelling("baseURL"),withXsrfToken:bs.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&le.merge(o.common,o[n.method]);o&&le.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),n.headers=Zn.concat(i,o);const l=[];let u=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(u=u&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const h=[];this.interceptors.response.forEach(function(y){h.push(y.fulfilled,y.rejected)});let f,m=0,x;if(!u){const v=[P_.bind(this),void 0];for(v.unshift(...l),v.push(...h),x=v.length,f=Promise.resolve(n);m<x;)f=f.then(v[m++],v[m++]);return f}x=l.length;let w=n;for(;m<x;){const v=l[m++],y=l[m++];try{w=v(w)}catch(k){y.call(this,k);break}}try{f=P_.call(this,w)}catch(v){return Promise.reject(v)}for(m=0,x=h.length;m<x;)f=f.then(h[m++],h[m++]);return f}getUri(e){e=ua(this.defaults,e);const n=Yj(e.baseURL,e.url,e.allowAbsoluteUrls);return zj(n,e.params,e.paramsSerializer)}};le.forEach(["delete","get","head","options"],function(e){na.prototype[e]=function(n,r){return this.request(ua(r||{},{method:e,url:n,data:(r||{}).data}))}});le.forEach(["post","put","patch"],function(e){function n(r){return function(o,i,l){return this.request(ua(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}na.prototype[e]=n(),na.prototype[e+"Form"]=n(!0)});let Q6=class Jj{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(l=>{r.subscribe(l),o=l}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o,i,l){r.reason||(r.reason=new Zl(o,i,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Jj(function(s){e=s}),cancel:e}}};function Z6(t){return function(n){return t.apply(null,n)}}function eF(t){return le.isObject(t)&&t.isAxiosError===!0}const uy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(uy).forEach(([t,e])=>{uy[e]=t});function Qj(t){const e=new na(t),n=Tj(na.prototype.request,e);return le.extend(n,na.prototype,e,{allOwnKeys:!0}),le.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Qj(ua(t,s))},n}const gt=Qj(lu);gt.Axios=na;gt.CanceledError=Zl;gt.CancelToken=Q6;gt.isCancel=Wj;gt.VERSION=Gj;gt.toFormData=Xp;gt.AxiosError=Ve;gt.Cancel=gt.CanceledError;gt.all=function(e){return Promise.all(e)};gt.spread=Z6;gt.isAxiosError=eF;gt.mergeConfig=ua;gt.AxiosHeaders=Zn;gt.formToJSON=t=>Hj(le.isHTMLForm(t)?new FormData(t):t);gt.getAdapter=Xj.getAdapter;gt.HttpStatusCode=uy;gt.default=gt;const{Axios:rle,AxiosError:sle,CanceledError:ole,isCancel:ile,CancelToken:ale,VERSION:lle,all:cle,Cancel:dle,isAxiosError:ule,spread:hle,toFormData:fle,AxiosHeaders:ple,HttpStatusCode:mle,formToJSON:gle,getAdapter:xle,mergeConfig:vle}=gt,tF={VITE_API_URL:"http://localhost:3000"},nF=tF,en=nF.VITE_API_URL,On="access_token",Le=gt.create({baseURL:en,withCredentials:!1,timeout:1e4});Le.interceptors.request.use(t=>{const e=localStorage.getItem(On);return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));Le.interceptors.response.use(t=>t,t=>{if(t.response?.status===401){const e=t.config?.url??"";e.includes("/auth/login")||e.includes("/auth/forgetPassword")||(console.error("Unauthorized - redirecting to login"),localStorage.removeItem(On),window.location.pathname!=="/login"&&(window.location.href="/login"))}return Promise.reject(t)});const E0={get:t=>localStorage.getItem(t),set:(t,e)=>localStorage.setItem(t,e),del:t=>localStorage.removeItem(t)};async function Zj(t){const{data:e}=await Le.post("/auth/login",t),n=e?.token,r=n?.token||n?.accessToken;return r&&E0.set(On,r),e}function rF(){E0.del(On)}function eT(){return!!E0.get(On)}async function sF(t){const{data:e}=await Le.post("/auth/forgetPassword",{email:t});return e}async function oF(t,e,n){const{data:r}=await Le.post("/auth/resetPassword",{token:t,password:e,confirmNewPassword:n});return r}function iF({onSignUp:t}){const[e,n]=b.useState(""),[r,s]=b.useState(""),[o,i]=b.useState(""),[l,u]=b.useState(""),[h,f]=b.useState(!1),m=Wr(),x=async w=>{if(w.preventDefault(),o!==l){de.error("Passwords do not match");return}if(o.length<6){de.error("Password must be at least 6 characters");return}try{f(!0);const v=e.trim().split(" "),y=v[0]||"",k=v.slice(1).join(" ")||v[0]||"";await Le.post("/auth/signup",{firstName:y,lastName:k,email:r,password:o,confirmPassword:o}),await Zj({email:r,password:o}),localStorage.setItem("xplanb_onboarding","true"),de.success("Account created successfully!"),t?.(),m("/dashboard",{replace:!0})}catch(v){de.error(v?.response?.data?.message||"Sign up failed. Please try again.")}finally{f(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-background px-4",children:c.jsx("div",{className:"w-full max-w-md",children:c.jsxs("div",{className:"bg-white dark:bg-card rounded-xl shadow-lg p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-[24px] mb-2",children:"Create your account"}),c.jsx("p",{className:"text-muted-foreground text-[14px]",children:"Join XPlanB and start collaborating"})]}),c.jsxs("form",{onSubmit:x,className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"fullName",children:"Full Name"}),c.jsx(Ke,{id:"fullName",type:"text",value:e,onChange:w=>n(w.target.value),className:"mt-1.5 rounded-xl",placeholder:"John Doe",required:!0})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"email",children:"Email"}),c.jsx(Ke,{id:"email",type:"email",value:r,onChange:w=>s(w.target.value),className:"mt-1.5 rounded-xl",placeholder:"john@example.com",required:!0})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"password",children:"Password"}),c.jsx(Ke,{id:"password",type:"password",value:o,onChange:w=>i(w.target.value),className:"mt-1.5 rounded-xl",placeholder:"",required:!0})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"confirmPassword",children:"Confirm Password"}),c.jsx(Ke,{id:"confirmPassword",type:"password",value:l,onChange:w=>u(w.target.value),className:"mt-1.5 rounded-xl",placeholder:"",required:!0})]}),c.jsx(pe,{type:"submit",className:"w-full rounded-xl",disabled:h,children:h?"Creating account...":"Sign Up"})]}),c.jsxs("p",{className:"text-center mt-6 text-[14px] text-muted-foreground",children:["Already have an account?"," ",c.jsx(lt,{to:"/login",className:"text-primary hover:underline",children:"Log in"})]})]})})})}async function aF(t,e){const n=lF(e);try{const r=await Le.post("/email/send",{to:[t],subject:`Meeting Invitation: ${e.title}`,html:n,text:`You've been invited to a meeting: ${e.title}

Join at: ${e.joinUrl}`});return console.log(" Meeting invitation email sent successfully",r.data),r.data}catch(r){throw console.error(" Resend error:",r),new Error("Failed to send email via Resend")}}function lF(t){return`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting Invitation</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 40px 0;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px 30px; text-align: center;">
                            <h1 style="color: #ffffff; margin: 0; font-size: 28px; font-weight: 600;"> Meeting Invitation</h1>
                        </td>
                    </tr>
                    
                    <!-- Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <h2 style="color: #333333; margin: 0 0 20px 0; font-size: 24px; font-weight: 600;">
                                ${t.title}
                            </h2>
                            
                            <p style="color: #666666; margin: 0 0 10px 0; font-size: 16px; line-height: 1.6;">
                                <strong style="color: #333333;"> Date & Time:</strong><br>
                                ${new Date(t.startTime).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}
                            </p>
                            
                            <p style="color: #666666; margin: 20px 0 10px 0; font-size: 16px; line-height: 1.6;">
                                <strong style="color: #333333;"> Organizer:</strong><br>
                                ${t.createdBy}
                            </p>
                            
                            ${t.description?`
                            <p style="color: #666666; margin: 20px 0 10px 0; font-size: 16px; line-height: 1.6;">
                                <strong style="color: #333333;"> Description:</strong><br>
                                ${t.description}
                            </p>
                            `:""}
                            
                            <!-- CTA Button -->
                            <table width="100%" cellpadding="0" cellspacing="0" style="margin: 30px 0;">
                                <tr>
                                    <td align="center">
                                        <a href="${t.joinUrl}" 
                                           style="display: inline-block; background-color: #667eea; color: #ffffff; text-decoration: none; padding: 15px 40px; border-radius: 6px; font-size: 16px; font-weight: 600; box-shadow: 0 4px 6px rgba(102, 126, 234, 0.4);">
                                            Join Meeting
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            
                            <!-- Alternative Link -->
                            <p style="color: #999999; margin: 30px 0 0 0; font-size: 14px; text-align: center;">
                                Or copy this link: <br>
                                <a href="${t.joinUrl}" style="color: #667eea; word-break: break-all;">
                                    ${t.joinUrl}
                                </a>
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Footer -->
                    <tr>
                        <td style="background-color: #f9f9f9; padding: 20px 30px; text-align: center; border-top: 1px solid #eeeeee;">
                            <p style="color: #999999; margin: 0; font-size: 12px;">
                                Powered by <strong style="color: #667eea;">XPlanB</strong> - Your collaborative workspace
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
  `.trim()}async function cF(t,e){const n=dF(e);try{const r=await Le.post("/email/send",{to:[t],subject:`Document Shared: ${e.documentName}`,html:n,text:`You've been granted access to the document "${e.documentName}". Access level: ${e.accessLevel}

Open document: ${e.joinUrl}`});return console.log(" Document share email sent successfully",r.data),r.data}catch(r){throw console.error(" Resend error:",r),new Error("Failed to send email via Resend")}}function dF(t){return`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Shared</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 40px 0;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px 30px; text-align: center;">
                            <h1 style="color: #ffffff; margin: 0; font-size: 28px; font-weight: 600;"> Document Shared</h1>
                        </td>
                    </tr>
                    
                    <!-- Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <h2 style="color: #333333; margin: 0 0 20px 0; font-size: 24px; font-weight: 600;">
                                ${t.documentName}
                            </h2>
                            
                            <p style="color: #666666; margin: 0 0 10px 0; font-size: 16px; line-height: 1.6;">
                                <strong style="color: #333333;"> Shared by:</strong><br>
                                ${t.sharedBy}
                            </p>
                            
                            <p style="color: #666666; margin: 20px 0 10px 0; font-size: 16px; line-height: 1.6;">
                                <strong style="color: #333333;"> Access Level:</strong><br>
                                ${t.accessLevel==="edit"?" Can Edit":t.accessLevel==="update"?" Can Update":" View Only"}
                            </p>
                            
                            ${t.description?`
                            <p style="color: #666666; margin: 20px 0 10px 0; font-size: 16px; line-height: 1.6;">
                                <strong style="color: #333333;"> Note:</strong><br>
                                ${t.description}
                            </p>
                            `:""}
                            
                            <!-- CTA Button -->
                            <table width="100%" cellpadding="0" cellspacing="0" style="margin: 30px 0;">
                                <tr>
                                    <td align="center">
                                        <a href="${t.joinUrl}" 
                                           style="display: inline-block; background-color: #667eea; color: #ffffff; text-decoration: none; padding: 15px 40px; border-radius: 6px; font-size: 16px; font-weight: 600; box-shadow: 0 4px 6px rgba(102, 126, 234, 0.4);">
                                            Open Document
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            
                            <!-- Alternative Link -->
                            <p style="color: #999999; margin: 30px 0 0 0; font-size: 14px; text-align: center;">
                                Or copy this link: <br>
                                <a href="${t.joinUrl}" style="color: #667eea; word-break: break-all;">
                                    ${t.joinUrl}
                                </a>
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Footer -->
                    <tr>
                        <td style="background-color: #f9f9f9; padding: 20px 30px; text-align: center; border-top: 1px solid #eeeeee;">
                            <p style="color: #999999; margin: 0; font-size: 12px;">
                                Powered by <strong style="color: #667eea;">XPlanB</strong> - Your collaborative workspace
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
  `.trim()}async function tT(t,e){const n=uF(e);try{const r=await Le.post("/email/send",{to:[t],subject:`Folder Shared: ${e.folderName}`,html:n,text:`You've been granted access to the folder "${e.folderName}". Access level: ${e.accessLevel}

Open folder: ${e.joinUrl}`});return console.log(" Folder share email sent successfully",r.data),r.data}catch(r){throw console.error(" Resend error:",r),new Error("Failed to send email via Resend")}}function uF(t){return`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Folder Shared</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 40px 0;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px 30px; text-align: center;">
                            <h1 style="color: #ffffff; margin: 0; font-size: 28px; font-weight: 600;"> Folder Shared</h1>
                        </td>
                    </tr>
                    
                    <!-- Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <h2 style="color: #333333; margin: 0 0 20px 0; font-size: 24px; font-weight: 600;">
                                ${t.folderName}
                            </h2>
                            
                            <p style="color: #666666; margin: 0 0 10px 0; font-size: 16px; line-height: 1.6;">
                                <strong style="color: #333333;"> Shared by:</strong><br>
                                ${t.sharedBy}
                            </p>
                            
                            <p style="color: #666666; margin: 20px 0 10px 0; font-size: 16px; line-height: 1.6;">
                                <strong style="color: #333333;"> Access Level:</strong><br>
                                ${t.accessLevel==="update"?" Can Edit":" View Only"}
                            </p>
                            
                            ${t.description?`
                            <p style="color: #666666; margin: 20px 0 10px 0; font-size: 16px; line-height: 1.6;">
                                <strong style="color: #333333;"> Note:</strong><br>
                                ${t.description}
                            </p>
                            `:""}
                            
                            <!-- CTA Button -->
                            <table width="100%" cellpadding="0" cellspacing="0" style="margin: 30px 0;">
                                <tr>
                                    <td align="center">
                                        <a href="${t.joinUrl}" 
                                           style="display: inline-block; background-color: #667eea; color: #ffffff; text-decoration: none; padding: 15px 40px; border-radius: 6px; font-size: 16px; font-weight: 600; box-shadow: 0 4px 6px rgba(102, 126, 234, 0.4);">
                                            Open Folder
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            
                            <!-- Alternative Link -->
                            <p style="color: #999999; margin: 30px 0 0 0; font-size: 14px; text-align: center;">
                                Or copy this link: <br>
                                <a href="${t.joinUrl}" style="color: #667eea; word-break: break-all;">
                                    ${t.joinUrl}
                                </a>
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Footer -->
                    <tr>
                        <td style="background-color: #f9f9f9; padding: 20px 30px; text-align: center; border-top: 1px solid #eeeeee;">
                            <p style="color: #999999; margin: 0; font-size: 12px;">
                                Powered by <strong style="color: #667eea;">XPlanB</strong> - Your collaborative workspace
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
  `.trim()}async function hF(t,e){const n=fF(e);try{console.log(" Sending password reset email to:",t);const r=await Le.post("/email/send",{to:[t],subject:"Reset Your Password - XPlanB",html:n,text:`You requested to reset your password. Click here: ${e.resetUrl}

This link expires in ${e.expiresIn||"1 hour"}.`});return console.log(" Password reset email sent successfully",r.data),r.data}catch(r){console.error(" Resend error details:",r),console.error(" Response data:",r?.response?.data),console.error(" Response status:",r?.response?.status);const s=r?.response?.data?.message||r?.message||"Failed to send email via Resend";throw new Error(s)}}function fF(t){return`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Your Password</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 40px 0;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <!-- Header -->
                    <tr>
                        <td style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px 30px; text-align: center;">
                            <h1 style="color: #ffffff; margin: 0; font-size: 28px; font-weight: 600;"> Password Reset</h1>
                        </td>
                    </tr>
                    
                    <!-- Content -->
                    <tr>
                        <td style="padding: 40px 30px;">
                            <h2 style="color: #333333; margin: 0 0 20px 0; font-size: 24px; font-weight: 600;">
                                ${t.userName?`Hello ${t.userName},`:"Hello,"}
                            </h2>
                            
                            <p style="color: #666666; margin: 0 0 20px 0; font-size: 16px; line-height: 1.6;">
                                We received a request to reset your password for your XPlanB account. Click the button below to create a new password:
                            </p>
                            
                            <!-- CTA Button -->
                            <table width="100%" cellpadding="0" cellspacing="0" style="margin: 30px 0;">
                                <tr>
                                    <td align="center">
                                        <a href="${t.resetUrl}" 
                                           style="display: inline-block; background-color: #667eea; color: #ffffff; text-decoration: none; padding: 15px 40px; border-radius: 6px; font-size: 16px; font-weight: 600; box-shadow: 0 4px 6px rgba(102, 126, 234, 0.4);">
                                            Reset Password
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            
                            <!-- Alternative Link -->
                            <p style="color: #999999; margin: 30px 0 0 0; font-size: 14px; text-align: center;">
                                Or copy this link: <br>
                                <a href="${t.resetUrl}" style="color: #667eea; word-break: break-all;">
                                    ${t.resetUrl}
                                </a>
                            </p>
                            
                            <p style="color: #666666; margin: 30px 0 10px 0; font-size: 14px; line-height: 1.6;">
                                <strong style="color: #333333;"> Important:</strong> This link will expire in ${t.expiresIn||"1 hour"}. If you didn't request a password reset, please ignore this email or contact support if you have concerns.
                            </p>
                            
                            <p style="color: #666666; margin: 20px 0 0 0; font-size: 14px; line-height: 1.6;">
                                For security reasons, we recommend choosing a strong password that you haven't used before.
                            </p>
                        </td>
                    </tr>
                    
                    <!-- Footer -->
                    <tr>
                        <td style="background-color: #f9f9f9; padding: 20px 30px; text-align: center; border-top: 1px solid #eeeeee;">
                            <p style="color: #999999; margin: 0; font-size: 12px;">
                                Powered by <strong style="color: #667eea;">XPlanB</strong> - Your collaborative workspace
                            </p>
                            <p style="color: #999999; margin: 10px 0 0 0; font-size: 11px;">
                                This is an automated email. Please do not reply to this message.
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
  `.trim()}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mF=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),A_=t=>{const e=mF(t);return e.charAt(0).toUpperCase()+e.slice(1)},nT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...l},u)=>b.createElement("svg",{ref:u,...gF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:nT("lucide",s),...l},[...i.map(([h,f])=>b.createElement(h,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(t,e)=>{const n=b.forwardRef(({className:r,...s},o)=>b.createElement(xF,{ref:o,iconNode:e,className:nT(`lucide-${pF(A_(t))}`,`lucide-${t}`,r),...s}));return n.displayName=A_(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],yF=_e("activity",vF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],wF=_e("arrow-down",bF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Zx=_e("arrow-up",kF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],CF=_e("bell",SF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rT=_e("calendar",_F);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],I_=_e("camera",EF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],N0=_e("chart-column",NF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Pl=_e("check",jF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sT=_e("chevron-down",TF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Cf=_e("chevron-left",MF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hi=_e("chevron-right",OF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],RF=_e("chevron-up",PF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],D_=_e("circle-alert",AF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],L_=_e("circle-check-big",IF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],yd=_e("clock",DF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],oT=_e("copy",LF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],FF=_e("dollar-sign",BF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],zF=_e("download",$F);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],hy=_e("ellipsis-vertical",UF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],WF=_e("eye",HF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],YF=_e("file-down",VF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Xn=_e("file-text",qF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]],B_=_e("folder-input",KF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],un=_e("folder",XF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],JF=_e("heading-1",GF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],ZF=_e("heading-2",QF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],t8=_e("heading-3",e8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v3a1 1 0 0 0 1 1h3",key:"tj5zdr"}],["path",{d:"M21 10v8",key:"1kdml4"}],["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}]],r8=_e("heading-4",n8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Jp=_e("house",s8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],i8=_e("layout-grid",o8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],l8=_e("layout-list",a8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],F_=_e("lightbulb",c8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Rr=_e("loader-circle",d8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],$_=_e("lock",u8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],f8=_e("log-in",h8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],m8=_e("log-out",p8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],iT=_e("mail",g8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Rl=_e("message-square",x8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],y8=_e("mic-off",v8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],j0=_e("mic",b8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],k8=_e("monitor",w8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],aT=_e("moon",S8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],_8=_e("paperclip",C8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],N8=_e("pause",E8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]],T8=_e("phone-off",j8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],O8=_e("play",M8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jd=_e("plus",P8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qf=_e("refresh-cw",R8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],I8=_e("rotate-ccw",A8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fy=_e("save",D8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Qp=_e("search",L8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],T0=_e("send",B8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lT=_e("settings",F8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],py=_e("share-2",$8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],z_=_e("sliders-horizontal",z8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],H8=_e("smile",U8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ii=_e("sparkles",W8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],cT=_e("square-pen",V8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Zf=_e("star",Y8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],K8=_e("sun",q8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],dT=_e("trash-2",X8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Td=_e("trending-up",G8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ev=_e("triangle-alert",J8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],U_=_e("trophy",Q8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],e$=_e("user",Z8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ha=_e("users",t$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],r$=_e("video-off",n$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Zp=_e("video",s$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],i$=_e("volume-2",o$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],l$=_e("wifi-off",a$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],d$=_e("wifi",c$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],us=_e("x",u$);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],f$=_e("zap",h$);function p$({onLogin:t}){const[e,n]=b.useState(""),[r,s]=b.useState(""),[o,i]=b.useState(!1),[l,u]=b.useState(!1),[h,f]=b.useState(""),[m,x]=b.useState(!1),w=Wr(),v=async k=>{if(k.preventDefault(),!e||!r){de.error("Please fill in all fields");return}try{i(!0),await Zj({email:e,password:r}),localStorage.setItem("xplanb_onboarding","true"),de.success("Welcome back!"),t?.(),w("/dashboard",{replace:!0})}catch(C){const _=C?.response?.status,j=C?.response?.data?.message;_===401||_===400?de.error("Incorrect email or password"):de.error(j||"Login failed. Please try again.")}finally{i(!1)}},y=async k=>{if(k.preventDefault(),!h){de.error("Please enter your email address");return}try{x(!0);const C=await sF(h);if(C?.resetUrl&&C?.email)try{await hF(C.email,{resetUrl:C.resetUrl,userName:C.userName,expiresIn:"1 hour"}),de.success("Password reset email sent! Please check your inbox."),u(!1),f("")}catch(_){console.error("Failed to send email via Resend:",_);const j=_?.message||"Failed to send email. Please try again.";de.error(j)}else de.success(C?.message||"If an account with that email exists, a password reset link has been sent."),u(!1),f("")}catch(C){console.error("Password reset error:",C);const _=C?.response?.data?.message||C?.message||"Failed to initiate password reset. Please try again.";de.error(_)}finally{x(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-background px-4",children:c.jsx("div",{className:"w-full max-w-md",children:c.jsxs("div",{className:"bg-white dark:bg-card rounded-xl shadow-lg p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-[24px] mb-2",children:"Welcome back"}),c.jsx("p",{className:"text-muted-foreground text-[14px]",children:"Log in to your XPlanB workspace"})]}),c.jsxs("form",{onSubmit:v,className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"email",children:"Email"}),c.jsx(Ke,{id:"email",type:"email",value:e,onChange:k=>n(k.target.value),className:"mt-1.5 rounded-xl",placeholder:"john@example.com",required:!0})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"password",children:"Password"}),c.jsx(Ke,{id:"password",type:"password",value:r,onChange:k=>s(k.target.value),className:"mt-1.5 rounded-xl",placeholder:"",required:!0})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"button",onClick:()=>u(!0),className:"text-[14px] text-blue-600 hover:underline",children:"Forgot password?"})}),c.jsx(pe,{type:"submit",className:"w-full rounded-xl",disabled:o,children:o?"Signing in...":"Log In"})]}),c.jsxs("p",{className:"text-center mt-6 text-[14px] text-muted-foreground",children:["Don't have an account?"," ",c.jsx(lt,{to:"/signup",className:"text-primary hover:underline",children:"Sign up"})]})]})})}),l&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-card rounded-2xl shadow-2xl max-w-md w-full",children:[c.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[c.jsx("h2",{className:"text-[20px] font-semibold",children:"Reset Password"}),c.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>{u(!1),f("")},className:"rounded-lg",children:c.jsx(us,{className:"w-5 h-5"})})]}),c.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"forgot-email",children:"Email Address"}),c.jsx(Ke,{id:"forgot-email",type:"email",value:h,onChange:k=>f(k.target.value),className:"mt-1.5 rounded-xl",placeholder:"Enter your email",required:!0,autoFocus:!0}),c.jsx("p",{className:"text-[12px] text-muted-foreground mt-2",children:"We'll send you a link to reset your password"})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx(pe,{type:"button",variant:"outline",onClick:()=>{u(!1),f("")},className:"rounded-xl",children:"Cancel"}),c.jsx(pe,{type:"submit",className:"rounded-xl",disabled:m,children:m?"Sending...":"Send Reset Link"})]})]})]})})]})}function m$(){const{token:t}=m0(),e=Wr(),[n,r]=b.useState(""),[s,o]=b.useState(""),[i,l]=b.useState(!1),u=async h=>{if(h.preventDefault(),!n||!s){de.error("Please fill in all fields");return}if(n.length<6){de.error("Password must be at least 6 characters");return}if(n!==s){de.error("Passwords do not match");return}if(!t){de.error("Invalid reset token");return}try{l(!0),await oF(t,n,s),de.success("Password reset successfully! Redirecting to login..."),setTimeout(()=>{e("/login",{replace:!0})},2e3)}catch(f){de.error(f?.response?.data?.message||"Failed to reset password. The link may have expired.")}finally{l(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-background px-4",children:c.jsx("div",{className:"w-full max-w-md",children:c.jsxs("div",{className:"bg-white dark:bg-card rounded-xl shadow-lg p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-[24px] mb-2",children:"Reset Your Password"}),c.jsx("p",{className:"text-muted-foreground text-[14px]",children:"Enter your new password below"})]}),c.jsxs("form",{onSubmit:u,className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"password",children:"New Password"}),c.jsx(Ke,{id:"password",type:"password",value:n,onChange:h=>r(h.target.value),className:"mt-1.5 rounded-xl",placeholder:"",required:!0,minLength:6,autoFocus:!0}),c.jsx("p",{className:"text-[12px] text-muted-foreground mt-1",children:"Must be at least 6 characters"})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"confirmPassword",children:"Confirm New Password"}),c.jsx(Ke,{id:"confirmPassword",type:"password",value:s,onChange:h=>o(h.target.value),className:"mt-1.5 rounded-xl",placeholder:"",required:!0,minLength:6})]}),c.jsx(pe,{type:"submit",className:"w-full rounded-xl",disabled:i,children:i?"Resetting...":"Reset Password"})]}),c.jsxs("p",{className:"text-center mt-6 text-[14px] text-muted-foreground",children:["Remember your password?"," ",c.jsx(lt,{to:"/login",className:"text-primary hover:underline",children:"Log in"})]})]})})})}function g$(){return eT()?c.jsx(aj,{}):c.jsx(ty,{to:"/login",replace:!0})}const x$=[{name:"Home",href:"/dashboard",icon:Jp},{name:"Folders",href:"/folders",icon:un},{name:"Analytics",href:"/analytics",icon:N0},{name:"Calendar",href:"/calendar",icon:rT},{name:"Meetings",href:"/meetings",icon:Zp},{name:"Chat",href:"/chat",icon:Rl},{name:"AI Assistant",href:"/ai-assistant",icon:ii}];function v$({isOpen:t,onToggle:e,onShowPomodoro:n}){const r=Us();return c.jsxs(c.Fragment,{children:[t&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-20 lg:hidden",onClick:e}),c.jsxs("aside",{className:He("fixed lg:static inset-y-0 left-0 z-30 flex flex-col bg-white dark:bg-card border-r border-border transition-all duration-300",t?"w-64":"w-0 lg:w-16"),children:[c.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-border",children:[t&&c.jsxs(lt,{to:"/dashboard",className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"text-white",children:"X"})}),c.jsx("span",{className:"text-[18px]",children:"XPlanB"})]}),c.jsx(pe,{variant:"ghost",size:"icon",onClick:e,className:"rounded-xl",children:c.jsx(Cf,{className:He("w-5 h-5 transition-transform",!t&&"rotate-180")})})]}),c.jsx("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1",children:x$.map(s=>{const o=r.pathname===s.href||r.pathname.startsWith(s.href+"/");return c.jsxs(lt,{to:s.href,className:He("flex items-center px-3 py-2.5 rounded-xl transition-colors group",o?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[c.jsx(s.icon,{className:"w-5 h-5 flex-shrink-0"}),t&&c.jsx("span",{className:"ml-3",children:s.name})]},s.name)})})]})]})}const y$=en.replace("/api",""),Gi=gt.create({baseURL:y$,headers:{"Content-Type":"application/json"}});Gi.interceptors.request.use(t=>{const e=localStorage.getItem(On);return e&&(t.headers.Authorization=`Bearer ${e}`),t});const H_={getAll:()=>Gi.get("/notifications").then(t=>t.data),getUnread:()=>Gi.get("/notifications",{params:{read:"false"}}).then(t=>t.data),getUnreadCount:()=>Gi.get("/notifications/unread/count").then(t=>t.data),markAsRead:t=>Gi.put(`/notifications/${t}/read`).then(()=>{}),markAllAsRead:()=>Gi.put("/notifications/mark-all-read").then(()=>{}),delete:t=>Gi.delete(`/notifications/${t}`).then(()=>{})};function Ce(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function b$(t,e){const n=b.createContext(e),r=o=>{const{children:i,...l}=o,u=b.useMemo(()=>l,Object.values(l));return c.jsx(n.Provider,{value:u,children:i})};r.displayName=t+"Provider";function s(o){const i=b.useContext(n);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,s]}function nr(t,e=[]){let n=[];function r(o,i){const l=b.createContext(i),u=n.length;n=[...n,i];const h=m=>{const{scope:x,children:w,...v}=m,y=x?.[t]?.[u]||l,k=b.useMemo(()=>v,Object.values(v));return c.jsx(y.Provider,{value:k,children:w})};h.displayName=o+"Provider";function f(m,x){const w=x?.[t]?.[u]||l,v=b.useContext(w);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[h,f]}const s=()=>{const o=n.map(i=>b.createContext(i));return function(l){const u=l?.[t]||o;return b.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return s.scopeName=t,[r,w$(s,...e)]}function w$(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((l,{useScope:u,scopeName:h})=>{const m=u(o)[`__scope${h}`];return{...l,...m}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var Vt=globalThis?.document?b.useLayoutEffect:()=>{},k$=JN[" useInsertionEffect ".trim().toString()]||Vt;function go({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,o,i]=S$({defaultProp:e,onChange:n}),l=t!==void 0,u=l?t:s;{const f=b.useRef(t!==void 0);b.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=b.useCallback(f=>{if(l){const m=C$(f)?f(t):f;m!==t&&i.current?.(m)}else o(f)},[l,t,o,i]);return[u,h]}function S$({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),s=b.useRef(n),o=b.useRef(e);return k$(()=>{o.current=e},[e]),b.useEffect(()=>{s.current!==n&&(o.current?.(n),s.current=n)},[n,s]),[n,r,o]}function C$(t){return typeof t=="function"}function M0(t){const e=t+"CollectionProvider",[n,r]=nr(e),[s,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=y=>{const{scope:k,children:C}=y,_=be.useRef(null),j=be.useRef(new Map).current;return c.jsx(s,{scope:k,itemMap:j,collectionRef:_,children:C})};i.displayName=e;const l=t+"CollectionSlot",u=gi(l),h=be.forwardRef((y,k)=>{const{scope:C,children:_}=y,j=o(l,C),M=Xe(k,j.collectionRef);return c.jsx(u,{ref:M,children:_})});h.displayName=l;const f=t+"CollectionItemSlot",m="data-radix-collection-item",x=gi(f),w=be.forwardRef((y,k)=>{const{scope:C,children:_,...j}=y,M=be.useRef(null),O=Xe(k,M),T=o(f,C);return be.useEffect(()=>(T.itemMap.set(M,{ref:M,...j}),()=>void T.itemMap.delete(M))),c.jsx(x,{[m]:"",ref:O,children:_})});w.displayName=f;function v(y){const k=o(t+"CollectionConsumer",y);return be.useCallback(()=>{const _=k.collectionRef.current;if(!_)return[];const j=Array.from(_.querySelectorAll(`[${m}]`));return Array.from(k.itemMap.values()).sort((T,I)=>j.indexOf(T.ref.current)-j.indexOf(I.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:i,Slot:h,ItemSlot:w},v,r]}var _$=b.createContext(void 0);function cu(t){const e=b.useContext(_$);return t||e||"ltr"}function hn(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>e.current?.(...n),[])}function E$(t,e=globalThis?.document){const n=hn(t);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var N$="DismissableLayer",my="dismissableLayer.update",j$="dismissableLayer.pointerDownOutside",T$="dismissableLayer.focusOutside",W_,uT=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),du=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...u}=t,h=b.useContext(uT),[f,m]=b.useState(null),x=f?.ownerDocument??globalThis?.document,[,w]=b.useState({}),v=Xe(e,I=>m(I)),y=Array.from(h.layers),[k]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=y.indexOf(k),_=f?y.indexOf(f):-1,j=h.layersWithOutsidePointerEventsDisabled.size>0,M=_>=C,O=P$(I=>{const A=I.target,F=[...h.branches].some(U=>U.contains(A));!M||F||(s?.(I),i?.(I),I.defaultPrevented||l?.())},x),T=R$(I=>{const A=I.target;[...h.branches].some(U=>U.contains(A))||(o?.(I),i?.(I),I.defaultPrevented||l?.())},x);return E$(I=>{_===h.layers.size-1&&(r?.(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},x),b.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(W_=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),V_(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=W_)}},[f,x,n,h]),b.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),V_())},[f,h]),b.useEffect(()=>{const I=()=>w({});return document.addEventListener(my,I),()=>document.removeEventListener(my,I)},[]),c.jsx(Ae.div,{...u,ref:v,style:{pointerEvents:j?M?"auto":"none":void 0,...t.style},onFocusCapture:Ce(t.onFocusCapture,T.onFocusCapture),onBlurCapture:Ce(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Ce(t.onPointerDownCapture,O.onPointerDownCapture)})});du.displayName=N$;var M$="DismissableLayerBranch",O$=b.forwardRef((t,e)=>{const n=b.useContext(uT),r=b.useRef(null),s=Xe(e,r);return b.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),c.jsx(Ae.div,{...t,ref:s})});O$.displayName=M$;function P$(t,e=globalThis?.document){const n=hn(t),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let u=function(){hT(j$,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function R$(t,e=globalThis?.document){const n=hn(t),r=b.useRef(!1);return b.useEffect(()=>{const s=o=>{o.target&&!r.current&&hT(T$,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function V_(){const t=new CustomEvent(my);document.dispatchEvent(t)}function hT(t,e,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Nj(s,o):s.dispatchEvent(o)}var tv=0;function em(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Y_()),document.body.insertAdjacentElement("beforeend",t[1]??Y_()),tv++,()=>{tv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tv--}},[])}function Y_(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var nv="focusScope.autoFocusOnMount",rv="focusScope.autoFocusOnUnmount",q_={bubbles:!1,cancelable:!0},A$="FocusScope",uu=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=t,[l,u]=b.useState(null),h=hn(s),f=hn(o),m=b.useRef(null),x=Xe(e,y=>u(y)),w=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let y=function(j){if(w.paused||!l)return;const M=j.target;l.contains(M)?m.current=M:Jo(m.current,{select:!0})},k=function(j){if(w.paused||!l)return;const M=j.relatedTarget;M!==null&&(l.contains(M)||Jo(m.current,{select:!0}))},C=function(j){if(document.activeElement===document.body)for(const O of j)O.removedNodes.length>0&&Jo(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",k);const _=new MutationObserver(C);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",k),_.disconnect()}}},[r,l,w.paused]),b.useEffect(()=>{if(l){X_.add(w);const y=document.activeElement;if(!l.contains(y)){const C=new CustomEvent(nv,q_);l.addEventListener(nv,h),l.dispatchEvent(C),C.defaultPrevented||(I$($$(fT(l)),{select:!0}),document.activeElement===y&&Jo(l))}return()=>{l.removeEventListener(nv,h),setTimeout(()=>{const C=new CustomEvent(rv,q_);l.addEventListener(rv,f),l.dispatchEvent(C),C.defaultPrevented||Jo(y??document.body,{select:!0}),l.removeEventListener(rv,f),X_.remove(w)},0)}}},[l,h,f,w]);const v=b.useCallback(y=>{if(!n&&!r||w.paused)return;const k=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,C=document.activeElement;if(k&&C){const _=y.currentTarget,[j,M]=D$(_);j&&M?!y.shiftKey&&C===M?(y.preventDefault(),n&&Jo(j,{select:!0})):y.shiftKey&&C===j&&(y.preventDefault(),n&&Jo(M,{select:!0})):C===_&&y.preventDefault()}},[n,r,w.paused]);return c.jsx(Ae.div,{tabIndex:-1,...i,ref:x,onKeyDown:v})});uu.displayName=A$;function I$(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Jo(r,{select:e}),document.activeElement!==n)return}function D$(t){const e=fT(t),n=K_(e,t),r=K_(e.reverse(),t);return[n,r]}function fT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function K_(t,e){for(const n of t)if(!L$(n,{upTo:e}))return n}function L$(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function B$(t){return t instanceof HTMLInputElement&&"select"in t}function Jo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&B$(t)&&e&&t.select()}}var X_=F$();function F$(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=G_(t,e),t.unshift(e)},remove(e){t=G_(t,e),t[0]?.resume()}}}function G_(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function $$(t){return t.filter(e=>e.tagName!=="A")}var z$=JN[" useId ".trim().toString()]||(()=>{}),U$=0;function os(t){const[e,n]=b.useState(z$());return Vt(()=>{n(r=>r??String(U$++))},[t]),t||(e?`radix-${e}`:"")}const H$=["top","right","bottom","left"],xi=Math.min,pr=Math.max,ep=Math.round,Uh=Math.floor,Ps=t=>({x:t,y:t}),W$={left:"right",right:"left",bottom:"top",top:"bottom"},V$={start:"end",end:"start"};function gy(t,e,n){return pr(t,xi(e,n))}function xo(t,e){return typeof t=="function"?t(e):t}function vo(t){return t.split("-")[0]}function ec(t){return t.split("-")[1]}function O0(t){return t==="x"?"y":"x"}function P0(t){return t==="y"?"height":"width"}const Y$=new Set(["top","bottom"]);function Ts(t){return Y$.has(vo(t))?"y":"x"}function R0(t){return O0(Ts(t))}function q$(t,e,n){n===void 0&&(n=!1);const r=ec(t),s=R0(t),o=P0(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=tp(i)),[i,tp(i)]}function K$(t){const e=tp(t);return[xy(t),e,xy(e)]}function xy(t){return t.replace(/start|end/g,e=>V$[e])}const J_=["left","right"],Q_=["right","left"],X$=["top","bottom"],G$=["bottom","top"];function J$(t,e,n){switch(t){case"top":case"bottom":return n?e?Q_:J_:e?J_:Q_;case"left":case"right":return e?X$:G$;default:return[]}}function Q$(t,e,n,r){const s=ec(t);let o=J$(vo(t),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(xy)))),o}function tp(t){return t.replace(/left|right|bottom|top/g,e=>W$[e])}function Z$(t){return{top:0,right:0,bottom:0,left:0,...t}}function pT(t){return typeof t!="number"?Z$(t):{top:t,right:t,bottom:t,left:t}}function np(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Z_(t,e,n){let{reference:r,floating:s}=t;const o=Ts(e),i=R0(e),l=P0(i),u=vo(e),h=o==="y",f=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,x=r[l]/2-s[l]/2;let w;switch(u){case"top":w={x:f,y:r.y-s.height};break;case"bottom":w={x:f,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:m};break;case"left":w={x:r.x-s.width,y:m};break;default:w={x:r.x,y:r.y}}switch(ec(e)){case"start":w[i]-=x*(n&&h?-1:1);break;case"end":w[i]+=x*(n&&h?-1:1);break}return w}const e9=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),u=await(i.isRTL==null?void 0:i.isRTL(e));let h=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:f,y:m}=Z_(h,r,u),x=r,w={},v=0;for(let y=0;y<l.length;y++){const{name:k,fn:C}=l[y],{x:_,y:j,data:M,reset:O}=await C({x:f,y:m,initialPlacement:r,placement:x,strategy:s,middlewareData:w,rects:h,platform:i,elements:{reference:t,floating:e}});f=_??f,m=j??m,w={...w,[k]:{...w[k],...M}},O&&v<=50&&(v++,typeof O=="object"&&(O.placement&&(x=O.placement),O.rects&&(h=O.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:f,y:m}=Z_(h,x,u)),y=-1)}return{x:f,y:m,placement:x,strategy:s,middlewareData:w}};async function Md(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:i,elements:l,strategy:u}=t,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:x=!1,padding:w=0}=xo(e,t),v=pT(w),k=l[x?m==="floating"?"reference":"floating":m],C=np(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(k)))==null||n?k:k.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:u})),_=m==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),M=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},O=np(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:j,strategy:u}):_);return{top:(C.top-O.top+v.top)/M.y,bottom:(O.bottom-C.bottom+v.bottom)/M.y,left:(C.left-O.left+v.left)/M.x,right:(O.right-C.right+v.right)/M.x}}const t9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:i,elements:l,middlewareData:u}=e,{element:h,padding:f=0}=xo(t,e)||{};if(h==null)return{};const m=pT(f),x={x:n,y:r},w=R0(s),v=P0(w),y=await i.getDimensions(h),k=w==="y",C=k?"top":"left",_=k?"bottom":"right",j=k?"clientHeight":"clientWidth",M=o.reference[v]+o.reference[w]-x[w]-o.floating[v],O=x[w]-o.reference[w],T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(h));let I=T?T[j]:0;(!I||!await(i.isElement==null?void 0:i.isElement(T)))&&(I=l.floating[j]||o.floating[v]);const A=M/2-O/2,F=I/2-y[v]/2-1,U=xi(m[C],F),W=xi(m[_],F),Z=U,oe=I-y[v]-W,ee=I/2-y[v]/2+A,re=gy(Z,ee,oe),J=!u.arrow&&ec(s)!=null&&ee!==re&&o.reference[v]/2-(ee<Z?U:W)-y[v]/2<0,z=J?ee<Z?ee-Z:ee-oe:0;return{[w]:x[w]+z,data:{[w]:re,centerOffset:ee-re-z,...J&&{alignmentOffset:z}},reset:J}}}),n9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:l,platform:u,elements:h}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:x,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...k}=xo(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const C=vo(s),_=Ts(l),j=vo(l)===l,M=await(u.isRTL==null?void 0:u.isRTL(h.floating)),O=x||(j||!y?[tp(l)]:K$(l)),T=v!=="none";!x&&T&&O.push(...Q$(l,y,v,M));const I=[l,...O],A=await Md(e,k),F=[];let U=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&F.push(A[C]),m){const ee=q$(s,i,M);F.push(A[ee[0]],A[ee[1]])}if(U=[...U,{placement:s,overflows:F}],!F.every(ee=>ee<=0)){var W,Z;const ee=(((W=o.flip)==null?void 0:W.index)||0)+1,re=I[ee];if(re&&(!(m==="alignment"?_!==Ts(re):!1)||U.every(R=>Ts(R.placement)===_?R.overflows[0]>0:!0)))return{data:{index:ee,overflows:U},reset:{placement:re}};let J=(Z=U.filter(z=>z.overflows[0]<=0).sort((z,R)=>z.overflows[1]-R.overflows[1])[0])==null?void 0:Z.placement;if(!J)switch(w){case"bestFit":{var oe;const z=(oe=U.filter(R=>{if(T){const D=Ts(R.placement);return D===_||D==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(D=>D>0).reduce((D,G)=>D+G,0)]).sort((R,D)=>R[1]-D[1])[0])==null?void 0:oe[0];z&&(J=z);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function e2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function t2(t){return H$.some(e=>t[e]>=0)}const r9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=xo(t,e);switch(r){case"referenceHidden":{const o=await Md(e,{...s,elementContext:"reference"}),i=e2(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:t2(i)}}}case"escaped":{const o=await Md(e,{...s,altBoundary:!0}),i=e2(o,n.floating);return{data:{escapedOffsets:i,escaped:t2(i)}}}default:return{}}}}},mT=new Set(["left","top"]);async function s9(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=vo(n),l=ec(n),u=Ts(n)==="y",h=mT.has(i)?-1:1,f=o&&u?-1:1,m=xo(e,t);let{mainAxis:x,crossAxis:w,alignmentAxis:v}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof v=="number"&&(w=l==="end"?v*-1:v),u?{x:w*f,y:x*h}:{x:x*h,y:w*f}}const o9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:i,middlewareData:l}=e,u=await s9(e,t);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:o+u.y,data:{...u,placement:i}}}}},i9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:k=>{let{x:C,y:_}=k;return{x:C,y:_}}},...u}=xo(t,e),h={x:n,y:r},f=await Md(e,u),m=Ts(vo(s)),x=O0(m);let w=h[x],v=h[m];if(o){const k=x==="y"?"top":"left",C=x==="y"?"bottom":"right",_=w+f[k],j=w-f[C];w=gy(_,w,j)}if(i){const k=m==="y"?"top":"left",C=m==="y"?"bottom":"right",_=v+f[k],j=v-f[C];v=gy(_,v,j)}const y=l.fn({...e,[x]:w,[m]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[x]:o,[m]:i}}}}}},a9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=e,{offset:l=0,mainAxis:u=!0,crossAxis:h=!0}=xo(t,e),f={x:n,y:r},m=Ts(s),x=O0(m);let w=f[x],v=f[m];const y=xo(l,e),k=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(u){const j=x==="y"?"height":"width",M=o.reference[x]-o.floating[j]+k.mainAxis,O=o.reference[x]+o.reference[j]-k.mainAxis;w<M?w=M:w>O&&(w=O)}if(h){var C,_;const j=x==="y"?"width":"height",M=mT.has(vo(s)),O=o.reference[m]-o.floating[j]+(M&&((C=i.offset)==null?void 0:C[m])||0)+(M?0:k.crossAxis),T=o.reference[m]+o.reference[j]+(M?0:((_=i.offset)==null?void 0:_[m])||0)-(M?k.crossAxis:0);v<O?v=O:v>T&&(v=T)}return{[x]:w,[m]:v}}}},l9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:i,elements:l}=e,{apply:u=()=>{},...h}=xo(t,e),f=await Md(e,h),m=vo(s),x=ec(s),w=Ts(s)==="y",{width:v,height:y}=o.floating;let k,C;m==="top"||m==="bottom"?(k=m,C=x===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(C=m,k=x==="end"?"top":"bottom");const _=y-f.top-f.bottom,j=v-f.left-f.right,M=xi(y-f[k],_),O=xi(v-f[C],j),T=!e.middlewareData.shift;let I=M,A=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=j),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=_),T&&!x){const U=pr(f.left,0),W=pr(f.right,0),Z=pr(f.top,0),oe=pr(f.bottom,0);w?A=v-2*(U!==0||W!==0?U+W:pr(f.left,f.right)):I=y-2*(Z!==0||oe!==0?Z+oe:pr(f.top,f.bottom))}await u({...e,availableWidth:A,availableHeight:I});const F=await i.getDimensions(l.floating);return v!==F.width||y!==F.height?{reset:{rects:!0}}:{}}}};function tm(){return typeof window<"u"}function tc(t){return gT(t)?(t.nodeName||"").toLowerCase():"#document"}function vr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Hs(t){var e;return(e=(gT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function gT(t){return tm()?t instanceof Node||t instanceof vr(t).Node:!1}function as(t){return tm()?t instanceof Element||t instanceof vr(t).Element:!1}function Ls(t){return tm()?t instanceof HTMLElement||t instanceof vr(t).HTMLElement:!1}function n2(t){return!tm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vr(t).ShadowRoot}const c9=new Set(["inline","contents"]);function hu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ls(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!c9.has(s)}const d9=new Set(["table","td","th"]);function u9(t){return d9.has(tc(t))}const h9=[":popover-open",":modal"];function nm(t){return h9.some(e=>{try{return t.matches(e)}catch{return!1}})}const f9=["transform","translate","scale","rotate","perspective"],p9=["transform","translate","scale","rotate","perspective","filter"],m9=["paint","layout","strict","content"];function A0(t){const e=I0(),n=as(t)?ls(t):t;return f9.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||p9.some(r=>(n.willChange||"").includes(r))||m9.some(r=>(n.contain||"").includes(r))}function g9(t){let e=vi(t);for(;Ls(e)&&!Al(e);){if(A0(e))return e;if(nm(e))return null;e=vi(e)}return null}function I0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const x9=new Set(["html","body","#document"]);function Al(t){return x9.has(tc(t))}function ls(t){return vr(t).getComputedStyle(t)}function rm(t){return as(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function vi(t){if(tc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||n2(t)&&t.host||Hs(t);return n2(e)?e.host:e}function xT(t){const e=vi(t);return Al(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ls(e)&&hu(e)?e:xT(e)}function Od(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=xT(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),i=vr(s);if(o){const l=vy(i);return e.concat(i,i.visualViewport||[],hu(s)?s:[],l&&n?Od(l):[])}return e.concat(s,Od(s,[],n))}function vy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function vT(t){const e=ls(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ls(t),o=s?t.offsetWidth:n,i=s?t.offsetHeight:r,l=ep(n)!==o||ep(r)!==i;return l&&(n=o,r=i),{width:n,height:r,$:l}}function D0(t){return as(t)?t:t.contextElement}function bl(t){const e=D0(t);if(!Ls(e))return Ps(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=vT(e);let i=(o?ep(n.width):n.width)/r,l=(o?ep(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const v9=Ps(0);function yT(t){const e=vr(t);return!I0()||!e.visualViewport?v9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function y9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==vr(t)?!1:e}function fa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=D0(t);let i=Ps(1);e&&(r?as(r)&&(i=bl(r)):i=bl(t));const l=y9(o,n,r)?yT(o):Ps(0);let u=(s.left+l.x)/i.x,h=(s.top+l.y)/i.y,f=s.width/i.x,m=s.height/i.y;if(o){const x=vr(o),w=r&&as(r)?vr(r):r;let v=x,y=vy(v);for(;y&&r&&w!==v;){const k=bl(y),C=y.getBoundingClientRect(),_=ls(y),j=C.left+(y.clientLeft+parseFloat(_.paddingLeft))*k.x,M=C.top+(y.clientTop+parseFloat(_.paddingTop))*k.y;u*=k.x,h*=k.y,f*=k.x,m*=k.y,u+=j,h+=M,v=vr(y),y=vy(v)}}return np({width:f,height:m,x:u,y:h})}function sm(t,e){const n=rm(t).scrollLeft;return e?e.left+n:fa(Hs(t)).left+n}function bT(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-sm(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function b9(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",i=Hs(r),l=e?nm(e.floating):!1;if(r===i||l&&o)return n;let u={scrollLeft:0,scrollTop:0},h=Ps(1);const f=Ps(0),m=Ls(r);if((m||!m&&!o)&&((tc(r)!=="body"||hu(i))&&(u=rm(r)),Ls(r))){const w=fa(r);h=bl(r),f.x=w.x+r.clientLeft,f.y=w.y+r.clientTop}const x=i&&!m&&!o?bT(i,u):Ps(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+f.x+x.x,y:n.y*h.y-u.scrollTop*h.y+f.y+x.y}}function w9(t){return Array.from(t.getClientRects())}function k9(t){const e=Hs(t),n=rm(t),r=t.ownerDocument.body,s=pr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=pr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+sm(t);const l=-n.scrollTop;return ls(r).direction==="rtl"&&(i+=pr(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:l}}const r2=25;function S9(t,e){const n=vr(t),r=Hs(t),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,l=0,u=0;if(s){o=s.width,i=s.height;const f=I0();(!f||f&&e==="fixed")&&(l=s.offsetLeft,u=s.offsetTop)}const h=sm(r);if(h<=0){const f=r.ownerDocument,m=f.body,x=getComputedStyle(m),w=f.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,v=Math.abs(r.clientWidth-m.clientWidth-w);v<=r2&&(o-=v)}else h<=r2&&(o+=h);return{width:o,height:i,x:l,y:u}}const C9=new Set(["absolute","fixed"]);function _9(t,e){const n=fa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=Ls(t)?bl(t):Ps(1),i=t.clientWidth*o.x,l=t.clientHeight*o.y,u=s*o.x,h=r*o.y;return{width:i,height:l,x:u,y:h}}function s2(t,e,n){let r;if(e==="viewport")r=S9(t,n);else if(e==="document")r=k9(Hs(t));else if(as(e))r=_9(e,n);else{const s=yT(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return np(r)}function wT(t,e){const n=vi(t);return n===e||!as(n)||Al(n)?!1:ls(n).position==="fixed"||wT(n,e)}function E9(t,e){const n=e.get(t);if(n)return n;let r=Od(t,[],!1).filter(l=>as(l)&&tc(l)!=="body"),s=null;const o=ls(t).position==="fixed";let i=o?vi(t):t;for(;as(i)&&!Al(i);){const l=ls(i),u=A0(i);!u&&l.position==="fixed"&&(s=null),(o?!u&&!s:!u&&l.position==="static"&&!!s&&C9.has(s.position)||hu(i)&&!u&&wT(t,i))?r=r.filter(f=>f!==i):s=l,i=vi(i)}return e.set(t,r),r}function N9(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const i=[...n==="clippingAncestors"?nm(e)?[]:E9(e,this._c):[].concat(n),r],l=i[0],u=i.reduce((h,f)=>{const m=s2(e,f,s);return h.top=pr(m.top,h.top),h.right=xi(m.right,h.right),h.bottom=xi(m.bottom,h.bottom),h.left=pr(m.left,h.left),h},s2(e,l,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function j9(t){const{width:e,height:n}=vT(t);return{width:e,height:n}}function T9(t,e,n){const r=Ls(e),s=Hs(e),o=n==="fixed",i=fa(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const u=Ps(0);function h(){u.x=sm(s)}if(r||!r&&!o)if((tc(e)!=="body"||hu(s))&&(l=rm(e)),r){const w=fa(e,!0,o,e);u.x=w.x+e.clientLeft,u.y=w.y+e.clientTop}else s&&h();o&&!r&&s&&h();const f=s&&!r&&!o?bT(s,l):Ps(0),m=i.left+l.scrollLeft-u.x-f.x,x=i.top+l.scrollTop-u.y-f.y;return{x:m,y:x,width:i.width,height:i.height}}function sv(t){return ls(t).position==="static"}function o2(t,e){if(!Ls(t)||ls(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Hs(t)===n&&(n=n.ownerDocument.body),n}function kT(t,e){const n=vr(t);if(nm(t))return n;if(!Ls(t)){let s=vi(t);for(;s&&!Al(s);){if(as(s)&&!sv(s))return s;s=vi(s)}return n}let r=o2(t,e);for(;r&&u9(r)&&sv(r);)r=o2(r,e);return r&&Al(r)&&sv(r)&&!A0(r)?n:r||g9(t)||n}const M9=async function(t){const e=this.getOffsetParent||kT,n=this.getDimensions,r=await n(t.floating);return{reference:T9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function O9(t){return ls(t).direction==="rtl"}const P9={convertOffsetParentRelativeRectToViewportRelativeRect:b9,getDocumentElement:Hs,getClippingRect:N9,getOffsetParent:kT,getElementRects:M9,getClientRects:w9,getDimensions:j9,getScale:bl,isElement:as,isRTL:O9};function ST(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function R9(t,e){let n=null,r;const s=Hs(t);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),o();const h=t.getBoundingClientRect(),{left:f,top:m,width:x,height:w}=h;if(l||e(),!x||!w)return;const v=Uh(m),y=Uh(s.clientWidth-(f+x)),k=Uh(s.clientHeight-(m+w)),C=Uh(f),j={rootMargin:-v+"px "+-y+"px "+-k+"px "+-C+"px",threshold:pr(0,xi(1,u))||1};let M=!0;function O(T){const I=T[0].intersectionRatio;if(I!==u){if(!M)return i();I?i(!1,I):r=setTimeout(()=>{i(!1,1e-7)},1e3)}I===1&&!ST(h,t.getBoundingClientRect())&&i(),M=!1}try{n=new IntersectionObserver(O,{...j,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,j)}n.observe(t)}return i(!0),o}function A9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=D0(t),f=s||o?[...h?Od(h):[],...Od(e)]:[];f.forEach(C=>{s&&C.addEventListener("scroll",n,{passive:!0}),o&&C.addEventListener("resize",n)});const m=h&&l?R9(h,n):null;let x=-1,w=null;i&&(w=new ResizeObserver(C=>{let[_]=C;_&&_.target===h&&w&&(w.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var j;(j=w)==null||j.observe(e)})),n()}),h&&!u&&w.observe(h),w.observe(e));let v,y=u?fa(t):null;u&&k();function k(){const C=fa(t);y&&!ST(y,C)&&n(),y=C,v=requestAnimationFrame(k)}return n(),()=>{var C;f.forEach(_=>{s&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),m?.(),(C=w)==null||C.disconnect(),w=null,u&&cancelAnimationFrame(v)}}const I9=o9,D9=i9,L9=n9,B9=l9,F9=r9,i2=t9,$9=a9,z9=(t,e,n)=>{const r=new Map,s={platform:P9,...n},o={...s.platform,_c:r};return e9(t,e,{...s,platform:o})};var U9=typeof document<"u",H9=function(){},_f=U9?b.useLayoutEffect:H9;function rp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!rp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!rp(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function CT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function a2(t,e){const n=CT(t);return Math.round(e*n)/n}function ov(t){const e=b.useRef(t);return _f(()=>{e.current=t}),e}function W9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:u,open:h}=t,[f,m]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[x,w]=b.useState(r);rp(x,r)||w(r);const[v,y]=b.useState(null),[k,C]=b.useState(null),_=b.useCallback(R=>{R!==T.current&&(T.current=R,y(R))},[]),j=b.useCallback(R=>{R!==I.current&&(I.current=R,C(R))},[]),M=o||v,O=i||k,T=b.useRef(null),I=b.useRef(null),A=b.useRef(f),F=u!=null,U=ov(u),W=ov(s),Z=ov(h),oe=b.useCallback(()=>{if(!T.current||!I.current)return;const R={placement:e,strategy:n,middleware:x};W.current&&(R.platform=W.current),z9(T.current,I.current,R).then(D=>{const G={...D,isPositioned:Z.current!==!1};ee.current&&!rp(A.current,G)&&(A.current=G,su.flushSync(()=>{m(G)}))})},[x,e,n,W,Z]);_f(()=>{h===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,m(R=>({...R,isPositioned:!1})))},[h]);const ee=b.useRef(!1);_f(()=>(ee.current=!0,()=>{ee.current=!1}),[]),_f(()=>{if(M&&(T.current=M),O&&(I.current=O),M&&O){if(U.current)return U.current(M,O,oe);oe()}},[M,O,oe,U,F]);const re=b.useMemo(()=>({reference:T,floating:I,setReference:_,setFloating:j}),[_,j]),J=b.useMemo(()=>({reference:M,floating:O}),[M,O]),z=b.useMemo(()=>{const R={position:n,left:0,top:0};if(!J.floating)return R;const D=a2(J.floating,f.x),G=a2(J.floating,f.y);return l?{...R,transform:"translate("+D+"px, "+G+"px)",...CT(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:G}},[n,l,J.floating,f.x,f.y]);return b.useMemo(()=>({...f,update:oe,refs:re,elements:J,floatingStyles:z}),[f,oe,re,J,z])}const V9=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?i2({element:r.current,padding:s}).fn(n):{}:r?i2({element:r,padding:s}).fn(n):{}}}},Y9=(t,e)=>({...I9(t),options:[t,e]}),q9=(t,e)=>({...D9(t),options:[t,e]}),K9=(t,e)=>({...$9(t),options:[t,e]}),X9=(t,e)=>({...L9(t),options:[t,e]}),G9=(t,e)=>({...B9(t),options:[t,e]}),J9=(t,e)=>({...F9(t),options:[t,e]}),Q9=(t,e)=>({...V9(t),options:[t,e]});var Z9="Arrow",_T=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return c.jsx(Ae.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});_T.displayName=Z9;var e7=_T;function L0(t){const[e,n]=b.useState(void 0);return Vt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,l;if("borderBoxSize"in o){const u=o.borderBoxSize,h=Array.isArray(u)?u[0]:u;i=h.inlineSize,l=h.blockSize}else i=t.offsetWidth,l=t.offsetHeight;n({width:i,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var B0="Popper",[ET,nc]=nr(B0),[t7,NT]=ET(B0),jT=t=>{const{__scopePopper:e,children:n}=t,[r,s]=b.useState(null);return c.jsx(t7,{scope:e,anchor:r,onAnchorChange:s,children:n})};jT.displayName=B0;var TT="PopperAnchor",MT=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=NT(TT,n),i=b.useRef(null),l=Xe(e,i),u=b.useRef(null);return b.useEffect(()=>{const h=u.current;u.current=r?.current||i.current,h!==u.current&&o.onAnchorChange(u.current)}),r?null:c.jsx(Ae.div,{...s,ref:l})});MT.displayName=TT;var F0="PopperContent",[n7,r7]=ET(F0),OT=b.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:x=!1,updatePositionStrategy:w="optimized",onPlaced:v,...y}=t,k=NT(F0,n),[C,_]=b.useState(null),j=Xe(e,B=>_(B)),[M,O]=b.useState(null),T=L0(M),I=T?.width??0,A=T?.height??0,F=r+(o!=="center"?"-"+o:""),U=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},W=Array.isArray(h)?h:[h],Z=W.length>0,oe={padding:U,boundary:W.filter(o7),altBoundary:Z},{refs:ee,floatingStyles:re,placement:J,isPositioned:z,middlewareData:R}=W9({strategy:"fixed",placement:F,whileElementsMounted:(...B)=>A9(...B,{animationFrame:w==="always"}),elements:{reference:k.anchor},middleware:[Y9({mainAxis:s+A,alignmentAxis:i}),u&&q9({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?K9():void 0,...oe}),u&&X9({...oe}),G9({...oe,apply:({elements:B,rects:K,availableWidth:q,availableHeight:se})=>{const{width:he,height:ae}=K.reference,ge=B.floating.style;ge.setProperty("--radix-popper-available-width",`${q}px`),ge.setProperty("--radix-popper-available-height",`${se}px`),ge.setProperty("--radix-popper-anchor-width",`${he}px`),ge.setProperty("--radix-popper-anchor-height",`${ae}px`)}}),M&&Q9({element:M,padding:l}),i7({arrowWidth:I,arrowHeight:A}),x&&J9({strategy:"referenceHidden",...oe})]}),[D,G]=AT(J),N=hn(v);Vt(()=>{z&&N?.()},[z,N]);const L=R.arrow?.x,V=R.arrow?.y,Q=R.arrow?.centerOffset!==0,[ce,H]=b.useState();return Vt(()=>{C&&H(window.getComputedStyle(C).zIndex)},[C]),c.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:z?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[R.transformOrigin?.x,R.transformOrigin?.y].join(" "),...R.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(n7,{scope:n,placedSide:D,onArrowChange:O,arrowX:L,arrowY:V,shouldHideArrow:Q,children:c.jsx(Ae.div,{"data-side":D,"data-align":G,...y,ref:j,style:{...y.style,animation:z?void 0:"none"}})})})});OT.displayName=F0;var PT="PopperArrow",s7={top:"bottom",right:"left",bottom:"top",left:"right"},RT=b.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=r7(PT,r),i=s7[o.placedSide];return c.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:c.jsx(e7,{...s,ref:n,style:{...s.style,display:"block"}})})});RT.displayName=PT;function o7(t){return t!==null}var i7=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:s}=e,i=s.arrow?.centerOffset!==0,l=i?0:t.arrowWidth,u=i?0:t.arrowHeight,[h,f]=AT(n),m={start:"0%",center:"50%",end:"100%"}[f],x=(s.arrow?.x??0)+l/2,w=(s.arrow?.y??0)+u/2;let v="",y="";return h==="bottom"?(v=i?m:`${x}px`,y=`${-u}px`):h==="top"?(v=i?m:`${x}px`,y=`${r.floating.height+u}px`):h==="right"?(v=`${-u}px`,y=i?m:`${w}px`):h==="left"&&(v=`${r.floating.width+u}px`,y=i?m:`${w}px`),{data:{x:v,y}}}});function AT(t){const[e,n="center"]=t.split("-");return[e,n]}var $0=jT,om=MT,z0=OT,U0=RT,a7="Portal",fu=b.forwardRef((t,e)=>{const{container:n,...r}=t,[s,o]=b.useState(!1);Vt(()=>o(!0),[]);const i=n||s&&globalThis?.document?.body;return i?fj.createPortal(c.jsx(Ae.div,{...r,ref:e}),i):null});fu.displayName=a7;function l7(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var Pn=t=>{const{present:e,children:n}=t,r=c7(e),s=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),o=Xe(r.ref,d7(s));return typeof n=="function"||r.isPresent?b.cloneElement(s,{ref:o}):null};Pn.displayName="Presence";function c7(t){const[e,n]=b.useState(),r=b.useRef(null),s=b.useRef(t),o=b.useRef("none"),i=t?"mounted":"unmounted",[l,u]=l7(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const h=Hh(r.current);o.current=l==="mounted"?h:"none"},[l]),Vt(()=>{const h=r.current,f=s.current;if(f!==t){const x=o.current,w=Hh(h);t?u("MOUNT"):w==="none"||h?.display==="none"?u("UNMOUNT"):u(f&&x!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),Vt(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,m=w=>{const y=Hh(r.current).includes(CSS.escape(w.animationName));if(w.target===e&&y&&(u("ANIMATION_END"),!s.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},x=w=>{w.target===e&&(o.current=Hh(r.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Hh(t){return t?.animationName||"none"}function d7(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var iv="rovingFocusGroup.onEntryFocus",u7={bubbles:!1,cancelable:!0},pu="RovingFocusGroup",[yy,IT,h7]=M0(pu),[f7,im]=nr(pu,[h7]),[p7,m7]=f7(pu),DT=b.forwardRef((t,e)=>c.jsx(yy.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(yy.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(g7,{...t,ref:e})})}));DT.displayName=pu;var g7=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...m}=t,x=b.useRef(null),w=Xe(e,x),v=cu(o),[y,k]=go({prop:i,defaultProp:l??null,onChange:u,caller:pu}),[C,_]=b.useState(!1),j=hn(h),M=IT(n),O=b.useRef(!1),[T,I]=b.useState(0);return b.useEffect(()=>{const A=x.current;if(A)return A.addEventListener(iv,j),()=>A.removeEventListener(iv,j)},[j]),c.jsx(p7,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:y,onItemFocus:b.useCallback(A=>k(A),[k]),onItemShiftTab:b.useCallback(()=>_(!0),[]),onFocusableItemAdd:b.useCallback(()=>I(A=>A+1),[]),onFocusableItemRemove:b.useCallback(()=>I(A=>A-1),[]),children:c.jsx(Ae.div,{tabIndex:C||T===0?-1:0,"data-orientation":r,...m,ref:w,style:{outline:"none",...t.style},onMouseDown:Ce(t.onMouseDown,()=>{O.current=!0}),onFocus:Ce(t.onFocus,A=>{const F=!O.current;if(A.target===A.currentTarget&&F&&!C){const U=new CustomEvent(iv,u7);if(A.currentTarget.dispatchEvent(U),!U.defaultPrevented){const W=M().filter(J=>J.focusable),Z=W.find(J=>J.active),oe=W.find(J=>J.id===y),re=[Z,oe,...W].filter(Boolean).map(J=>J.ref.current);FT(re,f)}}O.current=!1}),onBlur:Ce(t.onBlur,()=>_(!1))})})}),LT="RovingFocusGroupItem",BT=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:i,...l}=t,u=os(),h=o||u,f=m7(LT,n),m=f.currentTabStopId===h,x=IT(n),{onFocusableItemAdd:w,onFocusableItemRemove:v,currentTabStopId:y}=f;return b.useEffect(()=>{if(r)return w(),()=>v()},[r,w,v]),c.jsx(yy.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:c.jsx(Ae.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...l,ref:e,onMouseDown:Ce(t.onMouseDown,k=>{r?f.onItemFocus(h):k.preventDefault()}),onFocus:Ce(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:Ce(t.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){f.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const C=y7(k,f.orientation,f.dir);if(C!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let j=x().filter(M=>M.focusable).map(M=>M.ref.current);if(C==="last")j.reverse();else if(C==="prev"||C==="next"){C==="prev"&&j.reverse();const M=j.indexOf(k.currentTarget);j=f.loop?b7(j,M+1):j.slice(M+1)}setTimeout(()=>FT(j))}}),children:typeof i=="function"?i({isCurrentTabStop:m,hasTabStop:y!=null}):i})})});BT.displayName=LT;var x7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function v7(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function y7(t,e,n){const r=v7(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return x7[r]}function FT(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function b7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $T=DT,zT=BT,w7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ol=new WeakMap,Wh=new WeakMap,Vh={},av=0,UT=function(t){return t&&(t.host||UT(t.parentNode))},k7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=UT(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},S7=function(t,e,n,r){var s=k7(e,Array.isArray(t)?t:[t]);Vh[n]||(Vh[n]=new WeakMap);var o=Vh[n],i=[],l=new Set,u=new Set(s),h=function(m){!m||l.has(m)||(l.add(m),h(m.parentNode))};s.forEach(h);var f=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(x){if(l.has(x))f(x);else try{var w=x.getAttribute(r),v=w!==null&&w!=="false",y=(ol.get(x)||0)+1,k=(o.get(x)||0)+1;ol.set(x,y),o.set(x,k),i.push(x),y===1&&v&&Wh.set(x,!0),k===1&&x.setAttribute(n,"true"),v||x.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",x,C)}})};return f(e),l.clear(),av++,function(){i.forEach(function(m){var x=ol.get(m)-1,w=o.get(m)-1;ol.set(m,x),o.set(m,w),x||(Wh.has(m)||m.removeAttribute(r),Wh.delete(m)),w||m.removeAttribute(n)}),av--,av||(ol=new WeakMap,ol=new WeakMap,Wh=new WeakMap,Vh={})}},am=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=w7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),S7(r,s,n,"aria-hidden")):function(){return null}},Ns=function(){return Ns=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ns.apply(this,arguments)};function HT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function C7(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Ef="right-scroll-bar-position",Nf="width-before-scroll-bar",_7="with-scroll-bars-hidden",E7="--removed-body-scroll-bar-size";function lv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function N7(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var j7=typeof window<"u"?b.useLayoutEffect:b.useEffect,l2=new WeakMap;function T7(t,e){var n=N7(null,function(r){return t.forEach(function(s){return lv(s,r)})});return j7(function(){var r=l2.get(n);if(r){var s=new Set(r),o=new Set(t),i=n.current;s.forEach(function(l){o.has(l)||lv(l,null)}),o.forEach(function(l){s.has(l)||lv(l,i)})}l2.set(n,t)},[t]),n}function M7(t){return t}function O7(t,e){e===void 0&&(e=M7);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var i=e(o,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(o),i=n}var u=function(){var f=i;i=[],f.forEach(o)},h=function(){return Promise.resolve().then(u)};h(),n={push:function(f){i.push(f),h()},filter:function(f){return i=i.filter(f),n}}}};return s}function P7(t){t===void 0&&(t={});var e=O7(null);return e.options=Ns({async:!0,ssr:!1},t),e}var WT=function(t){var e=t.sideCar,n=HT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Ns({},n))};WT.isSideCarExport=!0;function R7(t,e){return t.useMedium(e),WT}var VT=P7(),cv=function(){},lm=b.forwardRef(function(t,e){var n=b.useRef(null),r=b.useState({onScrollCapture:cv,onWheelCapture:cv,onTouchMoveCapture:cv}),s=r[0],o=r[1],i=t.forwardProps,l=t.children,u=t.className,h=t.removeScrollBar,f=t.enabled,m=t.shards,x=t.sideCar,w=t.noRelative,v=t.noIsolation,y=t.inert,k=t.allowPinchZoom,C=t.as,_=C===void 0?"div":C,j=t.gapMode,M=HT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=x,T=T7([n,e]),I=Ns(Ns({},M),s);return b.createElement(b.Fragment,null,f&&b.createElement(O,{sideCar:VT,removeScrollBar:h,shards:m,noRelative:w,noIsolation:v,inert:y,setCallbacks:o,allowPinchZoom:!!k,lockRef:n,gapMode:j}),i?b.cloneElement(b.Children.only(l),Ns(Ns({},I),{ref:T})):b.createElement(_,Ns({},I,{className:u,ref:T}),l))});lm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};lm.classNames={fullWidth:Nf,zeroRight:Ef};var A7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function I7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=A7();return e&&t.setAttribute("nonce",e),t}function D7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function L7(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var B7=function(){var t=0,e=null;return{add:function(n){t==0&&(e=I7())&&(D7(e,n),L7(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},F7=function(){var t=B7();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},YT=function(){var t=F7(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},$7={left:0,top:0,right:0,gap:0},dv=function(t){return parseInt(t||"",10)||0},z7=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[dv(n),dv(r),dv(s)]},U7=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return $7;var e=z7(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},H7=YT(),wl="data-scroll-locked",W7=function(t,e,n,r){var s=t.left,o=t.top,i=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(_7,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(wl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ef,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Nf,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ef," .").concat(Ef,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Nf," .").concat(Nf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wl,`] {
    `).concat(E7,": ").concat(l,`px;
  }
`)},c2=function(){var t=parseInt(document.body.getAttribute(wl)||"0",10);return isFinite(t)?t:0},V7=function(){b.useEffect(function(){return document.body.setAttribute(wl,(c2()+1).toString()),function(){var t=c2()-1;t<=0?document.body.removeAttribute(wl):document.body.setAttribute(wl,t.toString())}},[])},Y7=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;V7();var o=b.useMemo(function(){return U7(s)},[s]);return b.createElement(H7,{styles:W7(o,!e,s,n?"":"!important")})},by=!1;if(typeof window<"u")try{var Yh=Object.defineProperty({},"passive",{get:function(){return by=!0,!0}});window.addEventListener("test",Yh,Yh),window.removeEventListener("test",Yh,Yh)}catch{by=!1}var il=by?{passive:!1}:!1,q7=function(t){return t.tagName==="TEXTAREA"},qT=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!q7(t)&&n[e]==="visible")},K7=function(t){return qT(t,"overflowY")},X7=function(t){return qT(t,"overflowX")},d2=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=KT(t,r);if(s){var o=XT(t,r),i=o[1],l=o[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},G7=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},J7=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},KT=function(t,e){return t==="v"?K7(e):X7(e)},XT=function(t,e){return t==="v"?G7(e):J7(e)},Q7=function(t,e){return t==="h"&&e==="rtl"?-1:1},Z7=function(t,e,n,r,s){var o=Q7(t,window.getComputedStyle(e).direction),i=o*r,l=n.target,u=e.contains(l),h=!1,f=i>0,m=0,x=0;do{if(!l)break;var w=XT(t,l),v=w[0],y=w[1],k=w[2],C=y-k-o*v;(v||C)&&KT(t,l)&&(m+=C,x+=v);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!u&&l!==document.body||u&&(e.contains(l)||e===l));return(f&&Math.abs(m)<1||!f&&Math.abs(x)<1)&&(h=!0),h},qh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},u2=function(t){return[t.deltaX,t.deltaY]},h2=function(t){return t&&"current"in t?t.current:t},ez=function(t,e){return t[0]===e[0]&&t[1]===e[1]},tz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},nz=0,al=[];function rz(t){var e=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),s=b.useState(nz++)[0],o=b.useState(YT)[0],i=b.useRef(t);b.useEffect(function(){i.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=C7([t.lockRef.current],(t.shards||[]).map(h2),!0).filter(Boolean);return y.forEach(function(k){return k.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=b.useCallback(function(y,k){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var C=qh(y),_=n.current,j="deltaX"in y?y.deltaX:_[0]-C[0],M="deltaY"in y?y.deltaY:_[1]-C[1],O,T=y.target,I=Math.abs(j)>Math.abs(M)?"h":"v";if("touches"in y&&I==="h"&&T.type==="range")return!1;var A=d2(I,T);if(!A)return!0;if(A?O=I:(O=I==="v"?"h":"v",A=d2(I,T)),!A)return!1;if(!r.current&&"changedTouches"in y&&(j||M)&&(r.current=O),!O)return!0;var F=r.current||O;return Z7(F,k,y,F==="h"?j:M)},[]),u=b.useCallback(function(y){var k=y;if(!(!al.length||al[al.length-1]!==o)){var C="deltaY"in k?u2(k):qh(k),_=e.current.filter(function(O){return O.name===k.type&&(O.target===k.target||k.target===O.shadowParent)&&ez(O.delta,C)})[0];if(_&&_.should){k.cancelable&&k.preventDefault();return}if(!_){var j=(i.current.shards||[]).map(h2).filter(Boolean).filter(function(O){return O.contains(k.target)}),M=j.length>0?l(k,j[0]):!i.current.noIsolation;M&&k.cancelable&&k.preventDefault()}}},[]),h=b.useCallback(function(y,k,C,_){var j={name:y,delta:k,target:C,should:_,shadowParent:sz(C)};e.current.push(j),setTimeout(function(){e.current=e.current.filter(function(M){return M!==j})},1)},[]),f=b.useCallback(function(y){n.current=qh(y),r.current=void 0},[]),m=b.useCallback(function(y){h(y.type,u2(y),y.target,l(y,t.lockRef.current))},[]),x=b.useCallback(function(y){h(y.type,qh(y),y.target,l(y,t.lockRef.current))},[]);b.useEffect(function(){return al.push(o),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:x}),document.addEventListener("wheel",u,il),document.addEventListener("touchmove",u,il),document.addEventListener("touchstart",f,il),function(){al=al.filter(function(y){return y!==o}),document.removeEventListener("wheel",u,il),document.removeEventListener("touchmove",u,il),document.removeEventListener("touchstart",f,il)}},[]);var w=t.removeScrollBar,v=t.inert;return b.createElement(b.Fragment,null,v?b.createElement(o,{styles:tz(s)}):null,w?b.createElement(Y7,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function sz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const oz=R7(VT,rz);var mu=b.forwardRef(function(t,e){return b.createElement(lm,Ns({},t,{ref:e,sideCar:oz}))});mu.classNames=lm.classNames;var wy=["Enter"," "],iz=["ArrowDown","PageUp","Home"],GT=["ArrowUp","PageDown","End"],az=[...iz,...GT],lz={ltr:[...wy,"ArrowRight"],rtl:[...wy,"ArrowLeft"]},cz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},gu="Menu",[Pd,dz,uz]=M0(gu),[_a,JT]=nr(gu,[uz,nc,im]),cm=nc(),QT=im(),[hz,Ea]=_a(gu),[fz,xu]=_a(gu),ZT=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:o,modal:i=!0}=t,l=cm(e),[u,h]=b.useState(null),f=b.useRef(!1),m=hn(o),x=cu(s);return b.useEffect(()=>{const w=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),c.jsx($0,{...l,children:c.jsx(hz,{scope:e,open:n,onOpenChange:m,content:u,onContentChange:h,children:c.jsx(fz,{scope:e,onClose:b.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:x,modal:i,children:r})})})};ZT.displayName=gu;var pz="MenuAnchor",H0=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=cm(n);return c.jsx(om,{...s,...r,ref:e})});H0.displayName=pz;var W0="MenuPortal",[mz,eM]=_a(W0,{forceMount:void 0}),tM=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,o=Ea(W0,e);return c.jsx(mz,{scope:e,forceMount:n,children:c.jsx(Pn,{present:n||o.open,children:c.jsx(fu,{asChild:!0,container:s,children:r})})})};tM.displayName=W0;var Br="MenuContent",[gz,V0]=_a(Br),nM=b.forwardRef((t,e)=>{const n=eM(Br,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Ea(Br,t.__scopeMenu),i=xu(Br,t.__scopeMenu);return c.jsx(Pd.Provider,{scope:t.__scopeMenu,children:c.jsx(Pn,{present:r||o.open,children:c.jsx(Pd.Slot,{scope:t.__scopeMenu,children:i.modal?c.jsx(xz,{...s,ref:e}):c.jsx(vz,{...s,ref:e})})})})}),xz=b.forwardRef((t,e)=>{const n=Ea(Br,t.__scopeMenu),r=b.useRef(null),s=Xe(e,r);return b.useEffect(()=>{const o=r.current;if(o)return am(o)},[]),c.jsx(Y0,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ce(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),vz=b.forwardRef((t,e)=>{const n=Ea(Br,t.__scopeMenu);return c.jsx(Y0,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),yz=gi("MenuContent.ScrollLock"),Y0=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:x,onDismiss:w,disableOutsideScroll:v,...y}=t,k=Ea(Br,n),C=xu(Br,n),_=cm(n),j=QT(n),M=dz(n),[O,T]=b.useState(null),I=b.useRef(null),A=Xe(e,I,k.onContentChange),F=b.useRef(0),U=b.useRef(""),W=b.useRef(0),Z=b.useRef(null),oe=b.useRef("right"),ee=b.useRef(0),re=v?mu:b.Fragment,J=v?{as:yz,allowPinchZoom:!0}:void 0,z=D=>{const G=U.current+D,N=M().filter(B=>!B.disabled),L=document.activeElement,V=N.find(B=>B.ref.current===L)?.textValue,Q=N.map(B=>B.textValue),ce=Oz(Q,G,V),H=N.find(B=>B.textValue===ce)?.ref.current;(function B(K){U.current=K,window.clearTimeout(F.current),K!==""&&(F.current=window.setTimeout(()=>B(""),1e3))})(G),H&&setTimeout(()=>H.focus())};b.useEffect(()=>()=>window.clearTimeout(F.current),[]),em();const R=b.useCallback(D=>oe.current===Z.current?.side&&Rz(D,Z.current?.area),[]);return c.jsx(gz,{scope:n,searchRef:U,onItemEnter:b.useCallback(D=>{R(D)&&D.preventDefault()},[R]),onItemLeave:b.useCallback(D=>{R(D)||(I.current?.focus(),T(null))},[R]),onTriggerLeave:b.useCallback(D=>{R(D)&&D.preventDefault()},[R]),pointerGraceTimerRef:W,onPointerGraceIntentChange:b.useCallback(D=>{Z.current=D},[]),children:c.jsx(re,{...J,children:c.jsx(uu,{asChild:!0,trapped:s,onMountAutoFocus:Ce(o,D=>{D.preventDefault(),I.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:c.jsx(du,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:x,onDismiss:w,children:c.jsx($T,{asChild:!0,...j,dir:C.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:T,onEntryFocus:Ce(u,D=>{C.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(z0,{role:"menu","aria-orientation":"vertical","data-state":vM(k.open),"data-radix-menu-content":"",dir:C.dir,..._,...y,ref:A,style:{outline:"none",...y.style},onKeyDown:Ce(y.onKeyDown,D=>{const N=D.target.closest("[data-radix-menu-content]")===D.currentTarget,L=D.ctrlKey||D.altKey||D.metaKey,V=D.key.length===1;N&&(D.key==="Tab"&&D.preventDefault(),!L&&V&&z(D.key));const Q=I.current;if(D.target!==Q||!az.includes(D.key))return;D.preventDefault();const H=M().filter(B=>!B.disabled).map(B=>B.ref.current);GT.includes(D.key)&&H.reverse(),Tz(H)}),onBlur:Ce(t.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(F.current),U.current="")}),onPointerMove:Ce(t.onPointerMove,Rd(D=>{const G=D.target,N=ee.current!==D.clientX;if(D.currentTarget.contains(G)&&N){const L=D.clientX>ee.current?"right":"left";oe.current=L,ee.current=D.clientX}}))})})})})})})});nM.displayName=Br;var bz="MenuGroup",q0=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(Ae.div,{role:"group",...r,ref:e})});q0.displayName=bz;var wz="MenuLabel",rM=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(Ae.div,{...r,ref:e})});rM.displayName=wz;var sp="MenuItem",f2="menu.itemSelect",dm=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,o=b.useRef(null),i=xu(sp,t.__scopeMenu),l=V0(sp,t.__scopeMenu),u=Xe(e,o),h=b.useRef(!1),f=()=>{const m=o.current;if(!n&&m){const x=new CustomEvent(f2,{bubbles:!0,cancelable:!0});m.addEventListener(f2,w=>r?.(w),{once:!0}),Nj(m,x),x.defaultPrevented?h.current=!1:i.onClose()}};return c.jsx(sM,{...s,ref:u,disabled:n,onClick:Ce(t.onClick,f),onPointerDown:m=>{t.onPointerDown?.(m),h.current=!0},onPointerUp:Ce(t.onPointerUp,m=>{h.current||m.currentTarget?.click()}),onKeyDown:Ce(t.onKeyDown,m=>{const x=l.searchRef.current!=="";n||x&&m.key===" "||wy.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});dm.displayName=sp;var sM=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=t,i=V0(sp,n),l=QT(n),u=b.useRef(null),h=Xe(e,u),[f,m]=b.useState(!1),[x,w]=b.useState("");return b.useEffect(()=>{const v=u.current;v&&w((v.textContent??"").trim())},[o.children]),c.jsx(Pd.ItemSlot,{scope:n,disabled:r,textValue:s??x,children:c.jsx(zT,{asChild:!0,...l,focusable:!r,children:c.jsx(Ae.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:h,onPointerMove:Ce(t.onPointerMove,Rd(v=>{r?i.onItemLeave(v):(i.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ce(t.onPointerLeave,Rd(v=>i.onItemLeave(v))),onFocus:Ce(t.onFocus,()=>m(!0)),onBlur:Ce(t.onBlur,()=>m(!1))})})})}),kz="MenuCheckboxItem",oM=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return c.jsx(dM,{scope:t.__scopeMenu,checked:n,children:c.jsx(dm,{role:"menuitemcheckbox","aria-checked":op(n)?"mixed":n,...s,ref:e,"data-state":X0(n),onSelect:Ce(s.onSelect,()=>r?.(op(n)?!0:!n),{checkForDefaultPrevented:!1})})})});oM.displayName=kz;var iM="MenuRadioGroup",[Sz,Cz]=_a(iM,{value:void 0,onValueChange:()=>{}}),aM=b.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,o=hn(r);return c.jsx(Sz,{scope:t.__scopeMenu,value:n,onValueChange:o,children:c.jsx(q0,{...s,ref:e})})});aM.displayName=iM;var lM="MenuRadioItem",cM=b.forwardRef((t,e)=>{const{value:n,...r}=t,s=Cz(lM,t.__scopeMenu),o=n===s.value;return c.jsx(dM,{scope:t.__scopeMenu,checked:o,children:c.jsx(dm,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":X0(o),onSelect:Ce(r.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});cM.displayName=lM;var K0="MenuItemIndicator",[dM,_z]=_a(K0,{checked:!1}),uM=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,o=_z(K0,n);return c.jsx(Pn,{present:r||op(o.checked)||o.checked===!0,children:c.jsx(Ae.span,{...s,ref:e,"data-state":X0(o.checked)})})});uM.displayName=K0;var Ez="MenuSeparator",hM=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(Ae.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});hM.displayName=Ez;var Nz="MenuArrow",fM=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=cm(n);return c.jsx(U0,{...s,...r,ref:e})});fM.displayName=Nz;var jz="MenuSub",[yle,pM]=_a(jz),dd="MenuSubTrigger",mM=b.forwardRef((t,e)=>{const n=Ea(dd,t.__scopeMenu),r=xu(dd,t.__scopeMenu),s=pM(dd,t.__scopeMenu),o=V0(dd,t.__scopeMenu),i=b.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=o,h={__scopeMenu:t.__scopeMenu},f=b.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return b.useEffect(()=>f,[f]),b.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),u(null)}},[l,u]),c.jsx(H0,{asChild:!0,...h,children:c.jsx(sM,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":vM(n.open),...t,ref:Vp(e,s.onTriggerChange),onClick:m=>{t.onClick?.(m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ce(t.onPointerMove,Rd(m=>{o.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ce(t.onPointerLeave,Rd(m=>{f();const x=n.content?.getBoundingClientRect();if(x){const w=n.content?.dataset.side,v=w==="right",y=v?-5:5,k=x[v?"left":"right"],C=x[v?"right":"left"];o.onPointerGraceIntentChange({area:[{x:m.clientX+y,y:m.clientY},{x:k,y:x.top},{x:C,y:x.top},{x:C,y:x.bottom},{x:k,y:x.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(m),m.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Ce(t.onKeyDown,m=>{const x=o.searchRef.current!=="";t.disabled||x&&m.key===" "||lz[r.dir].includes(m.key)&&(n.onOpenChange(!0),n.content?.focus(),m.preventDefault())})})})});mM.displayName=dd;var gM="MenuSubContent",xM=b.forwardRef((t,e)=>{const n=eM(Br,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Ea(Br,t.__scopeMenu),i=xu(Br,t.__scopeMenu),l=pM(gM,t.__scopeMenu),u=b.useRef(null),h=Xe(e,u);return c.jsx(Pd.Provider,{scope:t.__scopeMenu,children:c.jsx(Pn,{present:r||o.open,children:c.jsx(Pd.Slot,{scope:t.__scopeMenu,children:c.jsx(Y0,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:h,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{i.isUsingKeyboardRef.current&&u.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ce(t.onFocusOutside,f=>{f.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Ce(t.onEscapeKeyDown,f=>{i.onClose(),f.preventDefault()}),onKeyDown:Ce(t.onKeyDown,f=>{const m=f.currentTarget.contains(f.target),x=cz[i.dir].includes(f.key);m&&x&&(o.onOpenChange(!1),l.trigger?.focus(),f.preventDefault())})})})})})});xM.displayName=gM;function vM(t){return t?"open":"closed"}function op(t){return t==="indeterminate"}function X0(t){return op(t)?"indeterminate":t?"checked":"unchecked"}function Tz(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Mz(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Oz(t,e,n){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let i=Mz(t,Math.max(o,0));s.length===1&&(i=i.filter(h=>h!==n));const u=i.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function Pz(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const l=e[o],u=e[i],h=l.x,f=l.y,m=u.x,x=u.y;f>r!=x>r&&n<(m-h)*(r-f)/(x-f)+h&&(s=!s)}return s}function Rz(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Pz(n,e)}function Rd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Az=ZT,Iz=H0,Dz=tM,Lz=nM,Bz=q0,Fz=rM,$z=dm,zz=oM,Uz=aM,Hz=cM,Wz=uM,Vz=hM,Yz=fM,qz=mM,Kz=xM,um="DropdownMenu",[Xz]=nr(um,[JT]),Bn=JT(),[Gz,yM]=Xz(um),bM=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:i,modal:l=!0}=t,u=Bn(e),h=b.useRef(null),[f,m]=go({prop:s,defaultProp:o??!1,onChange:i,caller:um});return c.jsx(Gz,{scope:e,triggerId:os(),triggerRef:h,contentId:os(),open:f,onOpenChange:m,onOpenToggle:b.useCallback(()=>m(x=>!x),[m]),modal:l,children:c.jsx(Az,{...u,open:f,onOpenChange:m,dir:r,modal:l,children:n})})};bM.displayName=um;var wM="DropdownMenuTrigger",kM=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,o=yM(wM,n),i=Bn(n);return c.jsx(Iz,{asChild:!0,...i,children:c.jsx(Ae.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Vp(e,o.triggerRef),onPointerDown:Ce(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:Ce(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});kM.displayName=wM;var Jz="DropdownMenuPortal",SM=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Bn(e);return c.jsx(Dz,{...r,...n})};SM.displayName=Jz;var CM="DropdownMenuContent",_M=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=yM(CM,n),o=Bn(n),i=b.useRef(!1);return c.jsx(Lz,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:Ce(t.onCloseAutoFocus,l=>{i.current||s.triggerRef.current?.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:Ce(t.onInteractOutside,l=>{const u=l.detail.originalEvent,h=u.button===0&&u.ctrlKey===!0,f=u.button===2||h;(!s.modal||f)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_M.displayName=CM;var Qz="DropdownMenuGroup",Zz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx(Bz,{...s,...r,ref:e})});Zz.displayName=Qz;var eU="DropdownMenuLabel",EM=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx(Fz,{...s,...r,ref:e})});EM.displayName=eU;var tU="DropdownMenuItem",NM=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx($z,{...s,...r,ref:e})});NM.displayName=tU;var nU="DropdownMenuCheckboxItem",rU=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx(zz,{...s,...r,ref:e})});rU.displayName=nU;var sU="DropdownMenuRadioGroup",oU=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx(Uz,{...s,...r,ref:e})});oU.displayName=sU;var iU="DropdownMenuRadioItem",aU=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx(Hz,{...s,...r,ref:e})});aU.displayName=iU;var lU="DropdownMenuItemIndicator",cU=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx(Wz,{...s,...r,ref:e})});cU.displayName=lU;var dU="DropdownMenuSeparator",jM=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx(Vz,{...s,...r,ref:e})});jM.displayName=dU;var uU="DropdownMenuArrow",hU=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx(Yz,{...s,...r,ref:e})});hU.displayName=uU;var fU="DropdownMenuSubTrigger",pU=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx(qz,{...s,...r,ref:e})});pU.displayName=fU;var mU="DropdownMenuSubContent",gU=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Bn(n);return c.jsx(Kz,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gU.displayName=mU;var xU=bM,vU=kM,yU=SM,bU=_M,wU=EM,kU=NM,SU=jM;function Ad({...t}){return c.jsx(xU,{"data-slot":"dropdown-menu",...t})}function Id({...t}){return c.jsx(vU,{"data-slot":"dropdown-menu-trigger",...t})}function Dd({className:t,sideOffset:e=4,...n}){return c.jsx(yU,{children:c.jsx(bU,{"data-slot":"dropdown-menu-content",sideOffset:e,className:He("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function ra({className:t,inset:e,variant:n="default",...r}){return c.jsx(kU,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:He("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function ip({className:t,inset:e,...n}){return c.jsx(wU,{"data-slot":"dropdown-menu-label","data-inset":e,className:He("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function bd({className:t,...e}){return c.jsx(SU,{"data-slot":"dropdown-menu-separator",className:He("bg-border -mx-1 my-1 h-px",t),...e})}var uv={exports:{}},hv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function CU(){if(p2)return hv;p2=1;var t=Up();function e(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,i=t.useDebugValue;function l(m,x){var w=x(),v=r({inst:{value:w,getSnapshot:x}}),y=v[0].inst,k=v[1];return o(function(){y.value=w,y.getSnapshot=x,u(y)&&k({inst:y})},[m,w,x]),s(function(){return u(y)&&k({inst:y}),m(function(){u(y)&&k({inst:y})})},[m]),i(w),w}function u(m){var x=m.getSnapshot;m=m.value;try{var w=x();return!n(m,w)}catch{return!0}}function h(m,x){return x()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return hv.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,hv}var m2;function _U(){return m2||(m2=1,uv.exports=CU()),uv.exports}var EU=_U();function NU(){return EU.useSyncExternalStore(jU,()=>!0,()=>!1)}function jU(){return()=>{}}var G0="Avatar",[TU]=nr(G0),[MU,TM]=TU(G0),MM=b.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,o]=b.useState("idle");return c.jsx(MU,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:c.jsx(Ae.span,{...r,ref:e})})});MM.displayName=G0;var OM="AvatarImage",PM=b.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=t,i=TM(OM,n),l=OU(r,o),u=hn(h=>{s(h),i.onImageLoadingStatusChange(h)});return Vt(()=>{l!=="idle"&&u(l)},[l,u]),l==="loaded"?c.jsx(Ae.img,{...o,ref:e,src:r}):null});PM.displayName=OM;var RM="AvatarFallback",AM=b.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,o=TM(RM,n),[i,l]=b.useState(r===void 0);return b.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(u)}},[r]),i&&o.imageLoadingStatus!=="loaded"?c.jsx(Ae.span,{...s,ref:e}):null});AM.displayName=RM;function g2(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function OU(t,{referrerPolicy:e,crossOrigin:n}){const r=NU(),s=b.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[i,l]=b.useState(()=>g2(o,t));return Vt(()=>{l(g2(o,t))},[o,t]),Vt(()=>{const u=m=>()=>{l(m)};if(!o)return;const h=u("loaded"),f=u("error");return o.addEventListener("load",h),o.addEventListener("error",f),e&&(o.referrerPolicy=e),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",h),o.removeEventListener("error",f)}},[o,n,e]),i}var PU=MM,RU=PM,AU=AM;function yr({className:t,...e}){return c.jsx(PU,{"data-slot":"avatar",className:He("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...e})}function hm({className:t,...e}){return c.jsx(RU,{"data-slot":"avatar-image",className:He("aspect-square size-full",t),...e})}function er({className:t,...e}){return c.jsx(AU,{"data-slot":"avatar-fallback",className:He("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}const IU=gj("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function St({className:t,variant:e,asChild:n=!1,...r}){const s=n?b0:"span";return c.jsx(s,{"data-slot":"badge",className:He(IU({variant:e}),t),...r})}const pa=async t=>(await Le.get(`/users/${t}`)).data,fv=async(t,e)=>(await Le.put(`/users/${t}`,e)).data;function Il(t,e){const n=t?.[0]?.toUpperCase()||"",r=e?.[0]?.toUpperCase()||"";return`${n}${r}`||"?"}const IM=b.createContext(void 0),pv="xplanb_theme";function DU({children:t}){const[e,n]=b.useState(()=>{const o=localStorage.getItem(pv);return o==="light"||o==="dark"?o:typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});b.useEffect(()=>{const o=document.documentElement;e==="dark"?o.classList.add("dark"):o.classList.remove("dark"),localStorage.setItem(pv,e)},[e]);const r=()=>{n(o=>o==="dark"?"light":"dark")},s=o=>{n(o)};return b.useEffect(()=>{if(typeof window>"u")return;const o=window.matchMedia("(prefers-color-scheme: dark)"),i=l=>{localStorage.getItem(pv)||n(l.matches?"dark":"light")};return o.addEventListener("change",i),()=>o.removeEventListener("change",i)},[]),c.jsx(IM.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function DM(){const t=b.useContext(IM);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const mv=[{name:"Home",href:"/dashboard",icon:Jp},{name:"Documents",href:"/documents",icon:Xn},{name:"Folders",href:"/folders",icon:un},{name:"Analytics",href:"/analytics",icon:N0},{name:"Calendar",href:"/calendar",icon:rT},{name:"Meetings",href:"/meetings",icon:Zp},{name:"Chat",href:"/chat",icon:Rl},{name:"AI Assistant",href:"/ai-assistant",icon:ii},{name:"Settings",href:"/settings",icon:lT}];function LU({onLogout:t,onShowPomodoro:e}){const{theme:n,toggleTheme:r}=DM(),s=Wr(),o=b.useRef(null),[i,l]=b.useState(!1),[u,h]=b.useState(""),[f,m]=b.useState(!1),[x,w]=b.useState([]),[v,y]=b.useState(0),[k,C]=b.useState(null),[_,j]=b.useState(!0);b.useEffect(()=>{const T=I=>{o.current&&!o.current.contains(I.target)&&m(!1)};if(f)return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[f]);const M=T=>T?.code==="ERR_NETWORK"||T?.code==="ECONNREFUSED"||T?.message?.includes("ERR_CONNECTION_REFUSED")||T?.message?.includes("Network Error")||!T?.response;b.useEffect(()=>{const T=async()=>{try{const U=await H_.getUnread();w(U),y(U.length)}catch(U){M(U)?(console.warn("Backend connection unavailable. Notifications will not be loaded."),w([]),y(0)):console.error("Error loading notifications:",U)}},I=async()=>{try{const U=localStorage.getItem("access_token");if(!U){j(!1);return}const Z=U.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),oe=decodeURIComponent(atob(Z).split("").map(z=>"%"+("00"+z.charCodeAt(0).toString(16)).slice(-2)).join("")),ee=JSON.parse(oe),re=ee.id||ee._id||ee.userId,J=await pa(re);C(J)}catch(U){M(U)?(console.warn("Backend connection unavailable. User data will not be loaded."),C(null)):console.error("Error loading user:",U)}finally{j(!1)}};T(),I();const A=setInterval(T,3e4),F=()=>{I()};return window.addEventListener("userProfileUpdated",F),()=>{clearInterval(A),window.removeEventListener("userProfileUpdated",F)}},[]);const O=T=>{if(T.key==="Escape")m(!1);else if(T.key==="Enter"&&f){const I=mv.filter(A=>A.name.toLowerCase().includes(u.toLowerCase()));I.length>0&&(h(""),m(!1),s(I[0].href))}};return c.jsxs("header",{className:"h-16 bg-white dark:bg-card border-b border-border flex items-center justify-between px-6",children:[c.jsxs("div",{ref:o,className:"flex-1 max-w-2xl relative",children:[c.jsx("div",{className:"relative flex items-center gap-2",children:c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Qp,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"}),c.jsx(Ke,{type:"text",placeholder:"Search documents, folders, or tasks...",value:u,onChange:T=>h(T.target.value),onFocus:()=>m(!0),onKeyDown:O,className:"pl-10 pr-4 rounded-xl bg-gray-50 dark:bg-gray-800 border-0 cursor-pointer"})]})}),f&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-card border border-border rounded-xl shadow-lg z-50 max-h-[300px] overflow-y-auto",children:mv.filter(T=>T.name.toLowerCase().includes(u.toLowerCase())).length>0?c.jsx("div",{className:"p-2",children:mv.filter(T=>T.name.toLowerCase().includes(u.toLowerCase())).map(T=>{const I=T.icon;return c.jsxs("button",{onClick:()=>{h(""),m(!1),s(T.href)},className:"w-full flex items-center px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-left",children:[c.jsx(I,{className:"w-4 h-4 mr-3 text-muted-foreground"}),c.jsx("span",{children:T.name})]},T.href)})}):c.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No results found"})})]}),c.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[c.jsx(pe,{variant:"ghost",size:"icon",onClick:r,className:"rounded-xl","aria-label":"Toggle theme",children:n==="dark"?c.jsx(K8,{className:"w-5 h-5"}):c.jsx(aT,{className:"w-5 h-5"})}),c.jsxs(Ad,{children:[c.jsx(Id,{asChild:!0,children:c.jsxs(pe,{variant:"ghost",size:"icon",className:"relative rounded-xl",children:[c.jsx(CF,{className:"w-5 h-5"}),c.jsx(St,{className:"absolute -top-1 -right-1 w-5 h-5 p-0 flex items-center justify-center text-[10px]",children:v})]})}),c.jsxs(Dd,{align:"end",className:"w-80 rounded-xl",children:[c.jsx(ip,{children:"Notifications"}),c.jsx(bd,{}),x.length===0?c.jsx("div",{className:"p-6 text-center text-muted-foreground text-sm",children:"No notifications"}):c.jsx("div",{className:"space-y-2 p-2 max-h-[400px] overflow-y-auto",children:x.slice(0,5).map((T,I)=>c.jsxs("div",{className:`p-3 rounded-lg ${I===0?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"} text-[14px] cursor-pointer`,onClick:()=>{if(H_.markAsRead(T._id),w(x.filter(A=>A._id!==T._id)),y(v-1),T.type==="meeting_invitation"&&T.metadata?.meetingRoomId){const A=new URLSearchParams({room:T.metadata.meetingRoomId,title:T.metadata.meetingTitle||T.title});s(`/meet?${A.toString()}`)}else T.documentId?s(`/documents/${T.documentId}`):T.folderId&&s(`/folders/${T.folderId}`)},children:[c.jsx("p",{className:"font-medium",children:T.title}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-[13px]",children:T.message}),c.jsx("p",{className:"text-[12px] text-muted-foreground mt-1",children:new Date(T.createdAt).toLocaleString()})]},T._id))})]})]}),c.jsxs(Ad,{children:[c.jsx(Id,{asChild:!0,children:c.jsx(pe,{variant:"ghost",className:"rounded-xl",children:c.jsxs(yr,{className:"w-8 h-8",children:[c.jsx(hm,{src:(()=>{if(!k)return;const T=k.avatar||k.picture;if(T)return T.startsWith("http")?T:`${en.replace("/api","")}${T}`})(),alt:k?`${k.firstName} ${k.lastName}`:"User"}),c.jsx(er,{className:"bg-blue-600 text-white",children:k?Il(k.firstName,k.lastName):_?c.jsx(Rr,{className:"w-4 h-4 animate-spin"}):"?"})]})})}),c.jsxs(Dd,{align:"end",className:"w-56 rounded-xl",children:[c.jsx(ip,{children:c.jsx("div",{children:_?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Rr,{className:"w-4 h-4 animate-spin"}),c.jsx("span",{className:"text-[12px] text-muted-foreground",children:"Loading..."})]}):k?c.jsxs(c.Fragment,{children:[c.jsx("p",{children:k.firstName&&k.lastName?`${k.firstName} ${k.lastName}`:"User"}),c.jsx("p",{className:"text-[12px] text-muted-foreground",children:k.email||"No email"})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"User"}),c.jsx("p",{className:"text-[12px] text-muted-foreground",children:"No data"})]})})}),c.jsx(bd,{}),c.jsx(ra,{asChild:!0,children:c.jsxs(lt,{to:"/profile",className:"flex items-center cursor-pointer",children:[c.jsx(e$,{className:"w-4 h-4 mr-2"}),"Profile"]})}),c.jsx(bd,{}),c.jsxs(ra,{onClick:t,className:"text-red-600 cursor-pointer",children:[c.jsx(m8,{className:"w-4 h-4 mr-2"}),"Log out"]})]})]})]})]})}function Pe({className:t,...e}){return c.jsx("div",{"data-slot":"card",className:He("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}var J0="Progress",Q0=100,[BU]=nr(J0),[FU,$U]=BU(J0),LM=b.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=zU,...i}=t;(s||s===0)&&!x2(s)&&console.error(UU(`${s}`,"Progress"));const l=x2(s)?s:Q0;r!==null&&!v2(r,l)&&console.error(HU(`${r}`,"Progress"));const u=v2(r,l)?r:null,h=ap(u)?o(u,l):void 0;return c.jsx(FU,{scope:n,value:u,max:l,children:c.jsx(Ae.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":ap(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":$M(u,l),"data-value":u??void 0,"data-max":l,...i,ref:e})})});LM.displayName=J0;var BM="ProgressIndicator",FM=b.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=$U(BM,n);return c.jsx(Ae.div,{"data-state":$M(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});FM.displayName=BM;function zU(t,e){return`${Math.round(t/e*100)}%`}function $M(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function ap(t){return typeof t=="number"}function x2(t){return ap(t)&&!isNaN(t)&&t>0}function v2(t,e){return ap(t)&&!isNaN(t)&&t<=e&&t>=0}function UU(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Q0}\`.`}function HU(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Q0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var WU=LM,VU=FM;function Qo({className:t,value:e,...n}){return c.jsx(WU,{"data-slot":"progress",className:He("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:c.jsx(VU,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}var fm="Tabs",[YU]=nr(fm,[im]),zM=im(),[qU,Z0]=YU(fm),UM=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:u="automatic",...h}=t,f=cu(l),[m,x]=go({prop:r,onChange:s,defaultProp:o??"",caller:fm});return c.jsx(qU,{scope:n,baseId:os(),value:m,onValueChange:x,orientation:i,dir:f,activationMode:u,children:c.jsx(Ae.div,{dir:f,"data-orientation":i,...h,ref:e})})});UM.displayName=fm;var HM="TabsList",WM=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,o=Z0(HM,n),i=zM(n);return c.jsx($T,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:c.jsx(Ae.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});WM.displayName=HM;var VM="TabsTrigger",YM=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=t,i=Z0(VM,n),l=zM(n),u=XM(i.baseId,r),h=GM(i.baseId,r),f=r===i.value;return c.jsx(zT,{asChild:!0,...l,focusable:!s,active:f,children:c.jsx(Ae.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...o,ref:e,onMouseDown:Ce(t.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?i.onValueChange(r):m.preventDefault()}),onKeyDown:Ce(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&i.onValueChange(r)}),onFocus:Ce(t.onFocus,()=>{const m=i.activationMode!=="manual";!f&&!s&&m&&i.onValueChange(r)})})})});YM.displayName=VM;var qM="TabsContent",KM=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...i}=t,l=Z0(qM,n),u=XM(l.baseId,r),h=GM(l.baseId,r),f=r===l.value,m=b.useRef(f);return b.useEffect(()=>{const x=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(x)},[]),c.jsx(Pn,{present:s||f,children:({present:x})=>c.jsx(Ae.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!x,id:h,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:x&&o})})});KM.displayName=qM;function XM(t,e){return`${t}-trigger-${e}`}function GM(t,e){return`${t}-content-${e}`}var KU=UM,XU=WM,GU=YM,JU=KM;function pm({className:t,...e}){return c.jsx(KU,{"data-slot":"tabs",className:He("flex flex-col gap-2",t),...e})}function mm({className:t,...e}){return c.jsx(XU,{"data-slot":"tabs-list",className:He("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...e})}function gr({className:t,...e}){return c.jsx(GU,{"data-slot":"tabs-trigger",className:He("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function js({className:t,...e}){return c.jsx(JU,{"data-slot":"tabs-content",className:He("flex-1 outline-none",t),...e})}const ns={startSession:async t=>(await Le.post("/pomodoro/start",t)).data,stopSession:async(t,e)=>(await Le.post(`/pomodoro/stop/${t}`,e||{})).data,getActiveSession:async()=>{try{return(await Le.get("/pomodoro/active")).data}catch(t){if(t.response?.status===404)return null;throw t}},getStats:async t=>{const e=t?`?period=${t}`:"";return(await Le.get(`/pomodoro/stats${e}`)).data},getRecentSessions:async(t=10)=>(await Le.get(`/pomodoro/recent?limit=${t}`)).data,getDailySessions:async(t,e)=>{const n=new URLSearchParams;t&&n.append("startDate",t),e&&n.append("endDate",e);const r=n.toString(),s=`/pomodoro/daily${r?`?${r}`:""}`;return(await Le.get(s)).data}};function QU({onClose:t}){const[e,n]=b.useState(25),[r,s]=b.useState(5),[o,i]=b.useState(e*60),[l,u]=b.useState(!1),[h,f]=b.useState(!1),[m,x]=b.useState(!1),[w,v]=b.useState([]),[y,k]=b.useState([]),[C,_]=b.useState(null),[j,M]=b.useState(!1),O=b.useRef(null),T=b.useRef(null);b.useEffect(()=>{I()},[]);const I=async()=>{try{M(!0);const N=new Date,L=new Date;L.setDate(L.getDate()-30);const[V,Q,ce,H]=await Promise.all([ns.getDailySessions(L.toISOString().split("T")[0],N.toISOString().split("T")[0]),ns.getStats("daily"),ns.getActiveSession(),ns.getRecentSessions(20)]);if(k(V.dailyStats),_(Q),v(H),ce){O.current=ce;const B=Math.floor((Date.now()-new Date(ce.startTime).getTime())/1e3),K=ce.duration*60-B;K>0?(i(K),u(!0),f(ce.type!=="work"),T.current=new Date(ce.startTime)):ce._id&&await ns.stopSession(ce._id,{interrupted:!0})}}catch(N){console.error("Failed to load Pomodoro data:",N)}finally{M(!1)}};b.useEffect(()=>{let N;return l&&o>0&&(N=window.setInterval(()=>{i(L=>L<=1?(A(),0):L-1)},1e3)),()=>{N&&clearInterval(N)}},[l,o]);const A=async()=>{u(!1);try{O.current?._id&&await ns.stopSession(O.current._id,{interrupted:!1}),await I(),h?(de.success("Break completed! Ready to work?",{duration:5e3}),i(e*60),f(!1)):(de.success("Work session completed! Time for a break!",{duration:5e3}),i(r*60),f(!0))}catch(N){console.error("Failed to complete session:",N),de.error("Failed to save session")}O.current=null,T.current=null},F=async()=>{if(l)u(!1);else try{const N=await ns.startSession({type:h?"break":"work",duration:h?r:e});O.current=N,T.current=new Date,u(!0),de.success(`${h?"Break":"Work"} session started!`)}catch(N){console.error("Failed to start session:",N),de.error("Failed to start session")}},U=async()=>{if(u(!1),O.current?._id)try{await ns.stopSession(O.current._id,{interrupted:!0,interruptionReason:"Timer reset"}),O.current=null,T.current=null,await I()}catch(N){console.error("Failed to reset session:",N)}i(h?r*60:e*60)},W=N=>{const L=Math.floor(N/60),V=N%60;return`${L.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`},Z=(h?r:e)*60,oe=(Z-o)/Z*100,ee=new Date().toISOString().split("T")[0],re=y.find(N=>N.date===ee),J=re?.sessionCount||0,z=re?.totalMinutes||0,R=re?.averageMinutes||0,D=y.slice(0,7),G=y.length>0?y.reduce((N,L)=>N+L.totalMinutes,0)/y.length:0;return c.jsxs(Pe,{className:"w-full max-w-md rounded-2xl shadow-lg",children:[c.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[c.jsxs("h3",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-3 h-3 rounded-full ${h?"bg-green-500":"bg-blue-600"} ${l?"animate-pulse":""}`}),"Pomodoro Timer"]}),t&&c.jsx(pe,{variant:"ghost",size:"icon",onClick:t,className:"rounded-lg",children:c.jsx(us,{className:"w-4 h-4"})})]}),c.jsxs(pm,{defaultValue:"timer",className:"w-full",children:[c.jsxs(mm,{className:"w-full rounded-none border-b",children:[c.jsx(gr,{value:"timer",className:"flex-1",children:"Timer"}),c.jsx(gr,{value:"stats",className:"flex-1",children:"Stats"})]}),c.jsxs(js,{value:"timer",className:"p-6 space-y-6",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("p",{className:"text-[14px] text-muted-foreground",children:h?" Break Time":" Work Session"}),c.jsxs("div",{className:"relative",children:[c.jsxs("svg",{className:"w-48 h-48 mx-auto transform -rotate-90",children:[c.jsx("circle",{cx:"96",cy:"96",r:"88",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-muted"}),c.jsx("circle",{cx:"96",cy:"96",r:"88",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${2*Math.PI*88}`,strokeDashoffset:`${2*Math.PI*88*(1-oe/100)}`,className:h?"text-green-500":"text-blue-600",strokeLinecap:"round",style:{transition:"stroke-dashoffset 1s linear"}})]}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("span",{className:"text-[48px]",children:W(o)})})]}),c.jsxs("div",{className:"flex items-center justify-center gap-3",children:[c.jsx(pe,{variant:l?"outline":"default",size:"lg",onClick:F,className:"rounded-xl",children:l?c.jsxs(c.Fragment,{children:[c.jsx(N8,{className:"w-5 h-5 mr-2"}),"Pause"]}):c.jsxs(c.Fragment,{children:[c.jsx(O8,{className:"w-5 h-5 mr-2"}),"Start"]})}),c.jsx(pe,{variant:"outline",size:"lg",onClick:U,className:"rounded-xl",children:c.jsx(I8,{className:"w-5 h-5"})}),c.jsx(pe,{variant:"outline",size:"lg",onClick:()=>x(!m),className:"rounded-xl",children:c.jsx(lT,{className:"w-5 h-5"})})]})]}),m&&c.jsxs("div",{className:"space-y-4 p-4 rounded-xl bg-muted/50",children:[c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"workDuration",children:"Work Duration (minutes)"}),c.jsx(Ke,{id:"workDuration",type:"number",value:e,onChange:N=>{const L=parseInt(N.target.value);n(L),h||i(L*60)},className:"mt-1.5 rounded-xl",min:"1",max:"60"})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"breakDuration",children:"Break Duration (minutes)"}),c.jsx(Ke,{id:"breakDuration",type:"number",value:r,onChange:N=>{const L=parseInt(N.target.value);s(L),h&&i(L*60)},className:"mt-1.5 rounded-xl",min:"1",max:"30"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Today's Sessions"}),c.jsx("div",{className:"flex gap-1",children:Array.from({length:8}).map((N,L)=>c.jsx("div",{className:`h-8 flex-1 rounded transition-colors ${L<J?"bg-blue-600 dark:bg-blue-500":"bg-muted"}`,title:L<J?`Session ${L+1}`:"Not completed"},L))}),c.jsxs("div",{className:"flex items-center justify-between text-[12px]",children:[c.jsxs("span",{className:"text-muted-foreground",children:[J," ",J===1?"session":"sessions"," completed"]}),R>0&&c.jsxs("span",{className:"text-muted-foreground",children:["Avg: ",R.toFixed(1)," min/session"]})]})]})]}),c.jsx(js,{value:"stats",className:"p-6 space-y-4",children:j?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx(Rr,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs(Pe,{className:"p-4 rounded-xl text-center",children:[c.jsx("p",{className:"text-[14px] text-muted-foreground mb-1",children:"Today"}),c.jsx("p",{className:"text-[28px] font-bold",children:J}),c.jsx("p",{className:"text-[12px] text-muted-foreground",children:"sessions"})]}),c.jsxs(Pe,{className:"p-4 rounded-xl text-center",children:[c.jsx("p",{className:"text-[14px] text-muted-foreground mb-1",children:"Total Time"}),c.jsx("p",{className:"text-[28px] font-bold",children:z}),c.jsx("p",{className:"text-[12px] text-muted-foreground",children:"minutes"})]})]}),C&&c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs(Pe,{className:"p-4 rounded-xl text-center",children:[c.jsx("p",{className:"text-[14px] text-muted-foreground mb-1",children:"Avg Session"}),c.jsx("p",{className:"text-[28px] font-bold",children:C.averageSessionLength.toFixed(1)}),c.jsx("p",{className:"text-[12px] text-muted-foreground",children:"minutes"})]}),c.jsxs(Pe,{className:"p-4 rounded-xl text-center",children:[c.jsx("p",{className:"text-[14px] text-muted-foreground mb-1",children:"Productivity"}),c.jsx("p",{className:"text-[28px] font-bold",children:C.productivityScore}),c.jsx("p",{className:"text-[12px] text-muted-foreground",children:"score"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-[14px]",children:[c.jsx("span",{className:"text-muted-foreground",children:"Average Work Time/Day"}),c.jsxs("span",{className:"font-semibold",children:[G.toFixed(1)," minutes"]})]}),c.jsx(Qo,{value:Math.min(J/8*100,100),className:"h-2"})]}),D.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Last 7 Days"}),c.jsx("div",{className:"space-y-2",children:D.map(N=>c.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[12px] text-muted-foreground",children:new Date(N.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),c.jsxs("span",{className:"text-[12px] font-medium",children:[N.sessionCount," ",N.sessionCount===1?"session":"sessions"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"text-[12px] text-muted-foreground",children:[N.totalMinutes," min"]}),c.jsxs("span",{className:"text-[12px] font-medium",children:["Avg: ",N.averageMinutes.toFixed(1)," min"]})]})]},N.date))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Recent Sessions"}),c.jsxs("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:[w.slice(0,10).map(N=>c.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${N.type==="work"?"bg-blue-600":"bg-green-500"}`}),c.jsx("span",{className:"text-[14px] capitalize",children:N.type==="work"?"Work":N.type==="break"?"Break":"Long Break"}),c.jsx("span",{className:"text-[12px] text-muted-foreground",children:new Date(N.startTime).toLocaleDateString()})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[N.completed&&c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded",children:"Completed"}),N.interrupted&&c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded",children:"Interrupted"}),c.jsxs("span",{className:"text-[12px] text-muted-foreground",children:[N.duration," min"]})]})]},N._id)),w.length===0&&c.jsx("p",{className:"text-center text-[14px] text-muted-foreground py-4",children:"No sessions yet. Start your first Pomodoro!"})]})]})]})})]})]})}function ZU({children:t,onLogout:e}){const[n,r]=b.useState(!0),[s,o]=b.useState(()=>localStorage.getItem("pomodoro_timer_visible")==="true");return b.useEffect(()=>{localStorage.setItem("pomodoro_timer_visible",s.toString());const i=u=>{u.key==="pomodoro_timer_visible"&&o(u.newValue==="true")},l=()=>{o(!0)};return window.addEventListener("storage",i),window.addEventListener("showPomodoroTimer",l),()=>{window.removeEventListener("storage",i),window.removeEventListener("showPomodoroTimer",l)}},[s]),c.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-50 dark:bg-background",children:[c.jsx(v$,{isOpen:n,onToggle:()=>r(!n),onShowPomodoro:()=>o(!0)}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[c.jsx(LU,{onLogout:e,onShowPomodoro:()=>o(!0)}),c.jsx("main",{className:"flex-1 overflow-y-auto p-6 lg:p-8",children:t||c.jsx(aj,{})}),s&&c.jsx("div",{className:"fixed bottom-6 right-6 z-40 shadow-2xl",children:c.jsx(QU,{onClose:()=>o(!1)})})]})]})}const JM=t=>t?.code==="ERR_NETWORK"||t?.code==="ECONNREFUSED"||t?.message?.includes("ERR_CONNECTION_REFUSED")||t?.message?.includes("Network Error")||!t?.response,eH=async()=>{try{const[t,e]=await Promise.all([Le.get("/Document"),Le.get("/folder/getAllFolder?page=1&perPage=100")]),n=e.data||[];return{totalDocuments:t.data?.length||0,totalFolders:n?.length||0,totalCollaborators:0}}catch(t){return JM(t)?(console.warn("Backend connection unavailable. Returning empty dashboard stats."),{totalDocuments:0,totalFolders:0,totalCollaborators:0}):(console.error("Failed to fetch dashboard stats:",t),{totalDocuments:0,totalFolders:0,totalCollaborators:0})}},tH=async()=>{try{const e=(await Le.get("/Document/favorites")).data||[],n=i=>i?typeof i=="string"?i:typeof i=="object"&&i._id?String(i._id):String(i):null,r=i=>i?typeof i=="object"&&i.Name?i.Name:typeof i=="object"&&i.name?i.name:"Uncategorized":"Uncategorized",s=e.map(i=>{const l=i.folderId;return l&&typeof l=="string"?l:null}).filter(Boolean),o=new Map;if(s.length>0)try{((await Le.get("/folder/getAllFolder?page=1&perPage=100")).data||[]).forEach(u=>{o.set(u._id,u.Name||u.name||"Uncategorized")})}catch(i){console.error("Failed to fetch folders for favorite documents:",i)}return e.map(i=>{const l=i.folderId;let u="Uncategorized";return l&&(u=r(l),u==="Uncategorized"&&typeof l=="string"&&(u=o.get(l)||"Uncategorized")),{_id:i._id,Title:i.Title,folderName:u,updatedDate:i.updatedDate||i.createdDate,folderId:n(l)||void 0}}).slice(0,5)}catch(t){return JM(t)?(console.warn("Backend connection unavailable. Returning empty favorite documents."),[]):(console.error("Failed to fetch favorite documents:",t),[])}},QM=en.replace("/api",""),Bt=gt.create({baseURL:QM,headers:{"Content-Type":"application/json"}});console.log(" API Base URL:",QM);Bt.interceptors.request.use(t=>{const e=localStorage.getItem(On);return e&&(t.headers.Authorization=`Bearer ${e}`),t});const xt={getAll:()=>Bt.get("/Document").then(t=>t.data),getByFolderId:t=>Bt.get(`/Document/documents/${t}`).then(e=>e.data),getById:t=>(console.log(" Fetching document:",t),Bt.get(`/Document/${t}`).then(e=>(console.log(" Document response:",e.data),e.data)).catch(e=>{throw console.error(" Document fetch error:",e),e})),create:t=>Bt.post("/Document",t).then(e=>e.data),createWithFolder:(t,e)=>Bt.post(`/Document/${t}`,e).then(n=>n.data),update:(t,e)=>Bt.put(`/Document/${t}`,e).then(n=>n.data),delete:t=>Bt.delete(`/Document/${t}`).then(()=>{}),archive:t=>Bt.put(`/Document/archive/${t}`,{}).then(e=>e.data),unarchive:t=>Bt.post(`/Document/dearchive/${t}`,{}).then(e=>e.data),duplicate:t=>Bt.post(`/Document/${t}/duplicate`,{}).then(e=>e.data),share:(t,e,n="view")=>Bt.post(`/Document/${t}/share`,{userId:e,access:n}).then(()=>{}),shareByEmail:(t,e,n="view")=>Bt.post(`/Document/${t}/share-email`,{email:e,access:n}).then(r=>r.data),getAccessLevel:t=>Bt.get(`/Document/${t}/access`).then(e=>e.data),getSharedUsers:t=>Bt.get(`/Document/${t}/shared-users`).then(e=>e.data),unshare:(t,e)=>Bt.delete(`/Document/${t}/share/${e}`).then(()=>{}),getContent:t=>(console.log(" Fetching content for document:",t),Bt.get(`/content/document/${t}`).then(e=>(console.log(" Content response:",e.data),e.data)).catch(e=>(console.error(" Content fetch error:",e),null))),saveContent:t=>Bt.post("/content",t).then(e=>e.data),favorite:t=>Bt.post(`/Document/${t}/favorite`,{}).then(e=>e.data),unfavorite:t=>Bt.post(`/Document/${t}/unfavorite`,{}).then(e=>e.data),getFavorites:()=>Bt.get("/Document/favorites").then(t=>t.data)},ZM=en.replace("/api",""),cn=gt.create({baseURL:ZM,headers:{"Content-Type":"application/json"}});console.log(" Folders API Base URL:",ZM);cn.interceptors.request.use(t=>{const e=localStorage.getItem(On);return e&&(t.headers.Authorization=`Bearer ${e}`),t});cn.interceptors.response.use(t=>t,t=>(t.response?.status===401&&(console.warn("Unauthorized - token may be expired or invalid"),localStorage.removeItem(On)),Promise.reject(t)));const Ht={search:(t,e=1,n=10)=>cn.get(`/folder/search?keyword=${t}&page=${e}&perPage=${n}`).then(r=>r.data),getAll:(t=1,e=10)=>cn.get(`/folder/getAllFolder?page=${t}&perPage=${e}`).then(n=>n.data),create:t=>cn.post("/folder/AddFolder",t).then(e=>e.data),getById:t=>cn.get(`/folder/getbyidfolder/${t}`).then(e=>e.data),update:(t,e)=>cn.patch(`/folder/${t}`,{Name:e}).then(n=>n.data),delete:t=>cn.delete(`/folder/${t}`).then(()=>{}),share:(t,e)=>cn.post(`/folder/${t}/share`,e).then(()=>{}),inviteByEmail:(t,e)=>cn.post(`/folder/${t}/invite-by-email`,e).then(n=>n.data),getShared:()=>cn.get("/folder/shared").then(t=>t.data),assignAccess:(t,e,n)=>cn.patch(`/folder/assign-access/${t}`,{userId:e,access:n}).then(()=>{}),getAccessLevel:t=>cn.get(`/folder/access-level/${t}`).then(e=>e.data),ignoreAccess:(t,e)=>cn.delete(`/folder/${t}/ignore-access/${e}`).then(()=>{}),toggleAccess:(t,e)=>cn.patch(`/folder/toggle-access/${t}`,e?{access:e}:{}).then(()=>{}),getChartData:()=>cn.get("/folder/folder-creation-data").then(t=>t.data),getSharedCount:()=>cn.get("/folder/shared/count").then(t=>t.data),getSharedUsers:()=>cn.get("/folder/shared-users").then(t=>t.data)};function y2(){const[t,e]=b.useState("John"),[n,r]=b.useState({totalDocuments:0,totalFolders:0,totalCollaborators:0}),[s,o]=b.useState([]),[i,l]=b.useState([]),[u,h]=b.useState(!0);b.useEffect(()=>{const v=setTimeout(()=>{h(!1)},15e3);return x(),()=>clearTimeout(v)},[]);const f=v=>v?.code==="ERR_NETWORK"||v?.code==="ECONNREFUSED"||v?.message?.includes("ERR_CONNECTION_REFUSED")||v?.message?.includes("Network Error")||!v?.response,m=async()=>{try{const[v,y]=await Promise.all([xt.getAll(),Ht.getAll(1,100)]),k=new Map;return y.forEach(_=>{k.set(_._id,_)}),v.map(_=>{const j=typeof _.folderId=="string"?_.folderId:_.folderId?._id?.toString(),M=j?k.get(j):null;return{_id:_._id,Title:_.Title||"Untitled Document",folderName:M?.Name||"Uncategorized",updatedDate:_.updatedDate||_.createdDate,folderId:j||void 0}}).filter(_=>!_.Title.includes("Error Loading Document")).sort((_,j)=>new Date(j.updatedDate).getTime()-new Date(_.updatedDate).getTime()).slice(0,5)}catch(v){if(f(v))return console.warn("Backend connection unavailable. Returning empty recent documents."),[];throw v}},x=async()=>{try{h(!0);const v=localStorage.getItem("access_token");if(v)try{const j=v.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),M=decodeURIComponent(atob(j).split("").map(A=>"%"+("00"+A.charCodeAt(0).toString(16)).slice(-2)).join("")),O=JSON.parse(M),T=O.id||O._id||O.userId,I=await pa(T);e(I.firstName||"User")}catch(_){f(_)?console.warn("Backend connection unavailable. Using default user name."):console.error("Failed to get user info:",_)}const[y,k,C]=await Promise.allSettled([eH(),tH(),m()]);if(y.status==="fulfilled")r(y.value);else{const _=y.reason;f(_)?(console.warn("Backend connection unavailable. Dashboard stats will be empty."),r({totalDocuments:0,totalFolders:0,totalCollaborators:0})):console.error("Failed to load stats:",_)}if(C.status==="fulfilled")o(C.value);else{const _=C.reason;f(_)?(console.warn("Backend connection unavailable. Recent documents will be empty."),o([])):console.error("Failed to load recent documents:",_)}if(k.status==="fulfilled")l(k.value);else{const _=k.reason;f(_)?(console.warn("Backend connection unavailable. Favorite documents will be empty."),l([])):console.error("Failed to load favorite documents:",_)}}catch(v){f(v)?console.warn("Backend connection unavailable. Dashboard will show empty state."):(console.error("Failed to load dashboard data:",v),de.error("Failed to load dashboard data"))}finally{h(!1)}},w=v=>{const y=new Date(v),C=Math.floor((new Date().getTime()-y.getTime())/1e3);if(C<60)return"Just now";if(C<3600){const _=Math.floor(C/60);return`${_} minute${_>1?"s":""} ago`}else if(C<86400){const _=Math.floor(C/3600);return`${_} hour${_>1?"s":""} ago`}else{const _=Math.floor(C/86400);return`${_} day${_>1?"s":""} ago`}};return u?c.jsx("div",{className:"max-w-7xl mx-auto space-y-6 flex items-center justify-center min-h-[400px]",children:c.jsx(Rr,{className:"w-8 h-8 animate-spin text-primary"})}):c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-[24px] mb-2",children:["Welcome back, ",t]}),c.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening in your workspace today"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(Pe,{className:"p-6 rounded-xl",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[14px] text-muted-foreground mb-1",children:"Total Documents"}),c.jsx("p",{className:"text-[28px]",children:n.totalDocuments})]}),c.jsx("div",{className:"p-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-blue-600",children:c.jsx(Xn,{className:"w-6 h-6"})})]})}),c.jsx(Pe,{className:"p-6 rounded-xl",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[14px] text-muted-foreground mb-1",children:"Active Folders"}),c.jsx("p",{className:"text-[28px]",children:n.totalFolders})]}),c.jsx("div",{className:"p-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-purple-600",children:c.jsx(un,{className:"w-6 h-6"})})]})}),c.jsx(Pe,{className:"p-6 rounded-xl",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[14px] text-muted-foreground mb-1",children:"Collaborators"}),c.jsx("p",{className:"text-[28px]",children:n.totalCollaborators})]}),c.jsx("div",{className:"p-3 rounded-xl bg-gray-100 dark:bg-gray-800 text-green-600",children:c.jsx(Td,{className:"w-6 h-6"})})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs(Pe,{className:"lg:col-span-2 p-6 rounded-xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-[20px]",children:"Recent Documents"}),c.jsx(lt,{to:"/documents",children:c.jsx(pe,{variant:"ghost",size:"sm",className:"rounded-lg",children:"View all"})})]}),c.jsx("div",{className:"space-y-3",children:s.length>0?s.map(v=>c.jsxs(lt,{to:`/documents/${v._id}`,className:"flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[c.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:c.jsx(Xn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"truncate font-medium",children:v.Title}),c.jsx("p",{className:"text-[14px] text-muted-foreground truncate",children:v.folderName||"Uncategorized"})]})]}),c.jsx("div",{className:"flex items-center space-x-3",children:c.jsxs("span",{className:"text-[14px] text-muted-foreground flex items-center",children:[c.jsx(yd,{className:"w-4 h-4 mr-1"}),w(v.updatedDate)]})})]},v._id)):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Xn,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground opacity-50"}),c.jsx("p",{className:"text-muted-foreground mb-2",children:"No recent documents"}),c.jsx(lt,{to:"/documents",children:c.jsx(pe,{variant:"outline",size:"sm",className:"rounded-xl mt-2",children:"Create your first document"})})]})})]}),c.jsxs(Pe,{className:"p-6 rounded-xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-[20px]",children:"Favorites"}),c.jsx(Zf,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"})]}),c.jsx("div",{className:"space-y-3",children:i.length>0?c.jsx("div",{className:"space-y-2",children:i.map(v=>c.jsxs(lt,{to:`/documents/${v._id}`,className:"flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[c.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:c.jsx(Xn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"truncate font-medium",children:v.Title||"Untitled Document"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:v.folderName||"Uncategorized"})]})]}),c.jsx("span",{className:"text-[12px] text-muted-foreground ml-2",children:w(v.updatedDate)})]},v._id))}):c.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No favorite documents yet"})}),c.jsx("div",{className:"flex gap-2 mt-4",children:c.jsx(lt,{to:"/documents",className:"flex-1",children:c.jsx(pe,{variant:"outline",className:"w-full rounded-xl",children:"View all documents"})})})]})]}),c.jsxs(Pe,{className:"p-6 rounded-xl",children:[c.jsx("h2",{className:"text-[20px] mb-4",children:"Quick Actions"}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[c.jsx(lt,{to:"/documents/new",children:c.jsxs(pe,{className:"rounded-xl",children:[c.jsx(Xn,{className:"w-4 h-4 mr-2"}),"New Document"]})}),c.jsx(lt,{to:"/folders",children:c.jsxs(pe,{variant:"outline",className:"rounded-xl",children:[c.jsx(un,{className:"w-4 h-4 mr-2"}),"Create Folder"]})}),c.jsx(lt,{to:"/chat",children:c.jsx(pe,{variant:"outline",className:"rounded-xl",children:"Start Conversation"})})]})]})]})}function ky(t,[e,n]){return Math.min(n,Math.max(e,t))}function eb(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var eO=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),nH="VisuallyHidden",rH=b.forwardRef((t,e)=>c.jsx(Ae.span,{...t,ref:e,style:{...eO,...t.style}}));rH.displayName=nH;var sH=[" ","Enter","ArrowUp","ArrowDown"],oH=[" ","Enter"],ma="Select",[gm,xm,iH]=M0(ma),[rc]=nr(ma,[iH,nc]),vm=nc(),[aH,Ei]=rc(ma),[lH,cH]=rc(ma),tO=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:o,value:i,defaultValue:l,onValueChange:u,dir:h,name:f,autoComplete:m,disabled:x,required:w,form:v}=t,y=vm(e),[k,C]=b.useState(null),[_,j]=b.useState(null),[M,O]=b.useState(!1),T=cu(h),[I,A]=go({prop:r,defaultProp:s??!1,onChange:o,caller:ma}),[F,U]=go({prop:i,defaultProp:l,onChange:u,caller:ma}),W=b.useRef(null),Z=k?v||!!k.closest("form"):!0,[oe,ee]=b.useState(new Set),re=Array.from(oe).map(J=>J.props.value).join(";");return c.jsx($0,{...y,children:c.jsxs(aH,{required:w,scope:e,trigger:k,onTriggerChange:C,valueNode:_,onValueNodeChange:j,valueNodeHasChildren:M,onValueNodeHasChildrenChange:O,contentId:os(),value:F,onValueChange:U,open:I,onOpenChange:A,dir:T,triggerPointerDownPosRef:W,disabled:x,children:[c.jsx(gm.Provider,{scope:e,children:c.jsx(lH,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(J=>{ee(z=>new Set(z).add(J))},[]),onNativeOptionRemove:b.useCallback(J=>{ee(z=>{const R=new Set(z);return R.delete(J),R})},[]),children:n})}),Z?c.jsxs(SO,{"aria-hidden":!0,required:w,tabIndex:-1,name:f,autoComplete:m,value:F,onChange:J=>U(J.target.value),disabled:x,form:v,children:[F===void 0?c.jsx("option",{value:""}):null,Array.from(oe)]},re):null]})})};tO.displayName=ma;var nO="SelectTrigger",rO=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,o=vm(n),i=Ei(nO,n),l=i.disabled||r,u=Xe(e,i.onTriggerChange),h=xm(n),f=b.useRef("touch"),[m,x,w]=_O(y=>{const k=h().filter(j=>!j.disabled),C=k.find(j=>j.value===i.value),_=EO(k,y,C);_!==void 0&&i.onValueChange(_.value)}),v=y=>{l||(i.onOpenChange(!0),w()),y&&(i.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return c.jsx(om,{asChild:!0,...o,children:c.jsx(Ae.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":CO(i.value)?"":void 0,...s,ref:u,onClick:Ce(s.onClick,y=>{y.currentTarget.focus(),f.current!=="mouse"&&v(y)}),onPointerDown:Ce(s.onPointerDown,y=>{f.current=y.pointerType;const k=y.target;k.hasPointerCapture(y.pointerId)&&k.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:Ce(s.onKeyDown,y=>{const k=m.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&x(y.key),!(k&&y.key===" ")&&sH.includes(y.key)&&(v(),y.preventDefault())})})})});rO.displayName=nO;var sO="SelectValue",oO=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:i="",...l}=t,u=Ei(sO,n),{onValueNodeHasChildrenChange:h}=u,f=o!==void 0,m=Xe(e,u.onValueNodeChange);return Vt(()=>{h(f)},[h,f]),c.jsx(Ae.span,{...l,ref:m,style:{pointerEvents:"none"},children:CO(u.value)?c.jsx(c.Fragment,{children:i}):o})});oO.displayName=sO;var dH="SelectIcon",iO=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return c.jsx(Ae.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});iO.displayName=dH;var uH="SelectPortal",aO=t=>c.jsx(fu,{asChild:!0,...t});aO.displayName=uH;var ga="SelectContent",lO=b.forwardRef((t,e)=>{const n=Ei(ga,t.__scopeSelect),[r,s]=b.useState();if(Vt(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?su.createPortal(c.jsx(cO,{scope:t.__scopeSelect,children:c.jsx(gm.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),o):null}return c.jsx(dO,{...t,ref:e})});lO.displayName=ga;var ts=10,[cO,Ni]=rc(ga),hH="SelectContentImpl",fH=gi("SelectContent.RemoveScroll"),dO=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:u,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:x,collisionPadding:w,sticky:v,hideWhenDetached:y,avoidCollisions:k,...C}=t,_=Ei(ga,n),[j,M]=b.useState(null),[O,T]=b.useState(null),I=Xe(e,B=>M(B)),[A,F]=b.useState(null),[U,W]=b.useState(null),Z=xm(n),[oe,ee]=b.useState(!1),re=b.useRef(!1);b.useEffect(()=>{if(j)return am(j)},[j]),em();const J=b.useCallback(B=>{const[K,...q]=Z().map(ae=>ae.ref.current),[se]=q.slice(-1),he=document.activeElement;for(const ae of B)if(ae===he||(ae?.scrollIntoView({block:"nearest"}),ae===K&&O&&(O.scrollTop=0),ae===se&&O&&(O.scrollTop=O.scrollHeight),ae?.focus(),document.activeElement!==he))return},[Z,O]),z=b.useCallback(()=>J([A,j]),[J,A,j]);b.useEffect(()=>{oe&&z()},[oe,z]);const{onOpenChange:R,triggerPointerDownPosRef:D}=_;b.useEffect(()=>{if(j){let B={x:0,y:0};const K=se=>{B={x:Math.abs(Math.round(se.pageX)-(D.current?.x??0)),y:Math.abs(Math.round(se.pageY)-(D.current?.y??0))}},q=se=>{B.x<=10&&B.y<=10?se.preventDefault():j.contains(se.target)||R(!1),document.removeEventListener("pointermove",K),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",K),document.addEventListener("pointerup",q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",K),document.removeEventListener("pointerup",q,{capture:!0})}}},[j,R,D]),b.useEffect(()=>{const B=()=>R(!1);return window.addEventListener("blur",B),window.addEventListener("resize",B),()=>{window.removeEventListener("blur",B),window.removeEventListener("resize",B)}},[R]);const[G,N]=_O(B=>{const K=Z().filter(he=>!he.disabled),q=K.find(he=>he.ref.current===document.activeElement),se=EO(K,B,q);se&&setTimeout(()=>se.ref.current.focus())}),L=b.useCallback((B,K,q)=>{const se=!re.current&&!q;(_.value!==void 0&&_.value===K||se)&&(F(B),se&&(re.current=!0))},[_.value]),V=b.useCallback(()=>j?.focus(),[j]),Q=b.useCallback((B,K,q)=>{const se=!re.current&&!q;(_.value!==void 0&&_.value===K||se)&&W(B)},[_.value]),ce=r==="popper"?Sy:uO,H=ce===Sy?{side:l,sideOffset:u,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:x,collisionPadding:w,sticky:v,hideWhenDetached:y,avoidCollisions:k}:{};return c.jsx(cO,{scope:n,content:j,viewport:O,onViewportChange:T,itemRefCallback:L,selectedItem:A,onItemLeave:V,itemTextRefCallback:Q,focusSelectedItem:z,selectedItemText:U,position:r,isPositioned:oe,searchRef:G,children:c.jsx(mu,{as:fH,allowPinchZoom:!0,children:c.jsx(uu,{asChild:!0,trapped:_.open,onMountAutoFocus:B=>{B.preventDefault()},onUnmountAutoFocus:Ce(s,B=>{_.trigger?.focus({preventScroll:!0}),B.preventDefault()}),children:c.jsx(du,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:B=>B.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:c.jsx(ce,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:B=>B.preventDefault(),...C,...H,onPlaced:()=>ee(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Ce(C.onKeyDown,B=>{const K=B.ctrlKey||B.altKey||B.metaKey;if(B.key==="Tab"&&B.preventDefault(),!K&&B.key.length===1&&N(B.key),["ArrowUp","ArrowDown","Home","End"].includes(B.key)){let se=Z().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(B.key)&&(se=se.slice().reverse()),["ArrowUp","ArrowDown"].includes(B.key)){const he=B.target,ae=se.indexOf(he);se=se.slice(ae+1)}setTimeout(()=>J(se)),B.preventDefault()}})})})})})})});dO.displayName=hH;var pH="SelectItemAlignedPosition",uO=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,o=Ei(ga,n),i=Ni(ga,n),[l,u]=b.useState(null),[h,f]=b.useState(null),m=Xe(e,I=>f(I)),x=xm(n),w=b.useRef(!1),v=b.useRef(!0),{viewport:y,selectedItem:k,selectedItemText:C,focusSelectedItem:_}=i,j=b.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&h&&y&&k&&C){const I=o.trigger.getBoundingClientRect(),A=h.getBoundingClientRect(),F=o.valueNode.getBoundingClientRect(),U=C.getBoundingClientRect();if(o.dir!=="rtl"){const he=U.left-A.left,ae=F.left-he,ge=I.left-ae,ke=I.width+ge,ue=Math.max(ke,A.width),fe=window.innerWidth-ts,Se=ky(ae,[ts,Math.max(ts,fe-ue)]);l.style.minWidth=ke+"px",l.style.left=Se+"px"}else{const he=A.right-U.right,ae=window.innerWidth-F.right-he,ge=window.innerWidth-I.right-ae,ke=I.width+ge,ue=Math.max(ke,A.width),fe=window.innerWidth-ts,Se=ky(ae,[ts,Math.max(ts,fe-ue)]);l.style.minWidth=ke+"px",l.style.right=Se+"px"}const W=x(),Z=window.innerHeight-ts*2,oe=y.scrollHeight,ee=window.getComputedStyle(h),re=parseInt(ee.borderTopWidth,10),J=parseInt(ee.paddingTop,10),z=parseInt(ee.borderBottomWidth,10),R=parseInt(ee.paddingBottom,10),D=re+J+oe+R+z,G=Math.min(k.offsetHeight*5,D),N=window.getComputedStyle(y),L=parseInt(N.paddingTop,10),V=parseInt(N.paddingBottom,10),Q=I.top+I.height/2-ts,ce=Z-Q,H=k.offsetHeight/2,B=k.offsetTop+H,K=re+J+B,q=D-K;if(K<=Q){const he=W.length>0&&k===W[W.length-1].ref.current;l.style.bottom="0px";const ae=h.clientHeight-y.offsetTop-y.offsetHeight,ge=Math.max(ce,H+(he?V:0)+ae+z),ke=K+ge;l.style.height=ke+"px"}else{const he=W.length>0&&k===W[0].ref.current;l.style.top="0px";const ge=Math.max(Q,re+y.offsetTop+(he?L:0)+H)+q;l.style.height=ge+"px",y.scrollTop=K-Q+y.offsetTop}l.style.margin=`${ts}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=Z+"px",r?.(),requestAnimationFrame(()=>w.current=!0)}},[x,o.trigger,o.valueNode,l,h,y,k,C,o.dir,r]);Vt(()=>j(),[j]);const[M,O]=b.useState();Vt(()=>{h&&O(window.getComputedStyle(h).zIndex)},[h]);const T=b.useCallback(I=>{I&&v.current===!0&&(j(),_?.(),v.current=!1)},[j,_]);return c.jsx(gH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:w,onScrollButtonChange:T,children:c.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:c.jsx(Ae.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});uO.displayName=pH;var mH="SelectPopperPosition",Sy=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ts,...o}=t,i=vm(n);return c.jsx(z0,{...i,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sy.displayName=mH;var[gH,tb]=rc(ga,{}),Cy="SelectViewport",hO=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,o=Ni(Cy,n),i=tb(Cy,n),l=Xe(e,o.onViewportChange),u=b.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(gm.Slot,{scope:n,children:c.jsx(Ae.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ce(s.onScroll,h=>{const f=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:x}=i;if(x?.current&&m){const w=Math.abs(u.current-f.scrollTop);if(w>0){const v=window.innerHeight-ts*2,y=parseFloat(m.style.minHeight),k=parseFloat(m.style.height),C=Math.max(y,k);if(C<v){const _=C+w,j=Math.min(v,_),M=_-j;m.style.height=j+"px",m.style.bottom==="0px"&&(f.scrollTop=M>0?M:0,m.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});hO.displayName=Cy;var fO="SelectGroup",[xH,vH]=rc(fO),yH=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=os();return c.jsx(xH,{scope:n,id:s,children:c.jsx(Ae.div,{role:"group","aria-labelledby":s,...r,ref:e})})});yH.displayName=fO;var pO="SelectLabel",bH=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=vH(pO,n);return c.jsx(Ae.div,{id:s.id,...r,ref:e})});bH.displayName=pO;var lp="SelectItem",[wH,mO]=rc(lp),gO=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...i}=t,l=Ei(lp,n),u=Ni(lp,n),h=l.value===r,[f,m]=b.useState(o??""),[x,w]=b.useState(!1),v=Xe(e,_=>u.itemRefCallback?.(_,r,s)),y=os(),k=b.useRef("touch"),C=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(wH,{scope:n,value:r,disabled:s,textId:y,isSelected:h,onItemTextChange:b.useCallback(_=>{m(j=>j||(_?.textContent??"").trim())},[]),children:c.jsx(gm.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:c.jsx(Ae.div,{role:"option","aria-labelledby":y,"data-highlighted":x?"":void 0,"aria-selected":h&&x,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:v,onFocus:Ce(i.onFocus,()=>w(!0)),onBlur:Ce(i.onBlur,()=>w(!1)),onClick:Ce(i.onClick,()=>{k.current!=="mouse"&&C()}),onPointerUp:Ce(i.onPointerUp,()=>{k.current==="mouse"&&C()}),onPointerDown:Ce(i.onPointerDown,_=>{k.current=_.pointerType}),onPointerMove:Ce(i.onPointerMove,_=>{k.current=_.pointerType,s?u.onItemLeave?.():k.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ce(i.onPointerLeave,_=>{_.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:Ce(i.onKeyDown,_=>{u.searchRef?.current!==""&&_.key===" "||(oH.includes(_.key)&&C(),_.key===" "&&_.preventDefault())})})})})});gO.displayName=lp;var ud="SelectItemText",xO=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...o}=t,i=Ei(ud,n),l=Ni(ud,n),u=mO(ud,n),h=cH(ud,n),[f,m]=b.useState(null),x=Xe(e,C=>m(C),u.onItemTextChange,C=>l.itemTextRefCallback?.(C,u.value,u.disabled)),w=f?.textContent,v=b.useMemo(()=>c.jsx("option",{value:u.value,disabled:u.disabled,children:w},u.value),[u.disabled,u.value,w]),{onNativeOptionAdd:y,onNativeOptionRemove:k}=h;return Vt(()=>(y(v),()=>k(v)),[y,k,v]),c.jsxs(c.Fragment,{children:[c.jsx(Ae.span,{id:u.textId,...o,ref:x}),u.isSelected&&i.valueNode&&!i.valueNodeHasChildren?su.createPortal(o.children,i.valueNode):null]})});xO.displayName=ud;var vO="SelectItemIndicator",yO=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return mO(vO,n).isSelected?c.jsx(Ae.span,{"aria-hidden":!0,...r,ref:e}):null});yO.displayName=vO;var _y="SelectScrollUpButton",bO=b.forwardRef((t,e)=>{const n=Ni(_y,t.__scopeSelect),r=tb(_y,t.__scopeSelect),[s,o]=b.useState(!1),i=Xe(e,r.onScrollButtonChange);return Vt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=u.scrollTop>0;o(h)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?c.jsx(kO,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});bO.displayName=_y;var Ey="SelectScrollDownButton",wO=b.forwardRef((t,e)=>{const n=Ni(Ey,t.__scopeSelect),r=tb(Ey,t.__scopeSelect),[s,o]=b.useState(!1),i=Xe(e,r.onScrollButtonChange);return Vt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<h;o(f)};const u=n.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?c.jsx(kO,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=n;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});wO.displayName=Ey;var kO=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,o=Ni("SelectScrollButton",n),i=b.useRef(null),l=xm(n),u=b.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return b.useEffect(()=>()=>u(),[u]),Vt(()=>{l().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),c.jsx(Ae.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ce(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Ce(s.onPointerMove,()=>{o.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Ce(s.onPointerLeave,()=>{u()})})}),kH="SelectSeparator",SH=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return c.jsx(Ae.div,{"aria-hidden":!0,...r,ref:e})});SH.displayName=kH;var Ny="SelectArrow",CH=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=vm(n),o=Ei(Ny,n),i=Ni(Ny,n);return o.open&&i.position==="popper"?c.jsx(U0,{...s,...r,ref:e}):null});CH.displayName=Ny;var _H="SelectBubbleInput",SO=b.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=b.useRef(null),o=Xe(r,s),i=eb(e);return b.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(i!==e&&f){const m=new Event("change",{bubbles:!0});f.call(l,e),l.dispatchEvent(m)}},[i,e]),c.jsx(Ae.select,{...n,style:{...eO,...n.style},ref:o,defaultValue:e})});SO.displayName=_H;function CO(t){return t===""||t===void 0}function _O(t){const e=hn(t),n=b.useRef(""),r=b.useRef(0),s=b.useCallback(i=>{const l=n.current+i;e(l),(function u(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>u(""),1e3))})(l)},[e]),o=b.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function EO(t,e,n){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let i=EH(t,Math.max(o,0));s.length===1&&(i=i.filter(h=>h!==n));const u=i.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function EH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var NH=tO,jH=rO,TH=oO,MH=iO,OH=aO,PH=lO,RH=hO,AH=gO,IH=xO,DH=yO,LH=bO,BH=wO;function sa({...t}){return c.jsx(NH,{"data-slot":"select",...t})}function oa({...t}){return c.jsx(TH,{"data-slot":"select-value",...t})}function ia({className:t,size:e="default",children:n,...r}){return c.jsxs(jH,{"data-slot":"select-trigger","data-size":e,className:He("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,c.jsx(MH,{asChild:!0,children:c.jsx(sT,{className:"size-4 opacity-50"})})]})}function aa({className:t,children:e,position:n="popper",...r}){return c.jsx(OH,{children:c.jsxs(PH,{"data-slot":"select-content",className:He("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[c.jsx(FH,{}),c.jsx(RH,{className:He("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),c.jsx($H,{})]})})}function Gt({className:t,children:e,...n}){return c.jsxs(AH,{"data-slot":"select-item",className:He("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[c.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:c.jsx(DH,{children:c.jsx(Pl,{className:"size-4"})})}),c.jsx(IH,{children:e})]})}function FH({className:t,...e}){return c.jsx(LH,{"data-slot":"select-scroll-up-button",className:He("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(RF,{className:"size-4"})})}function $H({className:t,...e}){return c.jsx(BH,{"data-slot":"select-scroll-down-button",className:He("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(sT,{className:"size-4"})})}function zH(){const[t,e]=b.useState("grid"),[n,r]=b.useState(""),[s,o]=b.useState("all"),[i,l]=b.useState("modified"),[u,h]=b.useState({}),[f,m]=b.useState(!0),[x,w]=b.useState(new Set),v=Wr(),[y,k]=b.useState(!1),[C,_]=b.useState(""),[j,M]=b.useState(""),[O,T]=b.useState(!1),[I,A]=b.useState([]),[F,U]=b.useState(null),W=R=>{const D=new Date(R),N=Math.floor((new Date().getTime()-D.getTime())/1e3);if(N<60)return"Just now";if(N<3600){const L=Math.floor(N/60);return`${L} minute${L>1?"s":""} ago`}else if(N<86400){const L=Math.floor(N/3600);return`${L} hour${L>1?"s":""} ago`}else if(N<604800){const L=Math.floor(N/86400);return`${L} day${L>1?"s":""} ago`}else if(N<2592e3){const L=Math.floor(N/604800);return`${L} week${L>1?"s":""} ago`}else{const L=Math.floor(N/2592e3);return`${L} month${L>1?"s":""} ago`}};b.useEffect(()=>{(()=>{try{const D=localStorage.getItem("access_token");if(!D)return;const N=D.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),L=decodeURIComponent(atob(N).split("").map(ce=>"%"+("00"+ce.charCodeAt(0).toString(16)).slice(-2)).join("")),V=JSON.parse(L),Q=V.id||V._id||V.userId;U(Q)}catch(D){console.error("Failed to get user ID:",D)}})()},[]),b.useEffect(()=>{(async()=>{try{const D=await Ht.getAll(1,100);A(D),D.length>0&&!j&&M(D[0]._id)}catch(D){console.error("Failed to fetch folders:",D)}})()},[]),b.useEffect(()=>{(async()=>{m(!0);try{const[D,G]=await Promise.all([xt.getAll(),Ht.getAll(1,100)]),N=new Map;G.forEach(ce=>{N.set(ce._id,ce)});const L=ce=>ce?typeof ce=="string"?ce:typeof ce=="object"&&ce._id?String(ce._id):String(ce):null,V=D.map(ce=>{const H=L(ce.folderId),B=H?N.get(H):null,K=ce.sharedWith?.length||0,q=ce.Title?.trim()||"Untitled Document",se=q==="Error Loading Document"?"Untitled Document":q;return q==="Error Loading Document"&&console.warn("Document with error title found, replacing with default:",ce._id),{...ce,Title:se,folderId:H||void 0,folderName:B?.Name||"Uncategorized",formattedModified:W(ce.updatedDate||ce.createdDate),collaboratorsCount:K}}),Q={};V.forEach(ce=>{const H=ce.folderId||"uncategorized",B=ce.folderName||"Uncategorized";Q[H]||(Q[H]={folderName:B,folderId:ce.folderId||null,documents:[]}),Q[H].documents.push(ce)}),Object.keys(Q).forEach(ce=>{Q[ce].documents.sort((H,B)=>i==="modified"?new Date(B.updatedDate||B.createdDate).getTime()-new Date(H.updatedDate||H.createdDate).getTime():i==="created"?new Date(B.createdDate).getTime()-new Date(H.createdDate).getTime():H.Title.localeCompare(B.Title))}),h(Q),w(new Set(Object.keys(Q)))}catch(D){console.error("Failed to fetch documents:",D),de.error("Failed to load documents")}finally{m(!1)}})()},[i]);const Z={};Object.keys(u).forEach(R=>{const D=u[R],G=D.documents.filter(N=>n===""||N.Title.toLowerCase().includes(n.toLowerCase())||N.folderName?.toLowerCase().includes(n.toLowerCase())||N.contentType?.some(V=>V.toLowerCase().includes(n.toLowerCase()))?s==="shared"?N.sharedWith&&N.sharedWith.length>0:s==="recent"?(Date.now()-new Date(N.updatedDate||N.createdDate).getTime())/864e5<7:s==="archived"?N.archived===!0:s==="all"?N.archived!==!0:!0:!1);G.length>0&&(Z[R]={...D,documents:G})});const oe=R=>{const D=new Set(x);D.has(R)?D.delete(R):D.add(R),w(D)},ee=async(R,D)=>{if(D.preventDefault(),D.stopPropagation(),!F){de.error("Please log in to favorite documents");return}try{R.favoritedBy?.includes(F)?(await xt.unfavorite(R._id),de.success("Document removed from favorites")):(await xt.favorite(R._id),de.success("Document added to favorites"));const N=await xt.getAll(),L=await Ht.getAll(1,100),V=new Map;L.forEach(B=>{V.set(B._id,B)});const Q=B=>B?typeof B=="string"?B:typeof B=="object"&&B._id?String(B._id):String(B):null,ce=N.map(B=>{const K=Q(B.folderId),q=K?V.get(K):null,se=B.sharedWith?.length||0,he=B.Title?.trim()||"Untitled Document",ae=he==="Error Loading Document"?"Untitled Document":he;return he==="Error Loading Document"&&console.warn("Document with error title found, replacing with default:",B._id),{...B,Title:ae,folderId:K||void 0,folderName:q?.Name||"Uncategorized",formattedModified:W(B.updatedDate||B.createdDate),collaboratorsCount:se}}),H={};ce.forEach(B=>{const K=B.folderId||"uncategorized",q=B.folderName||"Uncategorized";H[K]||(H[K]={folderName:q,folderId:B.folderId||null,documents:[]}),H[K].documents.push(B)}),Object.keys(H).forEach(B=>{H[B].documents.sort((K,q)=>i==="modified"?new Date(q.updatedDate||q.createdDate).getTime()-new Date(K.updatedDate||K.createdDate).getTime():i==="created"?new Date(q.createdDate).getTime()-new Date(K.createdDate).getTime():K.Title.localeCompare(q.Title))}),h(H)}catch(G){console.error("Failed to toggle favorite:",G),de.error(G?.response?.data?.message||"Failed to update favorite status")}},re=R=>!F||!R.favoritedBy?!1:R.favoritedBy.includes(F);if(f)return c.jsx("div",{className:"max-w-7xl mx-auto space-y-6 py-12",children:c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx(Rr,{className:"h-8 w-8 animate-spin text-muted-foreground"}),c.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading documents..."})]})});async function J(){if(!C.trim()){de.error("Please enter a document name");return}if(!j){de.error("Please select a folder");return}T(!0);try{const R=await xt.create({Title:C,folderId:j});k(!1),_(""),M(I.length>0?I[0]._id:""),T(!1),v(`/documents/${R._id}`)}catch(R){const D=R?.response?.data?.message||R?.message||"Failed to create document";de.error(D),T(!1)}}async function z(R,D,G){if(D!==G)try{await xt.update(R,{folderId:D}),de.success("Document moved successfully"),m(!0);const[N,L]=await Promise.all([xt.getAll(),Ht.getAll(1,100)]),V=B=>B?typeof B=="string"?B:typeof B=="object"&&B._id?String(B._id):String(B):null,Q=new Map;L.forEach(B=>{Q.set(B._id,B)});const ce=N.map(B=>{const K=V(B.folderId),q=K?Q.get(K):null,se=B.sharedWith?.length||0,he=B.Title?.trim()||"Untitled Document";return{...B,Title:he==="Error Loading Document"?"Untitled Document":he,folderId:K||void 0,folderName:q?.Name||"Uncategorized",formattedModified:W(B.updatedDate||B.createdDate),collaboratorsCount:se}}),H={};ce.forEach(B=>{const K=B.folderId||"uncategorized",q=B.folderName||"Uncategorized";H[K]||(H[K]={folderName:q,folderId:B.folderId||null,documents:[]}),H[K].documents.push(B)}),Object.keys(H).forEach(B=>{H[B].documents.sort((K,q)=>i==="modified"?new Date(q.updatedDate||q.createdDate).getTime()-new Date(K.updatedDate||K.createdDate).getTime():i==="created"?new Date(q.createdDate).getTime()-new Date(K.createdDate).getTime():K.Title.localeCompare(q.Title))}),h(H),w(new Set(Object.keys(H))),m(!1)}catch(N){const L=N?.response?.data?.message||N?.message||"Failed to move document";de.error(L),m(!1)}}return c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-[24px] mb-2",children:"Documents"}),c.jsx("p",{className:"text-muted-foreground",children:"Manage and organize all your documents"})]}),c.jsx(lt,{to:"/folders",children:c.jsxs(pe,{variant:"outline",className:"rounded-xl mr-2",children:[c.jsx(un,{className:"w-4 h-4 mr-2"}),"View Folders"]})}),c.jsxs(pe,{className:"rounded-xl",onClick:()=>k(!0),children:[c.jsx(jd,{className:"w-4 h-4 mr-2"}),"New Document"]})]}),c.jsx(Pe,{className:"p-4 rounded-xl",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Qp,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),c.jsx(Ke,{type:"text",placeholder:"Search documents...",value:n,onChange:R=>r(R.target.value),className:"pl-10 rounded-xl"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(sa,{value:s,onValueChange:o,children:[c.jsx(ia,{className:"w-[140px] rounded-xl",children:c.jsx(oa,{placeholder:"Filter by"})}),c.jsxs(aa,{className:"rounded-xl",children:[c.jsx(Gt,{value:"all",children:"All Documents"}),c.jsx(Gt,{value:"shared",children:"Shared"}),c.jsx(Gt,{value:"recent",children:"Recent (7 days)"}),c.jsx(Gt,{value:"archived",children:"Archived"})]})]}),c.jsxs(sa,{value:i,onValueChange:l,children:[c.jsx(ia,{className:"w-[140px] rounded-xl",children:c.jsx(oa,{placeholder:"Sort by"})}),c.jsxs(aa,{className:"rounded-xl",children:[c.jsx(Gt,{value:"modified",children:"Last Modified"}),c.jsx(Gt,{value:"created",children:"Date Created"}),c.jsx(Gt,{value:"name",children:"Name"})]})]}),c.jsxs("div",{className:"flex border border-border rounded-xl",children:[c.jsx(pe,{variant:t==="grid"?"default":"ghost",size:"icon",onClick:()=>e("grid"),className:"rounded-l-xl rounded-r-none",children:c.jsx(i8,{className:"w-4 h-4"})}),c.jsx(pe,{variant:t==="list"?"default":"ghost",size:"icon",onClick:()=>e("list"),className:"rounded-r-xl rounded-l-none",children:c.jsx(l8,{className:"w-4 h-4"})})]})]})]})}),Object.keys(Z).length===0?c.jsxs(Pe,{className:"p-12 text-center rounded-xl",children:[c.jsx(Xn,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),c.jsx("p",{className:"text-muted-foreground",children:n?"No documents match your search":s==="shared"?"No shared documents found":s==="recent"?"No recent documents found":s==="archived"?"No archived documents found":"No documents found"})]}):c.jsx("div",{className:"space-y-6",children:Object.entries(Z).map(([R,D])=>{const G=x.has(R),N=D.folderId?`/folders/${D.folderId}`:"#";return c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(lt,{to:N,className:"flex items-center gap-2 group hover:text-primary transition-colors",children:[c.jsx(un,{className:"w-5 h-5"}),c.jsx("h2",{className:"text-lg font-semibold",children:D.folderName}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",D.documents.length," ",D.documents.length===1?"document":"documents",")"]})]}),c.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>oe(R),className:"rounded-lg",children:G?"Collapse":"Expand"})]}),G&&(t==="grid"?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.documents.map(L=>c.jsx("div",{className:"relative",children:c.jsx(lt,{to:`/documents/${L._id}`,children:c.jsxs(Pe,{className:"p-5 rounded-xl hover:shadow-lg transition-shadow group cursor-pointer h-full",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:c.jsx(Xn,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx(pe,{variant:"ghost",size:"icon",className:"rounded-lg -mt-1",onClick:V=>ee(L,V),children:c.jsx(Zf,{className:`w-4 h-4 ${re(L)?"fill-yellow-400 text-yellow-400":""}`})}),c.jsxs(Ad,{children:[c.jsx(Id,{asChild:!0,onClick:V=>V.preventDefault(),children:c.jsx(pe,{variant:"ghost",size:"icon",className:"rounded-lg -mt-1 -mr-1",onClick:V=>{V.preventDefault(),V.stopPropagation()},children:c.jsx(hy,{className:"w-4 h-4"})})}),c.jsxs(Dd,{align:"end",className:"rounded-xl w-56",children:[c.jsxs(ip,{className:"flex items-center gap-2",children:[c.jsx(B_,{className:"w-4 h-4"}),"Move to Folder"]}),c.jsx(bd,{}),I.map(V=>c.jsxs(ra,{onClick:Q=>{Q.preventDefault(),Q.stopPropagation(),z(L._id,V._id,L.folderId||"uncategorized")},disabled:V._id===L.folderId,className:"cursor-pointer",children:[c.jsx(un,{className:"w-4 h-4 mr-2"}),V.Name,V._id===L.folderId&&c.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"(current)"})]},V._id))]})]})]})]}),c.jsx("h3",{className:"mb-2 line-clamp-2 font-semibold",children:L.Title||"Untitled Document"}),c.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:L.contentType?.map(V=>c.jsx(St,{variant:"secondary",className:"text-[12px] rounded-lg",children:V},V))}),c.jsxs("div",{className:"flex items-center justify-between text-[14px] text-muted-foreground",children:[c.jsx("span",{children:L.formattedModified}),c.jsxs("span",{children:[L.collaboratorsCount||0," ",L.collaboratorsCount===1?"collaborator":"collaborators"]})]})]})})},L._id))}):c.jsx(Pe,{className:"rounded-xl overflow-hidden",children:c.jsx("div",{className:"divide-y divide-border",children:D.documents.map(L=>c.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[c.jsxs(lt,{to:`/documents/${L._id}`,className:"flex items-center space-x-4 flex-1 min-w-0",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:c.jsx(Xn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"flex items-center space-x-2",children:c.jsx("p",{className:"truncate font-medium",children:L.Title||"Untitled Document"})}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:D.folderName})]})]}),c.jsxs("div",{className:"flex items-center space-x-6 text-[14px] text-muted-foreground",children:[c.jsx("div",{className:"flex gap-1.5",children:L.contentType?.map(V=>c.jsx(St,{variant:"secondary",className:"text-[12px] rounded-lg",children:V},V))}),c.jsx("span",{className:"w-32 text-right",children:L.formattedModified}),c.jsxs("span",{className:"w-32 text-right",children:[L.collaboratorsCount||0," ",L.collaboratorsCount===1?"collaborator":"collaborators"]}),c.jsx(pe,{variant:"ghost",size:"icon",className:"rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:V=>ee(L,V),children:c.jsx(Zf,{className:`w-4 h-4 ${re(L)?"fill-yellow-400 text-yellow-400":""}`})}),c.jsxs(Ad,{children:[c.jsx(Id,{asChild:!0,children:c.jsx(pe,{variant:"ghost",size:"icon",className:"rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:V=>{V.preventDefault(),V.stopPropagation()},children:c.jsx(hy,{className:"w-4 h-4"})})}),c.jsxs(Dd,{align:"end",className:"rounded-xl w-56",children:[c.jsxs(ip,{className:"flex items-center gap-2",children:[c.jsx(B_,{className:"w-4 h-4"}),"Move to Folder"]}),c.jsx(bd,{}),I.map(V=>c.jsxs(ra,{onClick:Q=>{Q.preventDefault(),Q.stopPropagation(),z(L._id,V._id,L.folderId||"uncategorized")},disabled:V._id===L.folderId,className:"cursor-pointer",children:[c.jsx(un,{className:"w-4 h-4 mr-2"}),V.Name,V._id===L.folderId&&c.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"(current)"})]},V._id))]})]})]})]},L._id))})}))]},R)})}),y&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-card rounded-2xl shadow-2xl max-w-md w-full",children:[c.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[c.jsx("h2",{className:"text-[20px] font-semibold",children:"Create New Document"}),c.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>{k(!1),_(""),M(I.length>0?I[0]._id:"")},className:"rounded-lg",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Document Name"}),c.jsx(Ke,{type:"text",value:C,onChange:R=>_(R.target.value),placeholder:"e.g., Q4 Planning",className:"rounded-xl",autoFocus:!0,onKeyPress:R=>R.key==="Enter"&&J()})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Folder *"}),I.length===0?c.jsxs("div",{className:"text-sm text-muted-foreground p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:["No folders available. Please ",c.jsx(lt,{to:"/folders",className:"text-primary hover:underline",children:"create a folder"})," first."]}):c.jsxs(sa,{value:j,onValueChange:M,children:[c.jsx(ia,{className:"w-full rounded-xl",children:c.jsx(oa,{placeholder:"-- Select a folder --"})}),c.jsx(aa,{className:"rounded-xl",children:I.map(R=>c.jsx(Gt,{value:R._id,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(un,{className:"w-4 h-4"}),R.Name]})},R._id))})]}),c.jsx("p",{className:"text-[12px] text-muted-foreground mt-1",children:"All documents must belong to a folder"})]})]}),c.jsxs("div",{className:"p-6 border-t border-border flex justify-end space-x-3",children:[c.jsx(pe,{variant:"outline",onClick:()=>{k(!1),_(""),M(I.length>0?I[0]._id:"")},className:"rounded-xl",children:"Cancel"}),c.jsx(pe,{onClick:J,className:"rounded-xl",disabled:O||!C.trim()||!j,children:O?"Creating...":"Create Document"})]})]})})]})}function UH(){const[t,e]=b.useState([]),[n,r]=b.useState(!1),[s,o]=b.useState(null),[i,l]=b.useState(""),[u,h]=b.useState(1),[f,m]=b.useState(!1),[x,w]=b.useState([]),[v,y]=b.useState({}),[k,C]=b.useState(!1),[_,j]=b.useState(null),[M,O]=b.useState(null),[T,I]=b.useState(""),A=10,F=R=>R?.code==="ERR_NETWORK"||R?.code==="ECONNREFUSED"||R?.message?.includes("ERR_CONNECTION_REFUSED")||R?.message?.includes("Network Error")||!R?.response,U=R=>{const D=R?.response?.status,G=R?.response?.data?.message?.toLowerCase()||R?.message?.toLowerCase()||"";return D===401||D===403||G.includes("unauthorized")||G.includes("forbidden")||G==="unauthorized"||G==="forbidden"};b.useEffect(()=>{(async()=>{try{const D=await Le.get("/users");w(D.data)}catch(D){F(D)?(console.warn("Backend connection unavailable. Users list will be empty."),w([])):U(D)?(console.warn("Authentication error. Users list will be empty."),w([])):console.error("Failed to fetch users:",D)}})()},[]),b.useEffect(()=>{(async()=>{r(!0),o(null);try{const D=await Ht.search(i,u,A);e(D)}catch(D){if(F(D))console.warn("Backend connection unavailable. Folders list will be empty."),e([]),o(null);else if(U(D))console.warn("Authentication error. Token may be expired or invalid."),e([]),o(null);else{const G=D?.response?.data?.message||D?.message||"Failed to load folders";G.toLowerCase().includes("unauthorized")||G.toLowerCase().includes("forbidden")?(e([]),o(null)):(o(G),de.error(G))}}finally{r(!1)}})()},[i,u]);const W=async R=>{try{const D=await Ht.create({Name:R});de.success("Folder created successfully!"),e([D,...t]),m(!1)}catch(D){de.error(D?.message||"Failed to create folder")}},Z=async(R,D)=>{if(confirm(`Are you sure you want to delete "${D}"?`))try{await Ht.delete(R),de.success("Folder deleted successfully!"),e(t.filter(G=>G._id!==R))}catch(G){de.error(G?.message||"Failed to delete folder")}},oe=R=>{O(R._id),I(R.Name)},ee=()=>{O(null),I("")},re=async R=>{if(!T.trim()){de.error("Please enter a folder name");return}try{const D=await Ht.update(R,T.trim());de.success("Folder renamed successfully!"),e(t.map(G=>G._id===R?D:G)),O(null),I("")}catch(D){de.error(D?.message||"Failed to rename folder")}},J=R=>{j(R),C(!0)},z=async(R,D="view")=>{if(_)try{const G=await Ht.inviteByEmail(_._id,{email:R,access:D});if(G.success){de.success(`Invitation sent to ${R}`);try{await tT(R,{folderName:_.Name,accessLevel:D,sharedBy:"XPlanB Team",description:`You've been granted ${D} access to this folder. Click the button below to open it.`,joinUrl:`${window.location.origin}/folders/${_._id}`})}catch(N){console.error("Failed to send email via Resend:",N)}C(!1),j(null)}else de.error(G.message||"Failed to share folder")}catch(G){de.error(G?.message||"Failed to share folder")}};return c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-[24px] mb-2 font-semibold",children:"My Folders"}),c.jsx("p",{className:"text-muted-foreground",children:"Organize and manage your documents"})]}),c.jsxs(pe,{className:"rounded-xl",onClick:()=>m(!0),children:[c.jsx(jd,{className:"w-4 h-4 mr-2"}),"New Folder"]})]}),c.jsxs("div",{className:"relative",children:[c.jsx(Qp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),c.jsx(Ke,{placeholder:"Search folders...",value:i,onChange:R=>l(R.target.value),className:"pl-10 rounded-xl"})]}),n&&c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading folders..."})}),s&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl text-red-600 dark:text-red-400",children:s}),!n&&!s&&t.length===0&&c.jsxs("div",{className:"bg-white dark:bg-card rounded-xl p-12 text-center",children:[c.jsx(un,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No folders found"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first folder to get started"})]}),!n&&t.length>0&&c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(R=>c.jsxs(Pe,{className:"p-4 hover:shadow-md transition-shadow rounded-xl",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:c.jsx(un,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[M===R._id?c.jsx(Ke,{value:T,onChange:D=>I(D.target.value),onKeyPress:D=>{D.key==="Enter"?re(R._id):D.key==="Escape"&&ee()},className:"mb-1 rounded-xl",autoFocus:!0}):c.jsx("h3",{className:"font-medium truncate",children:R.Name}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:[R.documents?.length||0," documents"]})]})]})}),c.jsx("div",{className:"flex items-center gap-2 mb-3",children:R.sharedWith&&R.sharedWith.length>0&&c.jsxs(St,{variant:"secondary",className:"text-xs",children:[c.jsx(py,{className:"w-3 h-3 mr-1"}),R.sharedWith.length," shared"]})}),c.jsx("div",{className:"flex gap-2",children:M===R._id?c.jsxs(c.Fragment,{children:[c.jsx(pe,{variant:"outline",size:"sm",className:"flex-1 rounded-xl",onClick:()=>re(R._id),children:"Save"}),c.jsx(pe,{variant:"outline",size:"sm",className:"rounded-xl",onClick:ee,children:"Cancel"})]}):c.jsxs(c.Fragment,{children:[c.jsx(pe,{variant:"outline",size:"sm",className:"flex-1 rounded-xl",asChild:!0,children:c.jsxs(lt,{to:`/folders/${R._id}`,children:[c.jsx(un,{className:"w-4 h-4 mr-2"}),"Open"]})}),c.jsx(pe,{variant:"outline",size:"sm",className:"rounded-xl",onClick:()=>oe(R),title:"Edit folder name",children:c.jsx(cT,{className:"w-4 h-4"})}),c.jsx(pe,{variant:"outline",size:"sm",className:"rounded-xl",onClick:()=>J(R),children:c.jsx(py,{className:"w-4 h-4"})}),c.jsx(pe,{variant:"outline",size:"sm",className:"rounded-xl text-red-600 hover:text-red-700",onClick:()=>Z(R._id,R.Name),children:c.jsx(dT,{className:"w-4 h-4"})})]})})]},R._id))}),!n&&t.length>0&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(pe,{variant:"outline",onClick:()=>h(u-1),disabled:u===1,className:"rounded-xl",children:"Previous"}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",u]}),c.jsx(pe,{variant:"outline",onClick:()=>h(u+1),disabled:t.length<A,className:"rounded-xl",children:"Next"})]}),f&&c.jsx(HH,{onClose:()=>m(!1),onCreate:W}),k&&_&&c.jsx(WH,{folder:_,onClose:()=>{C(!1),j(null)},onShare:z,users:x})]})}function HH({onClose:t,onCreate:e}){const[n,r]=b.useState(""),s=()=>{if(!n.trim()){de.error("Please enter a folder name");return}e(n)};return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-card rounded-2xl shadow-2xl max-w-md w-full",children:[c.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[c.jsx("h2",{className:"text-[20px] font-semibold",children:"Create New Folder"}),c.jsx(pe,{variant:"ghost",size:"icon",onClick:t,className:"rounded-lg",children:c.jsx(us,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-6 space-y-4",children:c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Folder Name"}),c.jsx(Ke,{type:"text",value:n,onChange:o=>r(o.target.value),placeholder:"e.g., Q4 Planning",className:"rounded-xl",autoFocus:!0,onKeyPress:o=>o.key==="Enter"&&s()})]})}),c.jsxs("div",{className:"p-6 border-t border-border flex justify-end space-x-3",children:[c.jsx(pe,{variant:"outline",onClick:t,className:"rounded-xl",children:"Cancel"}),c.jsx(pe,{onClick:s,className:"rounded-xl",children:"Create Folder"})]})]})})}function WH({folder:t,onClose:e,onShare:n,users:r}){const[s,o]=b.useState(""),[i,l]=b.useState("view"),[u,h]=b.useState(""),f=()=>{let m="";if(s==="custom"){if(!u.trim()){de.error("Please enter an email address");return}m=u}else{const x=r.find(w=>w._id===s);if(!x){de.error("Please select a user");return}m=x.email}n(m,i),o(""),h("")};return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-card rounded-2xl shadow-2xl max-w-md w-full",children:[c.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[c.jsx("h2",{className:"text-[20px] font-semibold",children:"Share Folder"}),c.jsx(pe,{variant:"ghost",size:"icon",onClick:e,className:"rounded-lg",children:c.jsx(us,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Share ",c.jsx("strong",{children:t.Name})," with someone"]}),c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select User"}),c.jsxs(sa,{value:s,onValueChange:o,children:[c.jsx(ia,{className:"rounded-xl",children:c.jsx(oa,{placeholder:"-- Select a user --"})}),c.jsxs(aa,{className:"rounded-xl",children:[r?.map(m=>c.jsxs(Gt,{value:m._id,children:[m.firstName," ",m.lastName," (",m.email,")"]},m._id)),c.jsx(Gt,{value:"custom",children:"Invite by email..."})]})]}),s==="custom"&&c.jsx(Ke,{type:"email",value:u,onChange:m=>h(m.target.value),placeholder:"user@example.com",className:"rounded-xl mt-2"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Access Level"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(pe,{variant:i==="view"?"default":"outline",size:"sm",onClick:()=>l("view"),className:"flex-1 rounded-xl",children:"View Only"}),c.jsx(pe,{variant:i==="update"?"default":"outline",size:"sm",onClick:()=>l("update"),className:"flex-1 rounded-xl",children:"Can Edit"})]})]})]}),c.jsxs("div",{className:"p-6 border-t border-border flex justify-end space-x-3",children:[c.jsx(pe,{variant:"outline",onClick:e,className:"rounded-xl",children:"Cancel"}),c.jsx(pe,{onClick:f,className:"rounded-xl",children:"Send Invitation"})]})]})})}function NO({...t}){return c.jsx("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...t})}function jO({className:t,...e}){return c.jsx("ol",{"data-slot":"breadcrumb-list",className:He("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",t),...e})}function kl({className:t,...e}){return c.jsx("li",{"data-slot":"breadcrumb-item",className:He("inline-flex items-center gap-1.5",t),...e})}function cp({asChild:t,className:e,...n}){const r=t?b0:"a";return c.jsx(r,{"data-slot":"breadcrumb-link",className:He("hover:text-foreground transition-colors",e),...n})}function TO({className:t,...e}){return c.jsx("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:He("text-foreground font-normal",t),...e})}function dp({children:t,className:e,...n}){return c.jsx("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:He("[&>svg]:size-3.5",e),...n,children:t??c.jsx(hi,{})})}function VH(){const{id:t}=m0(),e=Wr(),[n,r]=b.useState(null),[s,o]=b.useState([]),[i,l]=b.useState(!0),u=async()=>{if(t)try{l(!0);const f=await Ht.getById(t);r(f);const m=await xt.getByFolderId(t);o(m),l(!1)}catch(f){console.error("Failed to load folder:",f),de.error("Failed to load folder"),l(!1)}};b.useEffect(()=>{t&&u()},[t]);const h=async()=>{if(t)try{const f=await xt.create({Title:"Untitled Document",folderId:t});de.success("Document created successfully"),e(`/documents/${f._id}`)}catch(f){console.error("Failed to create document:",f),de.error("Failed to create document")}};return i?c.jsx("div",{className:"max-w-7xl mx-auto space-y-6 flex items-center justify-center py-12",children:c.jsx(Rr,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):n?c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsx(NO,{children:c.jsxs(jO,{children:[c.jsx(kl,{children:c.jsx(cp,{asChild:!0,children:c.jsx(lt,{to:"/dashboard",children:c.jsx(Jp,{className:"w-4 h-4"})})})}),c.jsx(dp,{children:c.jsx(hi,{className:"w-4 h-4"})}),c.jsx(kl,{children:c.jsx(cp,{asChild:!0,children:c.jsx(lt,{to:"/folders",children:"Folders"})})}),c.jsx(dp,{children:c.jsx(hi,{className:"w-4 h-4"})}),c.jsx(kl,{children:c.jsx(TO,{children:n.Name})})]})}),c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:c.jsx(Xn,{className:"w-8 h-8 text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-[24px] mb-1 font-semibold",children:n.Name}),c.jsxs("p",{className:"text-muted-foreground",children:[s.length," documents"]})]})]}),c.jsx("div",{className:"flex gap-2",children:c.jsxs(pe,{className:"rounded-xl",onClick:h,children:[c.jsx(jd,{className:"w-4 h-4 mr-2"}),"New Document"]})})]}),c.jsxs(Pe,{className:"p-6 rounded-xl",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsx("h3",{className:"text-[16px] font-semibold",children:"Collaborators"})}),n.sharedWith&&n.sharedWith.length>0?c.jsx("div",{className:"space-y-3",children:n.sharedWith.map(f=>{const x=n.userAccess?.find(k=>{const C=typeof k.userId=="string"?k.userId:k.userId?._id||k.userId;return C===f._id||C===f._id?.toString()})?.access||"view",w=`${f.firstName} ${f.lastName}`,v=Il(f.firstName,f.lastName),y=f.avatar||f.picture;return c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[c.jsxs(yr,{className:"w-10 h-10 flex-shrink-0",children:[c.jsx(hm,{src:y?y.startsWith("http")?y:`${en.replace("/api","")}${y}`:void 0,alt:w}),c.jsx(er,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-sm",children:v})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-[14px] font-medium truncate",children:w}),c.jsx("p",{className:"text-[12px] text-muted-foreground truncate",children:f.email})]})]}),c.jsx(pe,{variant:x==="update"?"default":"outline",size:"sm",className:"rounded-lg flex items-center gap-1.5 flex-shrink-0 ml-3",disabled:!0,children:x==="update"?c.jsxs(c.Fragment,{children:[c.jsx(cT,{className:"w-3.5 h-3.5"}),"Can Edit"]}):c.jsxs(c.Fragment,{children:[c.jsx(WF,{className:"w-3.5 h-3.5"}),"Can View"]})})]},f._id)})}):c.jsx("div",{className:"text-center py-6",children:c.jsx("p",{className:"text-sm text-muted-foreground",children:"No collaborators yet"})})]}),s.length===0?c.jsxs(Pe,{className:"p-12 rounded-xl text-center",children:[c.jsx(Xn,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No documents yet"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first document to get started"}),c.jsxs(pe,{onClick:h,className:"rounded-xl",children:[c.jsx(jd,{className:"w-4 h-4 mr-2"}),"Create Document"]})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(f=>c.jsx(lt,{to:`/documents/${f._id}`,children:c.jsxs(Pe,{className:"p-5 rounded-xl hover:shadow-lg transition-shadow group cursor-pointer",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:c.jsx(Xn,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})}),c.jsx("h3",{className:"mb-2 line-clamp-2 font-medium",children:f.Title}),f.contentType&&f.contentType.length>0&&c.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:f.contentType.map((m,x)=>c.jsx(St,{variant:"secondary",className:"text-[12px] rounded-lg",children:m},x))}),c.jsxs("p",{className:"text-[14px] text-muted-foreground",children:["Modified ",new Date(f.updatedDate).toLocaleDateString()]})]})},f._id))})]}):c.jsx("div",{className:"max-w-7xl mx-auto space-y-6 flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-muted-foreground",children:"Folder not found"}),c.jsx(pe,{onClick:()=>e("/folders"),className:"mt-4 rounded-xl",children:"Back to Folders"})]})})}const YH="modulepreload",qH=function(t){return"/"+t},b2={},w2=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");s=i(n.map(h=>{if(h=qH(h),h in b2)return;b2[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":YH,f||(x.as="script"),x.crossOrigin="",x.href=h,u&&x.setAttribute("nonce",u),document.head.appendChild(x),f)return new Promise((w,v)=>{x.addEventListener("load",w),x.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};function KH({itemName:t,itemType:e,itemId:n,onClose:r}){const[s,o]=b.useState(""),[i,l]=b.useState("edit"),[u,h]=b.useState(!1),[f,m]=b.useState([]),[x,w]=b.useState(!0),[v,y]=b.useState(!1),k=`${window.location.origin}/${e==="document"?"documents":"folders"}/${n}`;b.useEffect(()=>{(async()=>{try{if(e==="document"){const O=await xt.getSharedUsers(n);m(O)}else{const O=await Ht.getById(n);m(O.sharedWith||[])}w(!1)}catch(O){console.error("Failed to load shared users:",O),w(!1)}})()},[n,e]);const C=async()=>{try{await navigator.clipboard.writeText(k),h(!0),de.success("Link copied to clipboard"),setTimeout(()=>h(!1),2e3)}catch{de.error("Failed to copy link. Please copy manually.")}},_=async()=>{if(!(!s||v)){y(!0);try{let M;if(e==="document"){const O=i==="update"?"edit":i;M=await xt.shareByEmail(n,s,O)}else M=await Ht.inviteByEmail(n,{email:s,access:i});if(M.success){de.success(`Invitation sent to ${s}`);try{e==="document"?await cF(s,{documentName:t,accessLevel:i,sharedBy:"XPlanB Team",description:`You've been granted ${i} access to this document. Click the button below to open it.`,joinUrl:k}):await tT(s,{folderName:t,accessLevel:i,sharedBy:"XPlanB Team",description:`You've been granted ${i} access to this folder. Click the button below to open it.`,joinUrl:k})}catch(O){console.error("Failed to send email via Resend:",O)}if(e==="document"){const O=await xt.getSharedUsers(n);m(O)}else{const O=await Ht.getById(n);m(O.sharedWith||[])}o("")}else de.error(M.message||"Failed to share")}catch(M){console.error("Failed to invite:",M),de.error(M.message||"Failed to share")}finally{y(!1)}}},j=async(M,O)=>{try{if(O==="remove")e==="document"?await xt.unshare(n,M):await Ht.ignoreAccess?.(n,M),de.success("User removed successfully");else{if(e==="document"){const T=O==="update"?"edit":O;await xt.share(n,M,T)}else await Ht.assignAccess(n,M,O);de.success("Access updated successfully")}if(e==="document"){const T=await xt.getSharedUsers(n);m(T)}else{const T=await Ht.getById(n);m(T.sharedWith||[])}}catch(T){console.error("Failed to update access:",T),de.error("Failed to update access")}};return x?c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsx("div",{className:"bg-white dark:bg-card rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:c.jsx("div",{className:"flex items-center justify-center p-12",children:c.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})})}):c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:M=>{M.target===M.currentTarget&&r()},children:c.jsxs("div",{className:"bg-white dark:bg-card rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",onClick:M=>M.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[c.jsxs("h2",{className:"text-xl font-semibold text-foreground",children:['Share "',t,'"']}),c.jsx("button",{onClick:r,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:c.jsx(us,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"email",children:"Invite people"}),c.jsxs("div",{className:"flex gap-2 mt-2",children:[c.jsx(Ke,{id:"email",type:"email",placeholder:"Enter email address",value:s,onChange:M=>o(M.target.value),onKeyPress:M=>M.key==="Enter"&&!v&&_(),className:"flex-1",disabled:v}),c.jsxs(sa,{value:i,onValueChange:M=>l(M),children:[c.jsx(ia,{className:"w-32",children:c.jsx(oa,{})}),c.jsxs(aa,{children:[c.jsx(Gt,{value:"view",children:"Viewer"}),e==="folder"&&c.jsx(Gt,{value:"update",children:"Update"}),c.jsx(Gt,{value:"edit",children:"Edit"})]})]}),c.jsxs(pe,{onClick:_,disabled:v||!s,children:[c.jsx(iT,{className:"w-4 h-4 mr-2"}),v?"Inviting...":"Invite"]})]})]})}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(ft,{children:"People with access"}),c.jsx("div",{className:"space-y-2",children:f.length===0?c.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No users have access yet"}):f.map(M=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(yr,{children:c.jsxs(er,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:[M.firstName?.[0],M.lastName?.[0]]})}),c.jsxs("div",{children:[c.jsxs("p",{className:"font-medium text-sm text-foreground",children:[M.firstName," ",M.lastName]}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.email})]})]}),c.jsxs(sa,{value:M.access||"view",onValueChange:O=>j(M._id,O),children:[c.jsx(ia,{className:"w-32",children:c.jsx(oa,{})}),c.jsxs(aa,{children:[c.jsx(Gt,{value:"view",children:"Viewer"}),e==="folder"&&c.jsx(Gt,{value:"update",children:"Update"}),c.jsx(Gt,{value:"edit",children:"Edit"}),c.jsx(Gt,{value:"remove",children:"Remove"})]})]})]},M._id))})]}),e==="folder"&&c.jsxs("div",{className:"space-y-3",children:[c.jsx(ft,{children:"Share link"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ke,{value:k,readOnly:!0,className:"flex-1 bg-gray-50 dark:bg-gray-800"}),c.jsxs(pe,{onClick:C,variant:"outline",children:[u?c.jsx(Pl,{className:"w-4 h-4 mr-2 text-green-600 dark:text-green-400"}):c.jsx(oT,{className:"w-4 h-4 mr-2"}),u?"Copied":"Copy"]})]}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Anyone with this link can view this folder"})]})]}),c.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-border bg-gray-50 dark:bg-gray-800",children:c.jsx(pe,{variant:"outline",onClick:r,children:"Close"})})]})})}const XH=en.replace("/api",""),ml=gt.create({baseURL:XH,headers:{"Content-Type":"application/json"}});ml.interceptors.request.use(t=>{const e=localStorage.getItem(On);return e&&(t.headers.Authorization=`Bearer ${e}`),t});const gv={getByDocument:t=>ml.get(`/comments/document/${t}`).then(e=>e.data),create:t=>ml.post("/comments",t).then(e=>e.data),update:(t,e)=>ml.put(`/comments/${t}`,{content:e}).then(n=>n.data),delete:t=>ml.delete(`/comments/${t}`).then(()=>{}),getById:t=>ml.get(`/comments/${t}`).then(e=>e.data)};function GH({documentId:t,isOpen:e,onClose:n}){const[r,s]=b.useState([]),[o,i]=b.useState(""),[l,u]=b.useState(!1),[h,f]=b.useState(null),[m,x]=b.useState(!1),w=b.useRef(null);b.useEffect(()=>{(async()=>{try{const j=localStorage.getItem("access_token");if(!j)return;const O=j.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),T=decodeURIComponent(atob(O).split("").map(U=>"%"+("00"+U.charCodeAt(0).toString(16)).slice(-2)).join("")),I=JSON.parse(T),A=I.id||I._id||I.userId,F=await pa(A);f(F)}catch(j){console.error("Error loading current user:",j)}})()},[]),b.useEffect(()=>{e&&t&&v()},[e,t]);const v=async()=>{try{u(!0);const _=await gv.getByDocument(t);s(_)}catch(_){console.error("Failed to load comments:",_),de.error("Failed to load comments")}finally{u(!1)}},y=async()=>{if(!o.trim()){de.error("Please enter a comment");return}if(!h){de.error("You must be logged in to comment");return}try{x(!0);const _=await gv.create({content:o.trim(),document:t});s([_,...r]),i(""),de.success("Comment added")}catch(_){console.error("Failed to create comment:",_),de.error(_?.response?.data?.message||"Failed to add comment")}finally{x(!1)}},k=async _=>{if(confirm("Are you sure you want to delete this comment?"))try{await gv.delete(_),s(r.filter(j=>j._id!==_)),de.success("Comment deleted")}catch(j){console.error("Failed to delete comment:",j),de.error("Failed to delete comment")}};b.useEffect(()=>{w.current&&w.current.scrollIntoView({behavior:"smooth"})},[r]);const C=_=>{const j=new Date(_),O=Math.floor((new Date().getTime()-j.getTime())/1e3);return O<60?"Just now":O<3600?`${Math.floor(O/60)}m ago`:O<86400?`${Math.floor(O/3600)}h ago`:O<604800?`${Math.floor(O/86400)}d ago`:j.toLocaleDateString()};return e?c.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-card border-l border-border shadow-xl z-50 flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between bg-card",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Rl,{className:"w-5 h-5 text-primary"}),c.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Comments"}),r.length>0&&c.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r.length,")"]})]}),c.jsx(pe,{variant:"ghost",size:"icon",onClick:n,className:"rounded-lg",children:c.jsx(us,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-card",children:[l&&c.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Loading comments..."}),!l&&r.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Rl,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50"}),c.jsx("p",{className:"text-muted-foreground",children:"No comments yet"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Start the conversation"})]}),r.map(_=>c.jsx(Pe,{className:"p-3 rounded-xl bg-card border-border",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(yr,{className:"w-8 h-8",children:c.jsx(er,{className:"bg-gradient-to-br from-primary to-primary/80 text-primary-foreground text-xs",children:Il(_.user.firstName,_.user.lastName)})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-medium text-foreground",children:[_.user.firstName," ",_.user.lastName]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:C(_.createdAt)})]}),h&&_.user._id===h._id&&c.jsx(pe,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>k(_._id),children:c.jsx(dT,{className:"w-3 h-3"})})]}),c.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap break-words",children:_.content})]})]})},_._id)),c.jsx("div",{ref:w})]}),c.jsxs("div",{className:"p-4 border-t border-border bg-card",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ke,{value:o,onChange:_=>i(_.target.value),placeholder:"Add a comment...",className:"rounded-xl bg-background border-border text-foreground placeholder:text-muted-foreground",onKeyPress:_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),y())},disabled:m}),c.jsx(pe,{onClick:y,disabled:m||!o.trim(),className:"rounded-xl",children:c.jsx(T0,{className:"w-4 h-4"})})]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Press Enter to send, Shift+Enter for new line"})]})]}):null}function JH({onVoiceText:t,selectedText:e}){const[n,r]=b.useState(!1),s=b.useRef(null);b.useEffect(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){console.warn("Speech recognition not supported in this browser");return}const l=window.SpeechRecognition||window.webkitSpeechRecognition,u=new l;return u.continuous=!0,u.interimResults=!0,u.lang="en-US",u.onstart=()=>{r(!0),de.success("Voice input started. Speak now...")},u.onresult=h=>{let f="";for(let m=h.resultIndex;m<h.results.length;m++){const x=h.results[m][0].transcript;h.results[m].isFinal&&(f+=x+" ")}f.trim()&&t(f.trim())},u.onerror=h=>{console.error("Speech recognition error:",h.error),r(!1),h.error==="no-speech"?de.error("No speech detected. Please try again."):h.error==="audio-capture"?de.error("No microphone found. Please check your microphone settings."):h.error==="not-allowed"?de.error("Microphone access denied. Please allow microphone access."):de.error("Voice recognition error: "+h.error)},u.onend=()=>{r(!1)},s.current=u,()=>{s.current&&s.current.stop()}},[t]);const o=()=>{if(!s.current){de.error("Speech recognition not supported in this browser");return}if(n)s.current.stop(),de.info("Voice input stopped");else try{s.current.start()}catch(l){console.error("Failed to start recognition:",l),de.error("Failed to start voice input")}},i=()=>{if(!e){de.error("Please select text to read");return}if("speechSynthesis"in window){const l=new SpeechSynthesisUtterance(e);l.rate=1,l.pitch=1,l.volume=1,speechSynthesis.speak(l),de.success("Reading selected text...")}else de.error("Text-to-speech not supported in this browser")};return c.jsx(Pe,{className:"p-3 rounded-xl border-blue-200 dark:border-blue-800 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20",children:c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsxs(pe,{variant:"outline",size:"sm",className:`rounded-xl ${n?"bg-red-100 dark:bg-red-900/20 border-red-500 text-red-700 dark:text-red-400":"bg-white dark:bg-card"}`,onClick:o,children:[c.jsx(j0,{className:`w-4 h-4 mr-2 ${n?"animate-pulse":""}`}),n?"Listening...":"Voice Input"]}),c.jsxs(pe,{variant:"outline",size:"sm",className:"rounded-xl bg-white dark:bg-card",onClick:i,children:[c.jsx(i$,{className:"w-4 h-4 mr-2"}),"Read Aloud"]})]})})}const k2=t=>{let e;const n=new Set,r=(h,f)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const x=e;e=f??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(w=>w(e,x))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h))},u=e=t(r,s,l);return l},QH=(t=>t?k2(t):k2),ZH=t=>t;function eW(t,e=ZH){const n=be.useSyncExternalStore(t.subscribe,be.useCallback(()=>e(t.getState()),[t,e]),be.useCallback(()=>e(t.getInitialState()),[t,e]));return be.useDebugValue(n),n}const S2=t=>{const e=QH(t),n=r=>eW(e,r);return Object.assign(n,e),n},tW=(t=>t?S2(t):S2),nb=tW(t=>({isConnected:!1,currentDocumentId:null,connectedUsers:[],cursors:new Map,isSaving:!1,lastSaved:null,hasUnsavedChanges:!1,setConnected:e=>t({isConnected:e}),setCurrentDocument:e=>t({currentDocumentId:e,connectedUsers:[],cursors:new Map}),setConnectedUsers:e=>t({connectedUsers:Array.isArray(e)?e:[]}),addUser:e=>t(n=>({connectedUsers:[...(Array.isArray(n.connectedUsers)?n.connectedUsers:[]).filter(s=>s.id!==e.id),e]})),removeUser:e=>t(n=>{const r=new Map(n.cursors);return r.delete(e),{connectedUsers:(Array.isArray(n.connectedUsers)?n.connectedUsers:[]).filter(o=>o.id!==e),cursors:r}}),updateUserCursor:(e,n)=>t(r=>{const o=(Array.isArray(r.connectedUsers)?r.connectedUsers:[]).find(l=>l.id===e);if(!o)return console.log("updateUserCursor: User not found:",e),r;console.log("updateUserCursor: Updating cursor for user:",e,n);const i=new Map(r.cursors);return i.set(e,{...n,user:o,timestamp:n.timestamp||Date.now()}),{cursors:i}}),clearOldCursors:()=>t(e=>{const n=Date.now(),r=new Map;return e.cursors.forEach((s,o)=>{s.timestamp&&n-s.timestamp<5e3&&r.set(o,s)}),r.size!==e.cursors.size?(console.log("Cleared old cursors, remaining:",r.size),{cursors:r}):e}),setSaving:e=>t({isSaving:e}),setLastSaved:e=>t({lastSaved:e,hasUnsavedChanges:!1}),setHasUnsavedChanges:e=>t({hasUnsavedChanges:e}),clearCursors:()=>t({cursors:new Map}),reset:()=>t({isConnected:!1,currentDocumentId:null,connectedUsers:[],cursors:new Map,isSaving:!1,lastSaved:null,hasUnsavedChanges:!1})}));function nW(){const{connectedUsers:t,isConnected:e}=nb();if(!e||t.length===0)return null;const n=s=>{if(s)return s.startsWith("http://")||s.startsWith("https://")?s:`${en}${s.startsWith("/")?s:`/${s}`}`},r=s=>{const o=s.trim().split(" ");return{firstName:o[0]||"",lastName:o.slice(1).join(" ")||""}};return c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"flex -space-x-2",children:t.slice(0,5).map(s=>{const{firstName:o,lastName:i}=r(s.name),l=n(s.avatar),u=Il(o,i);return c.jsxs(yr,{className:"w-8 h-8 border-2 border-white dark:border-background",title:s.name,children:[l&&c.jsx(hm,{src:l,alt:s.name}),c.jsx(er,{className:"text-white text-[12px] font-medium",style:{backgroundColor:s.color},children:u})]},s.id)})}),t.length>5&&c.jsxs("span",{className:"text-sm text-muted-foreground",children:["+",t.length-5," more"]})]})}function rW(){const{cursors:t}=nb(),[e,n]=b.useState([]);return b.useEffect(()=>{const r=[];t.forEach((s,o)=>{r.push({userId:o,x:s.x,y:s.y,userName:s.user.name,userColor:s.user.color})}),n(r)},[t]),c.jsx(c.Fragment,{children:e.map(r=>c.jsxs("div",{className:"fixed pointer-events-none z-50 transition-all duration-100",style:{left:`${r.x}px`,top:`${r.y}px`},children:[c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.3))"},children:c.jsx("path",{d:"M5.65376 12.3673L5.46026 12.4196L5.49926 12.6093L7.27187 21.8423C7.29343 21.9556 7.37645 22.0469 7.4869 22.0735C7.5973 22.1001 7.71333 22.0574 7.78488 21.9669L12 17L14.2927 19.2927C14.6833 19.6833 15.3166 19.6833 15.7071 19.2927L19.2927 15.7071C19.6833 15.3166 19.6833 14.6833 19.2927 14.2927L17 12L21.9669 7.78488C22.0574 7.71333 22.1001 7.5973 22.0735 7.4869C22.0469 7.37645 21.9556 7.29343 21.8423 7.27187L12.6093 5.49926L12.4196 5.46026L12.3673 5.65376L5.65376 12.3673Z",fill:r.userColor,stroke:"white",strokeWidth:"1.5"})}),c.jsx("div",{className:"mt-1 px-2 py-1 rounded text-white text-xs font-medium whitespace-nowrap",style:{backgroundColor:r.userColor},children:r.userName})]},r.userId))})}function sW({editor:t,onHeadingChange:e}){const[n,r]=b.useState(null),[s,o]=b.useState(null),[i,l]=b.useState(!1),[u,h]=b.useState({top:0,left:0});b.useEffect(()=>{if(!t)return;const v=async()=>{try{const _=t.blocks.getCurrentBlockIndex();if(_===-1||_===void 0){l(!1);return}const j=t.blocks.getBlockByIndex(_);if(!j){l(!1);return}const M=j.name==="header",O=M&&j.data?j.data.level:null;r(_),o(O);const T=window.getSelection();if(T&&T.toString().trim().length>0&&T&&T.rangeCount>0){const F=T.getRangeAt(0).getBoundingClientRect();h({top:F.top-60,left:F.left+F.width/2}),l(!0)}else if(M){const A=document.getElementById("editorjs");if(A){const F=A.querySelectorAll("[data-block]");if(F[_]){const U=F[_].getBoundingClientRect();h({top:U.top-60,left:U.left+U.width/2}),l(!0)}}}else l(!1)}catch(_){console.error("Error getting selection:",_),l(!1)}},y=()=>{clearTimeout(window.headingSelectorTimeout),window.headingSelectorTimeout=setTimeout(v,100)},k=_=>{const j=_.target,M=document.getElementById("editorjs");M&&M.contains(j)?setTimeout(v,150):l(!1)};document.addEventListener("selectionchange",y),document.addEventListener("click",k);const C=document.getElementById("editorjs");return C&&C.addEventListener("keyup",y),()=>{document.removeEventListener("selectionchange",y),document.removeEventListener("click",k),C&&C.removeEventListener("keyup",y),window.headingSelectorTimeout&&clearTimeout(window.headingSelectorTimeout)}},[t]);const f=async v=>{if(!(!t||n===null))try{const y=t.blocks.getBlockByIndex(n);if(!y)return;let k="";if(y.name==="header")k=y.data.text||"";else if(y.name==="paragraph")k=y.data.text||"";else if(y.name==="list")k=y.data.items?.[0]?.replace(/<[^>]*>/g,"")||"";else try{k=JSON.stringify(y.data)}catch{k="Heading"}const C=window.getSelection();C&&C.toString().trim()&&(k=C.toString().trim());const _=await t.save(),j={text:k.trim()||"Heading",level:v};await t.blocks.delete(n),await t.blocks.insert("header",j,{},n,!0),setTimeout(()=>{try{t.caret.setToBlock(n,"end")}catch{const O=document.getElementById("editorjs");O&&O.focus()}},100),e&&e(),l(!1)}catch(y){console.error("Error changing to heading:",y)}},m=async v=>{if(!(!t||n===null))try{const y=t.blocks.getBlockByIndex(n);y&&y.name==="header"&&(await t.blocks.update(n,{...y.data,level:v}),e&&e(),o(v))}catch(y){console.error("Error changing heading level:",y)}},x=v=>{s!==null?m(v):f(v)};if(!i||!t)return null;const w=[{level:1,label:"H1 Heading 1",icon:JF},{level:2,label:"H2 Heading 2",icon:ZF},{level:3,label:"H3 Heading 3",icon:t8},{level:4,label:"H4 Heading 4",icon:r8}];return c.jsx("div",{className:"fixed z-50 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-2",style:{top:`${u.top}px`,left:`${u.left}px`,transform:"translate(-50%, 0)"},children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground px-2 py-1",children:"Heading:"}),w.map(({level:v,label:y,icon:k})=>c.jsxs(pe,{variant:s===v?"default":"ghost",size:"sm",className:"h-8 px-2 text-xs",onClick:()=>x(v),title:y,children:[c.jsx(k,{className:"w-4 h-4 mr-1"}),"H",v]},v))]})})}const tr=()=>new Map,jy=t=>{const e=tr();return t.forEach((n,r)=>{e.set(r,n)}),e},wo=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},oW=(t,e)=>{const n=[];for(const[r,s]of t)n.push(e(s,r));return n},iW=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},xa=()=>new Set,xv=t=>t[t.length-1],aW=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},yi=Array.from,lW=Array.isArray;class cW{constructor(){this._observers=tr()}on(e,n){return wo(this._observers,e,xa).add(n),n}once(e,n){const r=(...s)=>{this.off(e,r),n(...s)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return yi((this._observers.get(e)||tr()).values()).forEach(r=>r(...n))}destroy(){this._observers=tr()}}class dW{constructor(){this._observers=tr()}on(e,n){wo(this._observers,e,xa).add(n)}once(e,n){const r=(...s)=>{this.off(e,r),n(...s)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return yi((this._observers.get(e)||tr()).values()).forEach(r=>r(...n))}destroy(){this._observers=tr()}}const bi=Math.floor,jf=Math.abs,MO=(t,e)=>t<e?t:e,Na=(t,e)=>t>e?t:e,OO=t=>t!==0?t<0:1/t<0,C2=1,_2=2,vv=4,yv=8,Ld=32,po=64,br=128,ym=31,Ty=63,la=127,uW=2147483647,PO=Number.MAX_SAFE_INTEGER,hW=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&bi(t)===t),fW=t=>t.toLowerCase(),pW=/^\s*/g,mW=t=>t.replace(pW,""),gW=/([A-Z])/g,E2=(t,e)=>mW(t.replace(gW,n=>`${e}${fW(n)}`)),xW=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.codePointAt(s);return r},Bd=typeof TextEncoder<"u"?new TextEncoder:null,vW=t=>Bd.encode(t),yW=Bd?vW:xW;let wd=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});wd&&wd.decode(new Uint8Array).length===1&&(wd=null);let vu=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}};const bm=()=>new vu,bW=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Ms=t=>{const e=new Uint8Array(bW(t));let n=0;for(let r=0;r<t.bufs.length;r++){const s=t.bufs[r];e.set(s,n),n+=s.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},wW=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Na(n,e)*2),t.cpos=0)},dn=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},My=dn,st=(t,e)=>{for(;e>la;)dn(t,br|la&e),e=bi(e/128);dn(t,la&e)},rb=(t,e)=>{const n=OO(e);for(n&&(e=-e),dn(t,(e>Ty?br:0)|(n?po:0)|Ty&e),e=bi(e/64);e>0;)dn(t,(e>la?br:0)|la&e),e=bi(e/128)},Oy=new Uint8Array(3e4),kW=Oy.length/3,SW=(t,e)=>{if(e.length<kW){const n=Bd.encodeInto(e,Oy).written||0;st(t,n);for(let r=0;r<n;r++)dn(t,Oy[r])}else hr(t,yW(e))},CW=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;st(t,r);for(let s=0;s<r;s++)dn(t,n.codePointAt(s))},Sl=Bd&&Bd.encodeInto?SW:CW,wm=(t,e)=>{const n=t.cbuf.length,r=t.cpos,s=MO(n-r,e.length),o=e.length-s;t.cbuf.set(e.subarray(0,s),r),t.cpos+=s,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Na(n*2,o)),t.cbuf.set(e.subarray(s)),t.cpos=o)},hr=(t,e)=>{st(t,e.byteLength),wm(t,e)},sb=(t,e)=>{wW(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},_W=(t,e)=>sb(t,4).setFloat32(0,e,!1),EW=(t,e)=>sb(t,8).setFloat64(0,e,!1),NW=(t,e)=>sb(t,8).setBigInt64(0,e,!1),N2=new DataView(new ArrayBuffer(4)),jW=t=>(N2.setFloat32(0,t),N2.getFloat32(0)===t),Fd=(t,e)=>{switch(typeof e){case"string":dn(t,119),Sl(t,e);break;case"number":hW(e)&&jf(e)<=uW?(dn(t,125),rb(t,e)):jW(e)?(dn(t,124),_W(t,e)):(dn(t,123),EW(t,e));break;case"bigint":dn(t,122),NW(t,e);break;case"object":if(e===null)dn(t,126);else if(lW(e)){dn(t,117),st(t,e.length);for(let n=0;n<e.length;n++)Fd(t,e[n])}else if(e instanceof Uint8Array)dn(t,116),hr(t,e);else{dn(t,118);const n=Object.keys(e);st(t,n.length);for(let r=0;r<n.length;r++){const s=n[r];Sl(t,s),Fd(t,e[s])}}break;case"boolean":dn(t,e?120:121);break;default:dn(t,127)}};class j2 extends vu{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&st(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const T2=t=>{t.count>0&&(rb(t.encoder,t.count===1?t.s:-t.s),t.count>1&&st(t.encoder,t.count-2))};class Tf{constructor(){this.encoder=new vu,this.s=0,this.count=0}write(e){this.s===e?this.count++:(T2(this),this.count=1,this.s=e)}toUint8Array(){return T2(this),Ms(this.encoder)}}const M2=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);rb(t.encoder,e),t.count>1&&st(t.encoder,t.count-2)}};class bv{constructor(){this.encoder=new vu,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(M2(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return M2(this),Ms(this.encoder)}}class TW{constructor(){this.sarr=[],this.s="",this.lensE=new Tf}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new vu;return this.sarr.push(this.s),this.s="",Sl(e,this.sarr.join("")),wm(e,this.lensE.toUint8Array()),Ms(e)}}const yo=t=>new Error(t),Rs=()=>{throw yo("Method unimplemented")},Bs=()=>{throw yo("Unexpected case")},RO=yo("Unexpected end of array"),AO=yo("Integer out of Range");let km=class{constructor(e){this.arr=e,this.pos=0}};const sc=t=>new km(t),MW=t=>t.pos!==t.arr.length,OW=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},fr=t=>OW(t,Je(t)),Dl=t=>t.arr[t.pos++],Je=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const s=t.arr[t.pos++];if(e=e+(s&la)*n,n*=128,s<br)return e;if(e>PO)throw AO}throw RO},ob=t=>{let e=t.arr[t.pos++],n=e&Ty,r=64;const s=(e&po)>0?-1:1;if((e&br)===0)return s*n;const o=t.arr.length;for(;t.pos<o;){if(e=t.arr[t.pos++],n=n+(e&la)*r,r*=128,e<br)return s*n;if(n>PO)throw AO}throw RO},PW=t=>{let e=Je(t);if(e===0)return"";{let n=String.fromCodePoint(Dl(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Dl(t));else for(;e>0;){const r=e<1e4?e:1e4,s=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,s),e-=r}return decodeURIComponent(escape(n))}},RW=t=>wd.decode(fr(t)),Cl=wd?RW:PW,ib=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},AW=t=>ib(t,4).getFloat32(0,!1),IW=t=>ib(t,8).getFloat64(0,!1),DW=t=>ib(t,8).getBigInt64(0,!1),LW=[t=>{},t=>null,ob,AW,IW,DW,t=>!1,t=>!0,Cl,t=>{const e=Je(t),n={};for(let r=0;r<e;r++){const s=Cl(t);n[s]=$d(t)}return n},t=>{const e=Je(t),n=[];for(let r=0;r<e;r++)n.push($d(t));return n},fr],$d=t=>LW[127-Dl(t)](t);class O2 extends km{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),MW(this)?this.count=Je(this)+1:this.count=-1),this.count--,this.s}}class Mf extends km{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=ob(this);const e=OO(this.s);this.count=1,e&&(this.s=-this.s,this.count=Je(this)+2)}return this.count--,this.s}}class wv extends km{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=ob(this),n=e&1;this.diff=bi(e/2),this.count=1,n&&(this.count=Je(this)+2)}return this.s+=this.diff,this.count--,this.s}}class BW{constructor(e){this.decoder=new Mf(e),this.str=Cl(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const FW=crypto.getRandomValues.bind(crypto),IO=()=>FW(new Uint32Array(1))[0],$W="10000000-1000-4000-8000"+-1e11,zW=()=>$W.replace(/[018]/g,t=>(t^IO()&15>>t/4).toString(16)),Ll=t=>new Promise(t);Promise.all.bind(Promise);const P2=t=>t===void 0?null:t;class UW{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let DO=new UW,HW=!0;try{typeof localStorage<"u"&&localStorage&&(DO=localStorage,HW=!1)}catch{}const WW=DO,VW=Object.assign,YW=Object.keys,qW=(t,e)=>{for(const n in t)e(t[n],n)},R2=t=>YW(t).length,KW=t=>{for(const e in t)return!1;return!0},XW=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},GW=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),JW=(t,e)=>t===e||R2(t)===R2(e)&&XW(t,(n,r)=>(n!==void 0||GW(e,r))&&e[r]===n),QW=Object.freeze,LO=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&LO(t[e])}return QW(t)},ab=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&ab(t,e,n+1)}},ZW=t=>t,eV=(t,e)=>e.includes(t);var BO={};const zd=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let ws;const tV=()=>{if(ws===void 0)if(zd){ws=tr();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&ws.set(e,""),e=r):e!==null&&(ws.set(e,r),e=null)}e!==null&&ws.set(e,"")}else typeof location=="object"?(ws=tr(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");ws.set(`--${E2(e,"-")}`,n),ws.set(`-${E2(e,"-")}`,n)}})):ws=tr();return ws},Py=t=>tV().has(t),up=t=>P2(zd?BO[t.toUpperCase().replaceAll("-","_")]:WW.getItem(t)),FO=t=>Py("--"+t)||up(t)!==null;FO("production");const nV=zd&&eV(BO.FORCE_COLOR,["true","1","2"]),rV=nV||!Py("--no-colors")&&!FO("no-color")&&(!zd||process.stdout.isTTY)&&(!zd||Py("--color")||up("COLORTERM")!==null||(up("TERM")||"").includes("color")),sV=t=>new Uint8Array(t),oV=t=>{const e=sV(t.byteLength);return e.set(t),e};class iV{constructor(e,n){this.left=e,this.right=n}}const no=(t,e)=>new iV(t,e);typeof DOMParser<"u"&&new DOMParser;const aV=t=>oW(t,(e,n)=>`${n}:${e};`).join(""),ko=Symbol,$O=ko(),zO=ko(),lV=ko(),cV=ko(),dV=ko(),UO=ko(),uV=ko(),lb=ko(),hV=ko(),fV=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const s=t[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const s=t[r];s instanceof Symbol||n.push(s)}return n},pV={[$O]:no("font-weight","bold"),[zO]:no("font-weight","normal"),[lV]:no("color","blue"),[dV]:no("color","green"),[cV]:no("color","grey"),[UO]:no("color","red"),[uV]:no("color","purple"),[lb]:no("color","orange"),[hV]:no("color","black")},mV=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],r=tr();let s=[],o=0;for(;o<t.length;o++){const i=t[o],l=pV[i];if(l!==void 0)r.set(l.left,l.right);else{if(i===void 0)break;if(i.constructor===String||i.constructor===Number){const u=aV(r);o>0||u.length>0?(e.push("%c"+i),n.push(u)):e.push(i)}else break}}for(o>0&&(s=n,s.unshift(e.join("")));o<t.length;o++){const i=t[o];i instanceof Symbol||s.push(i)}return s},HO=rV?mV:fV,gV=(...t)=>{console.log(...HO(t)),WO.forEach(e=>e.print(t))},xV=(...t)=>{console.warn(...HO(t)),t.unshift(lb),WO.forEach(e=>e.print(t))},WO=xa(),VO=t=>({[Symbol.iterator](){return this},next:t}),vV=(t,e)=>VO(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),kv=(t,e)=>VO(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class cb{constructor(e,n){this.clock=e,this.len=n}}class yu{constructor(){this.clients=new Map}}const YO=(t,e,n)=>e.clients.forEach((r,s)=>{const o=t.doc.store.clients.get(s);if(o!=null){const i=o[o.length-1],l=i.id.clock+i.length;for(let u=0,h=r[u];u<r.length&&h.clock<l;h=r[++u])rP(t,o,h.clock,h.len,n)}}),yV=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const s=bi((n+r)/2),o=t[s],i=o.clock;if(i<=e){if(e<i+o.len)return s;n=s+1}else r=s-1}return null},qO=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&yV(n,e.clock)!==null},db=t=>{t.clients.forEach(e=>{e.sort((s,o)=>s.clock-o.clock);let n,r;for(n=1,r=1;n<e.length;n++){const s=e[r-1],o=e[n];s.clock+s.len>=o.clock?s.len=Na(s.len,o.clock+o.len-s.clock):(r<n&&(e[r]=o),r++)}e.length=r})},bV=t=>{const e=new yu;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,s)=>{if(!e.clients.has(s)){const o=r.slice();for(let i=n+1;i<t.length;i++)aW(o,t[i].clients.get(s)||[]);e.clients.set(s,o)}});return db(e),e},hp=(t,e,n,r)=>{wo(t.clients,e,()=>[]).push(new cb(n,r))},wV=()=>new yu,kV=t=>{const e=wV();return t.clients.forEach((n,r)=>{const s=[];for(let o=0;o<n.length;o++){const i=n[o];if(i.deleted){const l=i.id.clock;let u=i.length;if(o+1<n.length)for(let h=n[o+1];o+1<n.length&&h.deleted;h=n[++o+1])u+=h.length;s.push(new cb(l,u))}}s.length>0&&e.clients.set(r,s)}),e},oc=(t,e)=>{st(t.restEncoder,e.clients.size),yi(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),st(t.restEncoder,n);const s=r.length;st(t.restEncoder,s);for(let o=0;o<s;o++){const i=r[o];t.writeDsClock(i.clock),t.writeDsLen(i.len)}})},ub=t=>{const e=new yu,n=Je(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const s=Je(t.restDecoder),o=Je(t.restDecoder);if(o>0){const i=wo(e.clients,s,()=>[]);for(let l=0;l<o;l++)i.push(new cb(t.readDsClock(),t.readDsLen()))}}return e},A2=(t,e,n)=>{const r=new yu,s=Je(t.restDecoder);for(let o=0;o<s;o++){t.resetDsCurVal();const i=Je(t.restDecoder),l=Je(t.restDecoder),u=n.clients.get(i)||[],h=fn(n,i);for(let f=0;f<l;f++){const m=t.readDsClock(),x=m+t.readDsLen();if(m<h){h<x&&hp(r,i,h,x-h);let w=Fs(u,m),v=u[w];for(!v.deleted&&v.id.clock<m&&(u.splice(w+1,0,yp(e,v,m-v.id.clock)),w++);w<u.length&&(v=u[w++],v.id.clock<x);)v.deleted||(x<v.id.clock+v.length&&u.splice(w,0,yp(e,v,x-v.id.clock)),v.delete(e))}else hp(r,i,m,x-m)}}if(r.clients.size>0){const o=new va;return st(o.restEncoder,0),oc(o,r),o.toUint8Array()}return null},KO=IO;class ic extends cW{constructor({guid:e=zW(),collectionid:n=null,gc:r=!0,gcFilter:s=()=>!0,meta:o=null,autoLoad:i=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=s,this.clientID=KO(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new tP,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=i,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Ll(h=>{this.on("load",()=>{this.isLoaded=!0,h(this)})});const u=()=>Ll(h=>{const f=m=>{(m===void 0||m===!0)&&(this.off("sync",f),h())};this.on("sync",f)});this.on("sync",h=>{h===!1&&this.isSynced&&(this.whenSynced=u()),this.isSynced=h===void 0||h===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=u()}load(){const e=this._item;e!==null&&!this.shouldLoad&&vt(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(yi(this.subdocs).map(e=>e.guid))}transact(e,n=null){return vt(this,e,n)}get(e,n=xn){const r=wo(this.share,e,()=>{const o=new n;return o._integrate(this,null),o}),s=r.constructor;if(n!==xn&&s!==n)if(s===xn){const o=new n;o._map=r._map,r._map.forEach(i=>{for(;i!==null;i=i.left)i.parent=o}),o._start=r._start;for(let i=o._start;i!==null;i=i.right)i.parent=o;return o._length=r._length,this.share.set(e,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,El)}getText(e=""){return this.get(e,$l)}getMap(e=""){return this.get(e,Fl)}getXmlElement(e=""){return this.get(e,zl)}getXmlFragment(e=""){return this.get(e,ya)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,yi(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new ic({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,vt(e.parent.doc,r=>{const s=n.doc;e.deleted||r.subdocsAdded.add(s),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class XO{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Je(this.restDecoder)}readDsLen(){return Je(this.restDecoder)}}class GO extends XO{readLeftID(){return tt(Je(this.restDecoder),Je(this.restDecoder))}readRightID(){return tt(Je(this.restDecoder),Je(this.restDecoder))}readClient(){return Je(this.restDecoder)}readInfo(){return Dl(this.restDecoder)}readString(){return Cl(this.restDecoder)}readParentInfo(){return Je(this.restDecoder)===1}readTypeRef(){return Je(this.restDecoder)}readLen(){return Je(this.restDecoder)}readAny(){return $d(this.restDecoder)}readBuf(){return oV(fr(this.restDecoder))}readJSON(){return JSON.parse(Cl(this.restDecoder))}readKey(){return Cl(this.restDecoder)}}class SV{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Je(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Je(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Bl extends SV{constructor(e){super(e),this.keys=[],Je(e),this.keyClockDecoder=new wv(fr(e)),this.clientDecoder=new Mf(fr(e)),this.leftClockDecoder=new wv(fr(e)),this.rightClockDecoder=new wv(fr(e)),this.infoDecoder=new O2(fr(e),Dl),this.stringDecoder=new BW(fr(e)),this.parentInfoDecoder=new O2(fr(e),Dl),this.typeRefDecoder=new Mf(fr(e)),this.lenDecoder=new Mf(fr(e))}readLeftID(){return new _l(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new _l(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return $d(this.restDecoder)}readBuf(){return fr(this.restDecoder)}readJSON(){return $d(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class CV{constructor(){this.restEncoder=bm()}toUint8Array(){return Ms(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){st(this.restEncoder,e)}writeDsLen(e){st(this.restEncoder,e)}}class bu extends CV{writeLeftID(e){st(this.restEncoder,e.client),st(this.restEncoder,e.clock)}writeRightID(e){st(this.restEncoder,e.client),st(this.restEncoder,e.clock)}writeClient(e){st(this.restEncoder,e)}writeInfo(e){My(this.restEncoder,e)}writeString(e){Sl(this.restEncoder,e)}writeParentInfo(e){st(this.restEncoder,e?1:0)}writeTypeRef(e){st(this.restEncoder,e)}writeLen(e){st(this.restEncoder,e)}writeAny(e){Fd(this.restEncoder,e)}writeBuf(e){hr(this.restEncoder,e)}writeJSON(e){Sl(this.restEncoder,JSON.stringify(e))}writeKey(e){Sl(this.restEncoder,e)}}class _V{constructor(){this.restEncoder=bm(),this.dsCurrVal=0}toUint8Array(){return Ms(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,st(this.restEncoder,n)}writeDsLen(e){e===0&&Bs(),st(this.restEncoder,e-1),this.dsCurrVal+=e}}class va extends _V{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new bv,this.clientEncoder=new Tf,this.leftClockEncoder=new bv,this.rightClockEncoder=new bv,this.infoEncoder=new j2(My),this.stringEncoder=new TW,this.parentInfoEncoder=new j2(My),this.typeRefEncoder=new Tf,this.lenEncoder=new Tf}toUint8Array(){const e=bm();return st(e,0),hr(e,this.keyClockEncoder.toUint8Array()),hr(e,this.clientEncoder.toUint8Array()),hr(e,this.leftClockEncoder.toUint8Array()),hr(e,this.rightClockEncoder.toUint8Array()),hr(e,Ms(this.infoEncoder)),hr(e,this.stringEncoder.toUint8Array()),hr(e,Ms(this.parentInfoEncoder)),hr(e,this.typeRefEncoder.toUint8Array()),hr(e,this.lenEncoder.toUint8Array()),wm(e,Ms(this.restEncoder)),Ms(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Fd(this.restEncoder,e)}writeBuf(e){hr(this.restEncoder,e)}writeJSON(e){Fd(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const EV=(t,e,n,r)=>{r=Na(r,e[0].id.clock);const s=Fs(e,r);st(t.restEncoder,e.length-s),t.writeClient(n),st(t.restEncoder,r);const o=e[s];o.write(t,r-o.id.clock);for(let i=s+1;i<e.length;i++)e[i].write(t,0)},hb=(t,e,n)=>{const r=new Map;n.forEach((s,o)=>{fn(e,o)>s&&r.set(o,s)}),fb(e).forEach((s,o)=>{n.has(o)||r.set(o,0)}),st(t.restEncoder,r.size),yi(r.entries()).sort((s,o)=>o[0]-s[0]).forEach(([s,o])=>{EV(t,e.clients.get(s),s,o)})},NV=(t,e)=>{const n=tr(),r=Je(t.restDecoder);for(let s=0;s<r;s++){const o=Je(t.restDecoder),i=new Array(o),l=t.readClient();let u=Je(t.restDecoder);n.set(l,{i:0,refs:i});for(let h=0;h<o;h++){const f=t.readInfo();switch(ym&f){case 0:{const m=t.readLen();i[h]=new Ar(tt(l,u),m),u+=m;break}case 10:{const m=Je(t.restDecoder);i[h]=new Ir(tt(l,u),m),u+=m;break}default:{const m=(f&(po|br))===0,x=new Qt(tt(l,u),null,(f&br)===br?t.readLeftID():null,null,(f&po)===po?t.readRightID():null,m?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,m&&(f&Ld)===Ld?t.readString():null,kP(t,f));i[h]=x,u+=x.length}}}}return n},jV=(t,e,n)=>{const r=[];let s=yi(n.keys()).sort((w,v)=>w-v);if(s.length===0)return null;const o=()=>{if(s.length===0)return null;let w=n.get(s[s.length-1]);for(;w.refs.length===w.i;)if(s.pop(),s.length>0)w=n.get(s[s.length-1]);else return null;return w};let i=o();if(i===null)return null;const l=new tP,u=new Map,h=(w,v)=>{const y=u.get(w);(y==null||y>v)&&u.set(w,v)};let f=i.refs[i.i++];const m=new Map,x=()=>{for(const w of r){const v=w.id.client,y=n.get(v);y?(y.i--,l.clients.set(v,y.refs.slice(y.i)),n.delete(v),y.i=0,y.refs=[]):l.clients.set(v,[w]),s=s.filter(k=>k!==v)}r.length=0};for(;;){if(f.constructor!==Ir){const v=wo(m,f.id.client,()=>fn(e,f.id.client))-f.id.clock;if(v<0)r.push(f),h(f.id.client,f.id.clock-1),x();else{const y=f.getMissing(t,e);if(y!==null){r.push(f);const k=n.get(y)||{refs:[],i:0};if(k.refs.length===k.i)h(y,fn(e,y)),x();else{f=k.refs[k.i++];continue}}else(v===0||v<f.length)&&(f.integrate(t,v),m.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(i!==null&&i.i<i.refs.length)f=i.refs[i.i++];else{if(i=o(),i===null)break;f=i.refs[i.i++]}}if(l.clients.size>0){const w=new va;return hb(w,l,new Map),st(w.restEncoder,0),{missing:u,update:w.toUint8Array()}}return null},TV=(t,e)=>hb(t,e.doc.store,e.beforeState),MV=(t,e,n,r=new Bl(t))=>vt(e,s=>{s.local=!1;let o=!1;const i=s.doc,l=i.store,u=NV(r,i),h=jV(s,l,u),f=l.pendingStructs;if(f){for(const[x,w]of f.missing)if(w<fn(l,x)){o=!0;break}if(h){for(const[x,w]of h.missing){const v=f.missing.get(x);(v==null||v>w)&&f.missing.set(x,w)}f.update=fp([f.update,h.update])}}else l.pendingStructs=h;const m=A2(r,s,l);if(l.pendingDs){const x=new Bl(sc(l.pendingDs));Je(x.restDecoder);const w=A2(x,s,l);m&&w?l.pendingDs=fp([m,w]):l.pendingDs=m||w}else l.pendingDs=m;if(o){const x=l.pendingStructs.update;l.pendingStructs=null,JO(s.doc,x)}},n,!1),JO=(t,e,n,r=Bl)=>{const s=sc(e);MV(s,t,n,new r(s))},Ry=(t,e,n)=>JO(t,e,n,GO),OV=(t,e,n=new Map)=>{hb(t,e.store,n),oc(t,kV(e.store))},PV=(t,e=new Uint8Array([0]),n=new va)=>{const r=ZO(e);OV(n,t,r);const s=[n.toUint8Array()];if(t.store.pendingDs&&s.push(t.store.pendingDs),t.store.pendingStructs&&s.push(WV(t.store.pendingStructs.update,e)),s.length>1){if(n.constructor===bu)return UV(s.map((o,i)=>i===0?o:YV(o)));if(n.constructor===va)return fp(s)}return s[0]},QO=(t,e)=>PV(t,e,new bu),RV=t=>{const e=new Map,n=Je(t.restDecoder);for(let r=0;r<n;r++){const s=Je(t.restDecoder),o=Je(t.restDecoder);e.set(s,o)}return e},ZO=t=>RV(new XO(sc(t)));class AV{constructor(){this.l=[]}}const I2=()=>new AV,D2=(t,e)=>t.l.push(e),L2=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(s=>e!==s),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},eP=(t,e,n)=>ab(t.l,[e,n]);class _l{constructor(e,n){this.client=e,this.clock=n}}const Kh=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,tt=(t,e)=>new _l(t,e),IV=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Bs()},gl=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!qO(e.ds,t.id),Ay=(t,e)=>{const n=wo(t.meta,Ay,xa),r=t.doc.store;n.has(e)||(e.sv.forEach((s,o)=>{s<fn(r,o)&&wi(t,tt(o,s))}),YO(t,e.ds,s=>{}),n.add(e))};class tP{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const fb=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const s=n[n.length-1];e.set(r,s.id.clock+s.length)}),e},fn=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},nP=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Bs()}n.push(e)},Fs=(t,e)=>{let n=0,r=t.length-1,s=t[r],o=s.id.clock;if(o===e)return r;let i=bi(e/(o+s.length-1)*r);for(;n<=r;){if(s=t[i],o=s.id.clock,o<=e){if(e<o+s.length)return i;n=i+1}else r=i-1;i=bi((n+r)/2)}throw Bs()},DV=(t,e)=>{const n=t.clients.get(e.client);return n[Fs(n,e.clock)]},Sv=DV,Iy=(t,e,n)=>{const r=Fs(e,n),s=e[r];return s.id.clock<n&&s instanceof Qt?(e.splice(r+1,0,yp(t,s,n-s.id.clock)),r+1):r},wi=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Iy(t,n,e.clock)]},B2=(t,e,n)=>{const r=e.clients.get(n.client),s=Fs(r,n.clock),o=r[s];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Ar&&r.splice(s+1,0,yp(t,o,n.clock-o.id.clock+1)),o},LV=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Fs(r,e.id.clock)]=n},rP=(t,e,n,r,s)=>{if(r===0)return;const o=n+r;let i=Iy(t,e,n),l;do l=e[i++],o<l.id.clock+l.length&&Iy(t,e,o),s(l);while(i<e.length&&e[i].id.clock<o)};class BV{constructor(e,n,r){this.doc=e,this.deleteSet=new yu,this.beforeState=fb(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const F2=(t,e)=>e.deleteSet.clients.size===0&&!iW(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(db(e.deleteSet),TV(t,e),oc(t,e.deleteSet),!0),$2=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&wo(t.changed,e,xa).add(n)},Of=(t,e)=>{let n=t[e],r=t[e-1],s=e;for(;s>0;n=r,r=t[--s-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Qt&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const o=e-s;return o&&t.splice(e+1-o,o),o},FV=(t,e,n)=>{for(const[r,s]of t.clients.entries()){const o=e.clients.get(r);for(let i=s.length-1;i>=0;i--){const l=s[i],u=l.clock+l.len;for(let h=Fs(o,l.clock),f=o[h];h<o.length&&f.id.clock<u;f=o[++h]){const m=o[h];if(l.clock+l.len<=m.id.clock)break;m instanceof Qt&&m.deleted&&!m.keep&&n(m)&&m.gc(e,!1)}}}},$V=(t,e)=>{t.clients.forEach((n,r)=>{const s=e.clients.get(r);for(let o=n.length-1;o>=0;o--){const i=n[o],l=MO(s.length-1,1+Fs(s,i.clock+i.len-1));for(let u=l,h=s[u];u>0&&h.id.clock>=i.clock;h=s[u])u-=1+Of(s,u)}})},sP=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,s=r.store,o=n.deleteSet,i=n._mergeStructs;try{db(o),n.afterState=fb(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((u,h)=>l.push(()=>{(h._item===null||!h._item.deleted)&&h._callObserver(n,u)})),l.push(()=>{n.changedParentTypes.forEach((u,h)=>{h._dEH.l.length>0&&(h._item===null||!h._item.deleted)&&(u=u.filter(f=>f.target._item===null||!f.target._item.deleted),u.forEach(f=>{f.currentTarget=h,f._path=null}),u.sort((f,m)=>f.path.length-m.path.length),eP(h._dEH,u,n))})}),l.push(()=>r.emit("afterTransaction",[n,r])),ab(l,[]),n._needFormattingCleanup&&iY(n)}finally{r.gc&&FV(o,s,r.gcFilter),$V(o,s),n.afterState.forEach((f,m)=>{const x=n.beforeState.get(m)||0;if(x!==f){const w=s.clients.get(m),v=Na(Fs(w,x),1);for(let y=w.length-1;y>=v;)y-=1+Of(w,y)}});for(let f=i.length-1;f>=0;f--){const{client:m,clock:x}=i[f].id,w=s.clients.get(m),v=Fs(w,x);v+1<w.length&&Of(w,v+1)>1||v>0&&Of(w,v)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(gV(lb,$O,"[yjs] ",zO,UO,"Changed the client-id because another client seems to be using it."),r.clientID=KO()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const f=new bu;F2(f,n)&&r.emit("update",[f.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const f=new va;F2(f,n)&&r.emit("updateV2",[f.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:u,subdocsRemoved:h}=n;(l.size>0||h.size>0||u.size>0)&&(l.forEach(f=>{f.clientID=r.clientID,f.collectionid==null&&(f.collectionid=r.collectionid),r.subdocs.add(f)}),h.forEach(f=>r.subdocs.delete(f)),r.emit("subdocs",[{loaded:u,added:l,removed:h},r,n]),h.forEach(f=>f.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):sP(t,e+1)}}},vt=(t,e,n=null,r=!0)=>{const s=t._transactionCleanups;let o=!1,i=null;t._transaction===null&&(o=!0,t._transaction=new BV(t,n,r),s.push(t._transaction),s.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{i=e(t._transaction)}finally{if(o){const l=t._transaction===s[0];t._transaction=null,l&&sP(s,0)}}return i};function*zV(t){const e=Je(t.restDecoder);for(let n=0;n<e;n++){const r=Je(t.restDecoder),s=t.readClient();let o=Je(t.restDecoder);for(let i=0;i<r;i++){const l=t.readInfo();if(l===10){const u=Je(t.restDecoder);yield new Ir(tt(s,o),u),o+=u}else if((ym&l)!==0){const u=(l&(po|br))===0,h=new Qt(tt(s,o),null,(l&br)===br?t.readLeftID():null,null,(l&po)===po?t.readRightID():null,u?t.readParentInfo()?t.readString():t.readLeftID():null,u&&(l&Ld)===Ld?t.readString():null,kP(t,l));yield h,o+=h.length}else{const u=t.readLen();yield new Ar(tt(s,o),u),o+=u}}}}class pb{constructor(e,n){this.gen=zV(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Ir);return this.curr}}class mb{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const UV=t=>fp(t,GO,bu),HV=(t,e)=>{if(t.constructor===Ar){const{client:n,clock:r}=t.id;return new Ar(tt(n,r+e),t.length-e)}else if(t.constructor===Ir){const{client:n,clock:r}=t.id;return new Ir(tt(n,r+e),t.length-e)}else{const n=t,{client:r,clock:s}=n.id;return new Qt(tt(r,s+e),null,tt(r,s+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},fp=(t,e=Bl,n=va)=>{if(t.length===1)return t[0];const r=t.map(f=>new e(sc(f)));let s=r.map(f=>new pb(f,!0)),o=null;const i=new n,l=new mb(i);for(;s=s.filter(x=>x.curr!==null),s.sort((x,w)=>{if(x.curr.id.client===w.curr.id.client){const v=x.curr.id.clock-w.curr.id.clock;return v===0?x.curr.constructor===w.curr.constructor?0:x.curr.constructor===Ir?1:-1:v}else return w.curr.id.client-x.curr.id.client}),s.length!==0;){const f=s[0],m=f.curr.id.client;if(o!==null){let x=f.curr,w=!1;for(;x!==null&&x.id.clock+x.length<=o.struct.id.clock+o.struct.length&&x.id.client>=o.struct.id.client;)x=f.next(),w=!0;if(x===null||x.id.client!==m||w&&x.id.clock>o.struct.id.clock+o.struct.length)continue;if(m!==o.struct.id.client)si(l,o.struct,o.offset),o={struct:x,offset:0},f.next();else if(o.struct.id.clock+o.struct.length<x.id.clock)if(o.struct.constructor===Ir)o.struct.length=x.id.clock+x.length-o.struct.id.clock;else{si(l,o.struct,o.offset);const v=x.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Ir(tt(m,o.struct.id.clock+o.struct.length),v),offset:0}}else{const v=o.struct.id.clock+o.struct.length-x.id.clock;v>0&&(o.struct.constructor===Ir?o.struct.length-=v:x=HV(x,v)),o.struct.mergeWith(x)||(si(l,o.struct,o.offset),o={struct:x,offset:0},f.next())}}else o={struct:f.curr,offset:0},f.next();for(let x=f.curr;x!==null&&x.id.client===m&&x.id.clock===o.struct.id.clock+o.struct.length&&x.constructor!==Ir;x=f.next())si(l,o.struct,o.offset),o={struct:x,offset:0}}o!==null&&(si(l,o.struct,o.offset),o=null),gb(l);const u=r.map(f=>ub(f)),h=bV(u);return oc(i,h),i.toUint8Array()},WV=(t,e,n=Bl,r=va)=>{const s=ZO(e),o=new r,i=new mb(o),l=new n(sc(t)),u=new pb(l,!1);for(;u.curr;){const f=u.curr,m=f.id.client,x=s.get(m)||0;if(u.curr.constructor===Ir){u.next();continue}if(f.id.clock+f.length>x)for(si(i,f,Na(x-f.id.clock,0)),u.next();u.curr&&u.curr.id.client===m;)si(i,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===m&&u.curr.id.clock+u.curr.length<=x;)u.next()}gb(i);const h=ub(l);return oc(o,h),o.toUint8Array()},oP=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Ms(t.encoder.restEncoder)}),t.encoder.restEncoder=bm(),t.written=0)},si=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&oP(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),st(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},gb=t=>{oP(t);const e=t.encoder.restEncoder;st(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];st(e,r.written),wm(e,r.restEncoder)}},VV=(t,e,n,r)=>{const s=new n(sc(t)),o=new pb(s,!1),i=new r,l=new mb(i);for(let h=o.curr;h!==null;h=o.next())si(l,e(h),0);gb(l);const u=ub(s);return oc(i,u),i.toUint8Array()},YV=t=>VV(t,ZW,Bl,bu),z2="You must not compute changes after the event-handler fired.";class Sm{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=qV(this.currentTarget,this.target))}deletes(e){return qO(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw yo(z2);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(s=>{if(s!==null){const o=n._map.get(s);let i,l;if(this.adds(o)){let u=o.left;for(;u!==null&&this.adds(u);)u=u.left;if(this.deletes(o))if(u!==null&&this.deletes(u))i="delete",l=xv(u.content.getContent());else return;else u!==null&&this.deletes(u)?(i="update",l=xv(u.content.getContent())):(i="add",l=void 0)}else if(this.deletes(o))i="delete",l=xv(o.content.getContent());else return;e.set(s,{action:i,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw yo(z2);const n=this.target,r=xa(),s=xa(),o=[];if(e={added:r,deleted:s,delta:o,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const u=()=>{l&&o.push(l)};for(let h=n._start;h!==null;h=h.right)h.deleted?this.deletes(h)&&!this.adds(h)&&((l===null||l.delete===void 0)&&(u(),l={delete:0}),l.delete+=h.length,s.add(h)):this.adds(h)?((l===null||l.insert===void 0)&&(u(),l={insert:[]}),l.insert=l.insert.concat(h.content.getContent()),r.add(h)):((l===null||l.retain===void 0)&&(u(),l={retain:0}),l.retain+=h.length);l!==null&&l.retain===void 0&&u()}this._changes=e}return e}}const qV=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)!s.deleted&&s.countable&&(r+=s.length),s=s.right;n.unshift(r)}e=e._item.parent}return n},Mn=()=>{xV("Invalid access: Add Yjs type to a document before reading data.")},iP=80;let xb=0;class KV{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=xb++}}const XV=t=>{t.timestamp=xb++},aP=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=xb++},GV=(t,e,n)=>{if(t.length>=iP){const r=t.reduce((s,o)=>s.timestamp<o.timestamp?s:o);return aP(r,e,n),r}else{const r=new KV(e,n);return t.push(r),r}},Cm=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((o,i)=>jf(e-o.index)<jf(e-i.index)?o:i);let r=t._start,s=0;for(n!==null&&(r=n.p,s=n.index,XV(n));r.right!==null&&s<e;){if(!r.deleted&&r.countable){if(e<s+r.length)break;s+=r.length}r=r.right}for(;r.left!==null&&s>e;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);return n!==null&&jf(n.index-s)<r.parent.length/iP?(aP(n,r,s),n):GV(t._searchMarker,r,s)},Ud=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const s=t[r];if(n>0){let o=s.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(s.index-=o.length);if(o===null||o.marker===!0){t.splice(r,1);continue}s.p=o,o.marker=!0}(e<s.index||n>0&&e===s.index)&&(s.index=Na(e,s.index+n))}},_m=(t,e,n)=>{const r=t,s=e.changedParentTypes;for(;wo(s,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;eP(r._eH,n,e)};class xn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=I2(),this._dEH=I2(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Rs()}clone(){throw Rs()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){D2(this._eH,e)}observeDeep(e){D2(this._dEH,e)}unobserve(e){L2(this._eH,e)}unobserveDeep(e){L2(this._dEH,e)}toJSON(){}}const lP=(t,e,n)=>{t.doc??Mn(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const s=[];let o=t._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){const i=o.content.getContent();if(i.length<=e)e-=i.length;else{for(let l=e;l<i.length&&r>0;l++)s.push(i[l]),r--;e=0}}o=o.right}return s},cP=t=>{t.doc??Mn();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let s=0;s<r.length;s++)e.push(r[s])}n=n.right}return e},Hd=(t,e)=>{let n=0,r=t._start;for(t.doc??Mn();r!==null;){if(r.countable&&!r.deleted){const s=r.content.getContent();for(let o=0;o<s.length;o++)e(s[o],n++,t)}r=r.right}},dP=(t,e)=>{const n=[];return Hd(t,(r,s)=>{n.push(e(r,s,t))}),n},JV=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const s=n[r++];return n.length<=r&&(n=null),{done:!1,value:s}}}},uP=(t,e)=>{t.doc??Mn();const n=Cm(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},pp=(t,e,n,r)=>{let s=n;const o=t.doc,i=o.clientID,l=o.store,u=n===null?e._start:n.right;let h=[];const f=()=>{h.length>0&&(s=new Qt(tt(i,fn(l,i)),s,s&&s.lastId,u,u&&u.id,e,null,new ba(h)),s.integrate(t,0),h=[])};r.forEach(m=>{if(m===null)h.push(m);else switch(m.constructor){case Number:case Object:case Boolean:case Array:case String:h.push(m);break;default:switch(f(),m.constructor){case Uint8Array:case ArrayBuffer:s=new Qt(tt(i,fn(l,i)),s,s&&s.lastId,u,u&&u.id,e,null,new wu(new Uint8Array(m))),s.integrate(t,0);break;case ic:s=new Qt(tt(i,fn(l,i)),s,s&&s.lastId,u,u&&u.id,e,null,new ku(m)),s.integrate(t,0);break;default:if(m instanceof xn)s=new Qt(tt(i,fn(l,i)),s,s&&s.lastId,u,u&&u.id,e,null,new So(m)),s.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),f()},hP=()=>yo("Length exceeded!"),fP=(t,e,n,r)=>{if(n>e._length)throw hP();if(n===0)return e._searchMarker&&Ud(e._searchMarker,n,r.length),pp(t,e,null,r);const s=n,o=Cm(e,n);let i=e._start;for(o!==null&&(i=o.p,n-=o.index,n===0&&(i=i.prev,n+=i&&i.countable&&!i.deleted?i.length:0));i!==null;i=i.right)if(!i.deleted&&i.countable){if(n<=i.length){n<i.length&&wi(t,tt(i.id.client,i.id.clock+n));break}n-=i.length}return e._searchMarker&&Ud(e._searchMarker,s,r.length),pp(t,e,i,r)},QV=(t,e,n)=>{let s=(e._searchMarker||[]).reduce((o,i)=>i.index>o.index?i:o,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return pp(t,e,s,n)},pP=(t,e,n,r)=>{if(r===0)return;const s=n,o=r,i=Cm(e,n);let l=e._start;for(i!==null&&(l=i.p,n-=i.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&wi(t,tt(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&wi(t,tt(l.id.client,l.id.clock+r)),l.delete(t),r-=l.length),l=l.right;if(r>0)throw hP();e._searchMarker&&Ud(e._searchMarker,s,-o+r)},mp=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},vb=(t,e,n,r)=>{const s=e._map.get(n)||null,o=t.doc,i=o.clientID;let l;if(r==null)l=new ba([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new ba([r]);break;case Uint8Array:l=new wu(r);break;case ic:l=new ku(r);break;default:if(r instanceof xn)l=new So(r);else throw new Error("Unexpected content type")}new Qt(tt(i,fn(o.store,i)),s,s&&s.lastId,null,null,e,n,l).integrate(t,0)},yb=(t,e)=>{t.doc??Mn();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},mP=t=>{const e={};return t.doc??Mn(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},gP=(t,e)=>{t.doc??Mn();const n=t._map.get(e);return n!==void 0&&!n.deleted},ZV=(t,e)=>{const n={};return t._map.forEach((r,s)=>{let o=r;for(;o!==null&&(!e.sv.has(o.id.client)||o.id.clock>=(e.sv.get(o.id.client)||0));)o=o.left;o!==null&&gl(o,e)&&(n[s]=o.content.getContent()[o.length-1])}),n},Xh=t=>(t.doc??Mn(),vV(t._map.entries(),e=>!e[1].deleted));class eY extends Sm{}class El extends xn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new El;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new El}clone(){const e=new El;return e.insert(0,this.toArray().map(n=>n instanceof xn?n.clone():n)),e}get length(){return this.doc??Mn(),this._length}_callObserver(e,n){super._callObserver(e,n),_m(this,e,new eY(this,e))}insert(e,n){this.doc!==null?vt(this.doc,r=>{fP(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?vt(this.doc,n=>{QV(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?vt(this.doc,r=>{pP(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return uP(this,e)}toArray(){return cP(this)}slice(e=0,n=this.length){return lP(this,e,n)}toJSON(){return this.map(e=>e instanceof xn?e.toJSON():e)}map(e){return dP(this,e)}forEach(e){Hd(this,e)}[Symbol.iterator](){return JV(this)}_write(e){e.writeTypeRef(_Y)}}const tY=t=>new El;class nY extends Sm{constructor(e,n,r){super(e,n),this.keysChanged=r}}class Fl extends xn{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,s)=>{this.set(s,r)}),this._prelimContent=null}_copy(){return new Fl}clone(){const e=new Fl;return this.forEach((n,r)=>{e.set(r,n instanceof xn?n.clone():n)}),e}_callObserver(e,n){_m(this,e,new nY(this,e,n))}toJSON(){this.doc??Mn();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const s=n.content.getContent()[n.length-1];e[r]=s instanceof xn?s.toJSON():s}}),e}get size(){return[...Xh(this)].length}keys(){return kv(Xh(this),e=>e[0])}values(){return kv(Xh(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return kv(Xh(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Mn(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?vt(this.doc,n=>{mp(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?vt(this.doc,r=>{vb(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return yb(this,e)}has(e){return gP(this,e)}clear(){this.doc!==null?vt(this.doc,e=>{this.forEach(function(n,r,s){mp(e,s,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(EY)}}const rY=t=>new Fl,ai=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&JW(t,e);class Dy{constructor(e,n,r,s){this.left=e,this.right=n,this.index=r,this.currentAttributes=s}forward(){switch(this.right===null&&Bs(),this.right.content.constructor){case tn:this.right.deleted||ac(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const U2=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case tn:e.right.deleted||ac(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&wi(t,tt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Gh=(t,e,n,r)=>{const s=new Map,o=r?Cm(e,n):null;if(o){const i=new Dy(o.p.left,o.p,o.index,s);return U2(t,i,n-o.index)}else{const i=new Dy(null,e._start,0,s);return U2(t,i,n)}},xP=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===tn&&ai(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const s=t.doc,o=s.clientID;r.forEach((i,l)=>{const u=n.left,h=n.right,f=new Qt(tt(o,fn(s.store,o)),u,u&&u.lastId,h,h&&h.id,e,null,new tn(l,i));f.integrate(t,0),n.right=f,n.forward()})},ac=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},vP=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===tn&&ai(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},yP=(t,e,n,r)=>{const s=t.doc,o=s.clientID,i=new Map;for(const l in r){const u=r[l],h=n.currentAttributes.get(l)??null;if(!ai(h,u)){i.set(l,h);const{left:f,right:m}=n;n.right=new Qt(tt(o,fn(s.store,o)),f,f&&f.lastId,m,m&&m.id,e,null,new tn(l,u)),n.right.integrate(t,0),n.forward()}}return i},Cv=(t,e,n,r,s)=>{n.currentAttributes.forEach((x,w)=>{s[w]===void 0&&(s[w]=null)});const o=t.doc,i=o.clientID;vP(n,s);const l=yP(t,e,n,s),u=r.constructor===String?new $s(r):r instanceof xn?new So(r):new ja(r);let{left:h,right:f,index:m}=n;e._searchMarker&&Ud(e._searchMarker,n.index,u.getLength()),f=new Qt(tt(i,fn(o.store,i)),h,h&&h.lastId,f,f&&f.id,e,null,u),f.integrate(t,0),n.right=f,n.index=m,n.forward(),xP(t,e,n,l)},H2=(t,e,n,r,s)=>{const o=t.doc,i=o.clientID;vP(n,s);const l=yP(t,e,n,s);e:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===tn));){if(!n.right.deleted)switch(n.right.content.constructor){case tn:{const{key:u,value:h}=n.right.content,f=s[u];if(f!==void 0){if(ai(f,h))l.delete(u);else{if(r===0)break e;l.set(u,h)}n.right.delete(t)}else n.currentAttributes.set(u,h);break}default:r<n.right.length&&wi(t,tt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let u="";for(;r>0;r--)u+=`
`;n.right=new Qt(tt(i,fn(o.store,i)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new $s(u)),n.right.integrate(t,0),n.forward()}xP(t,e,n,l)},bP=(t,e,n,r,s)=>{let o=e;const i=tr();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===tn){const h=o.content;i.set(h.key,h)}o=o.right}let l=0,u=!1;for(;e!==o;){if(n===e&&(u=!0),!e.deleted){const h=e.content;switch(h.constructor){case tn:{const{key:f,value:m}=h,x=r.get(f)??null;(i.get(f)!==h||x===m)&&(e.delete(t),l++,!u&&(s.get(f)??null)===m&&x!==m&&(x===null?s.delete(f):s.set(f,x))),!u&&!e.deleted&&ac(s,h);break}}}e=e.right}return l},sY=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===tn){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},oY=t=>{let e=0;return vt(t.doc,n=>{let r=t._start,s=t._start,o=tr();const i=jy(o);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case tn:ac(i,s.content);break;default:e+=bP(n,r,s,o,i),o=jy(i),r=s;break}s=s.right}}),e},iY=t=>{const e=new Set,n=t.doc;for(const[r,s]of t.afterState.entries()){const o=t.beforeState.get(r)||0;s!==o&&rP(t,n.store.clients.get(r),o,s,i=>{!i.deleted&&i.content.constructor===tn&&i.constructor!==Ar&&e.add(i.parent)})}vt(n,r=>{YO(t,t.deleteSet,s=>{if(s instanceof Ar||!s.parent._hasFormatting||e.has(s.parent))return;const o=s.parent;s.content.constructor===tn?e.add(o):sY(r,s)});for(const s of e)oY(s)})},W2=(t,e,n)=>{const r=n,s=jy(e.currentAttributes),o=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case So:case ja:case $s:n<e.right.length&&wi(t,tt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}o&&bP(t,o,e.right,s,e.currentAttributes);const i=(e.left||e.right).parent;return i._searchMarker&&Ud(i._searchMarker,e.index,-r+n),e};class aY extends Sm{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];vt(e,r=>{const s=new Map,o=new Map;let i=this.target._start,l=null;const u={};let h="",f=0,m=0;const x=()=>{if(l!==null){let w=null;switch(l){case"delete":m>0&&(w={delete:m}),m=0;break;case"insert":(typeof h=="object"||h.length>0)&&(w={insert:h},s.size>0&&(w.attributes={},s.forEach((v,y)=>{v!==null&&(w.attributes[y]=v)}))),h="";break;case"retain":f>0&&(w={retain:f},KW(u)||(w.attributes=VW({},u))),f=0;break}w&&n.push(w),l=null}};for(;i!==null;){switch(i.content.constructor){case So:case ja:this.adds(i)?this.deletes(i)||(x(),l="insert",h=i.content.getContent()[0],x()):this.deletes(i)?(l!=="delete"&&(x(),l="delete"),m+=1):i.deleted||(l!=="retain"&&(x(),l="retain"),f+=1);break;case $s:this.adds(i)?this.deletes(i)||(l!=="insert"&&(x(),l="insert"),h+=i.content.str):this.deletes(i)?(l!=="delete"&&(x(),l="delete"),m+=i.length):i.deleted||(l!=="retain"&&(x(),l="retain"),f+=i.length);break;case tn:{const{key:w,value:v}=i.content;if(this.adds(i)){if(!this.deletes(i)){const y=s.get(w)??null;ai(y,v)?v!==null&&i.delete(r):(l==="retain"&&x(),ai(v,o.get(w)??null)?delete u[w]:u[w]=v)}}else if(this.deletes(i)){o.set(w,v);const y=s.get(w)??null;ai(y,v)||(l==="retain"&&x(),u[w]=y)}else if(!i.deleted){o.set(w,v);const y=u[w];y!==void 0&&(ai(y,v)?y!==null&&i.delete(r):(l==="retain"&&x(),v===null?delete u[w]:u[w]=v))}i.deleted||(l==="insert"&&x(),ac(s,i.content));break}}i=i.right}for(x();n.length>0;){const w=n[n.length-1];if(w.retain!==void 0&&w.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class $l extends xn{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Mn(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new $l}clone(){const e=new $l;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new aY(this,e,n);_m(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Mn();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===$s&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?vt(this.doc,r=>{const s=new Dy(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const i=e[o];if(i.insert!==void 0){const l=!n&&typeof i.insert=="string"&&o===e.length-1&&s.right===null&&i.insert.slice(-1)===`
`?i.insert.slice(0,-1):i.insert;(typeof l!="string"||l.length>0)&&Cv(r,this,s,l,i.attributes||{})}else i.retain!==void 0?H2(r,this,s,i.retain,i.attributes||{}):i.delete!==void 0&&W2(r,s,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??Mn();const s=[],o=new Map,i=this.doc;let l="",u=this._start;function h(){if(l.length>0){const m={};let x=!1;o.forEach((v,y)=>{x=!0,m[y]=v});const w={insert:l};x&&(w.attributes=m),s.push(w),l=""}}const f=()=>{for(;u!==null;){if(gl(u,e)||n!==void 0&&gl(u,n))switch(u.content.constructor){case $s:{const m=o.get("ychange");e!==void 0&&!gl(u,e)?(m===void 0||m.user!==u.id.client||m.type!=="removed")&&(h(),o.set("ychange",r?r("removed",u.id):{type:"removed"})):n!==void 0&&!gl(u,n)?(m===void 0||m.user!==u.id.client||m.type!=="added")&&(h(),o.set("ychange",r?r("added",u.id):{type:"added"})):m!==void 0&&(h(),o.delete("ychange")),l+=u.content.str;break}case So:case ja:{h();const m={insert:u.content.getContent()[0]};if(o.size>0){const x={};m.attributes=x,o.forEach((w,v)=>{x[v]=w})}s.push(m);break}case tn:gl(u,e)&&(h(),ac(o,u.content));break}u=u.right}h()};return e||n?vt(i,m=>{e&&Ay(m,e),n&&Ay(m,n),f()},"cleanup"):f(),s}insert(e,n,r){if(n.length<=0)return;const s=this.doc;s!==null?vt(s,o=>{const i=Gh(o,this,e,!r);r||(r={},i.currentAttributes.forEach((l,u)=>{r[u]=l})),Cv(o,this,i,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const s=this.doc;s!==null?vt(s,o=>{const i=Gh(o,this,e,!r);Cv(o,this,i,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?vt(r,s=>{W2(s,Gh(s,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const s=this.doc;s!==null?vt(s,o=>{const i=Gh(o,this,e,!1);i.right!==null&&H2(o,this,i,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?vt(this.doc,n=>{mp(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?vt(this.doc,r=>{vb(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return yb(this,e)}getAttributes(){return mP(this)}_write(e){e.writeTypeRef(NY)}}const lY=t=>new $l;class _v{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Mn()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===zl||n.constructor===ya)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class ya extends xn{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ya}clone(){const e=new ya;return e.insert(0,this.toArray().map(n=>n instanceof xn?n.clone():n)),e}get length(){return this.doc??Mn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new _v(this,e)}querySelector(e){e=e.toUpperCase();const r=new _v(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),yi(new _v(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){_m(this,e,new uY(this,n,e))}toString(){return dP(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const s=e.createDocumentFragment();return r!==void 0&&r._createAssociation(s,this),Hd(this,o=>{s.insertBefore(o.toDOM(e,n,r),null)}),s}insert(e,n){this.doc!==null?vt(this.doc,r=>{fP(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)vt(this.doc,r=>{const s=e&&e instanceof xn?e._item:e;pp(r,this,s,n)});else{const r=this._prelimContent,s=e===null?0:r.findIndex(o=>o===e)+1;if(s===0&&e!==null)throw yo("Reference item not found");r.splice(s,0,...n)}}delete(e,n=1){this.doc!==null?vt(this.doc,r=>{pP(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return cP(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return uP(this,e)}slice(e=0,n=this.length){return lP(this,e,n)}forEach(e){Hd(this,e)}_write(e){e.writeTypeRef(TY)}}const cY=t=>new ya;class zl extends ya{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,s)=>{this.setAttribute(s,r)}),this._prelimAttrs=null}_copy(){return new zl(this.nodeName)}clone(){const e=new zl(this.nodeName),n=this.getAttributes();return qW(n,(r,s)=>{typeof r=="string"&&e.setAttribute(s,r)}),e.insert(0,this.toArray().map(r=>r instanceof xn?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const l in e)r.push(l);r.sort();const s=r.length;for(let l=0;l<s;l++){const u=r[l];n.push(u+'="'+e[u]+'"')}const o=this.nodeName.toLocaleLowerCase(),i=n.length>0?" "+n.join(" "):"";return`<${o}${i}>${super.toString()}</${o}>`}removeAttribute(e){this.doc!==null?vt(this.doc,n=>{mp(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?vt(this.doc,r=>{vb(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return yb(this,e)}hasAttribute(e){return gP(this,e)}getAttributes(e){return e?ZV(this,e):mP(this)}toDOM(e=document,n={},r){const s=e.createElement(this.nodeName),o=this.getAttributes();for(const i in o){const l=o[i];typeof l=="string"&&s.setAttribute(i,l)}return Hd(this,i=>{s.appendChild(i.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(jY),e.writeKey(this.nodeName)}}const dY=t=>new zl(t.readKey());class uY extends Sm{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class gp extends Fl{constructor(e){super(),this.hookName=e}_copy(){return new gp(this.hookName)}clone(){const e=new gp(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const s=n[this.hookName];let o;return s!==void 0?o=s.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(MY),e.writeKey(this.hookName)}}const hY=t=>new gp(t.readKey());class xp extends $l{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new xp}clone(){const e=new xp;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const s=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(s,this),s}toString(){return this.toDelta().map(e=>{const n=[];for(const s in e.attributes){const o=[];for(const i in e.attributes[s])o.push({key:i,value:e.attributes[s][i]});o.sort((i,l)=>i.key<l.key?-1:1),n.push({nodeName:s,attrs:o})}n.sort((s,o)=>s.nodeName<o.nodeName?-1:1);let r="";for(let s=0;s<n.length;s++){const o=n[s];r+=`<${o.nodeName}`;for(let i=0;i<o.attrs.length;i++){const l=o.attrs[i];r+=` ${l.key}="${l.value}"`}r+=">"}r+=e.insert;for(let s=n.length-1;s>=0;s--)r+=`</${n[s].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(OY)}}const fY=t=>new xp;class bb{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Rs()}mergeWith(e){return!1}write(e,n,r){throw Rs()}integrate(e,n){throw Rs()}}const pY=0;class Ar extends bb{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),nP(e.doc.store,this)}write(e,n){e.writeInfo(pY),e.writeLen(this.length-n)}getMissing(e,n){return null}}class wu{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new wu(this.content)}splice(e){throw Rs()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const mY=t=>new wu(t.readBuf());class Wd{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Wd(this.len)}splice(e){const n=new Wd(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){hp(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const gY=t=>new Wd(t.readLen()),wP=(t,e)=>new ic({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class ku{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ku(wP(this.doc.guid,this.opts))}splice(e){throw Rs()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const xY=t=>new ku(wP(t.readString(),t.readAny()));class ja{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ja(this.embed)}splice(e){throw Rs()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const vY=t=>new ja(t.readJSON());class tn{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new tn(this.key,this.value)}splice(e){throw Rs()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const yY=t=>new tn(t.readKey(),t.readJSON());class vp{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new vp(this.arr)}splice(e){const n=new vp(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let s=n;s<r;s++){const o=this.arr[s];e.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const bY=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const s=t.readString();s==="undefined"?n.push(void 0):n.push(JSON.parse(s))}return new vp(n)},wY=up("node_env")==="development";class ba{constructor(e){this.arr=e,wY&&LO(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ba(this.arr)}splice(e){const n=new ba(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let s=n;s<r;s++){const o=this.arr[s];e.writeAny(o)}}getRef(){return 8}}const kY=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new ba(n)};class $s{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new $s(this.str)}splice(e){const n=new $s(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const SY=t=>new $s(t.readString()),CY=[tY,rY,lY,dY,cY,hY,fY],_Y=0,EY=1,NY=2,jY=3,TY=4,MY=5,OY=6;class So{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new So(this.type._copy())}splice(e){throw Rs()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const PY=t=>new So(CY[t.readTypeRef()](t)),yp=(t,e,n)=>{const{client:r,clock:s}=e.id,o=new Qt(tt(r,s+n),e,tt(r,s+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),e.redone!==null&&(o.redone=tt(e.redone.client,e.redone.clock+n)),e.right=o,o.right!==null&&(o.right.left=o),t._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),e.length=n,o};class Qt extends bb{constructor(e,n,r,s,o,i,l,u){super(e,u.getLength()),this.origin=r,this.left=n,this.right=s,this.rightOrigin=o,this.parent=i,this.parentSub=l,this.redone=null,this.content=u,this.info=this.content.isCountable()?_2:0}set marker(e){(this.info&yv)>0!==e&&(this.info^=yv)}get marker(){return(this.info&yv)>0}get keep(){return(this.info&C2)>0}set keep(e){this.keep!==e&&(this.info^=C2)}get countable(){return(this.info&_2)>0}get deleted(){return(this.info&vv)>0}set deleted(e){this.deleted!==e&&(this.info^=vv)}markDeleted(){this.info|=vv}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=fn(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=fn(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===_l&&this.id.client!==this.parent.client&&this.parent.clock>=fn(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=B2(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=wi(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Ar||this.right&&this.right.constructor===Ar)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Qt?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Qt&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===_l){const r=Sv(n,this.parent);r.constructor===Ar?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=B2(e,e.doc.store,tt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,s;if(r!==null)s=r.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const o=new Set,i=new Set;for(;s!==null&&s!==this.right;){if(i.add(s),o.add(s),Kh(this.origin,s.origin)){if(s.id.client<this.id.client)r=s,o.clear();else if(Kh(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&i.has(Sv(e.doc.store,s.origin)))o.has(Sv(e.doc.store,s.origin))||(r=s,o.clear());else break;s=s.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),nP(e.doc.store,this),this.content.integrate(e,this),$2(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Ar(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:tt(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Kh(e.origin,this.lastId)&&this.right===e&&Kh(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),hp(e.deleteSet,this.id.client,this.id.clock,this.length),$2(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Bs();this.content.gc(e),n?LV(e,this,new Ar(this.id,this.length)):this.content=new Wd(this.length)}write(e,n){const r=n>0?tt(this.id.client,this.id.clock+n-1):this.origin,s=this.rightOrigin,o=this.parentSub,i=this.content.getRef()&ym|(r===null?0:br)|(s===null?0:po)|(o===null?0:Ld);if(e.writeInfo(i),r!==null&&e.writeLeftID(r),s!==null&&e.writeRightID(s),r===null&&s===null){const l=this.parent;if(l._item!==void 0){const u=l._item;if(u===null){const h=IV(l);e.writeParentInfo(!0),e.writeString(h)}else e.writeParentInfo(!1),e.writeLeftID(u.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===_l?(e.writeParentInfo(!1),e.writeLeftID(l)):Bs();o!==null&&e.writeString(o)}this.content.write(e,n)}}const kP=(t,e)=>RY[e&ym](t),RY=[()=>{Bs()},gY,bY,mY,SY,vY,yY,PY,kY,xY,()=>{Bs()}],AY=10;class Ir extends bb{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Bs()}write(e,n){e.writeInfo(AY),st(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const SP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},CP="__ $YJS$ __";SP[CP]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");SP[CP]=!0;const Ta=t=>Ll((e,n)=>{t.onerror=r=>n(new Error(r.target.error)),t.onsuccess=r=>e(r.target.result)}),IY=(t,e)=>Ll((n,r)=>{const s=indexedDB.open(t);s.onupgradeneeded=o=>e(o.target.result),s.onerror=o=>r(yo(o.target.error)),s.onsuccess=o=>{const i=o.target.result;i.onversionchange=()=>{i.close()},n(i)}}),DY=t=>Ta(indexedDB.deleteDatabase(t)),LY=(t,e)=>e.forEach(n=>t.createObjectStore.apply(t,n)),hd=(t,e,n="readwrite")=>{const r=t.transaction(e,n);return e.map(s=>VY(r,s))},_P=(t,e)=>Ta(t.count(e)),BY=(t,e)=>Ta(t.get(e)),EP=(t,e)=>Ta(t.delete(e)),FY=(t,e,n)=>Ta(t.put(e,n)),Ly=(t,e)=>Ta(t.add(e)),$Y=(t,e,n)=>Ta(t.getAll(e,n)),zY=(t,e,n)=>{let r=null;return WY(t,e,s=>(r=s,!1),n).then(()=>r)},UY=(t,e=null)=>zY(t,e,"prev"),HY=(t,e)=>Ll((n,r)=>{t.onerror=r,t.onsuccess=async s=>{const o=s.target.result;if(o===null||await e(o)===!1)return n();o.continue()}}),WY=(t,e,n,r="next")=>HY(t.openKeyCursor(e,r),s=>n(s.key)),VY=(t,e)=>t.objectStore(e),YY=(t,e)=>IDBKeyRange.upperBound(t,e),qY=(t,e)=>IDBKeyRange.lowerBound(t,e),Ev="custom",NP="updates",jP=500,TP=(t,e=()=>{},n=()=>{})=>{const[r]=hd(t.db,[NP]);return $Y(r,qY(t._dbref,!1)).then(s=>{t._destroyed||(e(r),vt(t.doc,()=>{s.forEach(o=>Ry(t.doc,o))},t,!1),n(r))}).then(()=>UY(r).then(s=>{t._dbref=s+1})).then(()=>_P(r).then(s=>{t._dbsize=s})).then(()=>r)},KY=(t,e=!0)=>TP(t).then(n=>{(e||t._dbsize>=jP)&&Ly(n,QO(t.doc)).then(()=>EP(n,YY(t._dbref,!0))).then(()=>_P(n).then(r=>{t._dbsize=r}))});class XY extends dW{constructor(e,n){super(),this.doc=n,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=IY(e,r=>LY(r,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=Ll(r=>this.on("synced",()=>r(this))),this._db.then(r=>{this.db=r,TP(this,i=>Ly(i,QO(n)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(r,s)=>{if(this.db&&s!==this){const[o]=hd(this.db,[NP]);Ly(o,r),++this._dbsize>=jP&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{KY(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},n.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{DY(this.name)})}get(e){return this._db.then(n=>{const[r]=hd(n,[Ev],"readonly");return BY(r,e)})}set(e,n){return this._db.then(r=>{const[s]=hd(r,[Ev]);return FY(s,n,e)})}del(e){return this._db.then(n=>{const[r]=hd(n,[Ev]);return EP(r,e)})}}const zs=Object.create(null);zs.open="0";zs.close="1";zs.ping="2";zs.pong="3";zs.message="4";zs.upgrade="5";zs.noop="6";const Pf=Object.create(null);Object.keys(zs).forEach(t=>{Pf[zs[t]]=t});const By={type:"error",data:"parser error"},MP=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",OP=typeof ArrayBuffer=="function",PP=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,wb=({type:t,data:e},n,r)=>MP&&e instanceof Blob?n?r(e):V2(e,r):OP&&(e instanceof ArrayBuffer||PP(e))?n?r(e):V2(new Blob([e]),r):r(zs[t]+(e||"")),V2=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Y2(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Nv;function GY(t,e){if(MP&&t.data instanceof Blob)return t.data.arrayBuffer().then(Y2).then(e);if(OP&&(t.data instanceof ArrayBuffer||PP(t.data)))return e(Y2(t.data));wb(t,!1,n=>{Nv||(Nv=new TextEncoder),e(Nv.encode(n))})}const q2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<q2.length;t++)fd[q2.charCodeAt(t)]=t;const JY=t=>{let e=t.length*.75,n=t.length,r,s=0,o,i,l,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),f=new Uint8Array(h);for(r=0;r<n;r+=4)o=fd[t.charCodeAt(r)],i=fd[t.charCodeAt(r+1)],l=fd[t.charCodeAt(r+2)],u=fd[t.charCodeAt(r+3)],f[s++]=o<<2|i>>4,f[s++]=(i&15)<<4|l>>2,f[s++]=(l&3)<<6|u&63;return h},QY=typeof ArrayBuffer=="function",kb=(t,e)=>{if(typeof t!="string")return{type:"message",data:RP(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:ZY(t.substring(1),e)}:Pf[n]?t.length>1?{type:Pf[n],data:t.substring(1)}:{type:Pf[n]}:By},ZY=(t,e)=>{if(QY){const n=JY(t);return RP(n,e)}else return{base64:!0,data:t}},RP=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},AP="",eq=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((o,i)=>{wb(o,!1,l=>{r[i]=l,++s===n&&e(r.join(AP))})})},tq=(t,e)=>{const n=t.split(AP),r=[];for(let s=0;s<n.length;s++){const o=kb(n[s],e);if(r.push(o),o.type==="error")break}return r};function nq(){return new TransformStream({transform(t,e){GY(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let jv;function Jh(t){return t.reduce((e,n)=>e+n.length,0)}function Qh(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function rq(t,e){jv||(jv=new TextDecoder);const n=[];let r=0,s=-1,o=!1;return new TransformStream({transform(i,l){for(n.push(i);;){if(r===0){if(Jh(n)<1)break;const u=Qh(n,1);o=(u[0]&128)===128,s=u[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Jh(n)<2)break;const u=Qh(n,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(r===2){if(Jh(n)<8)break;const u=Qh(n,8),h=new DataView(u.buffer,u.byteOffset,u.length),f=h.getUint32(0);if(f>Math.pow(2,21)-1){l.enqueue(By);break}s=f*Math.pow(2,32)+h.getUint32(4),r=3}else{if(Jh(n)<s)break;const u=Qh(n,s);l.enqueue(kb(o?u:jv.decode(u),e)),r=0}if(s===0||s>t){l.enqueue(By);break}}}})}const IP=4;function Wt(t){if(t)return sq(t)}function sq(t){for(var e in Wt.prototype)t[e]=Wt.prototype[e];return t}Wt.prototype.on=Wt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Wt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Wt.prototype.off=Wt.prototype.removeListener=Wt.prototype.removeAllListeners=Wt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Wt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};Wt.prototype.emitReserved=Wt.prototype.emit;Wt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Wt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Em=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Pr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),oq="arraybuffer";function DP(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const iq=Pr.setTimeout,aq=Pr.clearTimeout;function Nm(t,e){e.useNativeTimers?(t.setTimeoutFn=iq.bind(Pr),t.clearTimeoutFn=aq.bind(Pr)):(t.setTimeoutFn=Pr.setTimeout.bind(Pr),t.clearTimeoutFn=Pr.clearTimeout.bind(Pr))}const lq=1.33;function cq(t){return typeof t=="string"?dq(t):Math.ceil((t.byteLength||t.size)*lq)}function dq(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function LP(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function uq(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function hq(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class fq extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Sb extends Wt{constructor(e){super(),this.writable=!1,Nm(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new fq(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=kb(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=uq(e);return n.length?"?"+n:""}}class pq extends Sb{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};tq(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,eq(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=LP()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let BP=!1;try{BP=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const mq=BP;function gq(){}class xq extends pq{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class As extends Wt{constructor(e,n,r){super(),this.createRequest=e,Nm(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=DP(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=As.requestsCount++,As.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=gq,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete As.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}As.requestsCount=0;As.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",K2);else if(typeof addEventListener=="function"){const t="onpagehide"in Pr?"pagehide":"unload";addEventListener(t,K2,!1)}}function K2(){for(let t in As.requests)As.requests.hasOwnProperty(t)&&As.requests[t].abort()}const vq=(function(){const t=FP({xdomain:!1});return t&&t.responseType!==null})();class yq extends xq{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=vq&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new As(FP,this.uri(),e)}}function FP(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||mq))return new XMLHttpRequest}catch{}if(!e)try{return new Pr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const $P=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class bq extends Sb{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=$P?{}:DP(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;wb(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}s&&Em(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=LP()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Tv=Pr.WebSocket||Pr.MozWebSocket;class wq extends bq{createSocket(e,n,r){return $P?new Tv(e,n,r):n?new Tv(e,n):new Tv(e)}doWrite(e,n){this.ws.send(n)}}class kq extends Sb{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=rq(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=nq();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const o=()=>{r.read().then(({done:l,value:u})=>{l||(this.onPacket(u),o())}).catch(l=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&Em(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Sq={websocket:wq,webtransport:kq,polling:yq},Cq=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_q=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Fy(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=Cq.exec(t||""),o={},i=14;for(;i--;)o[_q[i]]=s[i]||"";return n!=-1&&r!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Eq(o,o.path),o.queryKey=Nq(o,o.query),o}function Eq(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Nq(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,o){s&&(n[s]=o)}),n}const $y=typeof addEventListener=="function"&&typeof removeEventListener=="function",Rf=[];$y&&addEventListener("offline",()=>{Rf.forEach(t=>t())},!1);class fi extends Wt{constructor(e,n){if(super(),this.binaryType=oq,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Fy(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Fy(n.host).host);Nm(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=hq(this.opts.query)),$y&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Rf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=IP,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&fi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",fi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=cq(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Em(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:e,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(fi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),$y&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Rf.indexOf(this._offlineEventListener);r!==-1&&Rf.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}fi.protocol=IP;class jq extends fi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;fi.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",m=>{if(!r)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;fi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=n.name,this.emitReserved("upgradeError",x)}}))};function o(){r||(r=!0,f(),n.close(),n=null)}const i=m=>{const x=new Error("probe error: "+m);x.transport=n.name,o(),this.emitReserved("upgradeError",x)};function l(){i("transport closed")}function u(){i("socket closed")}function h(m){n&&m.name!==n.name&&o()}const f=()=>{n.removeListener("open",s),n.removeListener("error",i),n.removeListener("close",l),this.off("close",u),this.off("upgrading",h)};n.once("open",s),n.once("error",i),n.once("close",l),this.once("close",u),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Tq=class extends jq{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>Sq[s]).filter(s=>!!s)),super(e,r)}};function Mq(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Fy(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const Oq=typeof ArrayBuffer=="function",Pq=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,zP=Object.prototype.toString,Rq=typeof Blob=="function"||typeof Blob<"u"&&zP.call(Blob)==="[object BlobConstructor]",Aq=typeof File=="function"||typeof File<"u"&&zP.call(File)==="[object FileConstructor]";function Cb(t){return Oq&&(t instanceof ArrayBuffer||Pq(t))||Rq&&t instanceof Blob||Aq&&t instanceof File}function Af(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Af(t[n]))return!0;return!1}if(Cb(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Af(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Af(t[n]))return!0;return!1}function Iq(t){const e=[],n=t.data,r=t;return r.data=zy(n,e),r.attachments=e.length,{packet:r,buffers:e}}function zy(t,e){if(!t)return t;if(Cb(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=zy(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=zy(t[r],e));return n}return t}function Dq(t,e){return t.data=Uy(t.data,e),delete t.attachments,t}function Uy(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Uy(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Uy(t[n],e));return t}const Lq=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Bq=5;var et;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(et||(et={}));class Fq{constructor(e){this.replacer=e}encode(e){return(e.type===et.EVENT||e.type===et.ACK)&&Af(e)?this.encodeAsBinary({type:e.type===et.EVENT?et.BINARY_EVENT:et.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===et.BINARY_EVENT||e.type===et.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Iq(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function X2(t){return Object.prototype.toString.call(t)==="[object Object]"}class _b extends Wt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===et.BINARY_EVENT;r||n.type===et.BINARY_ACK?(n.type=r?et.EVENT:et.ACK,this.reconstructor=new $q(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Cb(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(et[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===et.BINARY_EVENT||r.type===et.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const i=e.substring(o,n);if(i!=Number(i)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(i)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(o,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const o=n+1;for(;++n;){const i=e.charAt(n);if(i==null||Number(i)!=i){--n;break}if(n===e.length)break}r.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(_b.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case et.CONNECT:return X2(n);case et.DISCONNECT:return n===void 0;case et.CONNECT_ERROR:return typeof n=="string"||X2(n);case et.EVENT:case et.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Lq.indexOf(n[0])===-1);case et.ACK:case et.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class $q{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Dq(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const zq=Object.freeze(Object.defineProperty({__proto__:null,Decoder:_b,Encoder:Fq,get PacketType(){return et},protocol:Bq},Symbol.toStringTag,{value:"Module"}));function rs(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Uq=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class UP extends Wt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[rs(e,"open",this.onopen.bind(this)),rs(e,"packet",this.onpacket.bind(this)),rs(e,"error",this.onerror.bind(this)),rs(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,o;if(Uq.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:et.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const f=this.ids++,m=n.pop();this._registerAckCallback(f,m),i.id=f}const l=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,u=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!l||(u?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),i=(...l)=>{this.io.clearTimeoutFn(o),n.apply(this,l)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...n){return new Promise((r,s)=>{const o=(i,l)=>i?s(i):r(l);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...o)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:et.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case et.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case et.EVENT:case et.BINARY_EVENT:this.onevent(e);break;case et.ACK:case et.BINARY_ACK:this.onack(e);break;case et.DISCONNECT:this.ondisconnect();break;case et.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:et.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function lc(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}lc.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};lc.prototype.reset=function(){this.attempts=0};lc.prototype.setMin=function(t){this.ms=t};lc.prototype.setMax=function(t){this.max=t};lc.prototype.setJitter=function(t){this.jitter=t};class Hy extends Wt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Nm(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new lc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||zq;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Tq(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=rs(n,"open",function(){r.onopen(),e&&e()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},i=rs(n,"error",o);if(this._timeout!==!1){const l=this._timeout,u=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),n.close()},l);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(rs(e,"ping",this.onping.bind(this)),rs(e,"data",this.ondata.bind(this)),rs(e,"error",this.onerror.bind(this)),rs(e,"close",this.onclose.bind(this)),rs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Em(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new UP(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Zc={};function Nl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Mq(t,e.path||"/socket.io"),r=n.source,s=n.id,o=n.path,i=Zc[s]&&o in Zc[s].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||i;let u;return l?u=new Hy(r,e):(Zc[s]||(Zc[s]=new Hy(r,e)),u=Zc[s]),n.query&&!e.query&&(e.query=n.queryKey),u.socket(n.path,e)}Object.assign(Nl,{Manager:Hy,Socket:UP,io:Nl,connect:Nl});class Hq{ydoc;socket=null;persistence=null;documentId;userId;isConnected=!1;isSynced=!1;updateHandler=null;constructor(e){this.documentId=e.documentId,this.userId=e.userId||"anonymous",this.ydoc=new ic,this.persistence=new XY(e.documentId,this.ydoc),this.persistence.on("synced",()=>{console.log(" YjsClient: IndexedDB persistence synced")}),this.connectToServer(e.token,e)}connectToServer(e,n){const r=en.replace("/api","");this.socket&&(this.socket.disconnect(),this.socket=null);const s=r.replace("http","ws");console.log(" Connecting to WebSocket:",`${s}/ws/docs`),this.socket=Nl(`${s}/ws/docs`,{auth:{token:e},query:{token:e},transports:["websocket","polling"],reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:5,timeout:3e4,forceNew:!0}),this.socket.on("connect",()=>{this.isConnected=!0,console.log(" YjsClient: Connected to server"),this.socket?.emit("join_document",{documentId:this.documentId})}),this.socket.on("disconnect",l=>{this.isConnected=!1,this.isSynced=!1,console.log(" YjsClient: Disconnected from server:",l)}),this.socket.on("connect_error",l=>{console.error(" YjsClient: Connection error:",l),n.onError?.(l)}),this.socket.on("document_joined",()=>{console.log(" YjsClient: Joined document successfully")}),this.socket.on("yjs_sync",l=>{try{const u=new Uint8Array(l);u.length>0&&(Ry(this.ydoc,u,"server"),console.log(" YjsClient: Applied initial state from server")),this.isSynced=!0,n.onSync?.()}catch(u){console.error(" YjsClient: Error applying initial Yjs state:",u)}}),this.socket.on("yjs_update",l=>{if(l.documentId===this.documentId)try{const u=new Uint8Array(l.update);if(this.isSynced){const h=this.ydoc.getText("editor"),f=h.toString();Ry(this.ydoc,u,"remote"),n.onUpdate?.();const m=h.toString();console.log(` YjsClient: Applied remote update (${l.timestamp?new Date(l.timestamp).toLocaleTimeString():"no timestamp"})`),f!==m&&console.log(` Content changed: ${f.length} -> ${m.length} chars`)}else console.log(" YjsClient: Ignoring update - not synced yet")}catch(u){console.error(" YjsClient: Error applying remote Yjs update:",u)}}),this.socket.on("cursor_updated",l=>{l.userId!==this.userId&&(console.log(" YjsClient: Received cursor update from user:",l.userId),n.onCursorUpdate?.(l.userId,l.cursor))}),this.socket.on("formatting_updated",l=>{l.userId!==this.userId&&(console.log(" YjsClient: Received formatting update from user:",l.userId),n.onFormattingUpdate?.(l.userId,l.formatting))}),this.socket.on("presence_update",l=>{console.log(" YjsClient: Presence update:",l.users),n.onPresenceUpdate?.(l.users)}),this.socket.on("user_left",l=>{console.log(" YjsClient: User left:",l.userId),n.onUserLeft?.(l.userId)}),this.socket.on("content_updated",l=>{if(l.documentId===this.documentId&&l.userId!==this.userId){console.log(" YjsClient: Received content update from remote user");const u=this.ydoc.getMap("content");u.set("data",JSON.stringify(l.content)),u.set("timestamp",Date.now()),n.onUpdate?.(l.content)}}),this.updateHandler=(l,u)=>{u!=="server"&&u!=="remote"&&u!==this.socket&&this.isConnected&&this.isSynced&&(console.log(" YjsClient: Sending local update to server"),this.socket?.emit("yjs_update",{documentId:this.documentId,update:Array.from(l),timestamp:Date.now()}))},this.ydoc.on("update",this.updateHandler),this.ydoc.getMap("content").observe(l=>{console.log(" Y.Map content changed"),l.transaction.origin!=="local"&&(console.log(" Remote content changed, notifying editor"),n.onUpdate?.())}),this.ydoc.getText("editor").observe(l=>{console.log(" Y.Text changed:",l.changes),l.transaction.origin!=="local"&&n.onUpdate?.()})}getDocument(){return this.ydoc}getText(e="editor"){return this.ydoc.getText(e)}updateCursor(e){this.socket&&this.isConnected&&this.socket.emit("cursor_update",{documentId:this.documentId,userId:this.userId,cursor:e})}updateFormatting(e){this.socket&&this.isConnected&&this.socket.emit("formatting_update",{documentId:this.documentId,userId:this.userId,formatting:{...e,timestamp:Date.now()}})}getPresence(){this.socket&&this.isConnected&&this.socket.emit("get_presence",{documentId:this.documentId})}disconnect(){console.log(" YjsClient: Disconnecting..."),this.updateHandler&&(this.ydoc.off("update",this.updateHandler),this.updateHandler=null),this.socket&&(this.socket.emit("leave_document",{documentId:this.documentId}),this.socket.disconnect(),this.socket=null),this.persistence&&(this.persistence.destroy(),this.persistence=null),this.isConnected=!1,this.isSynced=!1}isReady(){return this.isConnected&&this.isSynced}getSocket(){return this.socket}}const Wq=en.replace("/api",""),HP=gt.create({baseURL:Wq});HP.interceptors.request.use(t=>{const e=localStorage.getItem(On);return e&&(t.headers.Authorization=`Bearer ${e}`),t});const WP={uploadImage:async t=>{const e=new FormData;e.append("image",t);try{return(await HP.post("/api/upload-image",e)).data}catch(n){throw console.error("Image upload error:",n),new Error(n?.response?.data?.message||"Failed to upload image")}}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-hint--align-start{text-align:left}.ce-hint--align-center{text-align:center}.ce-hint__description{opacity:.6;margin-top:3px}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vq(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}function Mv(){}Object.assign(Mv,{default:Mv,register:Mv,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){const e=(this.document||this.ownerDocument).querySelectorAll(t);let n=e.length;for(;--n>=0&&e.item(n)!==this;);return n>-1});Element.prototype.closest||(Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(e!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(t){const e=document.createDocumentFragment();Array.isArray(t)||(t=[t]),t.forEach(n=>{const r=n instanceof Node;e.appendChild(r?n:document.createTextNode(n))}),this.insertBefore(e,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(t){t=arguments.length===0?!0:!!t;const e=this.parentNode,n=window.getComputedStyle(e,null),r=parseInt(n.getPropertyValue("border-top-width")),s=parseInt(n.getPropertyValue("border-left-width")),o=this.offsetTop-e.offsetTop<e.scrollTop,i=this.offsetTop-e.offsetTop+this.clientHeight-r>e.scrollTop+e.clientHeight,l=this.offsetLeft-e.offsetLeft<e.scrollLeft,u=this.offsetLeft-e.offsetLeft+this.clientWidth-s>e.scrollLeft+e.clientWidth,h=o&&!i;(o||i)&&t&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-r+this.clientHeight/2),(l||u)&&t&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-s+this.clientWidth/2),(o||i||l||u)&&!t&&this.scrollIntoView(h)});window.requestIdleCallback=window.requestIdleCallback||function(t){const e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(t){clearTimeout(t)};let Yq=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");var VP=(t=>(t.VERBOSE="VERBOSE",t.INFO="INFO",t.WARN="WARN",t.ERROR="ERROR",t))(VP||{});const $e={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46},qq={LEFT:0};function Su(t,e,n="log",r,s="color: inherit"){if(!("console"in window)||!window.console[n])return;const o=["info","log","warn","error"].includes(n),i=[];switch(Su.logLevel){case"ERROR":if(n!=="error")return;break;case"WARN":if(!["error","warn"].includes(n))return;break;case"INFO":if(!o||t)return;break}r&&i.push(r);const l="Editor.js 2.31.0";t&&(o?(i.unshift(`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`,s),e=`%c${l}%c ${e}`):e=`( ${l} )${e}`);try{o?r?console[n](`${e} %o`,...i):console[n](e,...i):console[n](e)}catch{}}Su.logLevel="VERBOSE";function Kq(t){Su.logLevel=t}const ct=Su.bind(window,!1),Dr=Su.bind(window,!0);function wa(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function Mt(t){return wa(t)==="function"||wa(t)==="asyncfunction"}function vn(t){return wa(t)==="object"}function bo(t){return wa(t)==="string"}function Xq(t){return wa(t)==="boolean"}function G2(t){return wa(t)==="number"}function J2(t){return wa(t)==="undefined"}function $r(t){return t?Object.keys(t).length===0&&t.constructor===Object:!0}function YP(t){return t>47&&t<58||t===32||t===13||t===229||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223}async function Gq(t,e=()=>{},n=()=>{}){async function r(s,o,i){try{await s.function(s.data),await o(J2(s.data)?{}:s.data)}catch{i(J2(s.data)?{}:s.data)}}return t.reduce(async(s,o)=>(await s,r(o,e,n)),Promise.resolve())}function qP(t){return Array.prototype.slice.call(t)}function bp(t,e){return function(){const n=this,r=arguments;window.setTimeout(()=>t.apply(n,r),e)}}function Jq(t){return t.name.split(".").pop()}function Qq(t){return/^[-\w]+\/([-+\w]+|\*)$/.test(t)}function Q2(t,e,n){let r;return(...s)=>{const o=this,i=()=>{r=null,t.apply(o,s)};window.clearTimeout(r),r=window.setTimeout(i,e)}}function Wy(t,e,n=void 0){let r,s,o,i=null,l=0;n||(n={});const u=function(){l=n.leading===!1?0:Date.now(),i=null,o=t.apply(r,s),i||(r=s=null)};return function(){const h=Date.now();!l&&n.leading===!1&&(l=h);const f=e-(h-l);return r=this,s=arguments,f<=0||f>e?(i&&(clearTimeout(i),i=null),l=h,o=t.apply(r,s),i||(r=s=null)):!i&&n.trailing!==!1&&(i=setTimeout(u,f)),o}}function Zq(){const t={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(t).find(n=>window.navigator.appVersion.toLowerCase().indexOf(n)!==-1);return e&&(t[e]=!0),t}function wp(t){return t[0].toUpperCase()+t.slice(1)}function Vy(t,...e){if(!e.length)return t;const n=e.shift();if(vn(t)&&vn(n))for(const r in n)vn(n[r])?(t[r]||Object.assign(t,{[r]:{}}),Vy(t[r],n[r])):Object.assign(t,{[r]:n[r]});return Vy(t,...e)}function Eb(t){const e=Zq();return t=t.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi," + "),e.mac?t=t.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):t=t.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),t}function eK(t){try{return new URL(t).href}catch{}return t.substring(0,2)==="//"?window.location.protocol+t:window.location.origin+t}function tK(){return Yq(10)}function nK(t){window.open(t,"_blank")}function rK(t=""){return`${t}${Math.floor(Math.random()*1e8).toString(16)}`}function Yy(t,e,n){const r=`${e} is deprecated and will be removed in the next major release. Please use the ${n} instead.`;t&&Dr(r,"warn")}function cc(t,e,n){const r=n.value?"value":"get",s=n[r],o=`#${e}Cache`;if(n[r]=function(...i){return this[o]===void 0&&(this[o]=s.apply(this,...i)),this[o]},r==="get"&&n.set){const i=n.set;n.set=function(l){delete t[o],i.apply(this,l)}}return n}const KP=650;function dc(){return window.matchMedia(`(max-width: ${KP}px)`).matches}const qy=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function sK(t,e){const n=Array.isArray(t)||vn(t),r=Array.isArray(e)||vn(e);return n||r?JSON.stringify(t)===JSON.stringify(e):t===e}let me=class Dn{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,n=null,r={}){const s=document.createElement(e);if(Array.isArray(n)){const o=n.filter(i=>i!==void 0);s.classList.add(...o)}else n&&s.classList.add(n);for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o]);return s}static text(e){return document.createTextNode(e)}static append(e,n){Array.isArray(n)?n.forEach(r=>e.appendChild(r)):e.appendChild(n)}static prepend(e,n){Array.isArray(n)?(n=n.reverse(),n.forEach(r=>e.prepend(r))):e.prepend(n)}static swap(e,n){const r=document.createElement("div"),s=e.parentNode;s.insertBefore(r,e),s.insertBefore(e,n),s.insertBefore(n,r),s.removeChild(r)}static find(e=document,n){return e.querySelector(n)}static get(e){return document.getElementById(e)}static findAll(e=document,n){return e.querySelectorAll(n)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return qP(e.querySelectorAll(Dn.allInputsSelector)).reduce((n,r)=>Dn.isNativeInput(r)||Dn.containsOnlyInlineElements(r)?[...n,r]:[...n,...Dn.getDeepestBlockElements(r)],[])}static getDeepestNode(e,n=!1){const r=n?"lastChild":"firstChild",s=n?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[r]){let o=e[r];if(Dn.isSingleTag(o)&&!Dn.isNativeInput(o)&&!Dn.isLineBreakTag(o))if(o[s])o=o[s];else if(o.parentNode[s])o=o.parentNode[s];else return o.parentNode;return this.getDeepestNode(o,n)}return e}static isElement(e){return G2(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return G2(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const n=["INPUT","TEXTAREA"];return e&&e.tagName?n.includes(e.tagName):!1}static canSetCaret(e){let n=!0;if(Dn.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":n=!1;break}else n=Dn.isContentEditable(e);return n}static isNodeEmpty(e,n){let r;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?r=e.value:r=e.textContent.replace("",""),n&&(r=r.replace(new RegExp(n,"g"),"")),r.length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e,n){const r=[e];for(;r.length>0;)if(e=r.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e,n))return!1;e.childNodes&&r.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const n=Dn.make("div");return n.innerHTML=e,n.childElementCount>0}static getContentLength(e){return Dn.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let n;bo(e)?(n=document.createElement("div"),n.innerHTML=e):n=e;const r=s=>!Dn.blockElements.includes(s.tagName.toLowerCase())&&Array.from(s.children).every(r);return Array.from(n.children).every(r)}static getDeepestBlockElements(e){return Dn.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((n,r)=>[...n,...Dn.getDeepestBlockElements(r)],[])}static getHolder(e){return bo(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const n=e.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,s=window.pageYOffset||document.documentElement.scrollTop,o=n.top+s,i=n.left+r;return{top:o,left:i,bottom:o+n.height,right:i+n.width}}static getNodeByOffset(e,n){let r=0,s=null;const o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let i=o.nextNode();for(;i;){const h=i.textContent,f=h===null?0:h.length;if(s=i,r+f>=n)break;r+=f,i=o.nextNode()}if(!s)return{node:null,offset:0};const l=s.textContent;if(l===null||l.length===0)return{node:null,offset:0};const u=Math.min(n-r,l.length);return{node:s,offset:u}}};function oK(t){return!/[^\t\n\r ]/.test(t)}function iK(t){const e=window.getComputedStyle(t),n=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||n*1.2,s=parseFloat(e.paddingTop),o=parseFloat(e.borderTopWidth),i=parseFloat(e.marginTop),l=n*.8,u=(r-n)/2;return i+o+s+u+l}function XP(t){t.dataset.empty=me.isEmpty(t)?"true":"false"}const aK={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":"","Convert to":""}},lK={Text:"",Link:"",Bold:"",Italic:""},cK={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},dK={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},GP={ui:aK,toolNames:lK,tools:cK,blockTunes:dK},JP=class xl{static ui(e,n){return xl._t(e,n)}static t(e,n){return xl._t(e,n)}static setDictionary(e){xl.currentDictionary=e}static _t(e,n){const r=xl.getNamespace(e);return!r||!r[n]?n:r[n]}static getNamespace(e){return e.split(".").reduce((n,r)=>!n||!Object.keys(n).length?{}:n[r],xl.currentDictionary)}};JP.currentDictionary=GP;let Ln=JP;class QP extends Error{}let Cu=class{constructor(){this.subscribers={}}on(e,n){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(n)}once(e,n){e in this.subscribers||(this.subscribers[e]=[]);const r=s=>{const o=n(s),i=this.subscribers[e].indexOf(r);return i!==-1&&this.subscribers[e].splice(i,1),o};this.subscribers[e].push(r)}emit(e,n){$r(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((r,s)=>{const o=s(r);return o!==void 0?o:r},n)}off(e,n){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let r=0;r<this.subscribers[e].length;r++)if(this.subscribers[e][r]===n){delete this.subscribers[e][r];break}}destroy(){this.subscribers={}}};function ao(t){Object.setPrototypeOf(this,{get id(){return t.id},get name(){return t.name},get config(){return t.config},get holder(){return t.holder},get isEmpty(){return t.isEmpty},get selected(){return t.selected},set stretched(e){t.stretched=e},get stretched(){return t.stretched},get focusable(){return t.focusable},call(e,n){return t.call(e,n)},save(){return t.save()},validate(e){return t.validate(e)},dispatchChange(){t.dispatchChange()},getActiveToolboxEntry(){return t.getActiveToolboxEntry()}})}let _u=class{constructor(){this.allListeners=[]}on(e,n,r,s=!1){const o=rK("l"),i={id:o,element:e,eventType:n,handler:r,options:s};if(!this.findOne(e,n,r))return this.allListeners.push(i),e.addEventListener(n,r,s),o}off(e,n,r,s){const o=this.findAll(e,n,r);o.forEach((i,l)=>{const u=this.allListeners.indexOf(o[l]);u>-1&&(this.allListeners.splice(u,1),i.element.removeEventListener(i.eventType,i.handler,i.options))})}offById(e){const n=this.findById(e);n&&n.element.removeEventListener(n.eventType,n.handler,n.options)}findOne(e,n,r){const s=this.findAll(e,n,r);return s.length>0?s[0]:null}findAll(e,n,r){let s;const o=e?this.findByEventTarget(e):[];return e&&n&&r?s=o.filter(i=>i.eventType===n&&i.handler===r):e&&n?s=o.filter(i=>i.eventType===n):s=o,s}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(n=>{if(n.element===e)return n})}findByType(e){return this.allListeners.filter(n=>{if(n.eventType===e)return n})}findByHandler(e){return this.allListeners.filter(n=>{if(n.handler===e)return n})}findById(e){return this.allListeners.find(n=>n.id===e)}},nt=class ZP{constructor({config:e,eventsDispatcher:n}){if(this.nodes={},this.listeners=new _u,this.readOnlyMutableListeners={on:(r,s,o,i=!1)=>{this.mutableListenerIds.push(this.listeners.on(r,s,o,i))},clearAll:()=>{for(const r of this.mutableListenerIds)this.listeners.offById(r);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===ZP)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=n}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const n=this.nodes[e];n instanceof HTMLElement&&n.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}},Be=class Zo{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const n=e.anchorNode;return n?me.isElement(n)?n:n.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(Zo.get())}static isSelectionAtEditor(e){if(!e)return!1;let n=e.anchorNode||e.focusNode;n&&n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);let r=null;return n&&n instanceof Element&&(r=n.closest(`.${Zo.CSS.editorZone}`)),r?r.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let n=e.startContainer;n&&n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);let r=null;return n&&n instanceof Element&&(r=n.closest(`.${Zo.CSS.editorZone}`)),r?r.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!Zo.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,n,r={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,n=e.createRange(),r.x=n.boundingLeft,r.y=n.boundingTop,r.width=n.boundingWidth,r.height=n.boundingHeight,r;if(!window.getSelection)return ct("Method window.getSelection is not supported","warn"),r;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return ct("Method SelectionUtils.rangeCount is not supported","warn"),r;if(e.rangeCount===0)return r;if(n=e.getRangeAt(0).cloneRange(),n.getBoundingClientRect&&(r=n.getBoundingClientRect()),r.x===0&&r.y===0){const s=document.createElement("span");if(s.getBoundingClientRect){s.appendChild(document.createTextNode("")),n.insertNode(s),r=s.getBoundingClientRect();const o=s.parentNode;o.removeChild(s),o.normalize()}}return r}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,n=0){const r=document.createRange(),s=window.getSelection();return me.isNativeInput(e)?me.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=n,e.getBoundingClientRect()):void 0:(r.setStart(e,n),r.setEnd(e,n),s.removeAllRanges(),s.addRange(r),r.getBoundingClientRect())}static isRangeInsideContainer(e){const n=Zo.range;return n===null?!1:e.contains(n.startContainer)}static addFakeCursor(){const e=Zo.range;if(e===null)return;const n=me.make("span","codex-editor__fake-cursor");n.dataset.mutationFree="true",e.collapse(),e.insertNode(n)}static isFakeCursorInsideContainer(e){return me.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const n=me.find(e,".codex-editor__fake-cursor");n&&n.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=Zo.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(e.focusNode),n.collapse(!1),e.removeAllRanges(),e.addRange(n)}findParentTag(e,n,r=10){const s=window.getSelection();let o=null;return!s||!s.anchorNode||!s.focusNode?null:([s.anchorNode,s.focusNode].forEach(i=>{let l=r;for(;l>0&&i.parentNode&&!(i.tagName===e&&(o=i,n&&i.classList&&!i.classList.contains(n)&&(o=null),o));)i=i.parentNode,l--}),o)}expandToTag(e){const n=window.getSelection();n.removeAllRanges();const r=document.createRange();r.selectNodeContents(e),n.addRange(r)}};function uK(t,e){const{type:n,target:r,addedNodes:s,removedNodes:o}=t;return t.type==="attributes"&&t.attributeName==="data-empty"?!1:!!(e.contains(r)||n==="childList"&&(Array.from(s).some(i=>i===e)||Array.from(o).some(i=>i===e)))}const Ky="redactor dom changed",eR="block changed",tR="fake cursor is about to be toggled",nR="fake cursor have been set",Yd="editor mobile layout toggled";function Xy(t,e){if(!t.conversionConfig)return!1;const n=t.conversionConfig[e];return Mt(n)||bo(n)}function kp(t,e){return Xy(t.tool,e)}function rR(t,e){return Object.entries(t).some(([n,r])=>e[n]&&sK(e[n],r))}async function sR(t,e){const n=(await t.save()).data,r=e.find(s=>s.name===t.name);return r!==void 0&&!Xy(r,"export")?[]:e.reduce((s,o)=>{if(!Xy(o,"import")||o.toolbox===void 0)return s;const i=o.toolbox.filter(l=>{if($r(l)||l.icon===void 0)return!1;if(l.data!==void 0){if(rR(l.data,n))return!1}else if(o.name===t.name)return!1;return!0});return s.push({...o,toolbox:i}),s},[])}function Z2(t,e){return t.mergeable?t.name===e.name?!0:kp(e,"export")&&kp(t,"import"):!1}function hK(t,e){const n=e?.export;return Mt(n)?n(t):bo(n)?t[n]:(n!==void 0&&ct("Conversion export property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function eE(t,e,n){const r=e?.import;return Mt(r)?r(t,n):bo(r)?{[r]:t}:(r!==void 0&&ct("Conversion import property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var Et=(t=>(t.Default="default",t.Separator="separator",t.Html="html",t))(Et||{}),lo=(t=>(t.APPEND_CALLBACK="appendCallback",t.RENDERED="rendered",t.MOVED="moved",t.UPDATED="updated",t.REMOVED="removed",t.ON_PASTE="onPaste",t))(lo||{});let uo=class ei extends Cu{constructor({id:e=tK(),data:n,tool:r,readOnly:s,tunesData:o},i){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(l=void 0)=>{const u=l===void 0,h=l instanceof InputEvent;!u&&!h&&this.detectToolRootChange(l);let f;u||h?f=!0:f=!(l.length>0&&l.every(m=>{const{addedNodes:x,removedNodes:w,target:v}=m;return[...Array.from(x),...Array.from(w),v].some(y=>(me.isElement(y)||(y=y.parentElement),y&&y.closest('[data-mutation-free="true"]')!==null))})),f&&(this.dropInputsCache(),this.updateCurrentInput(),this.toggleInputsEmptyMark(),this.call("updated"),this.emit("didMutated",this))},this.name=r.name,this.id=e,this.settings=r.settings,this.config=r.settings.config||{},this.editorEventBus=i||null,this.blockAPI=new ao(this),this.tool=r,this.toolInstance=r.create(n,this.blockAPI,s),this.tunes=r.tunes,this.composeTunes(o),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents(),this.toggleInputsEmptyMark()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=me.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const n=this.inputs.findIndex(r=>r===e||r.contains(e));n!==-1&&(this.inputIndex=n)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!$r(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return Mt(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const e=me.isEmpty(this.pluginsContent,"/"),n=!this.hasMedia;return e&&n}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set selected(e){var n,r;this.holder.classList.toggle(ei.CSS.selected,e);const s=e===!0&&Be.isRangeInsideContainer(this.holder),o=e===!1&&Be.isFakeCursorInsideContainer(this.holder);(s||o)&&((n=this.editorEventBus)==null||n.emit(tR,{state:e}),s?Be.addFakeCursor():Be.removeFakeCursor(this.holder),(r=this.editorEventBus)==null||r.emit(nR,{state:e}))}get selected(){return this.holder.classList.contains(ei.CSS.selected)}set stretched(e){this.holder.classList.toggle(ei.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(ei.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(ei.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,n){if(Mt(this.toolInstance[e])){e==="appendCallback"&&ct("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,n)}catch(r){ct(`Error during '${e}' call: ${r.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),n=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([o,i])=>{if(Mt(i.save))try{n[o]=i.save()}catch(l){ct(`Tune ${i.constructor.name} save method throws an Error %o`,"warn",l)}});const r=window.performance.now();let s;return Promise.resolve(e).then(o=>(s=window.performance.now(),{id:this.id,tool:this.name,data:o,tunes:n,time:s-r})).catch(o=>{ct(`Saving process for ${this.name} tool failed due to the ${o}`,"log","red")})}async validate(e){let n=!0;return this.toolInstance.validate instanceof Function&&(n=await this.toolInstance.validate(e)),n}getTunes(){const e=[],n=[],r=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[];return me.isElement(r)?e.push({type:Et.Html,element:r}):Array.isArray(r)?e.push(...r):e.push(r),[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(s=>s.render()).forEach(s=>{me.isElement(s)?n.push({type:Et.Html,element:s}):Array.isArray(s)?n.push(...s):n.push(s)}),{toolTunes:e,commonTunes:n}}updateCurrentInput(){this.currentInput=me.isNativeInput(document.activeElement)||!Be.anchorNode?document.activeElement:Be.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),Mt(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const n=await this.data,r=e;return r?.find(s=>rR(s.data,n))}async exportDataAsString(){const e=await this.data;return hK(e,this.tool.conversionConfig)}compose(){const e=me.make("div",ei.CSS.wrapper),n=me.make("div",ei.CSS.content),r=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=r,n.appendChild(this.toolRenderedElement);let s=n;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(o=>{if(Mt(o.wrap))try{s=o.wrap(s)}catch(i){ct(`Tune ${o.constructor.name} wrap method throws an Error %o`,"warn",i)}}),e.appendChild(s),e}composeTunes(e){Array.from(this.tunes.values()).forEach(n=>{(n.isInternal?this.defaultTunesInstances:this.tunesInstances).set(n.name,n.create(e[n.name],this.blockAPI))}),Object.entries(e).forEach(([n,r])=>{this.tunesInstances.has(n)||(this.unavailableTunesData[n]=r)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),me.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),me.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=n=>{const{mutations:r}=n;r.some(s=>uK(s,this.toolRenderedElement))&&this.didMutated(r)},(e=this.editorEventBus)==null||e.on(Ky,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(Ky,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(n=>{if(Array.from(n.removedNodes).includes(this.toolRenderedElement)){const r=n.addedNodes[n.addedNodes.length-1];this.toolRenderedElement=r}})}dropInputsCache(){this.cachedInputs=[]}toggleInputsEmptyMark(){this.inputs.forEach(XP)}};class fK extends nt{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,n={},r={},s,o,i,l)=>{const u=this.Editor.BlockManager.insert({id:l,tool:e,data:n,index:s,needToFocus:o,replace:i});return new ao(u)},this.composeBlockData=async e=>{const n=this.Editor.Tools.blockTools.get(e);return new uo({tool:n,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,n,r)=>{const{BlockManager:s}=this.Editor,o=s.getBlockById(e);if(o===void 0)throw new Error(`Block with id "${e}" not found`);const i=await s.update(o,n,r);return new ao(i)},this.convert=async(e,n,r)=>{var s,o;const{BlockManager:i,Tools:l}=this.Editor,u=i.getBlockById(e);if(!u)throw new Error(`Block with id "${e}" not found`);const h=l.blockTools.get(u.name),f=l.blockTools.get(n);if(!f)throw new Error(`Block Tool with type "${n}" not found`);const m=((s=h?.conversionConfig)==null?void 0:s.export)!==void 0,x=((o=f.conversionConfig)==null?void 0:o.import)!==void 0;if(m&&x){const w=await i.convert(u,n,r);return new ao(w)}else{const w=[m?!1:wp(u.name),x?!1:wp(n)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${u.name}" to "${n}" is not possible. ${w} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,n=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(n);const r=e.map(({id:s,type:o,data:i})=>this.Editor.BlockManager.composeBlock({id:s,tool:o||this.config.defaultBlock,data:i}));return this.Editor.BlockManager.insertMany(r,n),r.map(s=>new ao(s))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,n)=>this.swap(e,n),move:(e,n)=>this.move(e,n),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),getBlockByElement:e=>this.getBlockByElement(e),stretchBlock:(e,n=!0)=>this.stretchBlock(e,n),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const n=this.Editor.BlockManager.getBlockById(e);if(!n){Dr("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(n)}getBlockByIndex(e){const n=this.Editor.BlockManager.getBlockByIndex(e);if(n===void 0){Dr("There is no block at index `"+e+"`","warn");return}return new ao(n)}getById(e){const n=this.Editor.BlockManager.getBlockById(e);return n===void 0?(Dr("There is no block with id `"+e+"`","warn"),null):new ao(n)}getBlockByElement(e){const n=this.Editor.BlockManager.getBlock(e);if(n===void 0){Dr("There is no block corresponding to element `"+e+"`","warn");return}return new ao(n)}swap(e,n){ct("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,n)}move(e,n){this.Editor.BlockManager.move(e,n)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const n=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(n)}catch(n){Dr(n,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}async renderFromHTML(e){return await this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,n=!0){Yy(!0,"blocks.stretchBlock()","BlockAPI");const r=this.Editor.BlockManager.getBlockByIndex(e);r&&(r.stretched=n)}insertNewBlock(){ct("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}}function pK(t,e){return typeof t=="number"?e.BlockManager.getBlockByIndex(t):typeof t=="string"?e.BlockManager.getBlockById(t):e.BlockManager.getBlockById(t.id)}class mK extends nt{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,n),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,n),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,n),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,n),!0):!1,this.setToBlock=(e,n=this.Editor.Caret.positions.DEFAULT,r=0)=>{const s=pK(e,this.Editor);return s===void 0?!1:(this.Editor.Caret.setToBlock(s,n,r),!0)},this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class gK extends nt{get methods(){return{emit:(e,n)=>this.emit(e,n),off:(e,n)=>this.off(e,n),on:(e,n)=>this.on(e,n)}}on(e,n){this.eventsDispatcher.on(e,n)}emit(e,n){this.eventsDispatcher.emit(e,n)}off(e,n){this.eventsDispatcher.off(e,n)}}let xK=class oR extends nt{static getNamespace(e,n){return n?`blockTunes.${e}`:`tools.${e}`}get methods(){return{t:()=>{Dr("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e,n){return Object.assign(this.methods,{t:r=>Ln.t(oR.getNamespace(e,n),r)})}};class vK extends nt{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,tools:this.Editor.ToolsAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e,n){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e,n)})}}class yK extends nt{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class bK extends nt{get methods(){return{on:(e,n,r,s)=>this.on(e,n,r,s),off:(e,n,r,s)=>this.off(e,n,r,s),offById:e=>this.offById(e)}}on(e,n,r,s){return this.listeners.on(e,n,r,s)}off(e,n,r,s){this.listeners.off(e,n,r,s)}offById(e){this.listeners.offById(e)}}var iR={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(window,function(){return(function(n){var r={};function s(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=n,s.c=r,s.d=function(o,i,l){s.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:l})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,i){if(1&i&&(o=s(o)),8&i||4&i&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&i&&typeof o!="string")for(var u in o)s.d(l,u,(function(h){return o[h]}).bind(null,u));return l},s.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(i,"a",i),i},s.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},s.p="/",s(s.s=0)})([function(n,r,s){s(1),n.exports=(function(){var o=s(6),i="cdx-notify--bounce-in",l=null;return{show:function(u){if(u.message){(function(){if(l)return!0;l=o.getWrapper(),document.body.appendChild(l)})();var h=null,f=u.time||8e3;switch(u.type){case"confirm":h=o.confirm(u);break;case"prompt":h=o.prompt(u);break;default:h=o.alert(u),window.setTimeout(function(){h.remove()},f)}l.appendChild(h),h.classList.add(i)}}}})()},function(n,r,s){var o=s(2);typeof o=="string"&&(o=[[n.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};s(4)(o,i),o.locals&&(n.exports=o.locals)},function(n,r,s){(n.exports=s(3)(!1)).push([n.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(n,r){n.exports=function(s){var o=[];return o.toString=function(){return this.map(function(i){var l=(function(u,h){var f=u[1]||"",m=u[3];if(!m)return f;if(h&&typeof btoa=="function"){var x=(v=m,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(v))))+" */"),w=m.sources.map(function(y){return"/*# sourceURL="+m.sourceRoot+y+" */"});return[f].concat(w).concat([x]).join(`
`)}var v;return[f].join(`
`)})(i,s);return i[2]?"@media "+i[2]+"{"+l+"}":l}).join("")},o.i=function(i,l){typeof i=="string"&&(i=[[null,i,""]]);for(var u={},h=0;h<this.length;h++){var f=this[h][0];typeof f=="number"&&(u[f]=!0)}for(h=0;h<i.length;h++){var m=i[h];typeof m[0]=="number"&&u[m[0]]||(l&&!m[2]?m[2]=l:l&&(m[2]="("+m[2]+") and ("+l+")"),o.push(m))}},o}},function(n,r,s){var o,i,l={},u=(o=function(){return window&&document&&document.all&&!window.atob},function(){return i===void 0&&(i=o.apply(this,arguments)),i}),h=(function(A){var F={};return function(U){if(typeof U=="function")return U();if(F[U]===void 0){var W=(function(Z){return document.querySelector(Z)}).call(this,U);if(window.HTMLIFrameElement&&W instanceof window.HTMLIFrameElement)try{W=W.contentDocument.head}catch{W=null}F[U]=W}return F[U]}})(),f=null,m=0,x=[],w=s(5);function v(A,F){for(var U=0;U<A.length;U++){var W=A[U],Z=l[W.id];if(Z){Z.refs++;for(var oe=0;oe<Z.parts.length;oe++)Z.parts[oe](W.parts[oe]);for(;oe<W.parts.length;oe++)Z.parts.push(M(W.parts[oe],F))}else{var ee=[];for(oe=0;oe<W.parts.length;oe++)ee.push(M(W.parts[oe],F));l[W.id]={id:W.id,refs:1,parts:ee}}}}function y(A,F){for(var U=[],W={},Z=0;Z<A.length;Z++){var oe=A[Z],ee=F.base?oe[0]+F.base:oe[0],re={css:oe[1],media:oe[2],sourceMap:oe[3]};W[ee]?W[ee].parts.push(re):U.push(W[ee]={id:ee,parts:[re]})}return U}function k(A,F){var U=h(A.insertInto);if(!U)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var W=x[x.length-1];if(A.insertAt==="top")W?W.nextSibling?U.insertBefore(F,W.nextSibling):U.appendChild(F):U.insertBefore(F,U.firstChild),x.push(F);else if(A.insertAt==="bottom")U.appendChild(F);else{if(typeof A.insertAt!="object"||!A.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var Z=h(A.insertInto+" "+A.insertAt.before);U.insertBefore(F,Z)}}function C(A){if(A.parentNode===null)return!1;A.parentNode.removeChild(A);var F=x.indexOf(A);F>=0&&x.splice(F,1)}function _(A){var F=document.createElement("style");return A.attrs.type===void 0&&(A.attrs.type="text/css"),j(F,A.attrs),k(A,F),F}function j(A,F){Object.keys(F).forEach(function(U){A.setAttribute(U,F[U])})}function M(A,F){var U,W,Z,oe;if(F.transform&&A.css){if(!(oe=F.transform(A.css)))return function(){};A.css=oe}if(F.singleton){var ee=m++;U=f||(f=_(F)),W=I.bind(null,U,ee,!1),Z=I.bind(null,U,ee,!0)}else A.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(U=(function(re){var J=document.createElement("link");return re.attrs.type===void 0&&(re.attrs.type="text/css"),re.attrs.rel="stylesheet",j(J,re.attrs),k(re,J),J})(F),W=(function(re,J,z){var R=z.css,D=z.sourceMap,G=J.convertToAbsoluteUrls===void 0&&D;(J.convertToAbsoluteUrls||G)&&(R=w(R)),D&&(R+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(D))))+" */");var N=new Blob([R],{type:"text/css"}),L=re.href;re.href=URL.createObjectURL(N),L&&URL.revokeObjectURL(L)}).bind(null,U,F),Z=function(){C(U),U.href&&URL.revokeObjectURL(U.href)}):(U=_(F),W=(function(re,J){var z=J.css,R=J.media;if(R&&re.setAttribute("media",R),re.styleSheet)re.styleSheet.cssText=z;else{for(;re.firstChild;)re.removeChild(re.firstChild);re.appendChild(document.createTextNode(z))}}).bind(null,U),Z=function(){C(U)});return W(A),function(re){if(re){if(re.css===A.css&&re.media===A.media&&re.sourceMap===A.sourceMap)return;W(A=re)}else Z()}}n.exports=function(A,F){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(F=F||{}).attrs=typeof F.attrs=="object"?F.attrs:{},F.singleton||typeof F.singleton=="boolean"||(F.singleton=u()),F.insertInto||(F.insertInto="head"),F.insertAt||(F.insertAt="bottom");var U=y(A,F);return v(U,F),function(W){for(var Z=[],oe=0;oe<U.length;oe++){var ee=U[oe];(re=l[ee.id]).refs--,Z.push(re)}for(W&&v(y(W,F),F),oe=0;oe<Z.length;oe++){var re;if((re=Z[oe]).refs===0){for(var J=0;J<re.parts.length;J++)re.parts[J]();delete l[re.id]}}}};var O,T=(O=[],function(A,F){return O[A]=F,O.filter(Boolean).join(`
`)});function I(A,F,U,W){var Z=U?"":W.css;if(A.styleSheet)A.styleSheet.cssText=T(F,Z);else{var oe=document.createTextNode(Z),ee=A.childNodes;ee[F]&&A.removeChild(ee[F]),ee.length?A.insertBefore(oe,ee[F]):A.appendChild(oe)}}},function(n,r){n.exports=function(s){var o=typeof window<"u"&&window.location;if(!o)throw new Error("fixUrls requires window.location");if(!s||typeof s!="string")return s;var i=o.protocol+"//"+o.host,l=i+o.pathname.replace(/\/[^\/]*$/,"/");return s.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(u,h){var f,m=h.trim().replace(/^"(.*)"$/,function(x,w){return w}).replace(/^'(.*)'$/,function(x,w){return w});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(m)?u:(f=m.indexOf("//")===0?m:m.indexOf("/")===0?i+m:l+m.replace(/^\.\//,""),"url("+JSON.stringify(f)+")")})}},function(n,r,s){var o,i,l,u,h,f,m,x,w;n.exports=(o="cdx-notifies",i="cdx-notify",l="cdx-notify__cross",u="cdx-notify__button--confirm",h="cdx-notify__button--cancel",f="cdx-notify__input",m="cdx-notify__button",x="cdx-notify__btns-wrapper",{alert:w=function(v){var y=document.createElement("DIV"),k=document.createElement("DIV"),C=v.message,_=v.style;return y.classList.add(i),_&&y.classList.add(i+"--"+_),y.innerHTML=C,k.classList.add(l),k.addEventListener("click",y.remove.bind(y)),y.appendChild(k),y},confirm:function(v){var y=w(v),k=document.createElement("div"),C=document.createElement("button"),_=document.createElement("button"),j=y.querySelector("."+l),M=v.cancelHandler,O=v.okHandler;return k.classList.add(x),C.innerHTML=v.okText||"Confirm",_.innerHTML=v.cancelText||"Cancel",C.classList.add(m),_.classList.add(m),C.classList.add(u),_.classList.add(h),M&&typeof M=="function"&&(_.addEventListener("click",M),j.addEventListener("click",M)),O&&typeof O=="function"&&C.addEventListener("click",O),C.addEventListener("click",y.remove.bind(y)),_.addEventListener("click",y.remove.bind(y)),k.appendChild(C),k.appendChild(_),y.appendChild(k),y},prompt:function(v){var y=w(v),k=document.createElement("div"),C=document.createElement("button"),_=document.createElement("input"),j=y.querySelector("."+l),M=v.cancelHandler,O=v.okHandler;return k.classList.add(x),C.innerHTML=v.okText||"Ok",C.classList.add(m),C.classList.add(u),_.classList.add(f),v.placeholder&&_.setAttribute("placeholder",v.placeholder),v.default&&(_.value=v.default),v.inputType&&(_.type=v.inputType),M&&typeof M=="function"&&j.addEventListener("click",M),O&&typeof O=="function"&&C.addEventListener("click",function(){O(_.value)}),C.addEventListener("click",y.remove.bind(y)),k.appendChild(_),k.appendChild(C),y.appendChild(k),y},getWrapper:function(){var v=document.createElement("DIV");return v.classList.add(o),v}})}])})})(iR);var wK=iR.exports;const kK=jm(wK);class SK{show(e){kK.show(e)}}class CK extends nt{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.notifier=new SK}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}}class _K extends nt{get methods(){const e=()=>this.isEnabled;return{toggle:n=>this.toggle(n),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var aR={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Vd,function(){function n(m){var x=m.tags,w=Object.keys(x),v=w.map(function(y){return typeof x[y]}).every(function(y){return y==="object"||y==="boolean"||y==="function"});if(!v)throw new Error("The configuration was invalid");this.config=m}var r=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function s(m){return r.indexOf(m.nodeName)!==-1}var o=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function i(m){return o.indexOf(m.nodeName)!==-1}n.prototype.clean=function(m){const x=document.implementation.createHTMLDocument(),w=x.createElement("div");return w.innerHTML=m,this._sanitize(x,w),w.innerHTML},n.prototype._sanitize=function(m,x){var w=l(m,x),v=w.firstChild();if(v)do{if(v.nodeType===Node.TEXT_NODE)if(v.data.trim()===""&&(v.previousElementSibling&&s(v.previousElementSibling)||v.nextElementSibling&&s(v.nextElementSibling))){x.removeChild(v),this._sanitize(m,x);break}else continue;if(v.nodeType===Node.COMMENT_NODE){x.removeChild(v),this._sanitize(m,x);break}var y=i(v),k;y&&(k=Array.prototype.some.call(v.childNodes,s));var C=!!x.parentNode,_=s(x)&&s(v)&&C,j=v.nodeName.toLowerCase(),M=u(this.config,j,v),O=y&&k;if(O||h(v,M)||!this.config.keepNestedBlockElements&&_){if(!(v.nodeName==="SCRIPT"||v.nodeName==="STYLE"))for(;v.childNodes.length>0;)x.insertBefore(v.childNodes[0],v);x.removeChild(v),this._sanitize(m,x);break}for(var T=0;T<v.attributes.length;T+=1){var I=v.attributes[T];f(I,M,v)&&(v.removeAttribute(I.name),T=T-1)}this._sanitize(m,v)}while(v=w.nextSibling())};function l(m,x){return m.createTreeWalker(x,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function u(m,x,w){return typeof m.tags[x]=="function"?m.tags[x](w):m.tags[x]}function h(m,x){return typeof x>"u"?!0:typeof x=="boolean"?!x:!1}function f(m,x,w){var v=m.name.toLowerCase();return x===!0?!1:typeof x[v]=="function"?!x[v](m.value,w):typeof x[v]>"u"||x[v]===!1?!0:typeof x[v]=="string"?x[v]!==m.value:!1}return n})})(aR);var EK=aR.exports;const NK=jm(EK);function Nb(t,e){return t.map(n=>{const r=Mt(e)?e(n.tool):e;return $r(r)||(n.data=jb(n.data,r)),n})}function Os(t,e={}){const n={tags:e};return new NK(n).clean(t)}function jb(t,e){return Array.isArray(t)?jK(t,e):vn(t)?TK(t,e):bo(t)?MK(t,e):t}function jK(t,e){return t.map(n=>jb(n,e))}function TK(t,e){const n={};for(const r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;const s=t[r],o=OK(e[r])?e[r]:e;n[r]=jb(s,o)}return n}function MK(t,e){return vn(e)?Os(t,e):e===!1?Os(t,{}):t}function OK(t){return vn(t)||Xq(t)||Mt(t)}class PK extends nt{get methods(){return{clean:(e,n)=>this.clean(e,n)}}clean(e,n){return Os(e,n)}}class RK extends nt{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(Dr(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}}class AK extends nt{constructor(){super(...arguments),this.selectionUtils=new Be}get methods(){return{findParentTag:(e,n)=>this.findParentTag(e,n),expandToTag:e=>this.expandToTag(e),save:()=>this.selectionUtils.save(),restore:()=>this.selectionUtils.restore(),setFakeBackground:()=>this.selectionUtils.setFakeBackground(),removeFakeBackground:()=>this.selectionUtils.removeFakeBackground()}}findParentTag(e,n){return this.selectionUtils.findParentTag(e,n)}expandToTag(e){this.selectionUtils.expandToTag(e)}}class IK extends nt{get methods(){return{getBlockTools:()=>Array.from(this.Editor.Tools.blockTools.values())}}}class DK extends nt{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class LK extends nt{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){Dr("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){Dr("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var lR={exports:{}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(t,e){(function(n,r){t.exports=r()})(window,function(){return(function(n){var r={};function s(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=n,s.c=r,s.d=function(o,i,l){s.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:l})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,i){if(1&i&&(o=s(o)),8&i||4&i&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&i&&typeof o!="string")for(var u in o)s.d(l,u,(function(h){return o[h]}).bind(null,u));return l},s.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(i,"a",i),i},s.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},s.p="",s(s.s=0)})([function(n,r,s){n.exports=s(1)},function(n,r,s){s.r(r),s.d(r,"default",function(){return o});class o{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(l,u,h){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const f=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},h);if(f.hidingDelay&&(this.hidingDelay=f.hidingDelay),this.nodes.content.innerHTML="",typeof u=="string")this.nodes.content.appendChild(document.createTextNode(u));else{if(!(u instanceof Node))throw Error("[CodeX Tooltip] Wrong type of content passed. It should be an instance of Node or String. But "+typeof u+" given.");this.nodes.content.appendChild(u)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),f.placement){case"top":this.placeTop(l,f);break;case"left":this.placeLeft(l,f);break;case"right":this.placeRight(l,f);break;case"bottom":default:this.placeBottom(l,f)}f&&f.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},f.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(l=!1){if(this.hidingDelay&&!l)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(l,u,h){l.addEventListener("mouseenter",()=>{this.show(l,u,h)}),l.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const l="codex-tooltips-style";if(document.getElementById(l))return;const u=s(2),h=this.make("style",null,{textContent:u.toString(),id:l});this.prepend(document.head,h)}placeBottom(l,u){const h=l.getBoundingClientRect(),f=h.left+l.clientWidth/2-this.nodes.wrapper.offsetWidth/2,m=h.bottom+window.pageYOffset+this.offsetTop+u.marginTop;this.applyPlacement("bottom",f,m)}placeTop(l,u){const h=l.getBoundingClientRect(),f=h.left+l.clientWidth/2-this.nodes.wrapper.offsetWidth/2,m=h.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",f,m)}placeLeft(l,u){const h=l.getBoundingClientRect(),f=h.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-u.marginLeft,m=h.top+window.pageYOffset+l.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",f,m)}placeRight(l,u){const h=l.getBoundingClientRect(),f=h.right+this.offsetRight+u.marginRight,m=h.top+window.pageYOffset+l.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",f,m)}applyPlacement(l,u,h){this.nodes.wrapper.classList.add(this.CSS.placement[l]),this.nodes.wrapper.style.left=u+"px",this.nodes.wrapper.style.top=h+"px"}make(l,u=null,h={}){const f=document.createElement(l);Array.isArray(u)?f.classList.add(...u):u&&f.classList.add(u);for(const m in h)h.hasOwnProperty(m)&&(f[m]=h[m]);return f}append(l,u){Array.isArray(u)?u.forEach(h=>l.appendChild(h)):l.appendChild(u)}prepend(l,u){Array.isArray(u)?(u=u.reverse()).forEach(h=>l.prepend(h)):l.prepend(u)}}},function(n,r){n.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(lR);var BK=lR.exports;const FK=jm(BK);let is=null;function Tb(){is||(is=new FK)}function $K(t,e,n){Tb(),is?.show(t,e,n)}function Sp(t=!1){Tb(),is?.hide(t)}function Cp(t,e,n){Tb(),is?.onHover(t,e,n)}function zK(){is?.destroy(),is=null}class UK extends nt{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n})}get methods(){return{show:(e,n,r)=>this.show(e,n,r),hide:()=>this.hide(),onHover:(e,n,r)=>this.onHover(e,n,r)}}show(e,n,r){$K(e,n,r)}hide(){Sp()}onHover(e,n,r){Cp(e,n,r)}}class HK extends nt{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function cR(t,e){const n={};return Object.entries(t).forEach(([r,s])=>{if(vn(s)){const o=e?`${e}.${r}`:r;Object.values(s).every(i=>bo(i))?n[r]=o:n[r]=cR(s,o);return}n[r]=s}),n}const xr=cR(GP);function WK(t,e){const n={};return Object.keys(t).forEach(r=>{const s=e[r];s!==void 0?n[s]=t[r]:n[r]=t[r]}),n}const dR=class pd{constructor(e,n){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=n}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(pd.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(pd.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(e){if(this.items.length===0)return this.cursor;let n=this.cursor;return n===-1?n=e===pd.directions.RIGHT?-1:0:this.items[n].classList.remove(this.focusedCssClass),e===pd.directions.RIGHT?n=(n+1)%this.items.length:n=(this.items.length+n-1)%this.items.length,me.canSetCaret(this.items[n])&&bp(()=>Be.setCursor(this.items[n]),50)(),this.items[n].classList.add(this.focusedCssClass),n}};dR.directions={RIGHT:"right",LEFT:"left"};let ed=dR,_p=class Gy{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=n=>{if(!(!this.isEventReadyForHandling(n)||n.shiftKey===!0))switch(Gy.usedKeys.includes(n.keyCode)&&n.preventDefault(),n.keyCode){case $e.TAB:this.handleTabPress(n);break;case $e.LEFT:case $e.UP:this.flipLeft();break;case $e.RIGHT:case $e.DOWN:this.flipRight();break;case $e.ENTER:this.handleEnterPress(n);break}},this.iterator=new ed(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||Gy.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[$e.TAB,$e.LEFT,$e.RIGHT,$e.ENTER,$e.UP,$e.DOWN]}activate(e,n){this.activated=!0,e&&this.iterator.setItems(e),n!==void 0&&this.iterator.setCursor(n),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(n=>n!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?ed.directions.LEFT:ed.directions.RIGHT){case ed.directions.RIGHT:this.flipRight();break;case ed.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),Mt(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}};const VK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',YK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',qK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',KK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>',XK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',GK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',JK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',QK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',tE='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',ZK='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',eX='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',uR='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M11.5 17.5L5 11M5 11V15.5M5 11H9.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12.5 6.5L19 13M19 13V8.5M19 13H14.5"/></svg>',tX='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',nX='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',rX='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',sX="__",oX="--";function ji(t){return(e,n)=>[[t,e].filter(r=>!!r).join(sX),n].filter(r=>!!r).join(oX)}const td=ji("ce-hint"),nd={root:td(),alignedStart:td(null,"align-left"),alignedCenter:td(null,"align-center"),title:td("title"),description:td("description")};class iX{constructor(e){this.nodes={root:me.make("div",[nd.root,e.alignment==="center"?nd.alignedCenter:nd.alignedStart]),title:me.make("div",nd.title,{textContent:e.title})},this.nodes.root.appendChild(this.nodes.title),e.description!==void 0&&(this.nodes.description=me.make("div",nd.description,{textContent:e.description}),this.nodes.root.appendChild(this.nodes.description))}getElement(){return this.nodes.root}}let Mb=class{constructor(e){this.params=e}get name(){if(this.params!==void 0&&"name"in this.params)return this.params.name}destroy(){Sp()}onChildrenOpen(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onOpen)=="function"&&this.params.children.onOpen()}onChildrenClose(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onClose)=="function"&&this.params.children.onClose()}handleClick(){var e,n;this.params!==void 0&&"onActivate"in this.params&&((n=(e=this.params).onActivate)==null||n.call(e,this.params))}addHint(e,n){const r=new iX(n);Cp(e,r.getElement(),{placement:n.position,hidingDelay:100})}get children(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.items)!==void 0?this.params.children.items:[]}get hasChildren(){return this.children.length>0}get isChildrenOpen(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.isOpen)===!0}get isChildrenFlippable(){var e;return!(this.params===void 0||!("children"in this.params)||((e=this.params.children)==null?void 0:e.isFlippable)===!1)}get isChildrenSearchable(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.searchable)===!0}get closeOnActivate(){return this.params!==void 0&&"closeOnActivate"in this.params&&this.params.closeOnActivate}get isActive(){return this.params===void 0||!("isActive"in this.params)?!1:typeof this.params.isActive=="function"?this.params.isActive():this.params.isActive===!0}};const dr=ji("ce-popover-item"),Rt={container:dr(),active:dr(null,"active"),disabled:dr(null,"disabled"),focused:dr(null,"focused"),hidden:dr(null,"hidden"),confirmationState:dr(null,"confirmation"),noHover:dr(null,"no-hover"),noFocus:dr(null,"no-focus"),title:dr("title"),secondaryTitle:dr("secondary-title"),icon:dr("icon"),iconTool:dr("icon","tool"),iconChevronRight:dr("icon","chevron-right"),wobbleAnimation:ji("wobble")()};let ea=class extends Mb{constructor(e,n){super(e),this.params=e,this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{var r;(r=this.nodes.root)==null||r.classList.remove(Rt.noFocus)},this.removeSpecialHoverBehavior=()=>{var r;(r=this.nodes.root)==null||r.classList.remove(Rt.noHover)},this.onErrorAnimationEnd=()=>{var r,s;(r=this.nodes.icon)==null||r.classList.remove(Rt.wobbleAnimation),(s=this.nodes.icon)==null||s.removeEventListener("animationend",this.onErrorAnimationEnd)},this.nodes.root=this.make(e,n)}get isDisabled(){return this.params.isDisabled===!0}get toggle(){return this.params.toggle}get title(){return this.params.title}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root===null?!1:this.nodes.root.classList.contains(Rt.focused)}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled&&this.confirmationState!==null){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){var n;(n=this.nodes.root)==null||n.classList.toggle(Rt.active,e)}toggleHidden(e){var n;(n=this.nodes.root)==null||n.classList.toggle(Rt.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e,n){var r,s;const o=n?.wrapperTag||"div",i=me.make(o,Rt.container,{type:o==="button"?"button":void 0});return e.name&&(i.dataset.itemName=e.name),this.nodes.icon=me.make("div",[Rt.icon,Rt.iconTool],{innerHTML:e.icon||JK}),i.appendChild(this.nodes.icon),e.title!==void 0&&i.appendChild(me.make("div",Rt.title,{innerHTML:e.title||""})),e.secondaryLabel&&i.appendChild(me.make("div",Rt.secondaryTitle,{textContent:e.secondaryLabel})),this.hasChildren&&i.appendChild(me.make("div",[Rt.icon,Rt.iconChevronRight],{innerHTML:KK})),this.isActive&&i.classList.add(Rt.active),e.isDisabled&&i.classList.add(Rt.disabled),e.hint!==void 0&&((r=n?.hint)==null?void 0:r.enabled)!==!1&&this.addHint(i,{...e.hint,position:((s=n?.hint)==null?void 0:s.position)||"right"}),i}enableConfirmationMode(e){if(this.nodes.root===null)return;const n={...this.params,...e,confirmation:"confirmation"in e?e.confirmation:void 0},r=this.make(n);this.nodes.root.innerHTML=r.innerHTML,this.nodes.root.classList.add(Rt.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){if(this.nodes.root===null)return;const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(Rt.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){var e,n,r;(e=this.nodes.root)==null||e.classList.add(Rt.noHover),(n=this.nodes.root)==null||n.classList.add(Rt.noFocus),(r=this.nodes.root)==null||r.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){var e;this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),(e=this.nodes.root)==null||e.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){var n;if(!("confirmation"in e)||e.confirmation===void 0)try{(n=e.onActivate)==null||n.call(e,e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){var e,n,r;(e=this.nodes.icon)!=null&&e.classList.contains(Rt.wobbleAnimation)||((n=this.nodes.icon)==null||n.classList.add(Rt.wobbleAnimation),(r=this.nodes.icon)==null||r.addEventListener("animationend",this.onErrorAnimationEnd))}};const Ov=ji("ce-popover-item-separator"),Pv={container:Ov(),line:Ov("line"),hidden:Ov(null,"hidden")};class hR extends Mb{constructor(){super(),this.nodes={root:me.make("div",Pv.container),line:me.make("div",Pv.line)},this.nodes.root.appendChild(this.nodes.line)}getElement(){return this.nodes.root}toggleHidden(e){var n;(n=this.nodes.root)==null||n.classList.toggle(Pv.hidden,e)}}var Is=(t=>(t.Closed="closed",t.ClosedOnActivate="closed-on-activate",t))(Is||{});const In=ji("ce-popover"),Ft={popover:In(),popoverContainer:In("container"),popoverOpenTop:In(null,"open-top"),popoverOpenLeft:In(null,"open-left"),popoverOpened:In(null,"opened"),search:In("search"),nothingFoundMessage:In("nothing-found-message"),nothingFoundMessageDisplayed:In("nothing-found-message","displayed"),items:In("items"),overlay:In("overlay"),overlayHidden:In("overlay","hidden"),popoverNested:In(null,"nested"),getPopoverNestedClass:t=>In(null,`nested-level-${t.toString()}`),popoverInline:In(null,"inline"),popoverHeader:In("header")};var jl=(t=>(t.NestingLevel="--nesting-level",t.PopoverHeight="--popover-height",t.InlinePopoverWidth="--inline-popover-width",t.TriggerItemLeft="--trigger-item-left",t.TriggerItemTop="--trigger-item-top",t))(jl||{});const nE=ji("ce-popover-item-html"),rE={root:nE(),hidden:nE(null,"hidden")};let qd=class extends Mb{constructor(e,n){var r,s;super(e),this.nodes={root:me.make("div",rE.root)},this.nodes.root.appendChild(e.element),e.name&&(this.nodes.root.dataset.itemName=e.name),e.hint!==void 0&&((r=n?.hint)==null?void 0:r.enabled)!==!1&&this.addHint(this.nodes.root,{...e.hint,position:((s=n?.hint)==null?void 0:s.position)||"right"})}getElement(){return this.nodes.root}toggleHidden(e){var n;(n=this.nodes.root)==null||n.classList.toggle(rE.hidden,e)}getControls(){const e=this.nodes.root.querySelectorAll(`button, ${me.allInputsSelector}`);return Array.from(e)}};class fR extends Cu{constructor(e,n={}){super(),this.params=e,this.itemsRenderParams=n,this.listeners=new _u,this.messages={nothingFound:"Nothing found",search:"Search"},this.items=this.buildItems(e.items),e.messages&&(this.messages={...this.messages,...e.messages}),this.nodes={},this.nodes.popoverContainer=me.make("div",[Ft.popoverContainer]),this.nodes.nothingFoundMessage=me.make("div",[Ft.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popoverContainer.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=me.make("div",[Ft.items]),this.items.forEach(r=>{const s=r.getElement();s!==null&&this.nodes.items.appendChild(s)}),this.nodes.popoverContainer.appendChild(this.nodes.items),this.listeners.on(this.nodes.popoverContainer,"click",r=>this.handleClick(r)),this.nodes.popover=me.make("div",[Ft.popover,this.params.class]),this.nodes.popover.appendChild(this.nodes.popoverContainer)}get itemsDefault(){return this.items.filter(e=>e instanceof ea)}getElement(){return this.nodes.popover}show(){this.nodes.popover.classList.add(Ft.popoverOpened),this.search!==void 0&&this.search.focus()}hide(){this.nodes.popover.classList.remove(Ft.popoverOpened),this.nodes.popover.classList.remove(Ft.popoverOpenTop),this.itemsDefault.forEach(e=>e.reset()),this.search!==void 0&&this.search.clear(),this.emit(Is.Closed)}destroy(){var e;this.items.forEach(n=>n.destroy()),this.nodes.popover.remove(),this.listeners.removeAll(),(e=this.search)==null||e.destroy()}activateItemByName(e){const n=this.items.find(r=>r.name===e);this.handleItemClick(n)}buildItems(e){return e.map(n=>{switch(n.type){case Et.Separator:return new hR;case Et.Html:return new qd(n,this.itemsRenderParams[Et.Html]);default:return new ea(n,this.itemsRenderParams[Et.Default])}})}getTargetItem(e){return this.items.filter(n=>n instanceof ea||n instanceof qd).find(n=>{const r=n.getElement();return r===null?!1:e.composedPath().includes(r)})}handleItemClick(e){if(!("isDisabled"in e&&e.isDisabled)){if(e.hasChildren){this.showNestedItems(e),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick();return}this.itemsDefault.filter(n=>n!==e).forEach(n=>n.reset()),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&(this.hide(),this.emit(Is.ClosedOnActivate))}}handleClick(e){const n=this.getTargetItem(e);n!==void 0&&this.handleItemClick(n)}toggleItemActivenessIfNeeded(e){if(e instanceof ea&&(e.toggle===!0&&e.toggleActive(),typeof e.toggle=="string")){const n=this.itemsDefault.filter(r=>r.toggle===e.toggle);if(n.length===1){e.toggleActive();return}n.forEach(r=>{r.toggleActive(r===e)})}}}var Ep=(t=>(t.Search="search",t))(Ep||{});const Rv=ji("cdx-search-field"),Av={wrapper:Rv(),icon:Rv("icon"),input:Rv("input")};class aX extends Cu{constructor({items:e,placeholder:n}){super(),this.listeners=new _u,this.items=e,this.wrapper=me.make("div",Av.wrapper);const r=me.make("div",Av.icon,{innerHTML:tX});this.input=me.make("input",Av.input,{placeholder:n,tabIndex:-1}),this.wrapper.appendChild(r),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.emit(Ep.Search,{query:this.searchQuery,items:this.foundItems})})}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.emit(Ep.Search,{query:"",items:this.foundItems})}destroy(){this.listeners.removeAll()}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var n,r;const s=((n=e.title)==null?void 0:n.toLowerCase())||"",o=(r=this.searchQuery)==null?void 0:r.toLowerCase();return o!==void 0?s.includes(o):!1}}var lX=Object.defineProperty,cX=Object.getOwnPropertyDescriptor,dX=(t,e,n,r)=>{for(var s=cX(e,n),o=t.length-1,i;o>=0;o--)(i=t[o])&&(s=i(e,n,s)||s);return s&&lX(e,n,s),s};const pR=class mR extends fR{constructor(e,n){super(e,n),this.nestingLevel=0,this.nestedPopoverTriggerItem=null,this.previouslyHoveredItem=null,this.scopeElement=document.body,this.hide=()=>{var r;super.hide(),this.destroyNestedPopoverIfExists(),(r=this.flipper)==null||r.deactivate(),this.previouslyHoveredItem=null},this.onFlip=()=>{const r=this.itemsDefault.find(s=>s.isFocused);r?.onFocus()},this.onSearch=r=>{var s;const o=r.query==="",i=r.items.length===0;this.items.forEach(u=>{let h=!1;u instanceof ea?h=!r.items.includes(u):(u instanceof hR||u instanceof qd)&&(h=i||!o),u.toggleHidden(h)}),this.toggleNothingFoundMessage(i);const l=r.query===""?this.flippableElements:r.items.map(u=>u.getElement());(s=this.flipper)!=null&&s.isActivated&&(this.flipper.deactivate(),this.flipper.activate(l))},e.nestingLevel!==void 0&&(this.nestingLevel=e.nestingLevel),this.nestingLevel>0&&this.nodes.popover.classList.add(Ft.popoverNested),e.scopeElement!==void 0&&(this.scopeElement=e.scopeElement),this.nodes.popoverContainer!==null&&this.listeners.on(this.nodes.popoverContainer,"mouseover",r=>this.handleHover(r)),e.searchable&&this.addSearch(),e.flippable!==!1&&(this.flipper=new _p({items:this.flippableElements,focusedItemClass:Rt.focused,allowedKeys:[$e.TAB,$e.UP,$e.DOWN,$e.ENTER]}),this.flipper.onFlip(this.onFlip))}hasFocus(){return this.flipper===void 0?!1:this.flipper.hasFocus()}get scrollTop(){return this.nodes.items===null?0:this.nodes.items.scrollTop}get offsetTop(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetTop}show(){var e;this.nodes.popover.style.setProperty(jl.PopoverHeight,this.size.height+"px"),this.shouldOpenBottom||this.nodes.popover.classList.add(Ft.popoverOpenTop),this.shouldOpenRight||this.nodes.popover.classList.add(Ft.popoverOpenLeft),super.show(),(e=this.flipper)==null||e.activate(this.flippableElements)}destroy(){this.hide(),super.destroy()}showNestedItems(e){this.nestedPopover!==null&&this.nestedPopover!==void 0||(this.nestedPopoverTriggerItem=e,this.showNestedPopoverForItem(e))}handleHover(e){const n=this.getTargetItem(e);n!==void 0&&this.previouslyHoveredItem!==n&&(this.destroyNestedPopoverIfExists(),this.previouslyHoveredItem=n,n.hasChildren&&this.showNestedPopoverForItem(n))}setTriggerItemPosition(e,n){const r=n.getElement(),s=(r?r.offsetTop:0)-this.scrollTop,o=this.offsetTop+s;e.style.setProperty(jl.TriggerItemTop,o+"px")}destroyNestedPopoverIfExists(){var e,n;this.nestedPopover===void 0||this.nestedPopover===null||(this.nestedPopover.off(Is.ClosedOnActivate,this.hide),this.nestedPopover.hide(),this.nestedPopover.destroy(),this.nestedPopover.getElement().remove(),this.nestedPopover=null,(e=this.flipper)==null||e.activate(this.flippableElements),(n=this.nestedPopoverTriggerItem)==null||n.onChildrenClose())}showNestedPopoverForItem(e){var n;this.nestedPopover=new mR({searchable:e.isChildrenSearchable,items:e.children,nestingLevel:this.nestingLevel+1,flippable:e.isChildrenFlippable,messages:this.messages}),e.onChildrenOpen(),this.nestedPopover.on(Is.ClosedOnActivate,this.hide);const r=this.nestedPopover.getElement();return this.nodes.popover.appendChild(r),this.setTriggerItemPosition(r,e),r.style.setProperty(jl.NestingLevel,this.nestedPopover.nestingLevel.toString()),this.nestedPopover.show(),(n=this.flipper)==null||n.deactivate(),this.nestedPopover}get shouldOpenBottom(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popoverContainer.getBoundingClientRect(),n=this.scopeElement.getBoundingClientRect(),r=this.size.height,s=e.top+r,o=e.top-r,i=Math.min(window.innerHeight,n.bottom);return o<n.top||s<=i}get shouldOpenRight(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popover.getBoundingClientRect(),n=this.scopeElement.getBoundingClientRect(),r=this.size.width,s=e.right+r,o=e.left-r,i=Math.min(window.innerWidth,n.right);return o<n.left||s<=i}get size(){var e;const n={height:0,width:0};if(this.nodes.popover===null)return n;const r=this.nodes.popover.cloneNode(!0);r.style.visibility="hidden",r.style.position="absolute",r.style.top="-1000px",r.classList.add(Ft.popoverOpened),(e=r.querySelector("."+Ft.popoverNested))==null||e.remove(),document.body.appendChild(r);const s=r.querySelector("."+Ft.popoverContainer);return n.height=s.offsetHeight,n.width=s.offsetWidth,r.remove(),n}get flippableElements(){return this.items.map(e=>{if(e instanceof ea)return e.getElement();if(e instanceof qd)return e.getControls()}).flat().filter(e=>e!=null)}addSearch(){this.search=new aX({items:this.itemsDefault,placeholder:this.messages.search}),this.search.on(Ep.Search,this.onSearch);const e=this.search.getElement();e.classList.add(Ft.search),this.nodes.popoverContainer.insertBefore(e,this.nodes.popoverContainer.firstChild)}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(Ft.nothingFoundMessageDisplayed,e)}};dX([cc],pR.prototype,"size");let Ob=pR;class uX extends Ob{constructor(e){const n=!dc();super({...e,class:Ft.popoverInline},{[Et.Default]:{wrapperTag:"button",hint:{position:"top",alignment:"center",enabled:n}},[Et.Html]:{hint:{position:"top",alignment:"center",enabled:n}}}),this.items.forEach(r=>{!(r instanceof ea)&&!(r instanceof qd)||r.hasChildren&&r.isChildrenOpen&&this.showNestedItems(r)})}get offsetLeft(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetLeft}show(){this.nestingLevel===0&&this.nodes.popover.style.setProperty(jl.InlinePopoverWidth,this.size.width+"px"),super.show()}handleHover(){}setTriggerItemPosition(e,n){const r=n.getElement(),s=r?r.offsetLeft:0,o=this.offsetLeft+s;e.style.setProperty(jl.TriggerItemLeft,o+"px")}showNestedItems(e){if(this.nestedPopoverTriggerItem===e){this.destroyNestedPopoverIfExists(),this.nestedPopoverTriggerItem=null;return}super.showNestedItems(e)}showNestedPopoverForItem(e){const n=super.showNestedPopoverForItem(e);return n.getElement().classList.add(Ft.getPopoverNestedClass(n.nestingLevel)),n}handleItemClick(e){var n;e!==this.nestedPopoverTriggerItem&&((n=this.nestedPopoverTriggerItem)==null||n.handleClick(),super.destroyNestedPopoverIfExists()),super.handleItemClick(e)}}const gR=class md{constructor(){this.scrollPosition=null}lock(){qy?this.lockHard():document.body.classList.add(md.CSS.scrollLocked)}unlock(){qy?this.unlockHard():document.body.classList.remove(md.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(md.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(md.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};gR.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};let hX=gR;const Iv=ji("ce-popover-header"),Dv={root:Iv(),text:Iv("text"),backButton:Iv("back-button")};class fX{constructor({text:e,onBackButtonClick:n}){this.listeners=new _u,this.text=e,this.onBackButtonClick=n,this.nodes={root:me.make("div",[Dv.root]),backButton:me.make("button",[Dv.backButton]),text:me.make("div",[Dv.text])},this.nodes.backButton.innerHTML=qK,this.nodes.root.appendChild(this.nodes.backButton),this.listeners.on(this.nodes.backButton,"click",this.onBackButtonClick),this.nodes.text.innerText=this.text,this.nodes.root.appendChild(this.nodes.text)}getElement(){return this.nodes.root}destroy(){this.nodes.root.remove(),this.listeners.destroy()}}class pX{constructor(){this.history=[]}push(e){this.history.push(e)}pop(){return this.history.pop()}get currentTitle(){return this.history.length===0?"":this.history[this.history.length-1].title}get currentItems(){return this.history.length===0?[]:this.history[this.history.length-1].items}reset(){for(;this.history.length>1;)this.pop()}}let xR=class extends fR{constructor(e){super(e,{[Et.Default]:{hint:{enabled:!1}},[Et.Html]:{hint:{enabled:!1}}}),this.scrollLocker=new hX,this.history=new pX,this.isHidden=!0,this.nodes.overlay=me.make("div",[Ft.overlay,Ft.overlayHidden]),this.nodes.popover.insertBefore(this.nodes.overlay,this.nodes.popover.firstChild),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.history.push({items:e.items})}show(){this.nodes.overlay.classList.remove(Ft.overlayHidden),super.show(),this.scrollLocker.lock(),this.isHidden=!1}hide(){this.isHidden||(super.hide(),this.nodes.overlay.classList.add(Ft.overlayHidden),this.scrollLocker.unlock(),this.history.reset(),this.isHidden=!0)}destroy(){super.destroy(),this.scrollLocker.unlock()}showNestedItems(e){this.updateItemsAndHeader(e.children,e.title),this.history.push({title:e.title,items:e.children})}updateItemsAndHeader(e,n){if(this.header!==null&&this.header!==void 0&&(this.header.destroy(),this.header=null),n!==void 0){this.header=new fX({text:n,onBackButtonClick:()=>{this.history.pop(),this.updateItemsAndHeader(this.history.currentItems,this.history.currentTitle)}});const r=this.header.getElement();r!==null&&this.nodes.popoverContainer.insertBefore(r,this.nodes.popoverContainer.firstChild)}this.items.forEach(r=>{var s;return(s=r.getElement())==null?void 0:s.remove()}),this.items=this.buildItems(e),this.items.forEach(r=>{var s;const o=r.getElement();o!==null&&((s=this.nodes.items)==null||s.appendChild(o))})}};class mX extends nt{constructor(){super(...arguments),this.opened=!1,this.selection=new Be,this.popover=null,this.close=()=>{this.opened&&(this.opened=!1,Be.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(Is.Closed,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))},this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;if(this.popover!==null)return"flipper"in this.popover?(e=this.popover)==null?void 0:e.flipper:void 0}make(){this.nodes.wrapper=me.make("div",[this.CSS.settings]),this.eventsDispatcher.on(Yd,this.close)}destroy(){this.removeAllNodes(),this.listeners.destroy(),this.eventsDispatcher.off(Yd,this.close)}async open(e=this.Editor.BlockManager.currentBlock){var n;this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const{toolTunes:r,commonTunes:s}=e.getTunes();this.eventsDispatcher.emit(this.events.opened);const o=dc()?xR:Ob;this.popover=new o({searchable:!0,items:await this.getTunesItems(e,s,r),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Ln.ui(xr.ui.popover,"Nothing found"),search:Ln.ui(xr.ui.popover,"Filter")}}),this.popover.on(Is.Closed,this.onPopoverClose),(n=this.nodes.wrapper)==null||n.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}async getTunesItems(e,n,r){const s=[];r!==void 0&&r.length>0&&(s.push(...r),s.push({type:Et.Separator}));const o=Array.from(this.Editor.Tools.blockTools.values()),i=(await sR(e,o)).reduce((l,u)=>(u.toolbox.forEach(h=>{l.push({icon:h.icon,title:Ln.t(xr.toolNames,h.title),name:u.name,closeOnActivate:!0,onActivate:async()=>{const{BlockManager:f,Caret:m,Toolbar:x}=this.Editor,w=await f.convert(e,u.name,h.data);x.close(),m.setToBlock(w,m.positions.END)}})}),l),[]);return i.length>0&&(s.push({icon:uR,name:"convert-to",title:Ln.ui(xr.ui.popover,"Convert to"),children:{searchable:!0,items:i}}),s.push({type:Et.Separator})),s.push(...n),s.map(l=>this.resolveTuneAliases(l))}resolveTuneAliases(e){if(e.type===Et.Separator||e.type===Et.Html)return e;const n=WK(e,{label:"title"});return e.confirmation&&(n.confirmation=this.resolveTuneAliases(e.confirmation)),n}}var vR={exports:{}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(t,e){(function(n,r){t.exports=r()})(window,function(){return(function(n){var r={};function s(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=n,s.c=r,s.d=function(o,i,l){s.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:l})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,i){if(1&i&&(o=s(o)),8&i||4&i&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&i&&typeof o!="string")for(var u in o)s.d(l,u,(function(h){return o[h]}).bind(null,u));return l},s.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(i,"a",i),i},s.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},s.p="",s(s.s=0)})([function(n,r,s){function o(u,h){for(var f=0;f<h.length;f++){var m=h[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}function i(u,h,f){return h&&o(u.prototype,h),f&&o(u,f),u}s.r(r);var l=(function(){function u(h){var f=this;(function(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")})(this,u),this.commands={},this.keys={},this.name=h.name,this.parseShortcutName(h.name),this.element=h.on,this.callback=h.callback,this.executeShortcut=function(m){f.execute(m)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return i(u,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),i(u,[{key:"parseShortcutName",value:function(h){h=h.split("+");for(var f=0;f<h.length;f++){h[f]=h[f].toUpperCase();var m=!1;for(var x in u.supportedCommands)if(u.supportedCommands[x].includes(h[f])){m=this.commands[x]=!0;break}m||(this.keys[h[f]]=!0)}for(var w in u.supportedCommands)this.commands[w]||(this.commands[w]=!1)}},{key:"execute",value:function(h){var f,m={CMD:h.ctrlKey||h.metaKey,SHIFT:h.shiftKey,ALT:h.altKey},x=!0;for(f in this.commands)this.commands[f]!==m[f]&&(x=!1);var w,v=!0;for(w in this.keys)v=v&&h.keyCode===u.keyCodes[w];x&&v&&this.callback(h)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),u})();r.default=l}]).default})})(vR);var gX=vR.exports;const xX=jm(gX);class vX{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const n=new xX({name:e.name,on:e.on,callback:e.handler}),r=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...r,n])}remove(e,n){const r=this.findShortcut(e,n);if(!r)return;r.remove();const s=this.registeredShortcuts.get(e).filter(o=>o!==r);if(s.length===0){this.registeredShortcuts.delete(e);return}this.registeredShortcuts.set(e,s)}findShortcut(e,n){return(this.registeredShortcuts.get(e)||[]).find(({name:r})=>r===n)}}const Ul=new vX;var yX=Object.defineProperty,bX=Object.getOwnPropertyDescriptor,yR=(t,e,n,r)=>{for(var s=bX(e,n),o=t.length-1,i;o>=0;o--)(i=t[o])&&(s=i(e,n,s)||s);return s&&yX(e,n,s),s},If=(t=>(t.Opened="toolbox-opened",t.Closed="toolbox-closed",t.BlockAdded="toolbox-block-added",t))(If||{});const Pb=class bR extends Cu{constructor({api:e,tools:n,i18nLabels:r}){super(),this.opened=!1,this.listeners=new _u,this.popover=null,this.handleMobileLayoutToggle=()=>{this.destroyPopover(),this.initPopover()},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=e,this.tools=n,this.i18nLabels=r,this.enableShortcuts(),this.nodes={toolbox:me.make("div",bR.CSS.toolbox)},this.initPopover(),this.api.events.on(Yd,this.handleMobileLayoutToggle)}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}getElement(){return this.nodes.toolbox}hasFocus(){if(this.popover!==null)return"hasFocus"in this.popover?this.popover.hasFocus():void 0}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&this.nodes.toolbox.remove(),this.removeAllShortcuts(),(e=this.popover)==null||e.off(Is.Closed,this.onPopoverClose),this.listeners.destroy(),this.api.events.off(Yd,this.handleMobileLayoutToggle)}toolButtonActivated(e,n){this.insertNewBlock(e,n)}open(){var e;this.isEmpty||((e=this.popover)==null||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;(e=this.popover)==null||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}initPopover(){var e;const n=dc()?xR:Ob;this.popover=new n({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(Is.Closed,this.onPopoverClose),(e=this.nodes.toolbox)==null||e.append(this.popover.getElement())}destroyPopover(){this.popover!==null&&(this.popover.hide(),this.popover.off(Is.Closed,this.onPopoverClose),this.popover.destroy(),this.popover=null),this.nodes.toolbox!==null&&(this.nodes.toolbox.innerHTML="")}get toolsToBeDisplayed(){const e=[];return this.tools.forEach(n=>{n.toolbox&&e.push(n)}),e}get toolboxItemsToBeDisplayed(){const e=(n,r,s=!0)=>({icon:n.icon,title:Ln.t(xr.toolNames,n.title||wp(r.name)),name:r.name,onActivate:()=>{this.toolButtonActivated(r.name,n.data)},secondaryLabel:r.shortcut&&s?Eb(r.shortcut):""});return this.toolsToBeDisplayed.reduce((n,r)=>(Array.isArray(r.toolbox)?r.toolbox.forEach((s,o)=>{n.push(e(s,r,o===0))}):r.toolbox!==void 0&&n.push(e(r.toolbox,r)),n),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const n=e.shortcut;n&&this.enableShortcutForTool(e.name,n)})}enableShortcutForTool(e,n){Ul.add({name:n,on:this.api.ui.nodes.redactor,handler:async r=>{r.preventDefault();const s=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(s);if(o)try{const i=await this.api.blocks.convert(o.id,e);this.api.caret.setToBlock(i,"end");return}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const n=e.shortcut;n&&Ul.remove(this.api.ui.nodes.redactor,n)})}async insertNewBlock(e,n){const r=this.api.blocks.getCurrentBlockIndex(),s=this.api.blocks.getBlockByIndex(r);if(!s)return;const o=s.isEmpty?r:r+1;let i;if(n){const u=await this.api.blocks.composeBlockData(e);i=Object.assign(u,n)}const l=this.api.blocks.insert(e,i,void 0,o,void 0,s.isEmpty);l.call(lo.APPEND_CALLBACK),this.api.caret.setToBlock(o),this.emit("toolbox-block-added",{block:l}),this.api.toolbar.close()}};yR([cc],Pb.prototype,"toolsToBeDisplayed");yR([cc],Pb.prototype,"toolboxItemsToBeDisplayed");let wX=Pb;const wR="block hovered";async function kX(t,e){const n=navigator.keyboard;if(!n)return e;try{return(await n.getLayoutMap()).get(t)||e}catch(r){return console.error(r),e}}class SX extends nt{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var n;(n=this.toolboxInstance)==null||n.close()},open:()=>{if(this.toolboxInstance===null){ct("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){ct("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var n;return(n=this.toolboxInstance)==null?void 0:n.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){ct("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const n=e.holder,{isMobile:r}=this.Editor.UI;let s;const o=20,i=e.firstInput,l=n.getBoundingClientRect(),u=i!==void 0?i.getBoundingClientRect():null,h=u!==null?u.top-l.top:null,f=h!==null?h>o:void 0;if(r)s=n.offsetTop+n.offsetHeight;else if(i===void 0||f){const m=parseInt(window.getComputedStyle(e.pluginsContent).paddingTop);s=n.offsetTop+m}else{const m=iK(i),x=parseInt(window.getComputedStyle(this.nodes.plusButton).height,10);s=n.offsetTop+m-x+8+h}this.nodes.wrapper.style.top=`${Math.floor(s)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,n;this.Editor.ReadOnly.isEnabled||((e=this.nodes.wrapper)==null||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(n=this.toolboxInstance)==null||n.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}async make(){this.nodes.wrapper=me.make("div",this.CSS.toolbar),["content","actions"].forEach(o=>{this.nodes[o]=me.make("div",this.CSS[o])}),me.append(this.nodes.wrapper,this.nodes.content),me.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=me.make("div",this.CSS.plusButton,{innerHTML:eX}),me.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{Sp(!0),this.plusButtonClicked()},!1);const e=me.make("div");e.appendChild(document.createTextNode(Ln.ui(xr.ui.toolbar.toolbox,"Add"))),e.appendChild(me.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),Cp(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=me.make("span",this.CSS.settingsToggler,{innerHTML:ZK}),me.append(this.nodes.actions,this.nodes.settingsToggler);const n=me.make("div"),r=me.text(Ln.ui(xr.ui.blockTunes.toggler,"Click to tune")),s=await kX("Slash","/");n.appendChild(r),n.appendChild(me.make("div",this.CSS.plusButtonShortcut,{textContent:Eb(`CMD + ${s}`)})),Cp(this.nodes.settingsToggler,n,{hidingDelay:400}),me.append(this.nodes.actions,this.makeToolbox()),me.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),me.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new wX({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:Ln.ui(xr.ui.popover,"Filter"),nothingFound:Ln.ui(xr.ui.popover,"Nothing found")}}),this.toolboxInstance.on(If.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(If.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(If.BlockAdded,({block:e})=>{const{BlockManager:n,Caret:r}=this.Editor,s=n.getBlockById(e.id);s.inputs.length===0&&(s===n.lastBlock?(n.insertAtEnd(),r.setToBlock(n.lastBlock)):r.setToBlock(n.nextBlock))}),this.toolboxInstance.getElement()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var n;e.stopPropagation(),this.settingsTogglerClicked(),(n=this.toolboxInstance)!=null&&n.opened&&this.toolboxInstance.close(),Sp(!0)},!0),dc()||this.eventsDispatcher.on(wR,e=>{var n;this.Editor.BlockSettings.opened||(n=this.toolboxInstance)!=null&&n.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}}var ca=(t=>(t[t.Block=0]="Block",t[t.Inline=1]="Inline",t[t.Tune=2]="Tune",t))(ca||{}),Df=(t=>(t.Shortcut="shortcut",t.Toolbox="toolbox",t.EnabledInlineTools="inlineToolbar",t.EnabledBlockTunes="tunes",t.Config="config",t))(Df||{}),kR=(t=>(t.Shortcut="shortcut",t.SanitizeConfig="sanitize",t))(kR||{}),vl=(t=>(t.IsEnabledLineBreaks="enableLineBreaks",t.Toolbox="toolbox",t.ConversionConfig="conversionConfig",t.IsReadOnlySupported="isReadOnlySupported",t.PasteConfig="pasteConfig",t))(vl||{}),Np=(t=>(t.IsInline="isInline",t.Title="title",t.IsReadOnlySupported="isReadOnlySupported",t))(Np||{}),Jy=(t=>(t.IsTune="isTune",t))(Jy||{});let Rb=class{constructor({name:e,constructable:n,config:r,api:s,isDefault:o,isInternal:i=!1,defaultPlaceholder:l}){this.api=s,this.name=e,this.constructable=n,this.config=r,this.isDefault=o,this.isInternal=i,this.defaultPlaceholder=l}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(Mt(this.constructable.reset))return this.constructable.reset()}prepare(){if(Mt(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===ca.Inline}isBlock(){return this.type===ca.Block}isTune(){return this.type===ca.Tune}};class CX extends nt{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.CSS={inlineToolbar:"ce-inline-toolbar"},this.opened=!1,this.popover=null,this.toolbarVerticalMargin=dc()?20:6,this.tools=new Map,window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(e=!1){e&&this.close(),this.allowedToShow()&&(await this.open(),this.Editor.Toolbar.close())}close(){var e,n;if(this.opened){for(const[r,s]of this.tools){const o=this.getToolShortcut(r.name);o!==void 0&&Ul.remove(this.Editor.UI.nodes.redactor,o),Mt(s.clear)&&s.clear()}this.tools=new Map,this.reset(),this.opened=!1,(e=this.popover)==null||e.hide(),(n=this.popover)==null||n.destroy(),this.popover=null}}containsNode(e){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(e)}destroy(){var e;this.removeAllNodes(),(e=this.popover)==null||e.destroy(),this.popover=null}make(){this.nodes.wrapper=me.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),me.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}async open(){var e;if(this.opened)return;this.opened=!0,this.popover!==null&&this.popover.destroy(),this.createToolsInstances();const n=await this.getPopoverItems();this.popover=new uX({items:n,scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Ln.ui(xr.ui.popover,"Nothing found"),search:Ln.ui(xr.ui.popover,"Filter")}}),this.move(this.popover.size.width),(e=this.nodes.wrapper)==null||e.append(this.popover.getElement()),this.popover.show()}move(e){const n=Be.rect,r=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),s={x:n.x-r.x,y:n.y+n.height-r.top+this.toolbarVerticalMargin};s.x+e+r.x>this.Editor.UI.contentRect.right&&(s.x=this.Editor.UI.contentRect.right-e-r.x),this.nodes.wrapper.style.left=Math.floor(s.x)+"px",this.nodes.wrapper.style.top=Math.floor(s.y)+"px"}reset(){this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=["IMG","INPUT"],n=Be.get(),r=Be.text;if(!n||!n.anchorNode||n.isCollapsed||r.length<1)return!1;const s=me.isElement(n.anchorNode)?n.anchorNode:n.anchorNode.parentElement;if(s===null||n!==null&&e.includes(s.tagName))return!1;const o=this.Editor.BlockManager.getBlock(n.anchorNode);return!o||this.getTools().some(i=>o.tool.inlineTools.has(i.name))===!1?!1:s.closest("[contenteditable]")!==null}getTools(){const e=this.Editor.BlockManager.currentBlock;return e?Array.from(e.tool.inlineTools.values()).filter(n=>!(this.Editor.ReadOnly.isEnabled&&n.isReadOnlySupported!==!0)):[]}createToolsInstances(){this.tools=new Map,this.getTools().forEach(e=>{const n=e.create();this.tools.set(e,n)})}async getPopoverItems(){const e=[];let n=0;for(const[r,s]of this.tools){const o=await s.render(),i=this.getToolShortcut(r.name);if(i!==void 0)try{this.enableShortcuts(r.name,i)}catch{}const l=i!==void 0?Eb(i):void 0,u=Ln.t(xr.toolNames,r.title||wp(r.name));[o].flat().forEach(h=>{var f,m;const x={name:r.name,onActivate:()=>{this.toolClicked(s)},hint:{title:u,description:l}};if(me.isElement(h)){const w={...x,element:h,type:Et.Html};if(Mt(s.renderActions)){const v=s.renderActions();w.children={isOpen:(f=s.checkState)==null?void 0:f.call(s,Be.get()),isFlippable:!1,items:[{type:Et.Html,element:v}]}}else(m=s.checkState)==null||m.call(s,Be.get());e.push(w)}else if(h.type===Et.Html)e.push({...x,...h,type:Et.Html});else if(h.type===Et.Separator)e.push({type:Et.Separator});else{const w={...x,...h,type:Et.Default};"children"in w&&n!==0&&e.push({type:Et.Separator}),e.push(w),"children"in w&&n<this.tools.size-1&&e.push({type:Et.Separator})}}),n++}return e}getToolShortcut(e){const{Tools:n}=this.Editor,r=n.inlineTools.get(e),s=n.internal.inlineTools;return Array.from(s.keys()).includes(e)?this.inlineTools[e][kR.Shortcut]:r?.shortcut}enableShortcuts(e,n){Ul.add({name:n,handler:r=>{var s;const{currentBlock:o}=this.Editor.BlockManager;o&&o.tool.enabledInlineTools&&(r.preventDefault(),(s=this.popover)==null||s.activateItemByName(e))},on:document})}toolClicked(e){var n;const r=Be.range;(n=e.surround)==null||n.call(e,r),this.checkToolsState()}checkToolsState(){var e;(e=this.tools)==null||e.forEach(n=>{var r;(r=n.checkState)==null||r.call(n,Be.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([n,r])=>{e[n]=r.create()}),e}}function SR(){const t=window.getSelection();if(t===null)return[null,0];let e=t.focusNode,n=t.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[n]?(e=e.childNodes[n],n=0):(e=e.childNodes[n-1],n=e.textContent.length)),[e,n])}function CR(t,e,n,r){const s=document.createRange();r==="left"?(s.setStart(t,0),s.setEnd(e,n)):(s.setStart(e,n),s.setEnd(t,t.childNodes.length));const o=s.cloneContents(),i=document.createElement("div");i.appendChild(o);const l=i.textContent||"";return oK(l)}function Lf(t){const e=me.getDeepestNode(t);if(e===null||me.isEmpty(t))return!0;if(me.isNativeInput(e))return e.selectionEnd===0;if(me.isEmpty(t))return!0;const[n,r]=SR();return n===null?!1:CR(t,n,r,"left")}function Bf(t){const e=me.getDeepestNode(t,!0);if(e===null)return!0;if(me.isNativeInput(e))return e.selectionEnd===e.value.length;const[n,r]=SR();return n===null?!1:CR(t,n,r,"right")}var _R={},Ab={},Tm={},Ma={},Ib={},Db={};Object.defineProperty(Db,"__esModule",{value:!0});Db.allInputsSelector=_X;function _X(){var t=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+t.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.allInputsSelector=void 0;var e=Db;Object.defineProperty(t,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(Ib);var Oa={},Lb={};Object.defineProperty(Lb,"__esModule",{value:!0});Lb.isNativeInput=EX;function EX(t){var e=["INPUT","TEXTAREA"];return t&&t.tagName?e.includes(t.tagName):!1}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNativeInput=void 0;var e=Lb;Object.defineProperty(t,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(Oa);var ER={},Bb={};Object.defineProperty(Bb,"__esModule",{value:!0});Bb.append=NX;function NX(t,e){Array.isArray(e)?e.forEach(function(n){t.appendChild(n)}):t.appendChild(e)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.append=void 0;var e=Bb;Object.defineProperty(t,"append",{enumerable:!0,get:function(){return e.append}})})(ER);var Fb={},$b={};Object.defineProperty($b,"__esModule",{value:!0});$b.blockElements=jX;function jX(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.blockElements=void 0;var e=$b;Object.defineProperty(t,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(Fb);var NR={},zb={};Object.defineProperty(zb,"__esModule",{value:!0});zb.calculateBaseline=TX;function TX(t){var e=window.getComputedStyle(t),n=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||n*1.2,s=parseFloat(e.paddingTop),o=parseFloat(e.borderTopWidth),i=parseFloat(e.marginTop),l=n*.8,u=(r-n)/2,h=i+o+s+u+l;return h}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateBaseline=void 0;var e=zb;Object.defineProperty(t,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(NR);var jR={},Ub={},Hb={},Wb={};Object.defineProperty(Wb,"__esModule",{value:!0});Wb.isContentEditable=MX;function MX(t){return t.contentEditable==="true"}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isContentEditable=void 0;var e=Wb;Object.defineProperty(t,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(Hb);Object.defineProperty(Ub,"__esModule",{value:!0});Ub.canSetCaret=RX;var OX=Oa,PX=Hb;function RX(t){var e=!0;if((0,OX.isNativeInput)(t))switch(t.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,PX.isContentEditable)(t);return e}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.canSetCaret=void 0;var e=Ub;Object.defineProperty(t,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(jR);var Mm={},Vb={};function AX(t,e,n){const r=n.value!==void 0?"value":"get",s=n[r],o=`#${e}Cache`;if(n[r]=function(...i){return this[o]===void 0&&(this[o]=s.apply(this,i)),this[o]},r==="get"&&n.set){const i=n.set;n.set=function(l){delete t[o],i.apply(this,l)}}return n}function TR(){const t={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(t).find(n=>window.navigator.appVersion.toLowerCase().indexOf(n)!==-1);return e!==void 0&&(t[e]=!0),t}function Yb(t){return t!=null&&t!==""&&(typeof t!="object"||Object.keys(t).length>0)}function IX(t){return!Yb(t)}const DX=()=>typeof window<"u"&&window.navigator!==null&&Yb(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function LX(t){const e=TR();return t=t.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi,"+"),e.mac?t=t.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):t=t.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),t}function BX(t){return t[0].toUpperCase()+t.slice(1)}function FX(t){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=t,document.body.appendChild(e);const n=window.getSelection(),r=document.createRange();if(r.selectNode(e),n===null)throw new Error("Cannot copy text to clipboard");n.removeAllRanges(),n.addRange(r),document.execCommand("copy"),document.body.removeChild(e)}function $X(t,e,n){let r;return(...s)=>{const o=this,i=()=>{r=void 0,n!==!0&&t.apply(o,s)},l=n===!0&&r!==void 0;window.clearTimeout(r),r=window.setTimeout(i,e),l&&t.apply(o,s)}}function ki(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function zX(t){return ki(t)==="boolean"}function MR(t){return ki(t)==="function"||ki(t)==="asyncfunction"}function UX(t){return MR(t)&&/^\s*class\s+/.test(t.toString())}function HX(t){return ki(t)==="number"}function Ff(t){return ki(t)==="object"}function WX(t){return Promise.resolve(t)===t}function VX(t){return ki(t)==="string"}function YX(t){return ki(t)==="undefined"}function Qy(t,...e){if(!e.length)return t;const n=e.shift();if(Ff(t)&&Ff(n))for(const r in n)Ff(n[r])?(t[r]===void 0&&Object.assign(t,{[r]:{}}),Qy(t[r],n[r])):Object.assign(t,{[r]:n[r]});return Qy(t,...e)}function qX(t,e,n){const r=`${e} is deprecated and will be removed in the next major release. Please use the ${n} instead.`;t&&console.warn(r)}function KX(t){try{return new URL(t).href}catch{}return t.substring(0,2)==="//"?window.location.protocol+t:window.location.origin+t}function XX(t){return t>47&&t<58||t===32||t===13||t===229||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223}const GX={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},JX={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};let QX=class{constructor(){this.completed=Promise.resolve()}add(t){return new Promise((e,n)=>{this.completed=this.completed.then(t).then(e).catch(n)})}};function ZX(t,e,n=void 0){let r,s,o,i=null,l=0;n||(n={});const u=function(){l=n.leading===!1?0:Date.now(),i=null,o=t.apply(r,s),i===null&&(r=s=null)};return function(){const h=Date.now();!l&&n.leading===!1&&(l=h);const f=e-(h-l);return r=this,s=arguments,f<=0||f>e?(i&&(clearTimeout(i),i=null),l=h,o=t.apply(r,s),i===null&&(r=s=null)):!i&&n.trailing!==!1&&(i=setTimeout(u,f)),o}}const eG=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:QX,beautifyShortcut:LX,cacheable:AX,capitalize:BX,copyTextToClipboard:FX,debounce:$X,deepMerge:Qy,deprecationAssert:qX,getUserOS:TR,getValidUrl:KX,isBoolean:zX,isClass:UX,isEmpty:IX,isFunction:MR,isIosDevice:DX,isNumber:HX,isObject:Ff,isPrintableKey:XX,isPromise:WX,isString:VX,isUndefined:YX,keyCodes:GX,mouseButtons:JX,notEmpty:Yb,throttle:ZX,typeOf:ki},Symbol.toStringTag,{value:"Module"})),qb=Vq(eG);Object.defineProperty(Vb,"__esModule",{value:!0});Vb.containsOnlyInlineElements=rG;var tG=qb,nG=Fb;function rG(t){var e;(0,tG.isString)(t)?(e=document.createElement("div"),e.innerHTML=t):e=t;var n=function(r){return!(0,nG.blockElements)().includes(r.tagName.toLowerCase())&&Array.from(r.children).every(n)};return Array.from(e.children).every(n)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.containsOnlyInlineElements=void 0;var e=Vb;Object.defineProperty(t,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(Mm);var OR={},Kb={},Om={},Xb={};Object.defineProperty(Xb,"__esModule",{value:!0});Xb.make=sG;function sG(t,e,n){var r;e===void 0&&(e=null),n===void 0&&(n={});var s=document.createElement(t);if(Array.isArray(e)){var o=e.filter(function(l){return l!==void 0});(r=s.classList).add.apply(r,o)}else e!==null&&s.classList.add(e);for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i]);return s}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.make=void 0;var e=Xb;Object.defineProperty(t,"make",{enumerable:!0,get:function(){return e.make}})})(Om);Object.defineProperty(Kb,"__esModule",{value:!0});Kb.fragmentToString=iG;var oG=Om;function iG(t){var e=(0,oG.make)("div");return e.appendChild(t),e.innerHTML}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fragmentToString=void 0;var e=Kb;Object.defineProperty(t,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(OR);var PR={},Gb={};Object.defineProperty(Gb,"__esModule",{value:!0});Gb.getContentLength=lG;var aG=Oa;function lG(t){var e,n;return(0,aG.isNativeInput)(t)?t.value.length:t.nodeType===Node.TEXT_NODE?t.length:(n=(e=t.textContent)===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getContentLength=void 0;var e=Gb;Object.defineProperty(t,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(PR);var Jb={},Qb={},sE=Vd&&Vd.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Qb,"__esModule",{value:!0});Qb.getDeepestBlockElements=RR;var cG=Mm;function RR(t){return(0,cG.containsOnlyInlineElements)(t)?[t]:Array.from(t.children).reduce(function(e,n){return sE(sE([],e,!0),RR(n),!0)},[])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepestBlockElements=void 0;var e=Qb;Object.defineProperty(t,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(Jb);var AR={},Zb={},Pm={},ew={};Object.defineProperty(ew,"__esModule",{value:!0});ew.isLineBreakTag=dG;function dG(t){return["BR","WBR"].includes(t.tagName)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLineBreakTag=void 0;var e=ew;Object.defineProperty(t,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(Pm);var Rm={},tw={};Object.defineProperty(tw,"__esModule",{value:!0});tw.isSingleTag=uG;function uG(t){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(t.tagName)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isSingleTag=void 0;var e=tw;Object.defineProperty(t,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(Rm);Object.defineProperty(Zb,"__esModule",{value:!0});Zb.getDeepestNode=IR;var hG=Oa,fG=Pm,pG=Rm;function IR(t,e){e===void 0&&(e=!1);var n=e?"lastChild":"firstChild",r=e?"previousSibling":"nextSibling";if(t.nodeType===Node.ELEMENT_NODE&&t[n]){var s=t[n];if((0,pG.isSingleTag)(s)&&!(0,hG.isNativeInput)(s)&&!(0,fG.isLineBreakTag)(s))if(s[r])s=s[r];else if(s.parentNode!==null&&s.parentNode[r])s=s.parentNode[r];else return s.parentNode;return IR(s,e)}return t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepestNode=void 0;var e=Zb;Object.defineProperty(t,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(AR);var DR={},nw={},Zh=Vd&&Vd.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(nw,"__esModule",{value:!0});nw.findAllInputs=yG;var mG=Mm,gG=Jb,xG=Ib,vG=Oa;function yG(t){return Array.from(t.querySelectorAll((0,xG.allInputsSelector)())).reduce(function(e,n){return(0,vG.isNativeInput)(n)||(0,mG.containsOnlyInlineElements)(n)?Zh(Zh([],e,!0),[n],!1):Zh(Zh([],e,!0),(0,gG.getDeepestBlockElements)(n),!0)},[])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAllInputs=void 0;var e=nw;Object.defineProperty(t,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(DR);var LR={},rw={};Object.defineProperty(rw,"__esModule",{value:!0});rw.isCollapsedWhitespaces=bG;function bG(t){return!/[^\t\n\r ]/.test(t)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCollapsedWhitespaces=void 0;var e=rw;Object.defineProperty(t,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(LR);var sw={},ow={};Object.defineProperty(ow,"__esModule",{value:!0});ow.isElement=kG;var wG=qb;function kG(t){return(0,wG.isNumber)(t)?!1:!!t&&!!t.nodeType&&t.nodeType===Node.ELEMENT_NODE}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isElement=void 0;var e=ow;Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(sw);var BR={},iw={},aw={},lw={};Object.defineProperty(lw,"__esModule",{value:!0});lw.isLeaf=SG;function SG(t){return t===null?!1:t.childNodes.length===0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLeaf=void 0;var e=lw;Object.defineProperty(t,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(aw);var cw={},dw={};Object.defineProperty(dw,"__esModule",{value:!0});dw.isNodeEmpty=jG;var CG=Pm,_G=sw,EG=Oa,NG=Rm;function jG(t,e){var n="";return(0,NG.isSingleTag)(t)&&!(0,CG.isLineBreakTag)(t)?!1:((0,_G.isElement)(t)&&(0,EG.isNativeInput)(t)?n=t.value:t.textContent!==null&&(n=t.textContent.replace("","")),e!==void 0&&(n=n.replace(new RegExp(e,"g"),"")),n.trim().length===0)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeEmpty=void 0;var e=dw;Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(cw);Object.defineProperty(iw,"__esModule",{value:!0});iw.isEmpty=OG;var TG=aw,MG=cw;function OG(t,e){t.normalize();for(var n=[t];n.length>0;){var r=n.shift();if(r){if(t=r,(0,TG.isLeaf)(t)&&!(0,MG.isNodeEmpty)(t,e))return!1;n.push.apply(n,Array.from(t.childNodes))}}return!0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=void 0;var e=iw;Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(BR);var FR={},uw={};Object.defineProperty(uw,"__esModule",{value:!0});uw.isFragment=RG;var PG=qb;function RG(t){return(0,PG.isNumber)(t)?!1:!!t&&!!t.nodeType&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFragment=void 0;var e=uw;Object.defineProperty(t,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(FR);var $R={},hw={};Object.defineProperty(hw,"__esModule",{value:!0});hw.isHTMLString=IG;var AG=Om;function IG(t){var e=(0,AG.make)("div");return e.innerHTML=t,e.childElementCount>0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isHTMLString=void 0;var e=hw;Object.defineProperty(t,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})($R);var zR={},fw={};Object.defineProperty(fw,"__esModule",{value:!0});fw.offset=DG;function DG(t){var e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,s=e.top+r,o=e.left+n;return{top:s,left:o,bottom:s+e.height,right:o+e.width}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.offset=void 0;var e=fw;Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return e.offset}})})(zR);var UR={},pw={};Object.defineProperty(pw,"__esModule",{value:!0});pw.prepend=LG;function LG(t,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(n){return t.prepend(n)})):t.prepend(e)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=void 0;var e=pw;Object.defineProperty(t,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(UR);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.offset=t.make=t.isLineBreakTag=t.isSingleTag=t.isNodeEmpty=t.isLeaf=t.isHTMLString=t.isFragment=t.isEmpty=t.isElement=t.isContentEditable=t.isCollapsedWhitespaces=t.findAllInputs=t.isNativeInput=t.allInputsSelector=t.getDeepestNode=t.getDeepestBlockElements=t.getContentLength=t.fragmentToString=t.containsOnlyInlineElements=t.canSetCaret=t.calculateBaseline=t.blockElements=t.append=void 0;var e=Ib;Object.defineProperty(t,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var n=Oa;Object.defineProperty(t,"isNativeInput",{enumerable:!0,get:function(){return n.isNativeInput}});var r=ER;Object.defineProperty(t,"append",{enumerable:!0,get:function(){return r.append}});var s=Fb;Object.defineProperty(t,"blockElements",{enumerable:!0,get:function(){return s.blockElements}});var o=NR;Object.defineProperty(t,"calculateBaseline",{enumerable:!0,get:function(){return o.calculateBaseline}});var i=jR;Object.defineProperty(t,"canSetCaret",{enumerable:!0,get:function(){return i.canSetCaret}});var l=Mm;Object.defineProperty(t,"containsOnlyInlineElements",{enumerable:!0,get:function(){return l.containsOnlyInlineElements}});var u=OR;Object.defineProperty(t,"fragmentToString",{enumerable:!0,get:function(){return u.fragmentToString}});var h=PR;Object.defineProperty(t,"getContentLength",{enumerable:!0,get:function(){return h.getContentLength}});var f=Jb;Object.defineProperty(t,"getDeepestBlockElements",{enumerable:!0,get:function(){return f.getDeepestBlockElements}});var m=AR;Object.defineProperty(t,"getDeepestNode",{enumerable:!0,get:function(){return m.getDeepestNode}});var x=DR;Object.defineProperty(t,"findAllInputs",{enumerable:!0,get:function(){return x.findAllInputs}});var w=LR;Object.defineProperty(t,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return w.isCollapsedWhitespaces}});var v=Hb;Object.defineProperty(t,"isContentEditable",{enumerable:!0,get:function(){return v.isContentEditable}});var y=sw;Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return y.isElement}});var k=BR;Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return k.isEmpty}});var C=FR;Object.defineProperty(t,"isFragment",{enumerable:!0,get:function(){return C.isFragment}});var _=$R;Object.defineProperty(t,"isHTMLString",{enumerable:!0,get:function(){return _.isHTMLString}});var j=aw;Object.defineProperty(t,"isLeaf",{enumerable:!0,get:function(){return j.isLeaf}});var M=cw;Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return M.isNodeEmpty}});var O=Pm;Object.defineProperty(t,"isLineBreakTag",{enumerable:!0,get:function(){return O.isLineBreakTag}});var T=Rm;Object.defineProperty(t,"isSingleTag",{enumerable:!0,get:function(){return T.isSingleTag}});var I=Om;Object.defineProperty(t,"make",{enumerable:!0,get:function(){return I.make}});var A=zR;Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return A.offset}});var F=UR;Object.defineProperty(t,"prepend",{enumerable:!0,get:function(){return F.prepend}})})(Ma);var Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.getContenteditableSlice=FG;var BG=Ma;function FG(t,e,n,r,s){var o;s===void 0&&(s=!1);var i=document.createRange();if(r==="left"?(i.setStart(t,0),i.setEnd(e,n)):(i.setStart(e,n),i.setEnd(t,t.childNodes.length)),s===!0){var l=i.extractContents();return(0,BG.fragmentToString)(l)}var u=i.cloneContents(),h=document.createElement("div");h.appendChild(u);var f=(o=h.textContent)!==null&&o!==void 0?o:"";return f}Object.defineProperty(Tm,"__esModule",{value:!0});Tm.checkContenteditableSliceForEmptiness=UG;var $G=Ma,zG=Am;function UG(t,e,n,r){var s=(0,zG.getContenteditableSlice)(t,e,n,r);return(0,$G.isCollapsedWhitespaces)(s)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkContenteditableSliceForEmptiness=void 0;var e=Tm;Object.defineProperty(t,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}})})(Ab);var HR={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getContenteditableSlice=void 0;var e=Am;Object.defineProperty(t,"getContenteditableSlice",{enumerable:!0,get:function(){return e.getContenteditableSlice}})})(HR);var WR={},mw={};Object.defineProperty(mw,"__esModule",{value:!0});mw.focus=WG;var HG=Ma;function WG(t,e){var n,r;if(e===void 0&&(e=!0),(0,HG.isNativeInput)(t)){t.focus();var s=e?0:t.value.length;t.setSelectionRange(s,s)}else{var o=document.createRange(),i=window.getSelection();if(!i)return;var l=function(x){var w=document.createTextNode("");x.appendChild(w),o.setStart(w,0),o.setEnd(w,0)},u=function(x){return x!=null},h=t.childNodes,f=e?h[0]:h[h.length-1];if(u(f)){for(;u(f)&&f.nodeType!==Node.TEXT_NODE;)f=e?f.firstChild:f.lastChild;if(u(f)&&f.nodeType===Node.TEXT_NODE){var m=(r=(n=f.textContent)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0,s=e?0:m;o.setStart(f,s),o.setEnd(f,s)}else l(t)}else l(t);i.removeAllRanges(),i.addRange(o)}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.focus=void 0;var e=mw;Object.defineProperty(t,"focus",{enumerable:!0,get:function(){return e.focus}})})(WR);var gw={},Im={};Object.defineProperty(Im,"__esModule",{value:!0});Im.getCaretNodeAndOffset=VG;function VG(){var t=window.getSelection();if(t===null)return[null,0];var e=t.focusNode,n=t.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[n]!==void 0?(e=e.childNodes[n],n=0):(e=e.childNodes[n-1],e.textContent!==null&&(n=e.textContent.length))),[e,n])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCaretNodeAndOffset=void 0;var e=Im;Object.defineProperty(t,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return e.getCaretNodeAndOffset}})})(gw);var VR={},Dm={};Object.defineProperty(Dm,"__esModule",{value:!0});Dm.getRange=YG;function YG(){var t=window.getSelection();return t&&t.rangeCount?t.getRangeAt(0):null}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getRange=void 0;var e=Dm;Object.defineProperty(t,"getRange",{enumerable:!0,get:function(){return e.getRange}})})(VR);var YR={},xw={};Object.defineProperty(xw,"__esModule",{value:!0});xw.isCaretAtEndOfInput=XG;var oE=Ma,qG=gw,KG=Ab;function XG(t){var e=(0,oE.getDeepestNode)(t,!0);if(e===null)return!0;if((0,oE.isNativeInput)(e))return e.selectionEnd===e.value.length;var n=(0,qG.getCaretNodeAndOffset)(),r=n[0],s=n[1];return r===null?!1:(0,KG.checkContenteditableSliceForEmptiness)(t,r,s,"right")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCaretAtEndOfInput=void 0;var e=xw;Object.defineProperty(t,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return e.isCaretAtEndOfInput}})})(YR);var qR={},vw={};Object.defineProperty(vw,"__esModule",{value:!0});vw.isCaretAtStartOfInput=QG;var ef=Ma,GG=Im,JG=Tm;function QG(t){var e=(0,ef.getDeepestNode)(t);if(e===null||(0,ef.isEmpty)(t))return!0;if((0,ef.isNativeInput)(e))return e.selectionEnd===0;if((0,ef.isEmpty)(t))return!0;var n=(0,GG.getCaretNodeAndOffset)(),r=n[0],s=n[1];return r===null?!1:(0,JG.checkContenteditableSliceForEmptiness)(t,r,s,"left")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCaretAtStartOfInput=void 0;var e=vw;Object.defineProperty(t,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return e.isCaretAtStartOfInput}})})(qR);var KR={},yw={};Object.defineProperty(yw,"__esModule",{value:!0});yw.save=tJ;var ZG=Ma,eJ=Dm;function tJ(){var t=(0,eJ.getRange)(),e=(0,ZG.make)("span");if(e.id="cursor",e.hidden=!0,!!t)return t.insertNode(e),function(){var n=window.getSelection();n&&(t.setStartAfter(e),t.setEndAfter(e),n.removeAllRanges(),n.addRange(t),setTimeout(function(){e.remove()},150))}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.save=void 0;var e=yw;Object.defineProperty(t,"save",{enumerable:!0,get:function(){return e.save}})})(KR);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.save=t.isCaretAtStartOfInput=t.isCaretAtEndOfInput=t.getRange=t.getCaretNodeAndOffset=t.focus=t.getContenteditableSlice=t.checkContenteditableSliceForEmptiness=void 0;var e=Ab;Object.defineProperty(t,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}});var n=HR;Object.defineProperty(t,"getContenteditableSlice",{enumerable:!0,get:function(){return n.getContenteditableSlice}});var r=WR;Object.defineProperty(t,"focus",{enumerable:!0,get:function(){return r.focus}});var s=gw;Object.defineProperty(t,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return s.getCaretNodeAndOffset}});var o=VR;Object.defineProperty(t,"getRange",{enumerable:!0,get:function(){return o.getRange}});var i=YR;Object.defineProperty(t,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return i.isCaretAtEndOfInput}});var l=qR;Object.defineProperty(t,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return l.isCaretAtStartOfInput}});var u=KR;Object.defineProperty(t,"save",{enumerable:!0,get:function(){return u.save}})})(_R);class nJ extends nt{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case $e.BACKSPACE:this.backspace(e);break;case $e.DELETE:this.delete(e);break;case $e.ENTER:this.enter(e);break;case $e.DOWN:case $e.RIGHT:this.arrowRightAndDown(e);break;case $e.UP:case $e.LEFT:this.arrowLeftAndUp(e);break;case $e.TAB:this.tabPressed(e);break}e.key==="/"&&!e.ctrlKey&&!e.metaKey&&this.slashPressed(e),e.code==="Slash"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.commandSlashPressed())}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&YP(e.keyCode)&&(this.Editor.Toolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){const n=this.Editor.BlockManager.getBlockByChildNode(e.target);n.dropTarget=!0}dragLeave(e){const n=this.Editor.BlockManager.getBlockByChildNode(e.target);n.dropTarget=!1}handleCommandC(e){const{BlockSelection:n}=this.Editor;n.anyBlockSelected&&n.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:n,BlockManager:r,Caret:s}=this.Editor;n.anyBlockSelected&&n.copySelectedBlocks(e).then(()=>{const o=r.removeSelectedBlocks(),i=r.insertDefaultBlockAtIndex(o,!0);s.setToBlock(i,s.positions.START),n.clearSelection(e)})}tabPressed(e){const{InlineToolbar:n,Caret:r}=this.Editor;n.opened||(e.shiftKey?r.navigatePrevious(!0):r.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(e){!this.Editor.UI.nodes.wrapper.contains(e.target)||!this.Editor.BlockManager.currentBlock.isEmpty||(e.preventDefault(),this.Editor.Caret.insertContentAtCaretPosition("/"),this.activateToolbox())}enter(e){const{BlockManager:n,UI:r}=this.Editor,s=n.currentBlock;if(s===void 0||s.tool.isLineBreaksEnabled||r.someToolbarOpened&&r.someFlipperButtonFocused||e.shiftKey&&!qy)return;let o=s;s.currentInput!==void 0&&Lf(s.currentInput)&&!s.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):s.currentInput&&Bf(s.currentInput)?o=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):o=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(o),this.Editor.Toolbar.moveAndOpen(o),e.preventDefault()}backspace(e){const{BlockManager:n,Caret:r}=this.Editor,{currentBlock:s,previousBlock:o}=n;if(!(s===void 0||!Be.isCollapsed||!s.currentInput||!Lf(s.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),s.currentInput!==s.firstInput){r.navigatePrevious();return}if(o!==null){if(o.isEmpty){n.removeBlock(o);return}if(s.isEmpty){n.removeBlock(s);const i=n.currentBlock;r.setToBlock(i,r.positions.END);return}Z2(o,s)?this.mergeBlocks(o,s):r.setToBlock(o,r.positions.END)}}}delete(e){const{BlockManager:n,Caret:r}=this.Editor,{currentBlock:s,nextBlock:o}=n;if(!(!Be.isCollapsed||!Bf(s.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),s.currentInput!==s.lastInput){r.navigateNext();return}if(o!==null){if(o.isEmpty){n.removeBlock(o);return}if(s.isEmpty){n.removeBlock(s),r.setToBlock(o,r.positions.START);return}Z2(s,o)?this.mergeBlocks(s,o):r.setToBlock(o,r.positions.START)}}}mergeBlocks(e,n){const{BlockManager:r,Toolbar:s}=this.Editor;e.lastInput!==void 0&&(_R.focus(e.lastInput,!1),r.mergeBlocks(e,n).then(()=>{s.close()}))}arrowRightAndDown(e){const n=_p.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===$e.TAB);if(this.Editor.UI.someToolbarOpened&&n)return;this.Editor.Toolbar.close();const{currentBlock:r}=this.Editor.BlockManager,s=(r?.currentInput!==void 0?Bf(r.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===$e.DOWN&&s){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(e.keyCode===$e.DOWN||e.keyCode===$e.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){e.preventDefault();return}bp(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(_p.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===$e.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const{currentBlock:n}=this.Editor.BlockManager,r=(n?.currentInput!==void 0?Lf(n.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===$e.UP&&r){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(e.keyCode===$e.UP||e.keyCode===$e.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){e.preventDefault();return}bp(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const n=e.keyCode===$e.ENTER&&this.Editor.Toolbar.toolbox.opened,r=e.keyCode===$e.ENTER&&this.Editor.BlockSettings.opened,s=e.keyCode===$e.ENTER&&this.Editor.InlineToolbar.opened,o=e.keyCode===$e.TAB;return!(e.shiftKey||o||n||r||s)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}let Lv=class{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return qP(this.workingArea.children)}static set(e,n,r){return isNaN(Number(n))?(Reflect.set(e,n,r),!0):(e.insert(+n,r),!0)}static get(e,n){return isNaN(Number(n))?Reflect.get(e,n):e.get(+n)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,n){const r=this.blocks[n];me.swap(this.blocks[e].holder,r.holder),this.blocks[n]=this.blocks[e],this.blocks[e]=r}move(e,n){const r=this.blocks.splice(n,1)[0],s=e-1,o=Math.max(0,s),i=this.blocks[o];e>0?this.insertToDOM(r,"afterend",i):this.insertToDOM(r,"beforebegin",i),this.blocks.splice(e,0,r);const l=this.composeBlockEvent("move",{fromIndex:n,toIndex:e});r.call(lo.MOVED,l)}insert(e,n,r=!1){if(!this.length){this.push(n);return}e>this.length&&(e=this.length),r&&(this.blocks[e].holder.remove(),this.blocks[e].call(lo.REMOVED));const s=r?1:0;if(this.blocks.splice(e,s,n),e>0){const o=this.blocks[e-1];this.insertToDOM(n,"afterend",o)}else{const o=this.blocks[e+1];o?this.insertToDOM(n,"beforebegin",o):this.insertToDOM(n)}}replace(e,n){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(n.holder),this.blocks[e]=n}insertMany(e,n){const r=new DocumentFragment;for(const s of e)r.appendChild(s.holder);if(this.length>0){if(n>0){const s=Math.min(n-1,this.length-1);this.blocks[s].holder.after(r)}else n===0&&this.workingArea.prepend(r);this.blocks.splice(n,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(r);e.forEach(s=>s.call(lo.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(lo.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(lo.REMOVED)),this.blocks.length=0}insertAfter(e,n){const r=this.blocks.indexOf(e);this.insert(r+1,n)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,n,r){n?r.holder.insertAdjacentElement(n,e.holder):this.workingArea.appendChild(e.holder),e.call(lo.RENDERED)}composeBlockEvent(e,n){return new CustomEvent(e,{detail:n})}};const iE="block-removed",aE="block-added",rJ="block-moved",lE="block-changed";class sJ{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((n,r)=>{this.completed=this.completed.then(e).then(n).catch(r)})}}class oJ extends nt{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new Lv(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:Lv.set,get:Lv.get}),this.listeners.on(document,"copy",n=>this.Editor.BlockEvents.handleCommandC(n))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:n={},id:r=void 0,tunes:s={}}){const o=this.Editor.ReadOnly.isEnabled,i=this.Editor.Tools.blockTools.get(e),l=new uo({id:r,data:n,tool:i,api:this.Editor.API,readOnly:o,tunesData:s},this.eventsDispatcher);return o||window.requestIdleCallback(()=>{this.bindBlockEvents(l)},{timeout:2e3}),l}insert({id:e=void 0,tool:n=this.config.defaultBlock,data:r={},index:s,needToFocus:o=!0,replace:i=!1,tunes:l={}}={}){let u=s;u===void 0&&(u=this.currentBlockIndex+(i?0:1));const h=this.composeBlock({id:e,tool:n,data:r,tunes:l});return i&&this.blockDidMutated(iE,this.getBlockByIndex(u),{index:u}),this._blocks.insert(u,h,i),this.blockDidMutated(aE,h,{index:u}),o?this.currentBlockIndex=u:u<=this.currentBlockIndex&&this.currentBlockIndex++,h}insertMany(e,n=0){this._blocks.insertMany(e,n)}async update(e,n,r){if(!n&&!r)return e;const s=await e.data,o=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},s,n??{}),tunes:r??e.tunes}),i=this.getBlockIndex(e);return this._blocks.replace(i,o),this.blockDidMutated(lE,o,{index:i}),o}replace(e,n,r){const s=this.getBlockIndex(e);return this.insert({tool:n,data:r,index:s,replace:!0})}paste(e,n,r=!1){const s=this.insert({tool:e,replace:r});try{window.requestIdleCallback(()=>{s.call(lo.ON_PASTE,n)})}catch(o){ct(`${e}: onPaste callback call is failed`,"error",o)}return s}insertDefaultBlockAtIndex(e,n=!1){const r=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=r,this.blockDidMutated(aE,r,{index:e}),n?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,r}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,n){let r;if(e.name===n.name&&e.mergeable){const s=await n.data;if($r(s)){console.error("Could not merge Block. Failed to extract original Block data.");return}const[o]=Nb([s],e.tool.sanitizeConfig);r=o}else if(e.mergeable&&kp(n,"export")&&kp(e,"import")){const s=await n.exportDataAsString(),o=Os(s,e.tool.sanitizeConfig);r=eE(o,e.tool.conversionConfig)}r!==void 0&&(await e.mergeWith(r),this.removeBlock(n),this.currentBlockIndex=this._blocks.indexOf(e))}removeBlock(e,n=!0){return new Promise(r=>{const s=this._blocks.indexOf(e);if(!this.validateIndex(s))throw new Error("Can't find a Block to remove");this._blocks.remove(s),e.destroy(),this.blockDidMutated(iE,e,{index:s}),this.currentBlockIndex>=s&&this.currentBlockIndex--,this.blocks.length?s===0&&(this.currentBlockIndex=0):(this.unsetCurrentBlock(),n&&this.insert()),r()})}removeSelectedBlocks(){let e;for(let n=this.blocks.length-1;n>=0;n--)this.blocks[n].selected&&(this.removeBlock(this.blocks[n]),e=n);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.unsetCurrentBlock(),this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),n=me.make("div");n.appendChild(e);const r={text:me.isEmpty(n)?"":n.innerHTML};return this.insert({data:r})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(n=>n.id===e)}getBlock(e){me.isElement(e)||(e=e.parentNode);const n=this._blocks.nodes,r=e.closest(`.${uo.CSS.wrapper}`),s=n.indexOf(r);if(s>=0)return this._blocks[s]}setCurrentBlockByChildNode(e){me.isElement(e)||(e=e.parentNode);const n=e.closest(`.${uo.CSS.wrapper}`);if(!n)return;const r=n.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(r!=null&&r.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(n),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){if(!e||!(e instanceof Node))return;me.isElement(e)||(e=e.parentNode);const n=e.closest(`.${uo.CSS.wrapper}`);return this.blocks.find(r=>r.holder===n)}swap(e,n){this._blocks.swap(e,n),this.currentBlockIndex=n}move(e,n=this.currentBlockIndex){if(isNaN(e)||isNaN(n)){ct("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(n)){ct("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,n),this.currentBlockIndex=e,this.blockDidMutated(rJ,this.currentBlock,{fromIndex:n,toIndex:e})}async convert(e,n,r){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const s=this.Editor.Tools.blockTools.get(n);if(!s)throw new Error(`Could not convert Block. Tool ${n} not found.`);const o=await e.exportDataAsString(),i=Os(o,s.sanitizeConfig);let l=eE(i,s.conversionConfig,s.settings);return r&&(l=Object.assign(l,r)),this.replace(e,s.name,l)}unsetCurrentBlock(){this.currentBlockIndex=-1}async clear(e=!1){const n=new sJ;[...this.blocks].forEach(r=>{n.add(async()=>{await this.removeBlock(r,!1)})}),await n.completed,this.unsetCurrentBlock(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:n}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",r=>{n.keydown(r)}),this.readOnlyMutableListeners.on(e.holder,"keyup",r=>{n.keyup(r)}),this.readOnlyMutableListeners.on(e.holder,"dragover",r=>{n.dragOver(r)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",r=>{n.dragLeave(r)}),e.on("didMutated",r=>this.blockDidMutated(lE,r,{index:this.getBlockIndex(r)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,n,r){const s=new CustomEvent(e,{detail:{target:new ao(n),...r}});return this.eventsDispatcher.emit(eR,{event:s}),n}}class iJ extends nt{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(n=>n.selected===!0)}set allBlocksSelected(e){const{BlockManager:n}=this.Editor;n.blocks.forEach(r=>{r.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(n=>n.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new Be,Ul.add({name:"CMD+A",handler:e=>{const{BlockManager:n,ReadOnly:r}=this.Editor;if(r.isEnabled){e.preventDefault(),this.selectAllBlocks();return}n.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){Be.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:n}=this.Editor;let r;isNaN(e)?r=n.currentBlock:r=n.getBlockByIndex(e),r.selected=!1,this.clearCache()}clearSelection(e,n=!1){const{BlockManager:r,Caret:s,RectangleSelection:o}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const i=e&&e instanceof KeyboardEvent,l=i&&YP(e.keyCode);if(this.anyBlockSelected&&i&&l&&!Be.isSelectionExists){const u=r.removeSelectedBlocks();r.insertDefaultBlockAtIndex(u,!0),s.setToBlock(r.currentBlock),bp(()=>{const h=e.key;s.insertContentAtCaretPosition(h.length>1?"":h)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||o.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}n&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const n=me.make("div");this.selectedBlocks.forEach(o=>{const i=Os(o.holder.innerHTML,this.sanitizerConfig),l=me.make("p");l.innerHTML=i,n.appendChild(l)});const r=Array.from(n.childNodes).map(o=>o.textContent).join(`

`),s=n.innerHTML;return e.clipboardData.setData("text/plain",r),e.clipboardData.setData("text/html",s),Promise.all(this.selectedBlocks.map(o=>o.save())).then(o=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(o))}catch{}})}selectBlockByIndex(e){const{BlockManager:n}=this.Editor,r=n.getBlockByIndex(e);r!==void 0&&this.selectBlock(r)}selectBlock(e){this.selection.save(),Be.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){Ul.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),me.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const n=this.Editor.BlockManager.getBlock(e.target),r=n.inputs;if(r.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(r.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(n),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),Be.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}let aJ=class Zy extends nt{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}setToBlock(e,n=this.positions.DEFAULT,r=0){var s;const{BlockManager:o,BlockSelection:i}=this.Editor;if(i.clearSelection(),!e.focusable){(s=window.getSelection())==null||s.removeAllRanges(),i.selectBlock(e),o.currentBlock=e;return}let l;switch(n){case this.positions.START:l=e.firstInput;break;case this.positions.END:l=e.lastInput;break;default:l=e.currentInput}if(!l)return;let u,h=r;if(n===this.positions.START)u=me.getDeepestNode(l,!1),h=0;else if(n===this.positions.END)u=me.getDeepestNode(l,!0),h=me.getContentLength(u);else{const{node:f,offset:m}=me.getNodeByOffset(l,r);f?(u=f,h=m):(u=me.getDeepestNode(l,!1),h=0)}this.set(u,h),o.setCurrentBlockByChildNode(e.holder),o.currentBlock.currentInput=l}setToInput(e,n=this.positions.DEFAULT,r=0){const{currentBlock:s}=this.Editor.BlockManager,o=me.getDeepestNode(e);switch(n){case this.positions.START:this.set(o,0);break;case this.positions.END:this.set(o,me.getContentLength(o));break;default:r&&this.set(o,r)}s.currentInput=e}set(e,n=0){const{top:r,bottom:s}=Be.setCursor(e,n),{innerHeight:o}=window;r<0?window.scrollBy(0,r-30):s>o&&window.scrollBy(0,s-o+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const n=this.Editor.BlockManager.insertAtEnd();this.setToBlock(n)}}extractFragmentFromCaretPosition(){const e=Be.get();if(e.rangeCount){const n=e.getRangeAt(0),r=this.Editor.BlockManager.currentBlock.currentInput;if(n.deleteContents(),r)if(me.isNativeInput(r)){const s=r,o=document.createDocumentFragment(),i=s.value.substring(0,s.selectionStart),l=s.value.substring(s.selectionStart);return o.textContent=l,s.value=i,o}else{const s=n.cloneRange();return s.selectNodeContents(r),s.setStart(n.endContainer,n.endOffset),s.extractContents()}}}navigateNext(e=!1){const{BlockManager:n}=this.Editor,{currentBlock:r,nextBlock:s}=n;if(r===void 0)return!1;const{nextInput:o,currentInput:i}=r,l=i!==void 0?Bf(i):void 0;let u=s;const h=e||l||!r.focusable;if(o&&h)return this.setToInput(o,this.positions.START),!0;if(u===null){if(r.tool.isDefault||!h)return!1;u=n.insertAtEnd()}return h?(this.setToBlock(u,this.positions.START),!0):!1}navigatePrevious(e=!1){const{currentBlock:n,previousBlock:r}=this.Editor.BlockManager;if(!n)return!1;const{previousInput:s,currentInput:o}=n,i=o!==void 0?Lf(o):void 0,l=e||i||!n.focusable;return s&&l?(this.setToInput(s,this.positions.END),!0):r!==null&&l?(this.setToBlock(r,this.positions.END),!0):!1}createShadow(e){const n=document.createElement("span");n.classList.add(Zy.CSS.shadowCaret),e.insertAdjacentElement("beforeend",n)}restoreCaret(e){const n=e.querySelector(`.${Zy.CSS.shadowCaret}`);if(!n)return;new Be().expandToTag(n);const r=document.createRange();r.selectNode(n),r.extractContents()}insertContentAtCaretPosition(e){const n=document.createDocumentFragment(),r=document.createElement("div"),s=Be.get(),o=Be.range;r.innerHTML=e,Array.from(r.childNodes).forEach(h=>n.appendChild(h)),n.childNodes.length===0&&n.appendChild(new Text);const i=n.lastChild;o.deleteContents(),o.insertNode(n);const l=document.createRange(),u=i.nodeType===Node.TEXT_NODE?i:i.firstChild;u!==null&&u.textContent!==null&&l.setStart(u,u.textContent.length),s.removeAllRanges(),s.addRange(l)}};class lJ extends nt{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:n,BlockSelection:r}=this.Editor;if(e.relatedTarget===null&&e.target===null)return;const s=n.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,o=n.getBlockByChildNode(e.target);if(!(!s||!o)&&o!==s){if(s===this.firstSelectedBlock){Be.get().removeAllRanges(),s.selected=!0,o.selected=!0,r.clearCache();return}if(o===this.firstSelectedBlock){s.selected=!1,o.selected=!1,r.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(s,o),this.lastSelectedBlock=o}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==qq.LEFT)return;const{BlockManager:n}=this.Editor;this.firstSelectedBlock=n.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock&&this.firstSelectedBlock!==this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:n,BlockSelection:r}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=n.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,r.clearCache(),Be.get().removeAllRanges());const s=n.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),o=n.blocks[s];o&&(this.lastSelectedBlock.selected!==o.selected?(o.selected=!0,r.clearCache()):(this.lastSelectedBlock.selected=!1,r.clearCache()),this.lastSelectedBlock=o,this.Editor.InlineToolbar.close(),o.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:n,BlockSelection:r,Caret:s}=this.Editor,o=n.blocks.indexOf(this.firstSelectedBlock),i=n.blocks.indexOf(this.lastSelectedBlock);if(r.anyBlockSelected&&o>-1&&i>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case $e.DOWN:case $e.RIGHT:s.setToBlock(n.blocks[Math.max(o,i)],s.positions.END);break;case $e.UP:case $e.LEFT:s.setToBlock(n.blocks[Math.min(o,i)],s.positions.START);break;default:s.setToBlock(n.blocks[Math.max(o,i)],s.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:n}=this.Editor;Be.isCollapsed||this.Editor.BlockSelection.clearSelection(e),n.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,n){const{BlockManager:r,BlockSelection:s}=this.Editor,o=r.blocks.indexOf(e),i=r.blocks.indexOf(n),l=e.selected!==n.selected;for(let u=Math.min(o,i);u<=Math.max(o,i);u++){const h=r.blocks[u];h!==this.firstSelectedBlock&&h!==(l?e:n)&&(r.blocks[u].selected=!r.blocks[u].selected,s.clearCache())}}}class cJ extends nt{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async n=>{await this.processDrop(n)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",n=>{this.processDragOver(n)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:n,Paste:r,Caret:s}=this.Editor;e.preventDefault(),n.blocks.forEach(i=>{i.dropTarget=!1}),Be.isAtEditor&&!Be.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const o=n.setCurrentBlockByChildNode(e.target);if(o)this.Editor.Caret.setToBlock(o,s.positions.END);else{const i=n.setCurrentBlockByChildNode(n.lastBlock.holder);this.Editor.Caret.setToBlock(i,s.positions.END)}await r.processDataTransfer(e.dataTransfer,!0)}processDragStart(){Be.isAtEditor&&!Be.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}}const dJ=180,uJ=400;class hJ extends nt{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=uJ,this.mutationObserver=new MutationObserver(r=>{this.redactorChanged(r)}),this.eventsDispatcher.on(eR,r=>{this.particularBlockChanged(r.event)}),this.eventsDispatcher.on(tR,()=>{this.disable()}),this.eventsDispatcher.on(nR,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!Mt(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let n;this.batchingOnChangeQueue.size===1?n=this.batchingOnChangeQueue.values().next().value:n=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,n),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(Ky,{mutations:e})}}const XR=class GR extends nt{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{const n=e.create({},{},!1);if(e.pasteConfig===!1){this.exceptionList.push(e.name);return}if(!Mt(n.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(n){ct(`Paste handling for ${e.name} Tool hasn't been set up because of the error`,"warn",n)}},this.handlePasteEvent=async e=>{const{BlockManager:n,Toolbar:r}=this.Editor,s=n.setCurrentBlockByChildNode(e.target);!s||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||s&&this.exceptionList.includes(s.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),r.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e,n=!1){const{Tools:r}=this.Editor,s=e.types;if((s.includes?s.includes("Files"):s.contains("Files"))&&!$r(this.toolsFiles)){await this.processFiles(e.files);return}const o=e.getData(this.MIME_TYPE),i=e.getData("text/plain");let l=e.getData("text/html");if(o)try{this.insertEditorJSData(JSON.parse(o));return}catch{}n&&i.trim()&&l.trim()&&(l="<p>"+(l.trim()?l:i)+"</p>");const u=Object.keys(this.toolsTags).reduce((m,x)=>(m[x.toLowerCase()]=this.toolsTags[x].sanitizationConfig??{},m),{}),h=Object.assign({},u,r.getAllInlineToolsSanitizeConfig(),{br:{}}),f=Os(l,h);!f.trim()||f.trim()===i||!me.isHTMLString(f)?await this.processText(i):await this.processText(f,!0)}async processText(e,n=!1){const{Caret:r,BlockManager:s}=this.Editor,o=n?this.processHTML(e):this.processPlain(e);if(!o.length)return;if(o.length===1){o[0].isBlock?this.processSingleBlock(o.pop()):this.processInlinePaste(o.pop());return}const i=s.currentBlock&&s.currentBlock.tool.isDefault&&s.currentBlock.isEmpty;o.map(async(l,u)=>this.insertBlock(l,u===0&&i)),s.currentBlock&&r.setToBlock(s.currentBlock,r.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const e=this.Editor.Tools.blockTools;Array.from(e.values()).forEach(this.processTool)}collectTagNames(e){return bo(e)?[e]:vn(e)?Object.keys(e):[]}getTagsConfig(e){if(e.pasteConfig===!1)return;const n=e.pasteConfig.tags||[],r=[];n.forEach(s=>{const o=this.collectTagNames(s);r.push(...o),o.forEach(i=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,i)){ct(`Paste handler for ${e.name} Tool on ${i} tag is skipped because it is already used by ${this.toolsTags[i].tool.name} Tool.`,"warn");return}const l=vn(s)?s[i]:null;this.toolsTags[i.toUpperCase()]={tool:e,sanitizationConfig:l}})}),this.tagsByTool[e.name]=r.map(s=>s.toUpperCase())}getFilesConfig(e){if(e.pasteConfig===!1)return;const{files:n={}}=e.pasteConfig;let{extensions:r,mimeTypes:s}=n;!r&&!s||(r&&!Array.isArray(r)&&(ct(`extensions property of the onDrop config for ${e.name} Tool should be an array`),r=[]),s&&!Array.isArray(s)&&(ct(`mimeTypes property of the onDrop config for ${e.name} Tool should be an array`),s=[]),s&&(s=s.filter(o=>Qq(o)?!0:(ct(`MIME type value ${o} for the ${e.name} Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[e.name]={extensions:r||[],mimeTypes:s||[]})}getPatternsConfig(e){e.pasteConfig===!1||!e.pasteConfig.patterns||$r(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach(([n,r])=>{r instanceof RegExp||ct(`Pattern ${r} for ${e.name} Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:n,pattern:r,tool:e})})}isNativeBehaviour(e){return me.isNativeInput(e)}async processFiles(e){const{BlockManager:n}=this.Editor;let r;r=await Promise.all(Array.from(e).map(o=>this.processFile(o))),r=r.filter(o=>!!o);const s=n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty;r.forEach((o,i)=>{n.paste(o.type,o.event,i===0&&s)})}async processFile(e){const n=Jq(e),r=Object.entries(this.toolsFiles).find(([o,{mimeTypes:i,extensions:l}])=>{const[u,h]=e.type.split("/"),f=l.find(x=>x.toLowerCase()===n.toLowerCase()),m=i.find(x=>{const[w,v]=x.split("/");return w===u&&(v===h||v==="*")});return!!f||!!m});if(!r)return;const[s]=r;return{event:this.composePasteEvent("file",{file:e}),type:s}}processHTML(e){const{Tools:n}=this.Editor,r=me.make("DIV");return r.innerHTML=e,this.getNodes(r).map(s=>{let o,i=n.defaultTool,l=!1;switch(s.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:o=me.make("div"),o.appendChild(s);break;case Node.ELEMENT_NODE:o=s,l=!0,this.toolsTags[o.tagName]&&(i=this.toolsTags[o.tagName].tool);break}const{tags:u}=i.pasteConfig||{tags:[]},h=u.reduce((x,w)=>(this.collectTagNames(w).forEach(v=>{const y=vn(w)?w[v]:null;x[v.toLowerCase()]=y||{}}),x),{}),f=Object.assign({},h,i.baseSanitizeConfig);if(o.tagName.toLowerCase()==="table"){const x=Os(o.outerHTML,f);o=me.make("div",void 0,{innerHTML:x}).firstChild}else o.innerHTML=Os(o.innerHTML,f);const m=this.composePasteEvent("tag",{data:o});return{content:o,isBlock:l,tool:i.name,event:m}}).filter(s=>{const o=me.isEmpty(s.content),i=me.isSingleTag(s.content);return!o||i})}processPlain(e){const{defaultBlock:n}=this.config;if(!e)return[];const r=n;return e.split(/\r?\n/).filter(s=>s.trim()).map(s=>{const o=me.make("div");o.textContent=s;const i=this.composePasteEvent("tag",{data:o});return{content:o,tool:r,isBlock:!1,event:i}})}async processSingleBlock(e){const{Caret:n,BlockManager:r}=this.Editor,{currentBlock:s}=r;if(!s||e.tool!==s.name||!me.containsOnlyInlineElements(e.content.innerHTML)){this.insertBlock(e,s?.tool.isDefault&&s.isEmpty);return}n.insertContentAtCaretPosition(e.content.innerHTML)}async processInlinePaste(e){const{BlockManager:n,Caret:r}=this.Editor,{content:s}=e;if(n.currentBlock&&n.currentBlock.tool.isDefault&&s.textContent.length<GR.PATTERN_PROCESSING_MAX_LENGTH){const o=await this.processPattern(s.textContent);if(o){const i=n.currentBlock&&n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty,l=n.paste(o.tool,o.event,i);r.setToBlock(l,r.positions.END);return}}if(n.currentBlock&&n.currentBlock.currentInput){const o=n.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,Os(s.innerHTML,o))}else this.insertBlock(e)}async processPattern(e){const n=this.toolsPatterns.find(r=>{const s=r.pattern.exec(e);return s?e===s.shift():!1});return n?{event:this.composePasteEvent("pattern",{key:n.key,data:e}),tool:n.tool.name}:void 0}insertBlock(e,n=!1){const{BlockManager:r,Caret:s}=this.Editor,{currentBlock:o}=r;let i;if(n&&o&&o.isEmpty){i=r.paste(e.tool,e.event,!0),s.setToBlock(i,s.positions.END);return}i=r.paste(e.tool,e.event),s.setToBlock(i,s.positions.END)}insertEditorJSData(e){const{BlockManager:n,Caret:r,Tools:s}=this.Editor;Nb(e,o=>s.blockTools.get(o).sanitizeConfig).forEach(({tool:o,data:i},l)=>{let u=!1;l===0&&(u=n.currentBlock&&n.currentBlock.tool.isDefault&&n.currentBlock.isEmpty);const h=n.insert({tool:o,data:i,replace:u});r.setToBlock(h,r.positions.END)})}processElementNode(e,n,r){const s=Object.keys(this.toolsTags),o=e,{tool:i}=this.toolsTags[o.tagName]||{},l=this.tagsByTool[i?.name]||[],u=s.includes(o.tagName),h=me.blockElements.includes(o.tagName.toLowerCase()),f=Array.from(o.children).some(({tagName:x})=>s.includes(x)&&!l.includes(x)),m=Array.from(o.children).some(({tagName:x})=>me.blockElements.includes(x.toLowerCase()));if(!h&&!u&&!f)return r.appendChild(o),[...n,r];if(u&&!f||h&&!m&&!f)return[...n,r,o]}getNodes(e){const n=Array.from(e.childNodes);let r;const s=(o,i)=>{if(me.isEmpty(i)&&!me.isSingleTag(i))return o;const l=o[o.length-1];let u=new DocumentFragment;switch(l&&me.isFragment(l)&&(u=o.pop()),i.nodeType){case Node.ELEMENT_NODE:if(r=this.processElementNode(i,o,u),r)return r;break;case Node.TEXT_NODE:return u.appendChild(i),[...o,u];default:return[...o,u]}return[...o,...Array.from(i.childNodes).reduce(s,[])]};return n.reduce(s,[])}composePasteEvent(e,n){return new CustomEvent(e,{detail:n})}};XR.PATTERN_PROCESSING_MAX_LENGTH=450;let fJ=XR;class pJ extends nt{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:n}=e,r=[];Array.from(n.entries()).forEach(([s,o])=>{o.isReadOnlySupported||r.push(s)}),this.toolsDontSupportReadOnly=r,this.config.readOnly&&r.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly,!0)}async toggle(e=!this.readOnlyEnabled,n=!1){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const r=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const o in this.Editor)this.Editor[o].toggleReadOnly&&this.Editor[o].toggleReadOnly(e);if(r===e)return this.readOnlyEnabled;if(n)return this.readOnlyEnabled;this.Editor.ModificationsObserver.disable();const s=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(s.blocks),this.Editor.ModificationsObserver.enable(),this.readOnlyEnabled}throwCriticalError(){throw new QP(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}let mJ=class $f extends nt{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,n){const r=document.elementFromPoint(e-window.pageXOffset,n-window.pageYOffset);r.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const s=[`.${uo.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],o=r.closest("."+this.Editor.UI.CSS.editorWrapper),i=s.some(l=>!!r.closest(l));!o||i||(this.mousedown=!0,this.startX=e,this.startY=n)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",n=>{this.processMouseDown(n)},!1),this.listeners.on(document.body,"mousemove",Wy(n=>{this.processMouseMove(n)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",Wy(n=>{this.processScroll(n)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(me.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,n=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),r=me.make("div",$f.CSS.overlay,{}),s=me.make("div",$f.CSS.overlayContainer,{}),o=me.make("div",$f.CSS.rect,{});return s.appendChild(o),r.appendChild(s),n.appendChild(r),this.overlayRectangle=o,{container:n,overlay:r}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const n=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-n,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:n,leftPos:r,index:s}=this.genInfoForMouseSelection(),o=this.startX>n&&this.mouseX>n,i=this.startX<r&&this.mouseX<r;this.rectCrossesBlocks=!(o||i),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),s!==void 0&&(this.trySelectNextBlock(s),this.inverseSelection(),Be.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const n of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(n);if(!this.rectCrossesBlocks&&e)for(const n of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(n)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,n=this.mouseY-window.pageYOffset,r=document.elementFromPoint(e,n),s=this.Editor.BlockManager.getBlockByChildNode(r);let o;s!==void 0&&(o=this.Editor.BlockManager.blocks.findIndex(f=>f.holder===s.holder));const i=this.Editor.BlockManager.lastBlock.holder.querySelector("."+uo.CSS.content),l=Number.parseInt(window.getComputedStyle(i).width,10)/2,u=e-l,h=e+l;return{index:o,leftPos:u,rightPos:h}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const n=this.stackOfSelected[this.stackOfSelected.length-1]===e,r=this.stackOfSelected.length,s=1,o=-1,i=0;if(n)return;const l=this.stackOfSelected[r-1]-this.stackOfSelected[r-2]>0;let u=i;r>1&&(u=l?s:o);const h=e>this.stackOfSelected[r-1]&&u===s,f=e<this.stackOfSelected[r-1]&&u===o,m=!(h||f||u===i);if(!m&&(e>this.stackOfSelected[r-1]||this.stackOfSelected[r-1]===void 0)){let v=this.stackOfSelected[r-1]+1||e;for(v;v<=e;v++)this.addBlockInSelection(v);return}if(!m&&e<this.stackOfSelected[r-1]){for(let v=this.stackOfSelected[r-1]-1;v>=e;v--)this.addBlockInSelection(v);return}if(!m)return;let x=r-1,w;for(e>this.stackOfSelected[r-1]?w=()=>e>this.stackOfSelected[x]:w=()=>e<this.stackOfSelected[x];w();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[x]),this.stackOfSelected.pop(),x--}};class gJ extends nt{async render(e){return new Promise(n=>{const{Tools:r,BlockManager:s}=this.Editor;if(e.length===0)s.insert();else{const o=e.map(({type:i,data:l,tunes:u,id:h})=>{r.available.has(i)===!1&&(Dr(`Tool ${i} is not found. Check 'tools' property at the Editor.js config.`,"warn"),l=this.composeStubDataForTool(i,l,h),i=r.stubTool);let f;try{f=s.composeBlock({id:h,tool:i,data:l,tunes:u})}catch(m){ct(`Block ${i} skipped because of plugins error`,"error",{data:l,error:m}),l=this.composeStubDataForTool(i,l,h),i=r.stubTool,f=s.composeBlock({id:h,tool:i,data:l,tunes:u})}return f});s.insertMany(o)}window.requestIdleCallback(()=>{n()},{timeout:2e3})})}composeStubDataForTool(e,n,r){const{Tools:s}=this.Editor;let o=e;if(s.unavailable.has(e)){const i=s.unavailable.get(e).toolbox;i!==void 0&&i[0].title!==void 0&&(o=i[0].title)}return{savedData:{id:r,type:e,data:n},title:o}}}class xJ extends nt{async save(){const{BlockManager:e,Tools:n}=this.Editor,r=e.blocks,s=[];try{r.forEach(l=>{s.push(this.getSavedData(l))});const o=await Promise.all(s),i=await Nb(o,l=>n.blockTools.get(l).sanitizeConfig);return this.makeOutput(i)}catch(o){Dr("Saving failed due to the Error %o","error",o)}}async getSavedData(e){const n=await e.save(),r=n&&await e.validate(n.data);return{...n,isValid:r}}makeOutput(e){const n=[];return e.forEach(({id:r,tool:s,data:o,tunes:i,isValid:l})=>{if(!l){ct(`Block ${s} skipped because saved data is invalid`);return}if(s===this.Editor.Tools.stubTool){n.push(o);return}const u={id:r,type:s,data:o,...!$r(i)&&{tunes:i}};n.push(u)}),{time:+new Date,blocks:n,version:"2.31.0"}}}(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const vJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function yJ(t){const e=document.createElement("div");e.innerHTML=t.trim();const n=document.createDocumentFragment();return n.append(...Array.from(e.childNodes)),n}/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class bw{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:n,api:r,readOnly:s}){this.api=r,this.readOnly=s,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=n.placeholder?n.placeholder:bw.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=n.preserveBlank??!1}onKeyUp(e){if(e.code!=="Backspace"&&e.code!=="Delete"||!this._element)return;const{textContent:n}=this._element;n===""&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const n=yJ(e.text);this._element.appendChild(n),this._element.normalize()}validate(e){return!(e.text.trim()===""&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const n={text:e.detail.data.innerHTML};this._data=n,window.requestAnimationFrame(()=>{this._element&&(this._element.innerHTML=this._data.text||"")})}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:vJ,title:"Text"}}}class ww{constructor(){this.commandName="bold"}static get sanitize(){return{b:{}}}render(){return{icon:VK,name:"bold",onActivate:()=>{document.execCommand(this.commandName)},isActive:()=>document.queryCommandState(this.commandName)}}get shortcut(){return"CMD+B"}}ww.isInline=!0;ww.title="Bold";class kw{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=QK,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}kw.isInline=!0;kw.title="Italic";class Sw{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new Be}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=tE,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.enterKeyHint="done",this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const n=this.selection.findParentTag("A");if(n){this.selection.expandToTag(n),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=nX,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const n=e.getAttribute("href");this.nodes.input.value=n!=="null"?n:"",this.selection.save()}else this.nodes.button.innerHTML=tE,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const n=new Be;n.save(),this.selection.restore(),this.selection.removeFakeBackground(),n.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let n=this.nodes.input.value||"";if(!n.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(n)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),ct("Incorrect Link pasted","warn",n);return}n=this.prepareLink(n),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(n),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const n=/^\/[^/\s]/.test(e),r=e.substring(0,1)==="#",s=/^\/\/[^/\s]/.test(e);return!n&&!r&&!s&&(e="http://"+e),e}insertLink(e){const n=this.selection.findParentTag("A");n&&this.selection.expandToTag(n),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}Sw.isInline=!0;Sw.title="Link";let JR=class{constructor({api:e}){this.i18nAPI=e.i18n,this.blocksAPI=e.blocks,this.selectionAPI=e.selection,this.toolsAPI=e.tools,this.caretAPI=e.caret}async render(){const e=Be.get(),n=this.blocksAPI.getBlockByElement(e.anchorNode);if(n===void 0)return[];const r=this.toolsAPI.getBlockTools(),s=await sR(n,r);if(s.length===0)return[];const o=s.reduce((h,f)=>{var m;return(m=f.toolbox)==null||m.forEach(x=>{h.push({icon:x.icon,title:Ln.t(xr.toolNames,x.title),name:f.name,closeOnActivate:!0,onActivate:async()=>{const w=await this.blocksAPI.convert(n.id,f.name,x.data);this.caretAPI.setToBlock(w,"end")}})}),h},[]),i=await n.getActiveToolboxEntry(),l=i!==void 0?i.icon:uR,u=!dc();return{icon:l,name:"convert-to",hint:{title:this.i18nAPI.t("Convert to")},children:{searchable:u,items:o,onOpen:()=>{u&&(this.selectionAPI.setFakeBackground(),this.selectionAPI.save())},onClose:()=>{u&&(this.selectionAPI.restore(),this.selectionAPI.removeFakeBackground())}}}}};JR.isInline=!0;let QR=class{constructor({data:e,api:n}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=n,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=me.make("div",this.CSS.wrapper),n=rX,r=me.make("div",this.CSS.info),s=me.make("div",this.CSS.title,{textContent:this.title}),o=me.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=n,r.appendChild(s),r.appendChild(o),e.appendChild(r),e}};QR.isReadOnlySupported=!0;class bJ extends Rb{constructor(){super(...arguments),this.type=ca.Inline}get title(){return this.constructable[Np.Title]}create(){return new this.constructable({api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[Np.IsReadOnlySupported]??!1}}class wJ extends Rb{constructor(){super(...arguments),this.type=ca.Tune}create(e,n){return new this.constructable({api:this.api,config:this.settings,block:n,data:e})}}let _s=class yl extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,n])=>n.isBlock());return new yl(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,n])=>n.isInline());return new yl(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,n])=>n.isTune());return new yl(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,n])=>n.isInternal);return new yl(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,n])=>!n.isInternal);return new yl(e)}};var kJ=Object.defineProperty,SJ=Object.getOwnPropertyDescriptor,ZR=(t,e,n,r)=>{for(var s=SJ(e,n),o=t.length-1,i;o>=0;o--)(i=t[o])&&(s=i(e,n,s)||s);return s&&kJ(e,n,s),s};class Cw extends Rb{constructor(){super(...arguments),this.type=ca.Block,this.inlineTools=new _s,this.tunes=new _s}create(e,n,r){return new this.constructable({data:e,block:n,readOnly:r,api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[vl.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[vl.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[vl.Toolbox],n=this.config[Df.Toolbox];if(!$r(e)&&n!==!1)return n?Array.isArray(e)?Array.isArray(n)?n.map((r,s)=>{const o=e[s];return o?{...o,...r}:r}):[n]:Array.isArray(n)?n:[{...e,...n}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[vl.ConversionConfig]}get enabledInlineTools(){return this.config[Df.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[Df.EnabledBlockTunes]}get pasteConfig(){return this.constructable[vl.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,n=this.baseSanitizeConfig;if($r(e))return n;const r={};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const o=e[s];vn(o)?r[s]=Object.assign({},n,o):r[s]=o}return r}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(n=>Object.assign(e,n.sanitizeConfig)),Array.from(this.tunes.values()).forEach(n=>Object.assign(e,n.sanitizeConfig)),e}}ZR([cc],Cw.prototype,"sanitizeConfig");ZR([cc],Cw.prototype,"baseSanitizeConfig");class CJ{constructor(e,n,r){this.api=r,this.config=e,this.editorConfig=n}get(e){const{class:n,isInternal:r=!1,...s}=this.config[e],o=this.getConstructor(n),i=n[Jy.IsTune];return new o({name:e,constructable:n,config:s,api:this.api.getMethodsForTool(e,i),isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:r})}getConstructor(e){switch(!0){case e[Np.IsInline]:return bJ;case e[Jy.IsTune]:return wJ;default:return Cw}}}let eA=class{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:YK,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(e+1);if(!n)throw new Error("Unable to move Block down since it is already the last");const r=n.holder,s=r.getBoundingClientRect();let o=Math.abs(window.innerHeight-r.offsetHeight);s.top<window.innerHeight&&(o=window.scrollY+r.offsetHeight),window.scrollTo(0,o),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}};eA.isTune=!0;let tA=class{constructor({api:e}){this.api=e}render(){return{icon:GK,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}};tA.isTune=!0;let nA=class{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:XK,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(e),r=this.api.blocks.getBlockByIndex(e-1);if(e===0||!n||!r)throw new Error("Unable to move Block up since it is already the first");const s=n.holder,o=r.holder,i=s.getBoundingClientRect(),l=o.getBoundingClientRect();let u;l.top>0?u=Math.abs(i.top)-Math.abs(l.top):u=Math.abs(i.top)+l.height,window.scrollBy(0,-1*u),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}};nA.isTune=!0;var _J=Object.defineProperty,EJ=Object.getOwnPropertyDescriptor,NJ=(t,e,n,r)=>{for(var s=EJ(e,n),o=t.length-1,i;o>=0;o--)(i=t[o])&&(s=i(e,n,s)||s);return s&&_J(e,n,s),s};let rA=class extends nt{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new _s,this.toolsUnavailable=new _s}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=Vy({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new CJ(e,this.config,this.Editor.API);const n=this.getListOfPrepareFunctions(e);if(n.length===0)return Promise.resolve();await Gq(n,r=>{this.toolPrepareMethodSuccess(r)},r=>{this.toolPrepareMethodFallback(r)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(n=>{Object.assign(e,n.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{Mt(e.reset)&&await e.reset()})}get internalTools(){return{convertTo:{class:JR,isInternal:!0},link:{class:Sw,isInternal:!0},bold:{class:ww,isInternal:!0},italic:{class:kw,isInternal:!0},paragraph:{class:bw,inlineToolbar:!0,isInternal:!0},stub:{class:QR,isInternal:!0},moveUp:{class:nA,isInternal:!0},delete:{class:tA,isInternal:!0},moveDown:{class:eA,isInternal:!0}}}toolPrepareMethodSuccess(e){const n=this.factory.get(e.toolName);if(n.isInline()){const r=["render"].filter(s=>!n.create()[s]);if(r.length){ct(`Incorrect Inline Tool: ${n.name}. Some of required methods is not implemented %o`,"warn",r),this.toolsUnavailable.set(n.name,n);return}}this.toolsAvailable.set(n.name,n)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const n=[];return Object.entries(e).forEach(([r,s])=>{n.push({function:Mt(s.class.prepare)?s.class.prepare:()=>{},data:{toolName:r,config:s.config}})}),n}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new _s(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(n=>[n,this.inlineTools.get(n)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new _s(["convertTo",...e.enabledInlineTools].map(n=>[n,this.inlineTools.get(n)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const n=new _s(e.enabledBlockTunes.map(r=>[r,this.blockTunes.get(r)]));e.tunes=new _s([...n,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const n=new _s(this.config.tunes.map(r=>[r,this.blockTunes.get(r)]));e.tunes=new _s([...n,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const n=this.config.tools[e];if(!Mt(n)&&!Mt(n.class))throw Error(`Tool ${e} must be a constructor function or an object with function in the class property`)}}prepareConfig(){const e={};for(const n in this.config.tools)vn(this.config.tools[n])?e[n]=this.config.tools[n]:e[n]={class:this.config.tools[n]};return e}};NJ([cc],rA.prototype,"getAllInlineToolsSanitizeConfig");const jJ=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;--color-background-icon-active: rgba(56, 138, 229, .1);--color-text-icon-active: #388AE5;--color-text-primary: black;position:absolute;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3;opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{color:var(--color-text-primary);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:0;border-radius:4px;line-height:normal;height:100%;padding:0;width:28px;background-color:transparent;cursor:pointer}@media (max-width: 650px){.ce-inline-tool{width:36px;height:36px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#f8f8f8}}.ce-inline-tool svg{display:block;width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:4px 8px;font-size:14px;line-height:22px;outline:none;margin:0;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-inline-tool--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #EFF0F1;--color-shadow: rgba(13, 20, 33, .1);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #F8F8F8;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;--popover-top: calc(100% + var(--offset-from-target));--popover-left: 0;--nested-popover-overlap: 4px;--icon-size: 20px;--item-padding: 3px;--item-height: calc(var(--icon-size) + 2 * var(--item-padding))}.ce-popover__container{min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0px 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:var(--popover-left);top:var(--popover-top);background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened>.ce-popover__container{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened>.ce-popover__container{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover--open-top .ce-popover__container{--popover-top: calc(-1 * (var(--offset-from-target) + var(--popover-height)))}.ce-popover--open-left .ce-popover__container{--popover-left: calc(-1 * var(--width) + 100%)}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}@media (max-width: 650px){.ce-popover .ce-popover__container{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}}.ce-popover__search{margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover--nested .ce-popover__container{--popover-left: calc(var(--nesting-level) * (var(--width) - var(--nested-popover-overlap)));top:calc(var(--trigger-item-top) - var(--nested-popover-overlap));position:absolute}.ce-popover--open-top.ce-popover--nested .ce-popover__container{top:calc(var(--trigger-item-top) - var(--popover-height) + var(--item-height) + var(--offset-from-target) + var(--nested-popover-overlap))}.ce-popover--open-left .ce-popover--nested .ce-popover__container{--popover-left: calc(-1 * (var(--nesting-level) + 1) * var(--width) + 100%)}.ce-popover-item-separator{padding:4px 3px}.ce-popover-item-separator--hidden{display:none}.ce-popover-item-separator__line{height:1px;background:var(--color-border);width:100%}.ce-popover-item-html--hidden{display:none}.ce-popover-item{--border-radius: 6px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--item-padding);color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;background:transparent}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover-item__icon--tool{margin-right:4px}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-right:auto}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title,.ce-popover-item--confirmation .ce-popover-item__icon{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}.ce-popover-header{margin-bottom:8px;margin-top:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover-header__text{font-size:18px;font-weight:600}.ce-popover-header__back-button{border:0;background:transparent;width:36px;height:36px;color:var(--color-text-primary)}.ce-popover-header__back-button svg{display:block;width:28px;height:28px}.ce-popover--inline{--height: 38px;--height-mobile: 46px;--container-padding: 4px;position:relative}.ce-popover--inline .ce-popover__custom-content{margin-bottom:0}.ce-popover--inline .ce-popover__items{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-popover--inline .ce-popover__container{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:var(--container-padding);height:var(--height);top:0;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;width:-webkit-max-content;width:-moz-max-content;width:max-content;-webkit-animation:none;animation:none}@media (max-width: 650px){.ce-popover--inline .ce-popover__container{height:var(--height-mobile);position:absolute}}.ce-popover--inline .ce-popover-item-separator{padding:0 4px}.ce-popover--inline .ce-popover-item-separator__line{height:100%;width:1px}.ce-popover--inline .ce-popover-item{border-radius:4px;padding:4px}.ce-popover--inline .ce-popover-item__icon--tool{-webkit-box-shadow:none;box-shadow:none;background:transparent;margin-right:0}.ce-popover--inline .ce-popover-item__icon{width:auto;width:initial;height:auto;height:initial}.ce-popover--inline .ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover--inline .ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover--inline .ce-popover-item:not(:last-of-type){margin-bottom:0;margin-bottom:initial}.ce-popover--inline .ce-popover-item-html{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover--inline .ce-popover-item__icon--chevron-right{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{--offset: 3px;left:0;top:calc(var(--height) + var(--offset))}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{top:calc(var(--height-mobile) + var(--offset))}}.ce-popover--inline .ce-popover--nested .ce-popover__container{min-width:var(--width);width:var(--width);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:6px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.ce-popover--inline .ce-popover--nested .ce-popover__items{display:block;width:100%}.ce-popover--inline .ce-popover--nested .ce-popover-item{border-radius:6px;padding:3px}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested .ce-popover-item{padding:4px}}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon--tool{margin-right:4px}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon{width:26px;height:26px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator{padding:4px 3px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator__line{width:100%;height:1px}.codex-editor [data-placeholder]:empty:before,.codex-editor [data-placeholder][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text;content:attr(data-placeholder)}.codex-editor [data-placeholder-active]:empty:before,.codex-editor [data-placeholder-active][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text}.codex-editor [data-placeholder-active]:empty:focus:before,.codex-editor [data-placeholder-active][data-empty=true]:focus:before{content:attr(data-placeholder-active)}
`;class TJ extends nt{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=null,this.resizeDebouncer=Q2(()=>{this.windowResize()},200),this.selectionChangeDebounced=Q2(()=>{this.selectionChanged()},dJ),this.documentTouchedListener=e=>{this.documentTouched(e)}}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache!==null)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${uo.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.setIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.unbindReadOnlySensitiveListeners():window.requestIdleCallback(()=>{this.bindReadOnlySensitiveListeners()},{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:n,InlineToolbar:r}=this.Editor;return!!(n.opened||r.opened||e.toolbox.opened)}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,n])=>n.flipper instanceof _p).some(([e,n])=>n.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML="",this.unbindReadOnlyInsensitiveListeners()}closeAllToolbars(){const{Toolbar:e,BlockSettings:n,InlineToolbar:r}=this.Editor;n.close(),r.close(),e.toolbox.close()}setIsMobile(){const e=window.innerWidth<KP;e!==this.isMobile&&this.eventsDispatcher.emit(Yd,{isEnabled:this.isMobile}),this.isMobile=e}make(){this.nodes.holder=me.getHolder(this.config.holder),this.nodes.wrapper=me.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=me.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper),this.bindReadOnlyInsensitiveListeners()}loadStyles(){const e="editor-js-styles";if(me.get(e))return;const n=me.make("style",null,{id:e,textContent:jJ.toString()});this.config.style&&!$r(this.config.style)&&this.config.style.nonce&&n.setAttribute("nonce",this.config.style.nonce),me.prepend(document.head,n)}bindReadOnlyInsensitiveListeners(){this.listeners.on(document,"selectionchange",this.selectionChangeDebounced),this.listeners.on(window,"resize",this.resizeDebouncer,{passive:!0}),this.listeners.on(this.nodes.redactor,"mousedown",this.documentTouchedListener,{capture:!0,passive:!0}),this.listeners.on(this.nodes.redactor,"touchstart",this.documentTouchedListener,{capture:!0,passive:!0})}unbindReadOnlyInsensitiveListeners(){this.listeners.off(document,"selectionchange",this.selectionChangeDebounced),this.listeners.off(window,"resize",this.resizeDebouncer),this.listeners.off(this.nodes.redactor,"mousedown",this.documentTouchedListener),this.listeners.off(this.nodes.redactor,"touchstart",this.documentTouchedListener)}bindReadOnlySensitiveListeners(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",e=>{this.redactorClicked(e)},!1),this.readOnlyMutableListeners.on(document,"keydown",e=>{this.documentKeydown(e)},!0),this.readOnlyMutableListeners.on(document,"mousedown",e=>{this.documentClicked(e)},!0),this.watchBlockHoveredEvents(),this.enableInputsEmptyMark()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",Wy(n=>{const r=n.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||r&&e!==r&&(e=r,this.eventsDispatcher.emit(wR,{block:this.Editor.BlockManager.getBlockByChildNode(r)}))},20),{passive:!0})}unbindReadOnlySensitiveListeners(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.setIsMobile()}documentKeydown(e){switch(e.keyCode){case $e.ENTER:this.enterPressed(e);break;case $e.BACKSPACE:case $e.DELETE:this.backspacePressed(e);break;case $e.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:n}=this.Editor.BlockManager,r=e.target.closest(`.${this.CSS.editorWrapper}`),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(n!==void 0&&r===null){this.Editor.BlockEvents.keydown(e);return}r||n&&s||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:n,BlockSelection:r,Caret:s}=this.Editor;if(r.anyBlockSelected&&!Be.isSelectionExists){const o=n.removeSelectedBlocks(),i=n.insertDefaultBlockAtIndex(o,!0);s.setToBlock(i,s.positions.START),r.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:n,BlockSelection:r}=this.Editor;if(this.someToolbarOpened)return;const s=n.currentBlockIndex>=0;if(r.anyBlockSelected&&!Be.isSelectionExists){r.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&s&&e.target.tagName==="BODY"){const o=this.Editor.BlockManager.insert();e.preventDefault(),this.Editor.Caret.setToBlock(o),this.Editor.Toolbar.moveAndOpen(o)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var n,r;if(!e.isTrusted)return;const s=e.target;this.nodes.holder.contains(s)||Be.isAtEditor||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close());const o=(n=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:n.contains(s),i=(r=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:r.contains(s),l=o||i;if(this.Editor.BlockSettings.opened&&!l){this.Editor.BlockSettings.close();const u=this.Editor.BlockManager.getBlockByChildNode(s);this.Editor.Toolbar.moveAndOpen(u)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let n=e.target;if(n===this.nodes.redactor){const r=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,s=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;n=document.elementFromPoint(r,s)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(n)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.ReadOnly.isEnabled||this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!Be.isCollapsed)return;const n=e.target,r=e.metaKey||e.ctrlKey;if(me.isAnchor(n)&&r){e.stopImmediatePropagation(),e.stopPropagation();const s=n.getAttribute("href"),o=eK(s);nK(o);return}this.processBottomZoneClick(e)}processBottomZoneClick(e){const n=this.Editor.BlockManager.getBlockByIndex(-1),r=me.offset(n.holder).bottom,s=e.pageY,{BlockSelection:o}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!o.anyBlockSelected&&r<s){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:i,Caret:l,Toolbar:u}=this.Editor;(!i.lastBlock.tool.isDefault||!i.lastBlock.isEmpty)&&i.insertAtEnd(),l.setToTheLastBlock(),u.moveAndOpen(i.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:n}=this.Editor,r=Be.anchorElement;if(e.isCrossBlockSelectionStarted&&n.anyBlockSelected&&Be.get().removeAllRanges(),!r){Be.range||this.Editor.InlineToolbar.close();return}const s=r.closest(`.${uo.CSS.content}`);(s===null||s.closest(`.${Be.CSS.editorWrapper}`)!==this.nodes.wrapper)&&(this.Editor.InlineToolbar.containsNode(r)||this.Editor.InlineToolbar.close(),r.dataset.inlineToolbar!=="true")||(this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(r),this.Editor.InlineToolbar.tryToShow(!0))}enableInputsEmptyMark(){function e(n){const r=n.target;XP(r)}this.readOnlyMutableListeners.on(this.nodes.wrapper,"input",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusin",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusout",e)}}const MJ={BlocksAPI:fK,CaretAPI:mK,EventsAPI:gK,I18nAPI:xK,API:vK,InlineToolbarAPI:yK,ListenersAPI:bK,NotifierAPI:CK,ReadOnlyAPI:_K,SanitizerAPI:PK,SaverAPI:RK,SelectionAPI:AK,ToolsAPI:IK,StylesAPI:DK,ToolbarAPI:LK,TooltipAPI:UK,UiAPI:HK,BlockSettings:mX,Toolbar:SX,InlineToolbar:CX,BlockEvents:nJ,BlockManager:oJ,BlockSelection:iJ,Caret:aJ,CrossBlockSelection:lJ,DragNDrop:cJ,ModificationsObserver:hJ,Paste:fJ,ReadOnly:pJ,RectangleSelection:mJ,Renderer:gJ,Saver:xJ,Tools:rA,UI:TJ};class OJ{constructor(e){this.moduleInstances={},this.eventsDispatcher=new Cu;let n,r;this.isReady=new Promise((s,o)=>{n=s,r=o}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:s,Caret:o,UI:i,ModificationsObserver:l}=this.moduleInstances;i.checkEmptiness(),l.enable(),this.configuration.autofocus===!0&&this.configuration.readOnly!==!0&&o.setToBlock(s.blocks[0],o.positions.START),n()}).catch(s=>{ct(`Editor.js is not ready because of ${s}`,"error"),r(s)})}set configuration(e){var n,r;vn(e)?this.config={...e}:this.config={holder:e},Yy(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=VP.VERBOSE),Kq(this.config.logLevel),Yy(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const s={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,($r(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[s]}),this.config.readOnly=this.config.readOnly||!1,(n=this.config.i18n)!=null&&n.messages&&Ln.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((r=this.config.i18n)==null?void 0:r.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:n}=this.config;if(e&&n)throw Error("holderId and holder param can't assign at the same time.");if(bo(n)&&!me.get(n))throw Error(`element with ID ${n} is missing. Pass correct holder's ID.`);if(n&&vn(n)&&!me.isElement(n))throw Error("holder value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,n)=>e.then(async()=>{try{await this.moduleInstances[n].prepare()}catch(r){if(r instanceof QP)throw new Error(r.message);ct(`Module ${n} was skipped because of %o`,"warn",r)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(MJ).forEach(([e,n])=>{try{this.moduleInstances[e]=new n({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(r){ct("[constructModules]",`Module ${e} skipped because`,"error",r)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const n={};for(const r in this.moduleInstances)r!==e&&(n[r]=this.moduleInstances[r]);return n}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class PJ{static get version(){return"2.31.0"}constructor(e){let n=()=>{};vn(e)&&Mt(e.onReady)&&(n=e.onReady);const r=new OJ(e);this.isReady=r.isReady.then(()=>{this.exportAPI(r),n()})}exportAPI(e){const n=["configuration"],r=()=>{Object.values(e.moduleInstances).forEach(s=>{Mt(s.destroy)&&s.destroy(),s.listeners.removeAll()}),zK(),e=null;for(const s in this)Object.prototype.hasOwnProperty.call(this,s)&&delete this[s];Object.setPrototypeOf(this,null)};n.forEach(s=>{this[s]=e[s]}),this.destroy=r,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([s,o])=>{Object.entries(o).forEach(([i,l])=>{this[l]=e.moduleInstances.API.methods[s][i]})})}}(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-header{padding:.6em 0 3px;margin:0;line-height:1.25em;outline:none}.ce-header p,.ce-header div{padding:0!important;margin:0!important}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const RJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>',AJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>',IJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>',DJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>',LJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>',BJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>',FJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>';/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */let $J=class{constructor({data:e,config:n,api:r,readOnly:s}){this.api=r,this.readOnly=s,this._settings=n,this._data=this.normalizeData(e),this._element=this.getTag()}get _CSS(){return{block:this.api.styles.block,wrapper:"ce-header"}}isHeaderData(e){return e.text!==void 0}normalizeData(e){const n={text:"",level:this.defaultLevel.number};return this.isHeaderData(e)&&(n.text=e.text||"",e.level!==void 0&&!isNaN(parseInt(e.level.toString()))&&(n.level=parseInt(e.level.toString()))),n}render(){return this._element}renderSettings(){return this.levels.map(e=>({icon:e.svg,label:this.api.i18n.t(`Heading ${e.number}`),onActivate:()=>this.setLevel(e.number),closeOnActivate:!0,isActive:this.currentLevel.number===e.number,render:()=>document.createElement("div")}))}setLevel(e){this.data={level:e,text:this.data.text}}merge(e){this._element.insertAdjacentHTML("beforeend",e.text)}validate(e){return e.text.trim()!==""}save(e){return{text:e.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:!1,text:{}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(e){if(this._data=this.normalizeData(e),e.level!==void 0&&this._element.parentNode){const n=this.getTag();n.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(n,this._element),this._element=n}e.text!==void 0&&(this._element.innerHTML=this._data.text||"")}getTag(){const e=document.createElement(this.currentLevel.tag);return e.innerHTML=this._data.text||"",e.classList.add(this._CSS.wrapper),e.contentEditable=this.readOnly?"false":"true",e.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),e}get currentLevel(){let e=this.levels.find(n=>n.number===this._data.level);return e||(e=this.defaultLevel),e}get defaultLevel(){if(this._settings.defaultLevel){const e=this.levels.find(n=>n.number===this._settings.defaultLevel);if(e)return e;console.warn("('-') Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}get levels(){const e=[{number:1,tag:"H1",svg:RJ},{number:2,tag:"H2",svg:AJ},{number:3,tag:"H3",svg:IJ},{number:4,tag:"H4",svg:DJ},{number:5,tag:"H5",svg:LJ},{number:6,tag:"H6",svg:BJ}];return this._settings.levels?e.filter(n=>this._settings.levels.includes(n.number)):e}onPaste(e){const n=e.detail;if("data"in n){const r=n.data;let s=this.defaultLevel.number;switch(r.tagName){case"H1":s=1;break;case"H2":s=2;break;case"H3":s=3;break;case"H4":s=4;break;case"H5":s=5;break;case"H6":s=6;break}this._settings.levels&&(s=this._settings.levels.reduce((o,i)=>Math.abs(i-s)<Math.abs(o-s)?i:o)),this.data={level:s,text:r.innerHTML}}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:FJ,title:"Heading"}}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.cdx-list{margin:0;padding:0;outline:none;display:grid;counter-reset:item;gap:var(--spacing-s);padding:var(--spacing-xs);--spacing-s: 8px;--spacing-xs: 6px;--list-counter-type: numeric;--radius-border: 5px;--checkbox-background: #fff;--color-border: #C9C9C9;--color-bg-checked: #369FFF;--line-height: 1.45em;--color-bg-checked-hover: #0059AB;--color-tick: #fff;--size-checkbox: 1.2em}.cdx-list__item{line-height:var(--line-height);display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto;grid-template-areas:"checkbox content" ". child"}.cdx-list__item-children{display:grid;grid-area:child;gap:var(--spacing-s);padding-top:var(--spacing-s)}.cdx-list__item [contenteditable]{outline:none}.cdx-list__item-content{word-break:break-word;white-space:pre-wrap;grid-area:content;padding-left:var(--spacing-s)}.cdx-list__item:before{counter-increment:item;white-space:nowrap}.cdx-list-ordered .cdx-list__item:before{content:counters(item,".",var(--list-counter-type)) "."}.cdx-list-ordered{counter-reset:item}.cdx-list-unordered .cdx-list__item:before{content:""}.cdx-list-checklist .cdx-list__item:before{content:""}.cdx-list__settings .cdx-settings-button{width:50%}.cdx-list__checkbox{padding-top:calc((var(--line-height) - var(--size-checkbox)) / 2);grid-area:checkbox;width:var(--size-checkbox);height:var(--size-checkbox);display:flex;cursor:pointer}.cdx-list__checkbox svg{opacity:0;height:var(--size-checkbox);width:var(--size-checkbox);left:-1px;top:-1px;position:absolute}@media (hover: hover){.cdx-list__checkbox:not(.cdx-list__checkbox--no-hover):hover .cdx-list__checkbox-check svg{opacity:1}}.cdx-list__checkbox--checked{line-height:var(--line-height)}@media (hover: hover){.cdx-list__checkbox--checked:not(.cdx-list__checkbox--checked--no-hover):hover .cdx-checklist__checkbox-check{background:var(--color-bg-checked-hover);border-color:var(--color-bg-checked-hover)}}.cdx-list__checkbox--checked .cdx-list__checkbox-check{background:var(--color-bg-checked);border-color:var(--color-bg-checked)}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg{opacity:1}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg path{stroke:var(--color-tick)}.cdx-list__checkbox--checked .cdx-list__checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}.cdx-list__checkbox-check{cursor:pointer;display:inline-block;position:relative;margin:0 auto;width:var(--size-checkbox);height:var(--size-checkbox);box-sizing:border-box;border-radius:var(--radius-border);border:1px solid var(--color-border);background:var(--checkbox-background)}.cdx-list__checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:var(--color-bg-checked);visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}.cdx-list-start-with-field{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-list-start-with-field--invalid{background:#FFECED;border:1px solid #E13F3F}.cdx-list-start-with-field--invalid .cdx-list-start-with-field__input{color:#e13f3f}.cdx-list-start-with-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - var(--toolbox-buttons-size) - var(--icon-margin-right))}.cdx-list-start-with-field__input::placeholder{color:var(--grayText);font-weight:500}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const zJ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',cE='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',dE='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',uE='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>',UJ='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 14.2L10 7.4135C10 7.32872 9.90111 7.28241 9.83598 7.33668L7 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',HJ='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 9.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 7.01L10 7" stroke="black" stroke-width="1.8" stroke-linecap="round"/></svg>',WJ='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 7.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',VJ='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.0087 14.2H16" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M7 14.2L7.78865 12M13 14.2L12.1377 12M7.78865 12C7.78865 12 9.68362 7 10 7C10.3065 7 12.1377 12 12.1377 12M7.78865 12L12.1377 12" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',YJ='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.2087 14.2H14.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M11.5 14.5C11.5 14.5 11 13.281 11 12.5M7 9.5C7 9.5 7.5 8.5 9 8.5C10.5 8.5 11 9.5 11 10.5L11 11.5M11 11.5L11 12.5M11 11.5C11 11.5 7 11 7 13C7 15.3031 11 15 11 12.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',qJ='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 14.2L8 7.4135C8 7.32872 7.90111 7.28241 7.83598 7.33668L5 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M14 13L16.4167 10.7778M16.4167 10.7778L14 8.5M16.4167 10.7778H11.6562" stroke="black" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>';var jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function KJ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var bt={},_w={},Ew={};Object.defineProperty(Ew,"__esModule",{value:!0});Ew.allInputsSelector=XJ;function XJ(){var t=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+t.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.allInputsSelector=void 0;var e=Ew;Object.defineProperty(t,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(_w);var Pa={},Nw={};Object.defineProperty(Nw,"__esModule",{value:!0});Nw.isNativeInput=GJ;function GJ(t){var e=["INPUT","TEXTAREA"];return t&&t.tagName?e.includes(t.tagName):!1}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNativeInput=void 0;var e=Nw;Object.defineProperty(t,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(Pa);var sA={},jw={};Object.defineProperty(jw,"__esModule",{value:!0});jw.append=JJ;function JJ(t,e){Array.isArray(e)?e.forEach(function(n){t.appendChild(n)}):t.appendChild(e)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.append=void 0;var e=jw;Object.defineProperty(t,"append",{enumerable:!0,get:function(){return e.append}})})(sA);var Tw={},Mw={};Object.defineProperty(Mw,"__esModule",{value:!0});Mw.blockElements=QJ;function QJ(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.blockElements=void 0;var e=Mw;Object.defineProperty(t,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(Tw);var oA={},Ow={};Object.defineProperty(Ow,"__esModule",{value:!0});Ow.calculateBaseline=ZJ;function ZJ(t){var e=window.getComputedStyle(t),n=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||n*1.2,s=parseFloat(e.paddingTop),o=parseFloat(e.borderTopWidth),i=parseFloat(e.marginTop),l=n*.8,u=(r-n)/2,h=i+o+s+u+l;return h}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateBaseline=void 0;var e=Ow;Object.defineProperty(t,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(oA);var iA={},Pw={},Rw={},Aw={};Object.defineProperty(Aw,"__esModule",{value:!0});Aw.isContentEditable=eQ;function eQ(t){return t.contentEditable==="true"}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isContentEditable=void 0;var e=Aw;Object.defineProperty(t,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(Rw);Object.defineProperty(Pw,"__esModule",{value:!0});Pw.canSetCaret=rQ;var tQ=Pa,nQ=Rw;function rQ(t){var e=!0;if((0,tQ.isNativeInput)(t))switch(t.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,nQ.isContentEditable)(t);return e}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.canSetCaret=void 0;var e=Pw;Object.defineProperty(t,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(iA);var Lm={},Iw={};function sQ(t,e,n){const r=n.value!==void 0?"value":"get",s=n[r],o=`#${e}Cache`;if(n[r]=function(...i){return this[o]===void 0&&(this[o]=s.apply(this,i)),this[o]},r==="get"&&n.set){const i=n.set;n.set=function(l){delete t[o],i.apply(this,l)}}return n}function aA(){const t={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(t).find(n=>window.navigator.appVersion.toLowerCase().indexOf(n)!==-1);return e!==void 0&&(t[e]=!0),t}function Dw(t){return t!=null&&t!==""&&(typeof t!="object"||Object.keys(t).length>0)}function oQ(t){return!Dw(t)}const iQ=()=>typeof window<"u"&&window.navigator!==null&&Dw(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function aQ(t){const e=aA();return t=t.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi,"+"),e.mac?t=t.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):t=t.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),t}function lQ(t){return t[0].toUpperCase()+t.slice(1)}function cQ(t){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=t,document.body.appendChild(e);const n=window.getSelection(),r=document.createRange();if(r.selectNode(e),n===null)throw new Error("Cannot copy text to clipboard");n.removeAllRanges(),n.addRange(r),document.execCommand("copy"),document.body.removeChild(e)}function dQ(t,e,n){let r;return(...s)=>{const o=this,i=()=>{r=void 0,n!==!0&&t.apply(o,s)},l=n===!0&&r!==void 0;window.clearTimeout(r),r=window.setTimeout(i,e),l&&t.apply(o,s)}}function Si(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function uQ(t){return Si(t)==="boolean"}function lA(t){return Si(t)==="function"||Si(t)==="asyncfunction"}function hQ(t){return lA(t)&&/^\s*class\s+/.test(t.toString())}function fQ(t){return Si(t)==="number"}function zf(t){return Si(t)==="object"}function pQ(t){return Promise.resolve(t)===t}function mQ(t){return Si(t)==="string"}function gQ(t){return Si(t)==="undefined"}function e0(t,...e){if(!e.length)return t;const n=e.shift();if(zf(t)&&zf(n))for(const r in n)zf(n[r])?(t[r]===void 0&&Object.assign(t,{[r]:{}}),e0(t[r],n[r])):Object.assign(t,{[r]:n[r]});return e0(t,...e)}function xQ(t,e,n){const r=`${e} is deprecated and will be removed in the next major release. Please use the ${n} instead.`;t&&console.warn(r)}function vQ(t){try{return new URL(t).href}catch{}return t.substring(0,2)==="//"?window.location.protocol+t:window.location.origin+t}function yQ(t){return t>47&&t<58||t===32||t===13||t===229||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223}const bQ={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},wQ={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};class kQ{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((n,r)=>{this.completed=this.completed.then(e).then(n).catch(r)})}}function SQ(t,e,n=void 0){let r,s,o,i=null,l=0;n||(n={});const u=function(){l=n.leading===!1?0:Date.now(),i=null,o=t.apply(r,s),i===null&&(r=s=null)};return function(){const h=Date.now();!l&&n.leading===!1&&(l=h);const f=e-(h-l);return r=this,s=arguments,f<=0||f>e?(i&&(clearTimeout(i),i=null),l=h,o=t.apply(r,s),i===null&&(r=s=null)):!i&&n.trailing!==!1&&(i=setTimeout(u,f)),o}}const CQ=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:kQ,beautifyShortcut:aQ,cacheable:sQ,capitalize:lQ,copyTextToClipboard:cQ,debounce:dQ,deepMerge:e0,deprecationAssert:xQ,getUserOS:aA,getValidUrl:vQ,isBoolean:uQ,isClass:hQ,isEmpty:oQ,isFunction:lA,isIosDevice:iQ,isNumber:fQ,isObject:zf,isPrintableKey:yQ,isPromise:pQ,isString:mQ,isUndefined:gQ,keyCodes:bQ,mouseButtons:wQ,notEmpty:Dw,throttle:SQ,typeOf:Si},Symbol.toStringTag,{value:"Module"})),Lw=KJ(CQ);Object.defineProperty(Iw,"__esModule",{value:!0});Iw.containsOnlyInlineElements=NQ;var _Q=Lw,EQ=Tw;function NQ(t){var e;(0,_Q.isString)(t)?(e=document.createElement("div"),e.innerHTML=t):e=t;var n=function(r){return!(0,EQ.blockElements)().includes(r.tagName.toLowerCase())&&Array.from(r.children).every(n)};return Array.from(e.children).every(n)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.containsOnlyInlineElements=void 0;var e=Iw;Object.defineProperty(t,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(Lm);var cA={},Bw={},Bm={},Fw={};Object.defineProperty(Fw,"__esModule",{value:!0});Fw.make=jQ;function jQ(t,e,n){var r;e===void 0&&(e=null),n===void 0&&(n={});var s=document.createElement(t);if(Array.isArray(e)){var o=e.filter(function(l){return l!==void 0});(r=s.classList).add.apply(r,o)}else e!==null&&s.classList.add(e);for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i]);return s}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.make=void 0;var e=Fw;Object.defineProperty(t,"make",{enumerable:!0,get:function(){return e.make}})})(Bm);Object.defineProperty(Bw,"__esModule",{value:!0});Bw.fragmentToString=MQ;var TQ=Bm;function MQ(t){var e=(0,TQ.make)("div");return e.appendChild(t),e.innerHTML}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fragmentToString=void 0;var e=Bw;Object.defineProperty(t,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(cA);var dA={},$w={};Object.defineProperty($w,"__esModule",{value:!0});$w.getContentLength=PQ;var OQ=Pa;function PQ(t){var e,n;return(0,OQ.isNativeInput)(t)?t.value.length:t.nodeType===Node.TEXT_NODE?t.length:(n=(e=t.textContent)===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getContentLength=void 0;var e=$w;Object.defineProperty(t,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(dA);var zw={},Uw={},hE=jp&&jp.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Uw,"__esModule",{value:!0});Uw.getDeepestBlockElements=uA;var RQ=Lm;function uA(t){return(0,RQ.containsOnlyInlineElements)(t)?[t]:Array.from(t.children).reduce(function(e,n){return hE(hE([],e,!0),uA(n),!0)},[])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepestBlockElements=void 0;var e=Uw;Object.defineProperty(t,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(zw);var hA={},Hw={},Fm={},Ww={};Object.defineProperty(Ww,"__esModule",{value:!0});Ww.isLineBreakTag=AQ;function AQ(t){return["BR","WBR"].includes(t.tagName)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLineBreakTag=void 0;var e=Ww;Object.defineProperty(t,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(Fm);var $m={},Vw={};Object.defineProperty(Vw,"__esModule",{value:!0});Vw.isSingleTag=IQ;function IQ(t){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(t.tagName)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isSingleTag=void 0;var e=Vw;Object.defineProperty(t,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})($m);Object.defineProperty(Hw,"__esModule",{value:!0});Hw.getDeepestNode=fA;var DQ=Pa,LQ=Fm,BQ=$m;function fA(t,e){e===void 0&&(e=!1);var n=e?"lastChild":"firstChild",r=e?"previousSibling":"nextSibling";if(t.nodeType===Node.ELEMENT_NODE&&t[n]){var s=t[n];if((0,BQ.isSingleTag)(s)&&!(0,DQ.isNativeInput)(s)&&!(0,LQ.isLineBreakTag)(s))if(s[r])s=s[r];else if(s.parentNode!==null&&s.parentNode[r])s=s.parentNode[r];else return s.parentNode;return fA(s,e)}return t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepestNode=void 0;var e=Hw;Object.defineProperty(t,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(hA);var pA={},Yw={},tf=jp&&jp.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Yw,"__esModule",{value:!0});Yw.findAllInputs=HQ;var FQ=Lm,$Q=zw,zQ=_w,UQ=Pa;function HQ(t){return Array.from(t.querySelectorAll((0,zQ.allInputsSelector)())).reduce(function(e,n){return(0,UQ.isNativeInput)(n)||(0,FQ.containsOnlyInlineElements)(n)?tf(tf([],e,!0),[n],!1):tf(tf([],e,!0),(0,$Q.getDeepestBlockElements)(n),!0)},[])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAllInputs=void 0;var e=Yw;Object.defineProperty(t,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(pA);var mA={},qw={};Object.defineProperty(qw,"__esModule",{value:!0});qw.isCollapsedWhitespaces=WQ;function WQ(t){return!/[^\t\n\r ]/.test(t)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCollapsedWhitespaces=void 0;var e=qw;Object.defineProperty(t,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(mA);var Kw={},Xw={};Object.defineProperty(Xw,"__esModule",{value:!0});Xw.isElement=YQ;var VQ=Lw;function YQ(t){return(0,VQ.isNumber)(t)?!1:!!t&&!!t.nodeType&&t.nodeType===Node.ELEMENT_NODE}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isElement=void 0;var e=Xw;Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(Kw);var gA={},Gw={},Jw={},Qw={};Object.defineProperty(Qw,"__esModule",{value:!0});Qw.isLeaf=qQ;function qQ(t){return t===null?!1:t.childNodes.length===0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLeaf=void 0;var e=Qw;Object.defineProperty(t,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(Jw);var Zw={},e1={};Object.defineProperty(e1,"__esModule",{value:!0});e1.isNodeEmpty=QQ;var KQ=Fm,XQ=Kw,GQ=Pa,JQ=$m;function QQ(t,e){var n="";return(0,JQ.isSingleTag)(t)&&!(0,KQ.isLineBreakTag)(t)?!1:((0,XQ.isElement)(t)&&(0,GQ.isNativeInput)(t)?n=t.value:t.textContent!==null&&(n=t.textContent.replace("","")),e!==void 0&&(n=n.replace(new RegExp(e,"g"),"")),n.trim().length===0)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeEmpty=void 0;var e=e1;Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(Zw);Object.defineProperty(Gw,"__esModule",{value:!0});Gw.isEmpty=tZ;var ZQ=Jw,eZ=Zw;function tZ(t,e){t.normalize();for(var n=[t];n.length>0;){var r=n.shift();if(r){if(t=r,(0,ZQ.isLeaf)(t)&&!(0,eZ.isNodeEmpty)(t,e))return!1;n.push.apply(n,Array.from(t.childNodes))}}return!0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=void 0;var e=Gw;Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(gA);var xA={},t1={};Object.defineProperty(t1,"__esModule",{value:!0});t1.isFragment=rZ;var nZ=Lw;function rZ(t){return(0,nZ.isNumber)(t)?!1:!!t&&!!t.nodeType&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFragment=void 0;var e=t1;Object.defineProperty(t,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(xA);var vA={},n1={};Object.defineProperty(n1,"__esModule",{value:!0});n1.isHTMLString=oZ;var sZ=Bm;function oZ(t){var e=(0,sZ.make)("div");return e.innerHTML=t,e.childElementCount>0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isHTMLString=void 0;var e=n1;Object.defineProperty(t,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(vA);var yA={},r1={};Object.defineProperty(r1,"__esModule",{value:!0});r1.offset=iZ;function iZ(t){var e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,s=e.top+r,o=e.left+n;return{top:s,left:o,bottom:s+e.height,right:o+e.width}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.offset=void 0;var e=r1;Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return e.offset}})})(yA);var bA={},s1={};Object.defineProperty(s1,"__esModule",{value:!0});s1.prepend=aZ;function aZ(t,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(n){return t.prepend(n)})):t.prepend(e)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=void 0;var e=s1;Object.defineProperty(t,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(bA);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.offset=t.make=t.isLineBreakTag=t.isSingleTag=t.isNodeEmpty=t.isLeaf=t.isHTMLString=t.isFragment=t.isEmpty=t.isElement=t.isContentEditable=t.isCollapsedWhitespaces=t.findAllInputs=t.isNativeInput=t.allInputsSelector=t.getDeepestNode=t.getDeepestBlockElements=t.getContentLength=t.fragmentToString=t.containsOnlyInlineElements=t.canSetCaret=t.calculateBaseline=t.blockElements=t.append=void 0;var e=_w;Object.defineProperty(t,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var n=Pa;Object.defineProperty(t,"isNativeInput",{enumerable:!0,get:function(){return n.isNativeInput}});var r=sA;Object.defineProperty(t,"append",{enumerable:!0,get:function(){return r.append}});var s=Tw;Object.defineProperty(t,"blockElements",{enumerable:!0,get:function(){return s.blockElements}});var o=oA;Object.defineProperty(t,"calculateBaseline",{enumerable:!0,get:function(){return o.calculateBaseline}});var i=iA;Object.defineProperty(t,"canSetCaret",{enumerable:!0,get:function(){return i.canSetCaret}});var l=Lm;Object.defineProperty(t,"containsOnlyInlineElements",{enumerable:!0,get:function(){return l.containsOnlyInlineElements}});var u=cA;Object.defineProperty(t,"fragmentToString",{enumerable:!0,get:function(){return u.fragmentToString}});var h=dA;Object.defineProperty(t,"getContentLength",{enumerable:!0,get:function(){return h.getContentLength}});var f=zw;Object.defineProperty(t,"getDeepestBlockElements",{enumerable:!0,get:function(){return f.getDeepestBlockElements}});var m=hA;Object.defineProperty(t,"getDeepestNode",{enumerable:!0,get:function(){return m.getDeepestNode}});var x=pA;Object.defineProperty(t,"findAllInputs",{enumerable:!0,get:function(){return x.findAllInputs}});var w=mA;Object.defineProperty(t,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return w.isCollapsedWhitespaces}});var v=Rw;Object.defineProperty(t,"isContentEditable",{enumerable:!0,get:function(){return v.isContentEditable}});var y=Kw;Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return y.isElement}});var k=gA;Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return k.isEmpty}});var C=xA;Object.defineProperty(t,"isFragment",{enumerable:!0,get:function(){return C.isFragment}});var _=vA;Object.defineProperty(t,"isHTMLString",{enumerable:!0,get:function(){return _.isHTMLString}});var j=Jw;Object.defineProperty(t,"isLeaf",{enumerable:!0,get:function(){return j.isLeaf}});var M=Zw;Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return M.isNodeEmpty}});var O=Fm;Object.defineProperty(t,"isLineBreakTag",{enumerable:!0,get:function(){return O.isLineBreakTag}});var T=$m;Object.defineProperty(t,"isSingleTag",{enumerable:!0,get:function(){return T.isSingleTag}});var I=Bm;Object.defineProperty(t,"make",{enumerable:!0,get:function(){return I.make}});var A=yA;Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return A.offset}});var F=bA;Object.defineProperty(t,"prepend",{enumerable:!0,get:function(){return F.prepend}})})(bt);const Gn="cdx-list",Nn={wrapper:Gn,item:`${Gn}__item`,itemContent:`${Gn}__item-content`,itemChildren:`${Gn}__item-children`};let wA=class ti{static get CSS(){return{...Nn,orderedList:`${Gn}-ordered`}}constructor(e,n){this.config=n,this.readOnly=e}renderWrapper(e){let n;return e===!0?n=bt.make("ol",[ti.CSS.wrapper,ti.CSS.orderedList]):n=bt.make("ol",[ti.CSS.orderedList,ti.CSS.itemChildren]),n}renderItem(e,n){const r=bt.make("li",ti.CSS.item),s=bt.make("div",ti.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return r.appendChild(s),r}getItemContent(e){const n=e.querySelector(`.${ti.CSS.itemContent}`);return!n||bt.isEmpty(n)?"":n.innerHTML}getItemMeta(){return{}}composeDefaultMeta(){return{}}},kA=class ni{static get CSS(){return{...Nn,unorderedList:`${Gn}-unordered`}}constructor(e,n){this.config=n,this.readOnly=e}renderWrapper(e){let n;return e===!0?n=bt.make("ul",[ni.CSS.wrapper,ni.CSS.unorderedList]):n=bt.make("ul",[ni.CSS.unorderedList,ni.CSS.itemChildren]),n}renderItem(e,n){const r=bt.make("li",ni.CSS.item),s=bt.make("div",ni.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return r.appendChild(s),r}getItemContent(e){const n=e.querySelector(`.${ni.CSS.itemContent}`);return!n||bt.isEmpty(n)?"":n.innerHTML}getItemMeta(){return{}}composeDefaultMeta(){return{}}};function Vi(t){return t.nodeType===Node.ELEMENT_NODE}var kd={},o1={},zm={},Um={};Object.defineProperty(Um,"__esModule",{value:!0});Um.getContenteditableSlice=cZ;var lZ=bt;function cZ(t,e,n,r,s){var o;s===void 0&&(s=!1);var i=document.createRange();if(r==="left"?(i.setStart(t,0),i.setEnd(e,n)):(i.setStart(e,n),i.setEnd(t,t.childNodes.length)),s===!0){var l=i.extractContents();return(0,lZ.fragmentToString)(l)}var u=i.cloneContents(),h=document.createElement("div");h.appendChild(u);var f=(o=h.textContent)!==null&&o!==void 0?o:"";return f}Object.defineProperty(zm,"__esModule",{value:!0});zm.checkContenteditableSliceForEmptiness=hZ;var dZ=bt,uZ=Um;function hZ(t,e,n,r){var s=(0,uZ.getContenteditableSlice)(t,e,n,r);return(0,dZ.isCollapsedWhitespaces)(s)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkContenteditableSliceForEmptiness=void 0;var e=zm;Object.defineProperty(t,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}})})(o1);var SA={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getContenteditableSlice=void 0;var e=Um;Object.defineProperty(t,"getContenteditableSlice",{enumerable:!0,get:function(){return e.getContenteditableSlice}})})(SA);var CA={},i1={};Object.defineProperty(i1,"__esModule",{value:!0});i1.focus=pZ;var fZ=bt;function pZ(t,e){var n,r;if(e===void 0&&(e=!0),(0,fZ.isNativeInput)(t)){t.focus();var s=e?0:t.value.length;t.setSelectionRange(s,s)}else{var o=document.createRange(),i=window.getSelection();if(!i)return;var l=function(x,w){w===void 0&&(w=!1);var v=document.createTextNode("");w?x.insertBefore(v,x.firstChild):x.appendChild(v),o.setStart(v,0),o.setEnd(v,0)},u=function(x){return x!=null},h=t.childNodes,f=e?h[0]:h[h.length-1];if(u(f)){for(;u(f)&&f.nodeType!==Node.TEXT_NODE;)f=e?f.firstChild:f.lastChild;if(u(f)&&f.nodeType===Node.TEXT_NODE){var m=(r=(n=f.textContent)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0,s=e?0:m;o.setStart(f,s),o.setEnd(f,s)}else l(t,e)}else l(t);i.removeAllRanges(),i.addRange(o)}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.focus=void 0;var e=i1;Object.defineProperty(t,"focus",{enumerable:!0,get:function(){return e.focus}})})(CA);var a1={},Hm={};Object.defineProperty(Hm,"__esModule",{value:!0});Hm.getCaretNodeAndOffset=mZ;function mZ(){var t=window.getSelection();if(t===null)return[null,0];var e=t.focusNode,n=t.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[n]!==void 0?(e=e.childNodes[n],n=0):(e=e.childNodes[n-1],e.textContent!==null&&(n=e.textContent.length))),[e,n])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCaretNodeAndOffset=void 0;var e=Hm;Object.defineProperty(t,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return e.getCaretNodeAndOffset}})})(a1);var _A={},Wm={};Object.defineProperty(Wm,"__esModule",{value:!0});Wm.getRange=gZ;function gZ(){var t=window.getSelection();return t&&t.rangeCount?t.getRangeAt(0):null}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getRange=void 0;var e=Wm;Object.defineProperty(t,"getRange",{enumerable:!0,get:function(){return e.getRange}})})(_A);var EA={},l1={};Object.defineProperty(l1,"__esModule",{value:!0});l1.isCaretAtEndOfInput=yZ;var fE=bt,xZ=a1,vZ=o1;function yZ(t){var e=(0,fE.getDeepestNode)(t,!0);if(e===null)return!0;if((0,fE.isNativeInput)(e))return e.selectionEnd===e.value.length;var n=(0,xZ.getCaretNodeAndOffset)(),r=n[0],s=n[1];return r===null?!1:(0,vZ.checkContenteditableSliceForEmptiness)(t,r,s,"right")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCaretAtEndOfInput=void 0;var e=l1;Object.defineProperty(t,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return e.isCaretAtEndOfInput}})})(EA);var NA={},c1={};Object.defineProperty(c1,"__esModule",{value:!0});c1.isCaretAtStartOfInput=kZ;var nf=bt,bZ=Hm,wZ=zm;function kZ(t){var e=(0,nf.getDeepestNode)(t);if(e===null||(0,nf.isEmpty)(t))return!0;if((0,nf.isNativeInput)(e))return e.selectionEnd===0;if((0,nf.isEmpty)(t))return!0;var n=(0,bZ.getCaretNodeAndOffset)(),r=n[0],s=n[1];return r===null?!1:(0,wZ.checkContenteditableSliceForEmptiness)(t,r,s,"left")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCaretAtStartOfInput=void 0;var e=c1;Object.defineProperty(t,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return e.isCaretAtStartOfInput}})})(NA);var jA={},d1={};Object.defineProperty(d1,"__esModule",{value:!0});d1.save=_Z;var SZ=bt,CZ=Wm;function _Z(){var t=(0,CZ.getRange)(),e=(0,SZ.make)("span");if(e.id="cursor",e.hidden=!0,!!t)return t.insertNode(e),function(){var n=window.getSelection();n&&(t.setStartAfter(e),t.setEndAfter(e),n.removeAllRanges(),n.addRange(t),setTimeout(function(){e.remove()},150))}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.save=void 0;var e=d1;Object.defineProperty(t,"save",{enumerable:!0,get:function(){return e.save}})})(jA);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.save=t.isCaretAtStartOfInput=t.isCaretAtEndOfInput=t.getRange=t.getCaretNodeAndOffset=t.focus=t.getContenteditableSlice=t.checkContenteditableSliceForEmptiness=void 0;var e=o1;Object.defineProperty(t,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}});var n=SA;Object.defineProperty(t,"getContenteditableSlice",{enumerable:!0,get:function(){return n.getContenteditableSlice}});var r=CA;Object.defineProperty(t,"focus",{enumerable:!0,get:function(){return r.focus}});var s=a1;Object.defineProperty(t,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return s.getCaretNodeAndOffset}});var o=_A;Object.defineProperty(t,"getRange",{enumerable:!0,get:function(){return o.getRange}});var i=EA;Object.defineProperty(t,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return i.isCaretAtEndOfInput}});var l=NA;Object.defineProperty(t,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return l.isCaretAtStartOfInput}});var u=jA;Object.defineProperty(t,"save",{enumerable:!0,get:function(){return u.save}})})(kd);let EZ=class ln{static get CSS(){return{...Nn,checklist:`${Gn}-checklist`,itemChecked:`${Gn}__checkbox--checked`,noHover:`${Gn}__checkbox--no-hover`,checkbox:`${Gn}__checkbox-check`,checkboxContainer:`${Gn}__checkbox`}}constructor(e,n){this.config=n,this.readOnly=e}renderWrapper(e){let n;return e===!0?(n=bt.make("ul",[ln.CSS.wrapper,ln.CSS.checklist]),n.addEventListener("click",r=>{const s=r.target;if(s){const o=s.closest(`.${ln.CSS.checkboxContainer}`);o&&o.contains(s)&&this.toggleCheckbox(o)}})):n=bt.make("ul",[ln.CSS.checklist,ln.CSS.itemChildren]),n}renderItem(e,n){const r=bt.make("li",[ln.CSS.item,ln.CSS.item]),s=bt.make("div",ln.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()}),o=bt.make("span",ln.CSS.checkbox),i=bt.make("div",ln.CSS.checkboxContainer);return n.checked===!0&&i.classList.add(ln.CSS.itemChecked),o.innerHTML=zJ,i.appendChild(o),r.appendChild(i),r.appendChild(s),r}getItemContent(e){const n=e.querySelector(`.${ln.CSS.itemContent}`);return!n||bt.isEmpty(n)?"":n.innerHTML}getItemMeta(e){const n=e.querySelector(`.${ln.CSS.checkboxContainer}`);return{checked:n?n.classList.contains(ln.CSS.itemChecked):!1}}composeDefaultMeta(){return{checked:!1}}toggleCheckbox(e){e.classList.toggle(ln.CSS.itemChecked),e.classList.add(ln.CSS.noHover),e.addEventListener("mouseleave",()=>this.removeSpecialHoverBehavior(e),{once:!0})}removeSpecialHoverBehavior(e){e.classList.remove(ln.CSS.noHover)}};function Bv(t,e="after"){const n=[];let r;function s(o){switch(e){case"after":return o.nextElementSibling;case"before":return o.previousElementSibling}}for(r=s(t);r!==null;)n.push(r),r=s(r);return n.length!==0?n:null}function so(t,e=!0){let n=t;return t.classList.contains(Nn.item)&&(n=t.querySelector(`.${Nn.itemChildren}`)),n===null?[]:e?Array.from(n.querySelectorAll(`:scope > .${Nn.item}`)):Array.from(n.querySelectorAll(`.${Nn.item}`))}function NZ(t){return t.nextElementSibling===null}function jZ(t){return t.querySelector(`.${Nn.itemChildren}`)!==null}function ri(t){return t.querySelector(`.${Nn.itemChildren}`)}function Fv(t){let e=t;t.classList.contains(Nn.item)&&(e=ri(t)),e!==null&&so(e).length===0&&e.remove()}function Uf(t){return t.querySelector(`.${Nn.itemContent}`)}function ll(t,e=!0){const n=Uf(t);n&&kd.focus(n,e)}let $v=class{get currentItem(){const e=window.getSelection();if(!e)return null;let n=e.anchorNode;return!n||(Vi(n)||(n=n.parentNode),!n)||!Vi(n)?null:n.closest(`.${Nn.item}`)}get currentItemLevel(){const e=this.currentItem;if(e===null)return null;let n=e.parentNode,r=0;for(;n!==null&&n!==this.listWrapper;)Vi(n)&&n.classList.contains(Nn.item)&&(r+=1),n=n.parentNode;return r+1}constructor({data:e,config:n,api:r,readOnly:s,block:o},i){this.config=n,this.data=e,this.readOnly=s,this.api=r,this.block=o,this.renderer=i}render(){return this.listWrapper=this.renderer.renderWrapper(!0),this.data.items.length?this.appendItems(this.data.items,this.listWrapper):this.appendItems([{content:"",meta:{},items:[]}],this.listWrapper),this.readOnly||this.listWrapper.addEventListener("keydown",e=>{switch(e.key){case"Enter":e.shiftKey||this.enterPressed(e);break;case"Backspace":this.backspace(e);break;case"Tab":e.shiftKey?this.shiftTab(e):this.addTab(e);break}},!1),"start"in this.data.meta&&this.data.meta.start!==void 0&&this.changeStartWith(this.data.meta.start),"counterType"in this.data.meta&&this.data.meta.counterType!==void 0&&this.changeCounters(this.data.meta.counterType),this.listWrapper}save(e){const n=e??this.listWrapper,r=i=>so(i).map(l=>{const u=ri(l),h=this.renderer.getItemContent(l),f=this.renderer.getItemMeta(l),m=u?r(u):[];return{content:h,meta:f,items:m}}),s=n?r(n):[];let o={style:this.data.style,meta:{},items:s};return this.data.style==="ordered"&&(o.meta={start:this.data.meta.start,counterType:this.data.meta.counterType}),o}static get pasteConfig(){return{tags:["OL","UL","LI"]}}merge(e){const n=this.block.holder.querySelectorAll(`.${Nn.item}`),r=n[n.length-1],s=Uf(r);if(r===null||s===null||(s.insertAdjacentHTML("beforeend",e.items[0].content),this.listWrapper===void 0))return;const o=so(this.listWrapper);if(o.length===0)return;const i=o[o.length-1];let l=ri(i);const u=e.items.shift();u!==void 0&&(u.items.length!==0&&(l===null&&(l=this.renderer.renderWrapper(!1)),this.appendItems(u.items,l)),e.items.length>0&&this.appendItems(e.items,this.listWrapper))}onPaste(e){const n=e.detail.data;this.data=this.pasteHandler(n);const r=this.listWrapper;r&&r.parentNode&&r.parentNode.replaceChild(this.render(),r)}pasteHandler(e){const{tagName:n}=e;let r="unordered",s;switch(n){case"OL":r="ordered",s="ol";break;case"UL":case"LI":r="unordered",s="ul"}const o={style:r,meta:{},items:[]};r==="ordered"&&(this.data.meta.counterType="numeric",this.data.meta.start=1);const i=l=>Array.from(l.querySelectorAll(":scope > li")).map(u=>{const h=u.querySelector(`:scope > ${s}`),f=h?i(h):[];return{content:u.innerHTML??"",meta:{},items:f}});return o.items=i(e),o}changeStartWith(e){this.listWrapper.style.setProperty("counter-reset",`item ${e-1}`),this.data.meta.start=e}changeCounters(e){this.listWrapper.style.setProperty("--list-counter-type",e),this.data.meta.counterType=e}enterPressed(e){var n;const r=this.currentItem;if(e.stopPropagation(),e.preventDefault(),e.isComposing||r===null)return;const s=((n=this.renderer)==null?void 0:n.getItemContent(r).trim().length)===0,o=r.parentNode===this.listWrapper,i=r.previousElementSibling===null,l=this.api.blocks.getCurrentBlockIndex();if(o&&s)if(NZ(r)&&!jZ(r)){i?this.convertItemToDefaultBlock(l,!0):this.convertItemToDefaultBlock();return}else{this.splitList(r);return}else if(s){this.unshiftItem(r);return}else this.splitItem(r)}backspace(e){var n;const r=this.currentItem;if(r!==null&&kd.isCaretAtStartOfInput(r)&&((n=window.getSelection())==null?void 0:n.isCollapsed)!==!1){if(e.stopPropagation(),r.parentNode===this.listWrapper&&r.previousElementSibling===null){this.convertFirstItemToDefaultBlock();return}e.preventDefault(),this.mergeItemWithPrevious(r)}}shiftTab(e){e.stopPropagation(),e.preventDefault(),this.currentItem!==null&&this.unshiftItem(this.currentItem)}unshiftItem(e){if(!e.parentNode||!Vi(e.parentNode))return;const n=e.parentNode.closest(`.${Nn.item}`);if(!n)return;let r=ri(e);if(e.parentElement===null)return;const s=Bv(e);s!==null&&(r===null&&(r=this.renderer.renderWrapper(!1)),s.forEach(o=>{r.appendChild(o)}),e.appendChild(r)),n.after(e),ll(e,!1),Fv(n)}splitList(e){const n=so(e),r=this.block,s=this.api.blocks.getCurrentBlockIndex();if(n.length!==0){const u=n[0];this.unshiftItem(u),ll(e,!1)}if(e.previousElementSibling===null&&e.parentNode===this.listWrapper){this.convertItemToDefaultBlock(s);return}const o=Bv(e);if(o===null)return;const i=this.renderer.renderWrapper(!0);o.forEach(u=>{i.appendChild(u)});const l=this.save(i);l.meta.start=this.data.style=="ordered"?1:void 0,this.api.blocks.insert(r?.name,l,this.config,s+1),this.convertItemToDefaultBlock(s+1),i.remove()}splitItem(e){const[n,r]=kd.getCaretNodeAndOffset();if(n===null)return;const s=Uf(e);let o;s===null?o="":o=kd.getContenteditableSlice(s,n,r,"right",!0);const i=ri(e),l=this.renderItem(o);e?.after(l),i&&l.appendChild(i),ll(l)}mergeItemWithPrevious(e){const n=e.previousElementSibling,r=e.parentNode;if(r===null||!Vi(r))return;const s=r.closest(`.${Nn.item}`);if(!n&&!s||n&&!Vi(n))return;let o;if(n){const m=so(n,!1);m.length!==0&&m.length!==0?o=m[m.length-1]:o=n}else o=s;const i=this.renderer.getItemContent(e);if(!o)return;ll(o,!1);const l=Uf(o);if(l===null)return;l.insertAdjacentHTML("beforeend",i);const u=so(e);if(u.length===0){e.remove(),Fv(o);return}const h=n||s,f=ri(h)??this.renderer.renderWrapper(!1);n?u.forEach(m=>{f.appendChild(m)}):u.forEach(m=>{f.prepend(m)}),ri(h)===null&&o.appendChild(f),e.remove()}addTab(e){var n;e.stopPropagation(),e.preventDefault();const r=this.currentItem;if(!r)return;if(((n=this.config)==null?void 0:n.maxLevel)!==void 0){const i=this.currentItemLevel;if(i!==null&&i===this.config.maxLevel)return}const s=r.previousSibling;if(s===null||!Vi(s))return;const o=ri(s);if(o)o.appendChild(r),so(r).forEach(i=>{o.appendChild(i)});else{const i=this.renderer.renderWrapper(!1);i.appendChild(r),so(r).forEach(l=>{i.appendChild(l)}),s.appendChild(i)}Fv(r),ll(r,!1)}convertItemToDefaultBlock(e,n){let r;const s=this.currentItem,o=s!==null?this.renderer.getItemContent(s):"";n===!0&&this.api.blocks.delete(),e!==void 0?r=this.api.blocks.insert(void 0,{text:o},void 0,e):r=this.api.blocks.insert(),s?.remove(),this.api.caret.setToBlock(r,"start")}convertFirstItemToDefaultBlock(){const e=this.currentItem;if(e===null)return;const n=so(e);if(n.length!==0){const i=n[0];this.unshiftItem(i),ll(e)}const r=Bv(e),s=this.api.blocks.getCurrentBlockIndex(),o=r===null;this.convertItemToDefaultBlock(s,o)}renderItem(e,n){const r=n??this.renderer.composeDefaultMeta();switch(!0){case this.renderer instanceof wA:return this.renderer.renderItem(e,r);case this.renderer instanceof kA:return this.renderer.renderItem(e,r);default:return this.renderer.renderItem(e,r)}}appendItems(e,n){e.forEach(r=>{var s;const o=this.renderItem(r.content,r.meta);if(n.appendChild(o),r.items.length){const i=(s=this.renderer)==null?void 0:s.renderWrapper(!1);this.appendItems(r.items,i),o.appendChild(i)}})}};const cl={wrapper:`${Gn}-start-with-field`,input:`${Gn}-start-with-field__input`,startWithElementWrapperInvalid:`${Gn}-start-with-field--invalid`};function TZ(t,{value:e,placeholder:n,attributes:r,sanitize:s}){const o=bt.make("div",cl.wrapper),i=bt.make("input",cl.input,{placeholder:n,tabIndex:-1,value:e});for(const l in r)i.setAttribute(l,r[l]);return o.appendChild(i),i.addEventListener("input",()=>{s!==void 0&&(i.value=s(i.value));const l=i.checkValidity();!l&&!o.classList.contains(cl.startWithElementWrapperInvalid)&&o.classList.add(cl.startWithElementWrapperInvalid),l&&o.classList.contains(cl.startWithElementWrapperInvalid)&&o.classList.remove(cl.startWithElementWrapperInvalid),l&&t(i.value)}),o}const rd=new Map([["Numeric","numeric"],["Lower Roman","lower-roman"],["Upper Roman","upper-roman"],["Lower Alpha","lower-alpha"],["Upper Alpha","upper-alpha"]]),pE=new Map([["numeric",UJ],["lower-roman",HJ],["upper-roman",WJ],["lower-alpha",YJ],["upper-alpha",VJ]]);function MZ(t){return t.replace(/\D+/g,"")}function OZ(t){return typeof t.items[0]=="string"}function PZ(t){return!("meta"in t)}function RZ(t){return typeof t.items[0]!="string"&&"text"in t.items[0]&&"checked"in t.items[0]&&typeof t.items[0].text=="string"&&typeof t.items[0].checked=="boolean"}function AZ(t){const e=[];return OZ(t)?(t.items.forEach(n=>{e.push({content:n,meta:{},items:[]})}),{style:t.style,meta:{},items:e}):RZ(t)?(t.items.forEach(n=>{e.push({content:n.text,meta:{checked:n.checked},items:[]})}),{style:"checklist",meta:{},items:e}):PZ(t)?{style:t.style,meta:{},items:t.items}:structuredClone(t)}let IZ=class t0{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return[{icon:dE,title:"Unordered List",data:{style:"unordered"}},{icon:uE,title:"Ordered List",data:{style:"ordered"}},{icon:cE,title:"Checklist",data:{style:"checklist"}}]}static get pasteConfig(){return{tags:["OL","UL","LI"]}}static get conversionConfig(){return{export:e=>t0.joinRecursive(e),import:(e,n)=>({meta:{},items:[{content:e,meta:{},items:[]}],style:n?.defaultStyle!==void 0?n.defaultStyle:"unordered"})}}get listStyle(){return this.data.style||this.defaultListStyle}set listStyle(e){var n;this.data.style=e,this.changeTabulatorByStyle();const r=this.list.render();(n=this.listElement)==null||n.replaceWith(r),this.listElement=r}constructor({data:e,config:n,api:r,readOnly:s,block:o}){var i;this.api=r,this.readOnly=s,this.config=n,this.block=o,this.defaultListStyle=((i=this.config)==null?void 0:i.defaultStyle)||"unordered",this.defaultCounterTypes=this.config.counterTypes||Array.from(rd.values());const l={style:this.defaultListStyle,meta:{},items:[]};this.data=Object.keys(e).length?AZ(e):l,this.listStyle==="ordered"&&this.data.meta.counterType===void 0&&(this.data.meta.counterType="numeric"),this.changeTabulatorByStyle()}static joinRecursive(e){return e.items.map(n=>`${n.content} ${t0.joinRecursive(n)}`).join("")}render(){return this.listElement=this.list.render(),this.listElement}save(){return this.data=this.list.save(),this.data}merge(e){this.list.merge(e)}renderSettings(){const e=[{label:this.api.i18n.t("Unordered"),icon:dE,closeOnActivate:!0,isActive:this.listStyle=="unordered",onActivate:()=>{this.listStyle="unordered"}},{label:this.api.i18n.t("Ordered"),icon:uE,closeOnActivate:!0,isActive:this.listStyle=="ordered",onActivate:()=>{this.listStyle="ordered"}},{label:this.api.i18n.t("Checklist"),icon:cE,closeOnActivate:!0,isActive:this.listStyle=="checklist",onActivate:()=>{this.listStyle="checklist"}}];if(this.listStyle==="ordered"){const n=TZ(o=>this.changeStartWith(Number(o)),{value:String(this.data.meta.start??1),placeholder:"",attributes:{required:"true"},sanitize:o=>MZ(o)}),r=[{label:this.api.i18n.t("Start with"),icon:qJ,children:{items:[{element:n,type:"html"}]}}],s={label:this.api.i18n.t("Counter type"),icon:pE.get(this.data.meta.counterType),children:{items:[]}};rd.forEach((o,i)=>{const l=rd.get(i);this.defaultCounterTypes.includes(l)&&s.children.items.push({title:this.api.i18n.t(i),icon:pE.get(l),isActive:this.data.meta.counterType===rd.get(i),closeOnActivate:!0,onActivate:()=>{this.changeCounters(rd.get(i))}})}),s.children.items.length>1&&r.push(s),e.push({type:"separator"},...r)}return e}onPaste(e){const{tagName:n}=e.detail.data;switch(n){case"OL":this.listStyle="ordered";break;case"UL":case"LI":this.listStyle="unordered"}this.list.onPaste(e)}pasteHandler(e){return this.list.pasteHandler(e)}changeCounters(e){var n;(n=this.list)==null||n.changeCounters(e),this.data.meta.counterType=e}changeStartWith(e){var n;(n=this.list)==null||n.changeStartWith(e),this.data.meta.start=e}changeTabulatorByStyle(){switch(this.listStyle){case"ordered":this.list=new $v({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new wA(this.readOnly,this.config));break;case"unordered":this.list=new $v({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new kA(this.readOnly,this.config));break;case"checklist":this.list=new $v({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new EZ(this.readOnly,this.config));break}}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.cdx-checklist{gap:6px;display:flex;flex-direction:column}.cdx-checklist__item{display:flex;box-sizing:content-box;align-items:flex-start}.cdx-checklist__item-text{outline:none;flex-grow:1;line-height:1.57em}.cdx-checklist__item-checkbox{width:22px;height:22px;display:flex;align-items:center;margin-right:8px;margin-top:calc(.785em - 11px);cursor:pointer}.cdx-checklist__item-checkbox svg{opacity:0;height:20px;width:20px;position:absolute;left:-1px;top:-1px;max-height:20px}@media (hover: hover){.cdx-checklist__item-checkbox:not(.cdx-checklist__item-checkbox--no-hover):hover .cdx-checklist__item-checkbox-check svg{opacity:1}}.cdx-checklist__item-checkbox-check{cursor:pointer;display:inline-block;flex-shrink:0;position:relative;width:20px;height:20px;box-sizing:border-box;margin-left:0;border-radius:5px;border:1px solid #C9C9C9;background:#fff}.cdx-checklist__item-checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:#369fff;visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}@media (hover: hover){.cdx-checklist__item--checked .cdx-checklist__item-checkbox:not(.cdx-checklist__item--checked .cdx-checklist__item-checkbox--no-hover):hover .cdx-checklist__item-checkbox-check{background:#0059AB;border-color:#0059ab}}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check{background:#369FFF;border-color:#369fff}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check svg{opacity:1}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check svg path{stroke:#fff}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const DZ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',LZ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';function mE(){const t=document.activeElement,e=window.getSelection().getRangeAt(0),n=e.cloneRange();return n.selectNodeContents(t),n.setStart(e.endContainer,e.endOffset),n.extractContents()}function BZ(t){const e=document.createElement("div");return e.appendChild(t),e.innerHTML}function sd(t,e=null,n={}){const r=document.createElement(t);Array.isArray(e)?r.classList.add(...e):e&&r.classList.add(e);for(const s in n)r[s]=n[s];return r}function gE(t){return t.innerHTML.replace("<br>"," ").trim()}function xE(t,e=!1,n=void 0){const r=document.createRange(),s=window.getSelection();r.selectNodeContents(t),n!==void 0&&(r.setStart(t,n),r.setEnd(t,n)),r.collapse(e),s.removeAllRanges(),s.addRange(r)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null});let FZ=class{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:LZ,title:"Checklist"}}static get conversionConfig(){return{export:e=>e.items.map(({text:n})=>n).join(". "),import:e=>({items:[{text:e,checked:!1}]})}}constructor({data:e,config:n,api:r,readOnly:s}){this._elements={wrapper:null,items:[]},this.readOnly=s,this.api=r,this.data=e||{}}render(){return this._elements.wrapper=sd("div",[this.CSS.baseBlock,this.CSS.wrapper]),this.data.items||(this.data.items=[{text:"",checked:!1}]),this.data.items.forEach(e=>{const n=this.createChecklistItem(e);this._elements.wrapper.appendChild(n)}),this.readOnly?this._elements.wrapper:(this._elements.wrapper.addEventListener("keydown",e=>{const[n,r]=[13,8];switch(e.keyCode){case n:this.enterPressed(e);break;case r:this.backspace(e);break}},!1),this._elements.wrapper.addEventListener("click",e=>{this.toggleCheckbox(e)}),this._elements.wrapper)}save(){let e=this.items.map(n=>{const r=this.getItemInput(n);return{text:gE(r),checked:n.classList.contains(this.CSS.itemChecked)}});return e=e.filter(n=>n.text.trim().length!==0),{items:e}}validate(e){return!!e.items.length}toggleCheckbox(e){const n=e.target.closest(`.${this.CSS.item}`),r=n.querySelector(`.${this.CSS.checkboxContainer}`);r.contains(e.target)&&(n.classList.toggle(this.CSS.itemChecked),r.classList.add(this.CSS.noHover),r.addEventListener("mouseleave",()=>this.removeSpecialHoverBehavior(r),{once:!0}))}createChecklistItem(e={}){const n=sd("div",this.CSS.item),r=sd("span",this.CSS.checkbox),s=sd("div",this.CSS.checkboxContainer),o=sd("div",this.CSS.textField,{innerHTML:e.text?e.text:"",contentEditable:!this.readOnly});return e.checked&&n.classList.add(this.CSS.itemChecked),r.innerHTML=DZ,s.appendChild(r),n.appendChild(s),n.appendChild(o),n}enterPressed(e){e.preventDefault();const n=this.items,r=document.activeElement.closest(`.${this.CSS.item}`);if(n.indexOf(r)===n.length-1&&gE(this.getItemInput(r)).length===0){const l=this.api.blocks.getCurrentBlockIndex();r.remove(),this.api.blocks.insert(),this.api.caret.setToBlock(l+1);return}const s=mE(),o=BZ(s),i=this.createChecklistItem({text:o,checked:!1});this._elements.wrapper.insertBefore(i,r.nextSibling),xE(this.getItemInput(i),!0)}backspace(e){const n=e.target.closest(`.${this.CSS.item}`),r=this.items.indexOf(n),s=this.items[r-1];if(!s||window.getSelection().focusOffset!==0)return;e.preventDefault();const o=mE(),i=this.getItemInput(s),l=i.childNodes.length;i.appendChild(o),xE(i,void 0,l),n.remove()}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-checklist",item:"cdx-checklist__item",itemChecked:"cdx-checklist__item--checked",noHover:"cdx-checklist__item-checkbox--no-hover",checkbox:"cdx-checklist__item-checkbox-check",textField:"cdx-checklist__item-text",checkboxContainer:"cdx-checklist__item-checkbox"}}get items(){return Array.from(this._elements.wrapper.querySelectorAll(`.${this.CSS.item}`))}removeSpecialHoverBehavior(e){e.classList.remove(this.CSS.noHover)}getItemInput(e){return e.querySelector(`.${this.CSS.textField}`)}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".cdx-quote-icon svg{transform:rotate(180deg)}.cdx-quote{margin:0}.cdx-quote__text{min-height:158px;margin-bottom:10px}.cdx-quote [contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.cdx-quote [contentEditable=true][data-placeholder]:empty:before{opacity:1}.cdx-quote [contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.cdx-quote-settings{display:flex}.cdx-quote-settings .cdx-settings-button{width:50%}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const $Z='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 12L8 12"/></svg>',zZ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 7L5 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 17H5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13 12L5 12"/></svg>',UZ='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 10.8182L9 10.8182C8.80222 10.8182 8.60888 10.7649 8.44443 10.665C8.27998 10.5651 8.15181 10.4231 8.07612 10.257C8.00043 10.0909 7.98063 9.90808 8.01922 9.73174C8.0578 9.55539 8.15304 9.39341 8.29289 9.26627C8.43275 9.13913 8.61093 9.05255 8.80491 9.01747C8.99889 8.98239 9.19996 9.00039 9.38268 9.0692C9.56541 9.13801 9.72159 9.25453 9.83147 9.40403C9.94135 9.55353 10 9.72929 10 9.90909L10 12.1818C10 12.664 9.78929 13.1265 9.41421 13.4675C9.03914 13.8084 8.53043 14 8 14"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 10.8182L15 10.8182C14.8022 10.8182 14.6089 10.7649 14.4444 10.665C14.28 10.5651 14.1518 10.4231 14.0761 10.257C14.0004 10.0909 13.9806 9.90808 14.0192 9.73174C14.0578 9.55539 14.153 9.39341 14.2929 9.26627C14.4327 9.13913 14.6109 9.05255 14.8049 9.01747C14.9989 8.98239 15.2 9.00039 15.3827 9.0692C15.5654 9.13801 15.7216 9.25453 15.8315 9.40403C15.9414 9.55353 16 9.72929 16 9.90909L16 12.1818C16 12.664 15.7893 13.1265 15.4142 13.4675C15.0391 13.8084 14.5304 14 14 14"/></svg>';var Tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function HZ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Hf={},u1={},h1={};Object.defineProperty(h1,"__esModule",{value:!0});h1.allInputsSelector=WZ;function WZ(){var t=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+t.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.allInputsSelector=void 0;var e=h1;Object.defineProperty(t,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(u1);var Ra={},f1={};Object.defineProperty(f1,"__esModule",{value:!0});f1.isNativeInput=VZ;function VZ(t){var e=["INPUT","TEXTAREA"];return t&&t.tagName?e.includes(t.tagName):!1}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNativeInput=void 0;var e=f1;Object.defineProperty(t,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(Ra);var TA={},p1={};Object.defineProperty(p1,"__esModule",{value:!0});p1.append=YZ;function YZ(t,e){Array.isArray(e)?e.forEach(function(n){t.appendChild(n)}):t.appendChild(e)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.append=void 0;var e=p1;Object.defineProperty(t,"append",{enumerable:!0,get:function(){return e.append}})})(TA);var m1={},g1={};Object.defineProperty(g1,"__esModule",{value:!0});g1.blockElements=qZ;function qZ(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.blockElements=void 0;var e=g1;Object.defineProperty(t,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(m1);var MA={},x1={};Object.defineProperty(x1,"__esModule",{value:!0});x1.calculateBaseline=KZ;function KZ(t){var e=window.getComputedStyle(t),n=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||n*1.2,s=parseFloat(e.paddingTop),o=parseFloat(e.borderTopWidth),i=parseFloat(e.marginTop),l=n*.8,u=(r-n)/2,h=i+o+s+u+l;return h}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateBaseline=void 0;var e=x1;Object.defineProperty(t,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(MA);var OA={},v1={},y1={},b1={};Object.defineProperty(b1,"__esModule",{value:!0});b1.isContentEditable=XZ;function XZ(t){return t.contentEditable==="true"}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isContentEditable=void 0;var e=b1;Object.defineProperty(t,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(y1);Object.defineProperty(v1,"__esModule",{value:!0});v1.canSetCaret=QZ;var GZ=Ra,JZ=y1;function QZ(t){var e=!0;if((0,GZ.isNativeInput)(t))switch(t.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,JZ.isContentEditable)(t);return e}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.canSetCaret=void 0;var e=v1;Object.defineProperty(t,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(OA);var Vm={},w1={};function ZZ(t,e,n){const r=n.value!==void 0?"value":"get",s=n[r],o=`#${e}Cache`;if(n[r]=function(...i){return this[o]===void 0&&(this[o]=s.apply(this,i)),this[o]},r==="get"&&n.set){const i=n.set;n.set=function(l){delete t[o],i.apply(this,l)}}return n}function PA(){const t={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(t).find(n=>window.navigator.appVersion.toLowerCase().indexOf(n)!==-1);return e!==void 0&&(t[e]=!0),t}function k1(t){return t!=null&&t!==""&&(typeof t!="object"||Object.keys(t).length>0)}function eee(t){return!k1(t)}const tee=()=>typeof window<"u"&&window.navigator!==null&&k1(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function nee(t){const e=PA();return t=t.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi,"+"),e.mac?t=t.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):t=t.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),t}function ree(t){return t[0].toUpperCase()+t.slice(1)}function see(t){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=t,document.body.appendChild(e);const n=window.getSelection(),r=document.createRange();if(r.selectNode(e),n===null)throw new Error("Cannot copy text to clipboard");n.removeAllRanges(),n.addRange(r),document.execCommand("copy"),document.body.removeChild(e)}function oee(t,e,n){let r;return(...s)=>{const o=this,i=()=>{r=void 0,n!==!0&&t.apply(o,s)},l=n===!0&&r!==void 0;window.clearTimeout(r),r=window.setTimeout(i,e),l&&t.apply(o,s)}}function Ci(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function iee(t){return Ci(t)==="boolean"}function RA(t){return Ci(t)==="function"||Ci(t)==="asyncfunction"}function aee(t){return RA(t)&&/^\s*class\s+/.test(t.toString())}function lee(t){return Ci(t)==="number"}function Wf(t){return Ci(t)==="object"}function cee(t){return Promise.resolve(t)===t}function dee(t){return Ci(t)==="string"}function uee(t){return Ci(t)==="undefined"}function n0(t,...e){if(!e.length)return t;const n=e.shift();if(Wf(t)&&Wf(n))for(const r in n)Wf(n[r])?(t[r]===void 0&&Object.assign(t,{[r]:{}}),n0(t[r],n[r])):Object.assign(t,{[r]:n[r]});return n0(t,...e)}function hee(t,e,n){const r=`${e} is deprecated and will be removed in the next major release. Please use the ${n} instead.`;t&&console.warn(r)}function fee(t){try{return new URL(t).href}catch{}return t.substring(0,2)==="//"?window.location.protocol+t:window.location.origin+t}function pee(t){return t>47&&t<58||t===32||t===13||t===229||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223}const mee={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},gee={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};class xee{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((n,r)=>{this.completed=this.completed.then(e).then(n).catch(r)})}}function vee(t,e,n=void 0){let r,s,o,i=null,l=0;n||(n={});const u=function(){l=n.leading===!1?0:Date.now(),i=null,o=t.apply(r,s),i===null&&(r=s=null)};return function(){const h=Date.now();!l&&n.leading===!1&&(l=h);const f=e-(h-l);return r=this,s=arguments,f<=0||f>e?(i&&(clearTimeout(i),i=null),l=h,o=t.apply(r,s),i===null&&(r=s=null)):!i&&n.trailing!==!1&&(i=setTimeout(u,f)),o}}const yee=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:xee,beautifyShortcut:nee,cacheable:ZZ,capitalize:ree,copyTextToClipboard:see,debounce:oee,deepMerge:n0,deprecationAssert:hee,getUserOS:PA,getValidUrl:fee,isBoolean:iee,isClass:aee,isEmpty:eee,isFunction:RA,isIosDevice:tee,isNumber:lee,isObject:Wf,isPrintableKey:pee,isPromise:cee,isString:dee,isUndefined:uee,keyCodes:mee,mouseButtons:gee,notEmpty:k1,throttle:vee,typeOf:Ci},Symbol.toStringTag,{value:"Module"})),S1=HZ(yee);Object.defineProperty(w1,"__esModule",{value:!0});w1.containsOnlyInlineElements=kee;var bee=S1,wee=m1;function kee(t){var e;(0,bee.isString)(t)?(e=document.createElement("div"),e.innerHTML=t):e=t;var n=function(r){return!(0,wee.blockElements)().includes(r.tagName.toLowerCase())&&Array.from(r.children).every(n)};return Array.from(e.children).every(n)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.containsOnlyInlineElements=void 0;var e=w1;Object.defineProperty(t,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(Vm);var AA={},C1={},Ym={},_1={};Object.defineProperty(_1,"__esModule",{value:!0});_1.make=See;function See(t,e,n){var r;e===void 0&&(e=null),n===void 0&&(n={});var s=document.createElement(t);if(Array.isArray(e)){var o=e.filter(function(l){return l!==void 0});(r=s.classList).add.apply(r,o)}else e!==null&&s.classList.add(e);for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i]);return s}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.make=void 0;var e=_1;Object.defineProperty(t,"make",{enumerable:!0,get:function(){return e.make}})})(Ym);Object.defineProperty(C1,"__esModule",{value:!0});C1.fragmentToString=_ee;var Cee=Ym;function _ee(t){var e=(0,Cee.make)("div");return e.appendChild(t),e.innerHTML}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fragmentToString=void 0;var e=C1;Object.defineProperty(t,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(AA);var IA={},E1={};Object.defineProperty(E1,"__esModule",{value:!0});E1.getContentLength=Nee;var Eee=Ra;function Nee(t){var e,n;return(0,Eee.isNativeInput)(t)?t.value.length:t.nodeType===Node.TEXT_NODE?t.length:(n=(e=t.textContent)===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getContentLength=void 0;var e=E1;Object.defineProperty(t,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(IA);var N1={},j1={},vE=Tp&&Tp.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(j1,"__esModule",{value:!0});j1.getDeepestBlockElements=DA;var jee=Vm;function DA(t){return(0,jee.containsOnlyInlineElements)(t)?[t]:Array.from(t.children).reduce(function(e,n){return vE(vE([],e,!0),DA(n),!0)},[])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepestBlockElements=void 0;var e=j1;Object.defineProperty(t,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(N1);var LA={},T1={},qm={},M1={};Object.defineProperty(M1,"__esModule",{value:!0});M1.isLineBreakTag=Tee;function Tee(t){return["BR","WBR"].includes(t.tagName)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLineBreakTag=void 0;var e=M1;Object.defineProperty(t,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(qm);var Km={},O1={};Object.defineProperty(O1,"__esModule",{value:!0});O1.isSingleTag=Mee;function Mee(t){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(t.tagName)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isSingleTag=void 0;var e=O1;Object.defineProperty(t,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(Km);Object.defineProperty(T1,"__esModule",{value:!0});T1.getDeepestNode=BA;var Oee=Ra,Pee=qm,Ree=Km;function BA(t,e){e===void 0&&(e=!1);var n=e?"lastChild":"firstChild",r=e?"previousSibling":"nextSibling";if(t.nodeType===Node.ELEMENT_NODE&&t[n]){var s=t[n];if((0,Ree.isSingleTag)(s)&&!(0,Oee.isNativeInput)(s)&&!(0,Pee.isLineBreakTag)(s))if(s[r])s=s[r];else if(s.parentNode!==null&&s.parentNode[r])s=s.parentNode[r];else return s.parentNode;return BA(s,e)}return t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepestNode=void 0;var e=T1;Object.defineProperty(t,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(LA);var FA={},P1={},rf=Tp&&Tp.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(P1,"__esModule",{value:!0});P1.findAllInputs=Bee;var Aee=Vm,Iee=N1,Dee=u1,Lee=Ra;function Bee(t){return Array.from(t.querySelectorAll((0,Dee.allInputsSelector)())).reduce(function(e,n){return(0,Lee.isNativeInput)(n)||(0,Aee.containsOnlyInlineElements)(n)?rf(rf([],e,!0),[n],!1):rf(rf([],e,!0),(0,Iee.getDeepestBlockElements)(n),!0)},[])}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAllInputs=void 0;var e=P1;Object.defineProperty(t,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(FA);var $A={},R1={};Object.defineProperty(R1,"__esModule",{value:!0});R1.isCollapsedWhitespaces=Fee;function Fee(t){return!/[^\t\n\r ]/.test(t)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCollapsedWhitespaces=void 0;var e=R1;Object.defineProperty(t,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})($A);var A1={},I1={};Object.defineProperty(I1,"__esModule",{value:!0});I1.isElement=zee;var $ee=S1;function zee(t){return(0,$ee.isNumber)(t)?!1:!!t&&!!t.nodeType&&t.nodeType===Node.ELEMENT_NODE}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isElement=void 0;var e=I1;Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(A1);var zA={},D1={},L1={},B1={};Object.defineProperty(B1,"__esModule",{value:!0});B1.isLeaf=Uee;function Uee(t){return t===null?!1:t.childNodes.length===0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLeaf=void 0;var e=B1;Object.defineProperty(t,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(L1);var F1={},$1={};Object.defineProperty($1,"__esModule",{value:!0});$1.isNodeEmpty=qee;var Hee=qm,Wee=A1,Vee=Ra,Yee=Km;function qee(t,e){var n="";return(0,Yee.isSingleTag)(t)&&!(0,Hee.isLineBreakTag)(t)?!1:((0,Wee.isElement)(t)&&(0,Vee.isNativeInput)(t)?n=t.value:t.textContent!==null&&(n=t.textContent.replace("","")),e!==void 0&&(n=n.replace(new RegExp(e,"g"),"")),n.trim().length===0)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeEmpty=void 0;var e=$1;Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(F1);Object.defineProperty(D1,"__esModule",{value:!0});D1.isEmpty=Gee;var Kee=L1,Xee=F1;function Gee(t,e){t.normalize();for(var n=[t];n.length>0;){var r=n.shift();if(r){if(t=r,(0,Kee.isLeaf)(t)&&!(0,Xee.isNodeEmpty)(t,e))return!1;n.push.apply(n,Array.from(t.childNodes))}}return!0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=void 0;var e=D1;Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(zA);var UA={},z1={};Object.defineProperty(z1,"__esModule",{value:!0});z1.isFragment=Qee;var Jee=S1;function Qee(t){return(0,Jee.isNumber)(t)?!1:!!t&&!!t.nodeType&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFragment=void 0;var e=z1;Object.defineProperty(t,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(UA);var HA={},U1={};Object.defineProperty(U1,"__esModule",{value:!0});U1.isHTMLString=ete;var Zee=Ym;function ete(t){var e=(0,Zee.make)("div");return e.innerHTML=t,e.childElementCount>0}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isHTMLString=void 0;var e=U1;Object.defineProperty(t,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(HA);var WA={},H1={};Object.defineProperty(H1,"__esModule",{value:!0});H1.offset=tte;function tte(t){var e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,s=e.top+r,o=e.left+n;return{top:s,left:o,bottom:s+e.height,right:o+e.width}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.offset=void 0;var e=H1;Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return e.offset}})})(WA);var VA={},W1={};Object.defineProperty(W1,"__esModule",{value:!0});W1.prepend=nte;function nte(t,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(n){return t.prepend(n)})):t.prepend(e)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=void 0;var e=W1;Object.defineProperty(t,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(VA);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.offset=t.make=t.isLineBreakTag=t.isSingleTag=t.isNodeEmpty=t.isLeaf=t.isHTMLString=t.isFragment=t.isEmpty=t.isElement=t.isContentEditable=t.isCollapsedWhitespaces=t.findAllInputs=t.isNativeInput=t.allInputsSelector=t.getDeepestNode=t.getDeepestBlockElements=t.getContentLength=t.fragmentToString=t.containsOnlyInlineElements=t.canSetCaret=t.calculateBaseline=t.blockElements=t.append=void 0;var e=u1;Object.defineProperty(t,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var n=Ra;Object.defineProperty(t,"isNativeInput",{enumerable:!0,get:function(){return n.isNativeInput}});var r=TA;Object.defineProperty(t,"append",{enumerable:!0,get:function(){return r.append}});var s=m1;Object.defineProperty(t,"blockElements",{enumerable:!0,get:function(){return s.blockElements}});var o=MA;Object.defineProperty(t,"calculateBaseline",{enumerable:!0,get:function(){return o.calculateBaseline}});var i=OA;Object.defineProperty(t,"canSetCaret",{enumerable:!0,get:function(){return i.canSetCaret}});var l=Vm;Object.defineProperty(t,"containsOnlyInlineElements",{enumerable:!0,get:function(){return l.containsOnlyInlineElements}});var u=AA;Object.defineProperty(t,"fragmentToString",{enumerable:!0,get:function(){return u.fragmentToString}});var h=IA;Object.defineProperty(t,"getContentLength",{enumerable:!0,get:function(){return h.getContentLength}});var f=N1;Object.defineProperty(t,"getDeepestBlockElements",{enumerable:!0,get:function(){return f.getDeepestBlockElements}});var m=LA;Object.defineProperty(t,"getDeepestNode",{enumerable:!0,get:function(){return m.getDeepestNode}});var x=FA;Object.defineProperty(t,"findAllInputs",{enumerable:!0,get:function(){return x.findAllInputs}});var w=$A;Object.defineProperty(t,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return w.isCollapsedWhitespaces}});var v=y1;Object.defineProperty(t,"isContentEditable",{enumerable:!0,get:function(){return v.isContentEditable}});var y=A1;Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return y.isElement}});var k=zA;Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return k.isEmpty}});var C=UA;Object.defineProperty(t,"isFragment",{enumerable:!0,get:function(){return C.isFragment}});var _=HA;Object.defineProperty(t,"isHTMLString",{enumerable:!0,get:function(){return _.isHTMLString}});var j=L1;Object.defineProperty(t,"isLeaf",{enumerable:!0,get:function(){return j.isLeaf}});var M=F1;Object.defineProperty(t,"isNodeEmpty",{enumerable:!0,get:function(){return M.isNodeEmpty}});var O=qm;Object.defineProperty(t,"isLineBreakTag",{enumerable:!0,get:function(){return O.isLineBreakTag}});var T=Km;Object.defineProperty(t,"isSingleTag",{enumerable:!0,get:function(){return T.isSingleTag}});var I=Ym;Object.defineProperty(t,"make",{enumerable:!0,get:function(){return I.make}});var A=WA;Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return A.offset}});var F=VA;Object.defineProperty(t,"prepend",{enumerable:!0,get:function(){return F.prepend}})})(Hf);var YA=(t=>(t.Left="left",t.Center="center",t))(YA||{});let rte=class Vf{constructor({data:e,config:n,api:r,readOnly:s,block:o}){const{DEFAULT_ALIGNMENT:i}=Vf;this.api=r,this.readOnly=s,this.quotePlaceholder=r.i18n.t(n?.quotePlaceholder??Vf.DEFAULT_QUOTE_PLACEHOLDER),this.captionPlaceholder=r.i18n.t(n?.captionPlaceholder??Vf.DEFAULT_CAPTION_PLACEHOLDER),this.data={text:e.text||"",caption:e.caption||"",alignment:Object.values(YA).includes(e.alignment)?e.alignment:n?.defaultAlignment??i},this.css={baseClass:this.api.styles.block,wrapper:"cdx-quote",text:"cdx-quote__text",input:this.api.styles.input,caption:"cdx-quote__caption"},this.block=o}static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:UZ,title:"Quote"}}static get contentless(){return!0}static get enableLineBreaks(){return!0}static get DEFAULT_QUOTE_PLACEHOLDER(){return"Enter a quote"}static get DEFAULT_CAPTION_PLACEHOLDER(){return"Enter a caption"}static get DEFAULT_ALIGNMENT(){return"left"}static get conversionConfig(){return{import:"text",export:function(e){return e.caption?`${e.text}  ${e.caption}`:e.text}}}get CSS(){return{baseClass:this.api.styles.block,wrapper:"cdx-quote",text:"cdx-quote__text",input:this.api.styles.input,caption:"cdx-quote__caption"}}get settings(){return[{name:"left",icon:zZ},{name:"center",icon:$Z}]}render(){const e=Hf.make("blockquote",[this.css.baseClass,this.css.wrapper]),n=Hf.make("div",[this.css.input,this.css.text],{contentEditable:!this.readOnly,innerHTML:this.data.text}),r=Hf.make("div",[this.css.input,this.css.caption],{contentEditable:!this.readOnly,innerHTML:this.data.caption});return n.dataset.placeholder=this.quotePlaceholder,r.dataset.placeholder=this.captionPlaceholder,e.appendChild(n),e.appendChild(r),e}save(e){const n=e.querySelector(`.${this.css.text}`),r=e.querySelector(`.${this.css.caption}`);return Object.assign(this.data,{text:n?.innerHTML??"",caption:r?.innerHTML??""})}static get sanitize(){return{text:{br:!0},caption:{br:!0},alignment:{}}}renderSettings(){const e=n=>n&&n[0].toUpperCase()+n.slice(1);return this.settings.map(n=>({icon:n.icon,label:this.api.i18n.t(`Align ${e(n.name)}`),onActivate:()=>this._toggleTune(n.name),isActive:this.data.alignment===n.name,closeOnActivate:!0}))}_toggleTune(e){this.data.alignment=e,this.block.dispatchChange()}};(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.ce-delimiter{line-height:1.6em;width:100%;text-align:center}.ce-delimiter:before{display:inline-block;content:"***";font-size:30px;line-height:65px;height:30px;letter-spacing:.2em}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const ste='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="6" x2="10" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="14" x2="18" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>';/**
 * Delimiter Block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 * @version 2.0.0
 */class ote{static get isReadOnlySupported(){return!0}static get contentless(){return!0}constructor({data:e,config:n,api:r}){this.api=r,this._CSS={block:this.api.styles.block,wrapper:"ce-delimiter"},this._element=this.drawView(),this.data=e}drawView(){let e=document.createElement("div");return e.classList.add(this._CSS.wrapper,this._CSS.block),e}render(){return this._element}save(e){return{}}static get toolbox(){return{icon:ste,title:"Delimiter"}}static get pasteConfig(){return{tags:["HR"]}}onPaste(e){this.data={}}}(function(){var t;try{if(typeof document<"u"){var e=document.createElement("style");e.nonce=(t=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:t.content,e.appendChild(document.createTextNode('.tc-wrap{--color-background:#f9f9fb;--color-text-secondary:#7b7e89;--color-border:#e8e8eb;--cell-size:34px;--toolbox-icon-size:18px;--toolbox-padding:6px;--toolbox-aiming-field-size:calc(var(--toolbox-icon-size) + var(--toolbox-padding)*2);border-left:0;position:relative;height:100%;width:100%;margin-top:var(--toolbox-icon-size);box-sizing:border-box;display:grid;grid-template-columns:calc(100% - var(--cell-size)) var(--cell-size);z-index:0}.tc-wrap--readonly{grid-template-columns:100% var(--cell-size)}.tc-wrap svg{vertical-align:top}@media print{.tc-wrap{border-left-color:var(--color-border);border-left-style:solid;border-left-width:1px;grid-template-columns:100% var(--cell-size)}}@media print{.tc-wrap .tc-row:after{display:none}}.tc-table{position:relative;width:100%;height:100%;display:grid;font-size:14px;border-top:1px solid var(--color-border);line-height:1.4}.tc-table:after{width:calc(var(--cell-size));height:100%;left:calc(var(--cell-size)*-1);top:0}.tc-table:after,.tc-table:before{position:absolute;content:""}.tc-table:before{width:100%;height:var(--toolbox-aiming-field-size);top:calc(var(--toolbox-aiming-field-size)*-1);left:0}.tc-table--heading .tc-row:first-child{font-weight:600;border-bottom:2px solid var(--color-border);position:sticky;top:0;z-index:2;background:var(--color-background)}.tc-table--heading .tc-row:first-child [contenteditable]:empty:before{content:attr(heading);color:var(--color-text-secondary)}.tc-table--heading .tc-row:first-child:after{bottom:-2px;border-bottom:2px solid var(--color-border)}.tc-add-column,.tc-add-row{display:flex;color:var(--color-text-secondary)}@media print{.tc-add{display:none}}.tc-add-column{display:grid;border-top:1px solid var(--color-border);grid-template-columns:var(--cell-size);grid-auto-rows:var(--cell-size);place-items:center}.tc-add-column svg{padding:5px;position:sticky;top:0;background-color:var(--color-background)}.tc-add-column--disabled{visibility:hidden}@media print{.tc-add-column{display:none}}.tc-add-row{height:var(--cell-size);align-items:center;padding-left:4px;position:relative}.tc-add-row--disabled{display:none}.tc-add-row:before{content:"";position:absolute;right:calc(var(--cell-size)*-1);width:var(--cell-size);height:100%}@media print{.tc-add-row{display:none}}.tc-add-column,.tc-add-row{transition:0s;cursor:pointer;will-change:background-color}.tc-add-column:hover,.tc-add-row:hover{transition:background-color .1s ease;background-color:var(--color-background)}.tc-add-row{margin-top:1px}.tc-add-row:hover:before{transition:.1s;background-color:var(--color-background)}.tc-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(10px,1fr));position:relative;border-bottom:1px solid var(--color-border)}.tc-row:after{content:"";pointer-events:none;position:absolute;width:var(--cell-size);height:100%;bottom:-1px;right:calc(var(--cell-size)*-1);border-bottom:1px solid var(--color-border)}.tc-row--selected{background:var(--color-background)}.tc-row--selected:after{background:var(--color-background)}.tc-cell{border-right:1px solid var(--color-border);padding:6px 12px;overflow:hidden;outline:none;line-break:normal}.tc-cell--selected{background:var(--color-background)}.tc-wrap--readonly .tc-row:after{display:none}.tc-toolbox{--toolbox-padding:6px;--popover-margin:30px;--toggler-click-zone-size:30px;--toggler-dots-color:#7b7e89;--toggler-dots-color-hovered:#1d202b;position:absolute;cursor:pointer;z-index:1;opacity:0;transition:opacity .1s;will-change:left,opacity}.tc-toolbox--column{top:calc(var(--toggler-click-zone-size)*-1);transform:translate(calc(var(--toggler-click-zone-size)*-1/2));will-change:left,opacity}.tc-toolbox--row{left:calc(var(--popover-margin)*-1);transform:translateY(calc(var(--toggler-click-zone-size)*-1/2));margin-top:-1px;will-change:top,opacity}.tc-toolbox--showed{opacity:1}.tc-toolbox .tc-popover{position:absolute;top:0;left:var(--popover-margin)}.tc-toolbox__toggler{display:flex;align-items:center;justify-content:center;width:var(--toggler-click-zone-size);height:var(--toggler-click-zone-size);color:var(--toggler-dots-color);opacity:0;transition:opacity .15s ease;will-change:opacity}.tc-toolbox__toggler:hover{color:var(--toggler-dots-color-hovered)}.tc-toolbox__toggler svg{fill:currentColor}.tc-wrap:hover .tc-toolbox__toggler{opacity:1}.tc-settings .cdx-settings-button{width:50%;margin:0}.tc-popover{--color-border:#eaeaea;--color-background:#fff;--color-background-hover:rgba(232,232,235,.49);--color-background-confirm:#e24a4a;--color-background-confirm-hover:#d54040;--color-text-confirm:#fff;background:var(--color-background);border:1px solid var(--color-border);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;padding:6px;display:none;will-change:opacity,transform}.tc-popover--opened{display:block;animation:menuShowing .1s cubic-bezier(.215,.61,.355,1) forwards}.tc-popover__item{display:flex;align-items:center;padding:2px 14px 2px 2px;border-radius:5px;cursor:pointer;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tc-popover__item:hover{background:var(--color-background-hover)}.tc-popover__item:not(:last-of-type){margin-bottom:2px}.tc-popover__item-icon{display:inline-flex;width:26px;height:26px;align-items:center;justify-content:center;background:var(--color-background);border-radius:5px;border:1px solid var(--color-border);margin-right:8px}.tc-popover__item-label{line-height:22px;font-size:14px;font-weight:500}.tc-popover__item--confirm{background:var(--color-background-confirm);color:var(--color-text-confirm)}.tc-popover__item--confirm:hover{background-color:var(--color-background-confirm-hover)}.tc-popover__item--confirm .tc-popover__item-icon{background:var(--color-background-confirm);border-color:#0000001a}.tc-popover__item--confirm .tc-popover__item-icon svg{transition:transform .2s ease-in;transform:rotate(90deg) scale(1.2)}.tc-popover__item--hidden{display:none}@keyframes menuShowing{0%{opacity:0;transform:translateY(-8px) scale(.9)}70%{opacity:1;transform:translateY(2px)}to{transform:translateY(0)}}')),document.head.appendChild(e)}}catch(n){console.error("vite-plugin-css-injected-by-js",n)}})();function mr(t,e,n={}){const r=document.createElement(t);Array.isArray(e)?r.classList.add(...e):e&&r.classList.add(e);for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s]);return r}function yE(t){const e=t.getBoundingClientRect();return{y1:Math.floor(e.top+window.pageYOffset),x1:Math.floor(e.left+window.pageXOffset),x2:Math.floor(e.right+window.pageXOffset),y2:Math.floor(e.bottom+window.pageYOffset)}}function bE(t,e){const n=yE(t),r=yE(e);return{fromTopBorder:r.y1-n.y1,fromLeftBorder:r.x1-n.x1,fromRightBorder:n.x2-r.x2,fromBottomBorder:n.y2-r.y2}}function ite(t,e){const n=t.getBoundingClientRect(),{width:r,height:s,x:o,y:i}=n,{clientX:l,clientY:u}=e;return{width:r,height:s,x:l-o,y:u-i}}function wE(t,e){return e.parentNode.insertBefore(t,e)}function kE(t,e=!0){const n=document.createRange(),r=window.getSelection();n.selectNodeContents(t),n.collapse(e),r.removeAllRanges(),r.addRange(n)}class qn{constructor({items:e}){this.items=e,this.wrapper=void 0,this.itemEls=[]}static get CSS(){return{popover:"tc-popover",popoverOpened:"tc-popover--opened",item:"tc-popover__item",itemHidden:"tc-popover__item--hidden",itemConfirmState:"tc-popover__item--confirm",itemIcon:"tc-popover__item-icon",itemLabel:"tc-popover__item-label"}}render(){return this.wrapper=mr("div",qn.CSS.popover),this.items.forEach((e,n)=>{const r=mr("div",qn.CSS.item),s=mr("div",qn.CSS.itemIcon,{innerHTML:e.icon}),o=mr("div",qn.CSS.itemLabel,{textContent:e.label});r.dataset.index=n,r.appendChild(s),r.appendChild(o),this.wrapper.appendChild(r),this.itemEls.push(r)}),this.wrapper.addEventListener("click",e=>{this.popoverClicked(e)}),this.wrapper}popoverClicked(e){const n=e.target.closest(`.${qn.CSS.item}`);if(!n)return;const r=n.dataset.index,s=this.items[r];if(s.confirmationRequired&&!this.hasConfirmationState(n)){this.setConfirmationState(n);return}s.onClick()}setConfirmationState(e){e.classList.add(qn.CSS.itemConfirmState)}clearConfirmationState(e){e.classList.remove(qn.CSS.itemConfirmState)}hasConfirmationState(e){return e.classList.contains(qn.CSS.itemConfirmState)}get opened(){return this.wrapper.classList.contains(qn.CSS.popoverOpened)}open(){this.items.forEach((e,n)=>{typeof e.hideIf=="function"&&this.itemEls[n].classList.toggle(qn.CSS.itemHidden,e.hideIf())}),this.wrapper.classList.add(qn.CSS.popoverOpened)}close(){this.wrapper.classList.remove(qn.CSS.popoverOpened),this.itemEls.forEach(e=>{this.clearConfirmationState(e)})}}const ate='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L10 12M10 12L7 15M10 12H4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L14 12M14 12L17 15M14 12H20"/></svg>',SE='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',lte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',cte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',dte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',ute='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',hte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.41 9.66H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 9.66H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.31 14.36H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 14.36H14.59"/></svg>',CE='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',fte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',pte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',mte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',gte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';class oi{constructor({api:e,items:n,onOpen:r,onClose:s,cssModifier:o=""}){this.api=e,this.items=n,this.onOpen=r,this.onClose=s,this.cssModifier=o,this.popover=null,this.wrapper=this.createToolbox()}static get CSS(){return{toolbox:"tc-toolbox",toolboxShowed:"tc-toolbox--showed",toggler:"tc-toolbox__toggler"}}get element(){return this.wrapper}createToolbox(){const e=mr("div",[oi.CSS.toolbox,this.cssModifier?`${oi.CSS.toolbox}--${this.cssModifier}`:""]);e.dataset.mutationFree="true";const n=this.createPopover(),r=this.createToggler();return e.appendChild(r),e.appendChild(n),e}createToggler(){const e=mr("div",oi.CSS.toggler,{innerHTML:hte});return e.addEventListener("click",()=>{this.togglerClicked()}),e}createPopover(){return this.popover=new qn({items:this.items}),this.popover.render()}togglerClicked(){this.popover.opened?(this.popover.close(),this.onClose()):(this.popover.open(),this.onOpen())}show(e){const n=e();Object.entries(n).forEach(([r,s])=>{this.wrapper.style[r]=s}),this.wrapper.classList.add(oi.CSS.toolboxShowed)}hide(){this.popover.close(),this.wrapper.classList.remove(oi.CSS.toolboxShowed)}}function xte(t,e){let n=0;return function(...r){const s=new Date().getTime();if(!(s-n<t))return n=s,e(...r)}}const Qe={wrapper:"tc-wrap",wrapperReadOnly:"tc-wrap--readonly",table:"tc-table",row:"tc-row",withHeadings:"tc-table--heading",rowSelected:"tc-row--selected",cell:"tc-cell",cellSelected:"tc-cell--selected",addRow:"tc-add-row",addRowDisabled:"tc-add-row--disabled",addColumn:"tc-add-column",addColumnDisabled:"tc-add-column--disabled"};class vte{constructor(e,n,r,s){this.readOnly=e,this.api=n,this.data=r,this.config=s,this.wrapper=null,this.table=null,this.toolboxColumn=this.createColumnToolbox(),this.toolboxRow=this.createRowToolbox(),this.createTableWrapper(),this.hoveredRow=0,this.hoveredColumn=0,this.selectedRow=0,this.selectedColumn=0,this.tunes={withHeadings:!1},this.resize(),this.fill(),this.focusedCell={row:0,column:0},this.documentClicked=o=>{const i=o.target.closest(`.${Qe.table}`)!==null,l=o.target.closest(`.${Qe.wrapper}`)===null;(i||l)&&this.hideToolboxes();const u=o.target.closest(`.${Qe.addRow}`),h=o.target.closest(`.${Qe.addColumn}`);u&&u.parentNode===this.wrapper?(this.addRow(void 0,!0),this.hideToolboxes()):h&&h.parentNode===this.wrapper&&(this.addColumn(void 0,!0),this.hideToolboxes())},this.readOnly||this.bindEvents()}getWrapper(){return this.wrapper}bindEvents(){document.addEventListener("click",this.documentClicked),this.table.addEventListener("mousemove",xte(150,e=>this.onMouseMoveInTable(e)),{passive:!0}),this.table.onkeypress=e=>this.onKeyPressListener(e),this.table.addEventListener("keydown",e=>this.onKeyDownListener(e)),this.table.addEventListener("focusin",e=>this.focusInTableListener(e))}createColumnToolbox(){return new oi({api:this.api,cssModifier:"column",items:[{label:this.api.i18n.t("Add column to left"),icon:cte,hideIf:()=>this.numberOfColumns===this.config.maxcols,onClick:()=>{this.addColumn(this.selectedColumn,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add column to right"),icon:dte,hideIf:()=>this.numberOfColumns===this.config.maxcols,onClick:()=>{this.addColumn(this.selectedColumn+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete column"),icon:SE,hideIf:()=>this.numberOfColumns===1,confirmationRequired:!0,onClick:()=>{this.deleteColumn(this.selectedColumn),this.hideToolboxes()}}],onOpen:()=>{this.selectColumn(this.hoveredColumn),this.hideRowToolbox()},onClose:()=>{this.unselectColumn()}})}createRowToolbox(){return new oi({api:this.api,cssModifier:"row",items:[{label:this.api.i18n.t("Add row above"),icon:ute,hideIf:()=>this.numberOfRows===this.config.maxrows,onClick:()=>{this.addRow(this.selectedRow,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add row below"),icon:lte,hideIf:()=>this.numberOfRows===this.config.maxrows,onClick:()=>{this.addRow(this.selectedRow+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete row"),icon:SE,hideIf:()=>this.numberOfRows===1,confirmationRequired:!0,onClick:()=>{this.deleteRow(this.selectedRow),this.hideToolboxes()}}],onOpen:()=>{this.selectRow(this.hoveredRow),this.hideColumnToolbox()},onClose:()=>{this.unselectRow()}})}moveCursorToNextRow(){this.focusedCell.row!==this.numberOfRows?(this.focusedCell.row+=1,this.focusCell(this.focusedCell)):(this.addRow(),this.focusedCell.row+=1,this.focusCell(this.focusedCell),this.updateToolboxesPosition(0,0))}getCell(e,n){return this.table.querySelectorAll(`.${Qe.row}:nth-child(${e}) .${Qe.cell}`)[n-1]}getRow(e){return this.table.querySelector(`.${Qe.row}:nth-child(${e})`)}getRowByCell(e){return e.parentElement}getRowFirstCell(e){return e.querySelector(`.${Qe.cell}:first-child`)}setCellContent(e,n,r){const s=this.getCell(e,n);s.innerHTML=r}addColumn(e=-1,n=!1){var r;let s=this.numberOfColumns;if(this.config&&this.config.maxcols&&this.numberOfColumns>=this.config.maxcols)return;for(let i=1;i<=this.numberOfRows;i++){let l;const u=this.createCell();if(e>0&&e<=s?(l=this.getCell(i,e),wE(u,l)):l=this.getRow(i).appendChild(u),i===1){const h=this.getCell(i,e>0?e:s+1);h&&n&&kE(h)}}const o=this.wrapper.querySelector(`.${Qe.addColumn}`);(r=this.config)!=null&&r.maxcols&&this.numberOfColumns>this.config.maxcols-1&&o&&o.classList.add(Qe.addColumnDisabled),this.addHeadingAttrToFirstRow()}addRow(e=-1,n=!1){let r,s=mr("div",Qe.row);this.tunes.withHeadings&&this.removeHeadingAttrFromFirstRow();let o=this.numberOfColumns;if(this.config&&this.config.maxrows&&this.numberOfRows>=this.config.maxrows&&l)return;if(e>0&&e<=this.numberOfRows){let u=this.getRow(e);r=wE(s,u)}else r=this.table.appendChild(s);this.fillRow(r,o),this.tunes.withHeadings&&this.addHeadingAttrToFirstRow();const i=this.getRowFirstCell(r);i&&n&&kE(i);const l=this.wrapper.querySelector(`.${Qe.addRow}`);return this.config&&this.config.maxrows&&this.numberOfRows>=this.config.maxrows&&l&&l.classList.add(Qe.addRowDisabled),r}deleteColumn(e){for(let r=1;r<=this.numberOfRows;r++){const s=this.getCell(r,e);if(!s)return;s.remove()}const n=this.wrapper.querySelector(`.${Qe.addColumn}`);n&&n.classList.remove(Qe.addColumnDisabled)}deleteRow(e){this.getRow(e).remove();const n=this.wrapper.querySelector(`.${Qe.addRow}`);n&&n.classList.remove(Qe.addRowDisabled),this.addHeadingAttrToFirstRow()}createTableWrapper(){if(this.wrapper=mr("div",Qe.wrapper),this.table=mr("div",Qe.table),this.readOnly&&this.wrapper.classList.add(Qe.wrapperReadOnly),this.wrapper.appendChild(this.toolboxRow.element),this.wrapper.appendChild(this.toolboxColumn.element),this.wrapper.appendChild(this.table),!this.readOnly){const e=mr("div",Qe.addColumn,{innerHTML:CE}),n=mr("div",Qe.addRow,{innerHTML:CE});this.wrapper.appendChild(e),this.wrapper.appendChild(n)}}computeInitialSize(){const e=this.data&&this.data.content,n=Array.isArray(e),r=n?e.length:!1,s=n?e.length:void 0,o=r?e[0].length:void 0,i=Number.parseInt(this.config&&this.config.rows),l=Number.parseInt(this.config&&this.config.cols),u=!isNaN(i)&&i>0?i:void 0,h=!isNaN(l)&&l>0?l:void 0;return{rows:s||u||2,cols:o||h||2}}resize(){const{rows:e,cols:n}=this.computeInitialSize();for(let r=0;r<e;r++)this.addRow();for(let r=0;r<n;r++)this.addColumn()}fill(){const e=this.data;if(e&&e.content)for(let n=0;n<e.content.length;n++)for(let r=0;r<e.content[n].length;r++)this.setCellContent(n+1,r+1,e.content[n][r])}fillRow(e,n){for(let r=1;r<=n;r++){const s=this.createCell();e.appendChild(s)}}createCell(){return mr("div",Qe.cell,{contentEditable:!this.readOnly})}get numberOfRows(){return this.table.childElementCount}get numberOfColumns(){return this.numberOfRows?this.table.querySelectorAll(`.${Qe.row}:first-child .${Qe.cell}`).length:0}get isColumnMenuShowing(){return this.selectedColumn!==0}get isRowMenuShowing(){return this.selectedRow!==0}onMouseMoveInTable(e){const{row:n,column:r}=this.getHoveredCell(e);this.hoveredColumn=r,this.hoveredRow=n,this.updateToolboxesPosition()}onKeyPressListener(e){if(e.key==="Enter"){if(e.shiftKey)return!0;this.moveCursorToNextRow()}return e.key!=="Enter"}onKeyDownListener(e){e.key==="Tab"&&e.stopPropagation()}focusInTableListener(e){const n=e.target,r=this.getRowByCell(n);this.focusedCell={row:Array.from(this.table.querySelectorAll(`.${Qe.row}`)).indexOf(r)+1,column:Array.from(r.querySelectorAll(`.${Qe.cell}`)).indexOf(n)+1}}hideToolboxes(){this.hideRowToolbox(),this.hideColumnToolbox(),this.updateToolboxesPosition()}hideRowToolbox(){this.unselectRow(),this.toolboxRow.hide()}hideColumnToolbox(){this.unselectColumn(),this.toolboxColumn.hide()}focusCell(){this.focusedCellElem.focus()}get focusedCellElem(){const{row:e,column:n}=this.focusedCell;return this.getCell(e,n)}updateToolboxesPosition(e=this.hoveredRow,n=this.hoveredColumn){this.isColumnMenuShowing||n>0&&n<=this.numberOfColumns&&this.toolboxColumn.show(()=>({left:`calc((100% - var(--cell-size)) / (${this.numberOfColumns} * 2) * (1 + (${n} - 1) * 2))`})),this.isRowMenuShowing||e>0&&e<=this.numberOfRows&&this.toolboxRow.show(()=>{const r=this.getRow(e),{fromTopBorder:s}=bE(this.table,r),{height:o}=r.getBoundingClientRect();return{top:`${Math.ceil(s+o/2)}px`}})}setHeadingsSetting(e){this.tunes.withHeadings=e,e?(this.table.classList.add(Qe.withHeadings),this.addHeadingAttrToFirstRow()):(this.table.classList.remove(Qe.withHeadings),this.removeHeadingAttrFromFirstRow())}addHeadingAttrToFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let n=this.getCell(1,e);n&&n.setAttribute("heading",this.api.i18n.t("Heading"))}}removeHeadingAttrFromFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let n=this.getCell(1,e);n&&n.removeAttribute("heading")}}selectRow(e){const n=this.getRow(e);n&&(this.selectedRow=e,n.classList.add(Qe.rowSelected))}unselectRow(){if(this.selectedRow<=0)return;const e=this.table.querySelector(`.${Qe.rowSelected}`);e&&e.classList.remove(Qe.rowSelected),this.selectedRow=0}selectColumn(e){for(let n=1;n<=this.numberOfRows;n++){const r=this.getCell(n,e);r&&r.classList.add(Qe.cellSelected)}this.selectedColumn=e}unselectColumn(){if(this.selectedColumn<=0)return;let e=this.table.querySelectorAll(`.${Qe.cellSelected}`);Array.from(e).forEach(n=>{n.classList.remove(Qe.cellSelected)}),this.selectedColumn=0}getHoveredCell(e){let n=this.hoveredRow,r=this.hoveredColumn;const{width:s,height:o,x:i,y:l}=ite(this.table,e);return i>=0&&(r=this.binSearch(this.numberOfColumns,u=>this.getCell(1,u),({fromLeftBorder:u})=>i<u,({fromRightBorder:u})=>i>s-u)),l>=0&&(n=this.binSearch(this.numberOfRows,u=>this.getCell(u,1),({fromTopBorder:u})=>l<u,({fromBottomBorder:u})=>l>o-u)),{row:n||this.hoveredRow,column:r||this.hoveredColumn}}binSearch(e,n,r,s){let o=0,i=e+1,l=0,u;for(;o<i-1&&l<10;){u=Math.ceil((o+i)/2);const h=n(u),f=bE(this.table,h);if(r(f))i=u;else if(s(f))o=u;else break;l++}return u}getData(){const e=[];for(let n=1;n<=this.numberOfRows;n++){const r=this.table.querySelector(`.${Qe.row}:nth-child(${n})`),s=Array.from(r.querySelectorAll(`.${Qe.cell}`));s.every(o=>!o.textContent.trim())||e.push(s.map(o=>o.innerHTML))}return e}destroy(){document.removeEventListener("click",this.documentClicked)}}class yte{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:e,config:n,api:r,readOnly:s,block:o}){this.api=r,this.readOnly=s,this.config=n,this.data={withHeadings:this.getConfig("withHeadings",!1,e),stretched:this.getConfig("stretched",!1,e),content:e&&e.content?e.content:[]},this.table=null,this.block=o}static get toolbox(){return{icon:gte,title:"Table"}}render(){return this.table=new vte(this.readOnly,this.api,this.data,this.config),this.container=mr("div",this.api.styles.block),this.container.appendChild(this.table.getWrapper()),this.table.setHeadingsSetting(this.data.withHeadings),this.container}renderSettings(){return[{label:this.api.i18n.t("With headings"),icon:pte,isActive:this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!0,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.api.i18n.t("Without headings"),icon:mte,isActive:!this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!1,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.data.stretched?this.api.i18n.t("Collapse"):this.api.i18n.t("Stretch"),icon:this.data.stretched?ate:fte,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.stretched=!this.data.stretched,this.block.stretched=this.data.stretched}}]}save(){const e=this.table.getData();return{withHeadings:this.data.withHeadings,stretched:this.data.stretched,content:e}}destroy(){this.table.destroy()}getConfig(e,n=void 0,r=void 0){const s=this.data||r;return s?s[e]?s[e]:n:this.config&&this.config[e]?this.config[e]:n}static get pasteConfig(){return{tags:["TABLE","TR","TH","TD"]}}onPaste(e){const n=e.detail.data,r=n.querySelector(":scope > thead, tr:first-of-type th"),s=Array.from(n.querySelectorAll("tr")).map(o=>Array.from(o.querySelectorAll("th, td")).map(i=>i.innerHTML));this.data={withHeadings:r!==null,content:s},this.table.wrapper&&this.table.wrapper.replaceWith(this.render())}}(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ce-code__textarea{min-height:200px;font-family:Menlo,Monaco,Consolas,Courier New,monospace;color:#41314e;line-height:1.6em;font-size:12px;background:#f8f7fa;border:1px solid #f1f1f4;box-shadow:none;white-space:pre;word-wrap:normal;overflow-x:auto;resize:vertical}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();function bte(t,e){let n="";for(;n!==`
`&&e>0;)e=e-1,n=t.substr(e,1);return n===`
`&&(e+=1),e}const wte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 8L5 12L9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8L19 12L15 16"/></svg>';/**
 * CodeTool for Editor.js
 * @version 2.0.0
 * @license MIT
 */class V1{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:e,config:n,api:r,readOnly:s}){this.api=r,this.readOnly=s,this.placeholder=this.api.i18n.t(n.placeholder||V1.DEFAULT_PLACEHOLDER),this.CSS={baseClass:this.api.styles.block,input:this.api.styles.input,wrapper:"ce-code",textarea:"ce-code__textarea"},this.nodes={holder:null,textarea:null},this.data={code:e.code??""},this.nodes.holder=this.drawView()}render(){return this.nodes.holder}save(e){return{code:e.querySelector("textarea").value}}onPaste(e){const n=e.detail;if("data"in n){const r=n.data;this.data={code:r||""}}}get data(){return this._data}set data(e){this._data=e,this.nodes.textarea&&(this.nodes.textarea.value=e.code)}static get toolbox(){return{icon:wte,title:"Code"}}static get DEFAULT_PLACEHOLDER(){return"Enter a code"}static get pasteConfig(){return{tags:["pre"]}}static get sanitize(){return{code:!0}}tabHandler(e){e.stopPropagation(),e.preventDefault();const n=e.target,r=e.shiftKey,s=n.selectionStart,o=n.value,i="  ";let l;if(!r)l=s+i.length,n.value=o.substring(0,s)+i+o.substring(s);else{const u=bte(o,s);if(o.substr(u,i.length)!==i)return;n.value=o.substring(0,u)+o.substring(u+i.length),l=s-i.length}n.setSelectionRange(l,l)}drawView(){const e=document.createElement("div"),n=document.createElement("textarea");return e.classList.add(this.CSS.baseClass,this.CSS.wrapper),n.classList.add(this.CSS.textarea,this.CSS.input),n.value=this.data.code,n.placeholder=this.placeholder,this.readOnly&&(n.disabled=!0),e.appendChild(n),n.addEventListener("keydown",r=>{switch(r.code){case"Tab":this.tabHandler(r);break}}),this.nodes.textarea=n,e}}(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.image-tool{--bg-color: #cdd1e0;--front-color: #388ae5;--border-color: #e8e8eb}.image-tool__image{border-radius:3px;overflow:hidden;margin-bottom:10px;padding-bottom:0}.image-tool__image-picture{max-width:100%;vertical-align:bottom;display:block}.image-tool__image-preloader{width:50px;height:50px;border-radius:50%;background-size:cover;margin:auto;position:relative;background-color:var(--bg-color);background-position:center center}.image-tool__image-preloader:after{content:"";position:absolute;z-index:3;width:60px;height:60px;border-radius:50%;border:2px solid var(--bg-color);border-top-color:var(--front-color);left:50%;top:50%;margin-top:-30px;margin-left:-30px;animation:image-preloader-spin 2s infinite linear;box-sizing:border-box}.image-tool__caption{visibility:hidden;position:absolute;bottom:0;left:0;margin-bottom:10px}.image-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute!important;content:attr(data-placeholder);color:#707684;font-weight:400;display:none}.image-tool__caption[contentEditable=true][data-placeholder]:empty:before{display:block}.image-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{display:none}.image-tool--empty .image-tool__image,.image-tool--empty .image-tool__image-preloader{display:none}.image-tool--empty .image-tool__caption,.image-tool--uploading .image-tool__caption{visibility:hidden!important}.image-tool .cdx-button{display:flex;align-items:center;justify-content:center}.image-tool .cdx-button svg{height:auto;margin:0 6px 0 0}.image-tool--filled .cdx-button,.image-tool--filled .image-tool__image-preloader{display:none}.image-tool--uploading .image-tool__image{min-height:200px;display:flex;border:1px solid var(--border-color);background-color:#fff}.image-tool--uploading .image-tool__image-picture,.image-tool--uploading .cdx-button{display:none}.image-tool--withBorder .image-tool__image{border:1px solid var(--border-color)}.image-tool--withBackground .image-tool__image{padding:15px;background:var(--bg-color)}.image-tool--withBackground .image-tool__image-picture{max-width:60%;margin:0 auto}.image-tool--stretched .image-tool__image-picture{width:100%}.image-tool--caption .image-tool__caption{visibility:visible}.image-tool--caption{padding-bottom:50px}@keyframes image-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const kte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',Ste='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',qA='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>',Cte='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',_te='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function dl(t,e=null,n={}){const r=document.createElement(t);Array.isArray(e)?r.classList.add(...e):e!==null&&r.classList.add(e);for(const s in n)n.hasOwnProperty(s)&&(r[s]=n[s]);return r}var Yf=(t=>(t.Empty="empty",t.Uploading="uploading",t.Filled="filled",t))(Yf||{});class Ete{constructor({api:e,config:n,onSelectFile:r,readOnly:s}){this.api=e,this.config=n,this.onSelectFile=r,this.readOnly=s,this.nodes={wrapper:dl("div",[this.CSS.baseClass,this.CSS.wrapper]),imageContainer:dl("div",[this.CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:dl("div",this.CSS.imagePreloader),caption:dl("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly})},this.nodes.caption.dataset.placeholder=this.config.captionPlaceholder,this.nodes.imageContainer.appendChild(this.nodes.imagePreloader),this.nodes.wrapper.appendChild(this.nodes.imageContainer),this.nodes.wrapper.appendChild(this.nodes.caption),this.nodes.wrapper.appendChild(this.nodes.fileButton)}applyTune(e,n){this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${e}`,n)}render(){return this.toggleStatus("empty"),this.nodes.wrapper}showPreloader(e){this.nodes.imagePreloader.style.backgroundImage=`url(${e})`,this.toggleStatus("uploading")}hidePreloader(){this.nodes.imagePreloader.style.backgroundImage="",this.toggleStatus("empty")}fillImage(e){const n=/\.mp4$/.test(e)?"VIDEO":"IMG",r={src:e};let s="load";n==="VIDEO"&&(r.autoplay=!0,r.loop=!0,r.muted=!0,r.playsinline=!0,s="loadeddata"),this.nodes.imageEl=dl(n,this.CSS.imageEl,r),this.nodes.imageEl.addEventListener(s,()=>{this.toggleStatus("filled"),this.nodes.imagePreloader!==void 0&&(this.nodes.imagePreloader.style.backgroundImage="")}),this.nodes.imageContainer.appendChild(this.nodes.imageEl)}fillCaption(e){this.nodes.caption!==void 0&&(this.nodes.caption.innerHTML=e)}toggleStatus(e){for(const n in Yf)if(Object.prototype.hasOwnProperty.call(Yf,n)){const r=Yf[n];this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${r}`,r===e)}}get CSS(){return{baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,button:this.api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}createFileButton(){const e=dl("div",[this.CSS.button]);return e.innerHTML=this.config.buttonContent??`${qA} ${this.api.i18n.t("Select an Image")}`,e.addEventListener("click",()=>{this.onSelectFile()}),e}}function Nte(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KA={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(window,function(){return(function(n){var r={};function s(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=n,s.c=r,s.d=function(o,i,l){s.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:l})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,i){if(1&i&&(o=s(o)),8&i||4&i&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&i&&typeof o!="string")for(var u in o)s.d(l,u,(function(h){return o[h]}).bind(null,u));return l},s.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(i,"a",i),i},s.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},s.p="",s(s.s=3)})([function(n,r){var s;s=(function(){return this})();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}n.exports=s},function(n,r,s){(function(o){var i=s(2),l=setTimeout;function u(){}function h(k){if(!(this instanceof h))throw new TypeError("Promises must be constructed via new");if(typeof k!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],y(k,this)}function f(k,C){for(;k._state===3;)k=k._value;k._state!==0?(k._handled=!0,h._immediateFn(function(){var _=k._state===1?C.onFulfilled:C.onRejected;if(_!==null){var j;try{j=_(k._value)}catch(M){return void x(C.promise,M)}m(C.promise,j)}else(k._state===1?m:x)(C.promise,k._value)})):k._deferreds.push(C)}function m(k,C){try{if(C===k)throw new TypeError("A promise cannot be resolved with itself.");if(C&&(typeof C=="object"||typeof C=="function")){var _=C.then;if(C instanceof h)return k._state=3,k._value=C,void w(k);if(typeof _=="function")return void y((j=_,M=C,function(){j.apply(M,arguments)}),k)}k._state=1,k._value=C,w(k)}catch(O){x(k,O)}var j,M}function x(k,C){k._state=2,k._value=C,w(k)}function w(k){k._state===2&&k._deferreds.length===0&&h._immediateFn(function(){k._handled||h._unhandledRejectionFn(k._value)});for(var C=0,_=k._deferreds.length;C<_;C++)f(k,k._deferreds[C]);k._deferreds=null}function v(k,C,_){this.onFulfilled=typeof k=="function"?k:null,this.onRejected=typeof C=="function"?C:null,this.promise=_}function y(k,C){var _=!1;try{k(function(j){_||(_=!0,m(C,j))},function(j){_||(_=!0,x(C,j))})}catch(j){if(_)return;_=!0,x(C,j)}}h.prototype.catch=function(k){return this.then(null,k)},h.prototype.then=function(k,C){var _=new this.constructor(u);return f(this,new v(k,C,_)),_},h.prototype.finally=i.a,h.all=function(k){return new h(function(C,_){if(!k||k.length===void 0)throw new TypeError("Promise.all accepts an array");var j=Array.prototype.slice.call(k);if(j.length===0)return C([]);var M=j.length;function O(I,A){try{if(A&&(typeof A=="object"||typeof A=="function")){var F=A.then;if(typeof F=="function")return void F.call(A,function(U){O(I,U)},_)}j[I]=A,--M==0&&C(j)}catch(U){_(U)}}for(var T=0;T<j.length;T++)O(T,j[T])})},h.resolve=function(k){return k&&typeof k=="object"&&k.constructor===h?k:new h(function(C){C(k)})},h.reject=function(k){return new h(function(C,_){_(k)})},h.race=function(k){return new h(function(C,_){for(var j=0,M=k.length;j<M;j++)k[j].then(C,_)})},h._immediateFn=typeof o=="function"&&function(k){o(k)}||function(k){l(k,0)},h._unhandledRejectionFn=function(k){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",k)},r.a=h}).call(this,s(5).setImmediate)},function(n,r,s){r.a=function(o){var i=this.constructor;return this.then(function(l){return i.resolve(o()).then(function(){return l})},function(l){return i.resolve(o()).then(function(){return i.reject(l)})})}},function(n,r,s){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(y)}s(4);var i,l,u,h,f,m,x,w=s(8),v=(l=function(y){return new Promise(function(k,C){y=h(y),(y=f(y)).beforeSend&&y.beforeSend();var _=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");_.open(y.method,y.url),_.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(y.headers).forEach(function(M){var O=y.headers[M];_.setRequestHeader(M,O)});var j=y.ratio;_.upload.addEventListener("progress",function(M){var O=Math.round(M.loaded/M.total*100),T=Math.ceil(O*j/100);y.progress(Math.min(T,100))},!1),_.addEventListener("progress",function(M){var O=Math.round(M.loaded/M.total*100),T=Math.ceil(O*(100-j)/100)+j;y.progress(Math.min(T,100))},!1),_.onreadystatechange=function(){if(_.readyState===4){var M=_.response;try{M=JSON.parse(M)}catch{}var O=w.parseHeaders(_.getAllResponseHeaders()),T={body:M,code:_.status,headers:O};x(_.status)?k(T):C(T)}},_.send(y.data)})},u=function(y){return y.method="POST",l(y)},h=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(y.url&&typeof y.url!="string")throw new Error("Url must be a string");if(y.url=y.url||"",y.method&&typeof y.method!="string")throw new Error("`method` must be a string or null");if(y.method=y.method?y.method.toUpperCase():"GET",y.headers&&o(y.headers)!=="object")throw new Error("`headers` must be an object or null");if(y.headers=y.headers||{},y.type&&(typeof y.type!="string"||!Object.values(i).includes(y.type)))throw new Error("`type` must be taken from module's contentType library");if(y.progress&&typeof y.progress!="function")throw new Error("`progress` must be a function or null");if(y.progress=y.progress||function(k){},y.beforeSend=y.beforeSend||function(k){},y.ratio&&typeof y.ratio!="number")throw new Error("`ratio` must be a number");if(y.ratio<0||y.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(y.ratio=y.ratio||90,y.accept&&typeof y.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(y.accept=y.accept||"*/*",y.multiple&&typeof y.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(y.multiple=y.multiple||!1,y.fieldName&&typeof y.fieldName!="string")throw new Error("`fieldName` must be a string");return y.fieldName=y.fieldName||"files",y},f=function(y){switch(y.method){case"GET":var k=m(y.data,i.URLENCODED);delete y.data,y.url=/\?/.test(y.url)?y.url+"&"+k:y.url+"?"+k;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var C=(function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||i.JSON})(y);(w.isFormData(y.data)||w.isFormElement(y.data))&&(C=i.FORM),y.data=m(y.data,C),C!==v.contentType.FORM&&(y.headers["content-type"]=C)}return y},m=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case i.URLENCODED:return w.urlEncode(y);case i.JSON:return w.jsonEncode(y);case i.FORM:return w.formEncode(y);default:return y}},x=function(y){return y>=200&&y<300},{contentType:i={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:l,get:function(y){return y.method="GET",l(y)},post:u,transport:function(y){return y=h(y),w.selectFiles(y).then(function(k){for(var C=new FormData,_=0;_<k.length;_++)C.append(y.fieldName,k[_],k[_].name);w.isObject(y.data)&&Object.keys(y.data).forEach(function(M){var O=y.data[M];C.append(M,O)});var j=y.beforeSend;return y.beforeSend=function(){return j(k)},y.data=C,u(y)})},selectFiles:function(y){return delete(y=h(y)).beforeSend,w.selectFiles(y)}});n.exports=v},function(n,r,s){s.r(r);var o=s(1);window.Promise=window.Promise||o.a},function(n,r,s){(function(o){var i=o!==void 0&&o||typeof self<"u"&&self||window,l=Function.prototype.apply;function u(h,f){this._id=h,this._clearFn=f}r.setTimeout=function(){return new u(l.call(setTimeout,i,arguments),clearTimeout)},r.setInterval=function(){return new u(l.call(setInterval,i,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(h){h&&h.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(i,this._id)},r.enroll=function(h,f){clearTimeout(h._idleTimeoutId),h._idleTimeout=f},r.unenroll=function(h){clearTimeout(h._idleTimeoutId),h._idleTimeout=-1},r._unrefActive=r.active=function(h){clearTimeout(h._idleTimeoutId);var f=h._idleTimeout;f>=0&&(h._idleTimeoutId=setTimeout(function(){h._onTimeout&&h._onTimeout()},f))},s(6),r.setImmediate=typeof self<"u"&&self.setImmediate||o!==void 0&&o.setImmediate||this&&this.setImmediate,r.clearImmediate=typeof self<"u"&&self.clearImmediate||o!==void 0&&o.clearImmediate||this&&this.clearImmediate}).call(this,s(0))},function(n,r,s){(function(o,i){(function(l,u){if(!l.setImmediate){var h,f,m,x,w,v=1,y={},k=!1,C=l.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(l);_=_&&_.setTimeout?_:l,{}.toString.call(l.process)==="[object process]"?h=function(O){i.nextTick(function(){M(O)})}:(function(){if(l.postMessage&&!l.importScripts){var O=!0,T=l.onmessage;return l.onmessage=function(){O=!1},l.postMessage("","*"),l.onmessage=T,O}})()?(x="setImmediate$"+Math.random()+"$",w=function(O){O.source===l&&typeof O.data=="string"&&O.data.indexOf(x)===0&&M(+O.data.slice(x.length))},l.addEventListener?l.addEventListener("message",w,!1):l.attachEvent("onmessage",w),h=function(O){l.postMessage(x+O,"*")}):l.MessageChannel?((m=new MessageChannel).port1.onmessage=function(O){M(O.data)},h=function(O){m.port2.postMessage(O)}):C&&"onreadystatechange"in C.createElement("script")?(f=C.documentElement,h=function(O){var T=C.createElement("script");T.onreadystatechange=function(){M(O),T.onreadystatechange=null,f.removeChild(T),T=null},f.appendChild(T)}):h=function(O){setTimeout(M,0,O)},_.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var T=new Array(arguments.length-1),I=0;I<T.length;I++)T[I]=arguments[I+1];var A={callback:O,args:T};return y[v]=A,h(v),v++},_.clearImmediate=j}function j(O){delete y[O]}function M(O){if(k)setTimeout(M,0,O);else{var T=y[O];if(T){k=!0;try{(function(I){var A=I.callback,F=I.args;switch(F.length){case 0:A();break;case 1:A(F[0]);break;case 2:A(F[0],F[1]);break;case 3:A(F[0],F[1],F[2]);break;default:A.apply(u,F)}})(T)}finally{j(O),k=!1}}}}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,s(0),s(7))},function(n,r){var s,o,i=n.exports={};function l(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function h(_){if(s===setTimeout)return setTimeout(_,0);if((s===l||!s)&&setTimeout)return s=setTimeout,setTimeout(_,0);try{return s(_,0)}catch{try{return s.call(null,_,0)}catch{return s.call(this,_,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:l}catch{s=l}try{o=typeof clearTimeout=="function"?clearTimeout:u}catch{o=u}})();var f,m=[],x=!1,w=-1;function v(){x&&f&&(x=!1,f.length?m=f.concat(m):w=-1,m.length&&y())}function y(){if(!x){var _=h(v);x=!0;for(var j=m.length;j;){for(f=m,m=[];++w<j;)f&&f[w].run();w=-1,j=m.length}f=null,x=!1,(function(M){if(o===clearTimeout)return clearTimeout(M);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(M);try{o(M)}catch{try{return o.call(null,M)}catch{return o.call(this,M)}}})(_)}}function k(_,j){this.fun=_,this.array=j}function C(){}i.nextTick=function(_){var j=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)j[M-1]=arguments[M];m.push(new k(_,j)),m.length!==1||x||h(y)},k.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=C,i.addListener=C,i.once=C,i.off=C,i.removeListener=C,i.removeAllListeners=C,i.emit=C,i.prependListener=C,i.prependOnceListener=C,i.listeners=function(_){return[]},i.binding=function(_){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(_){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(n,r,s){function o(l,u){for(var h=0;h<u.length;h++){var f=u[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}var i=s(9);n.exports=(function(){function l(){(function(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")})(this,l)}var u,h,f;return u=l,f=[{key:"urlEncode",value:function(m){return i(m)}},{key:"jsonEncode",value:function(m){return JSON.stringify(m)}},{key:"formEncode",value:function(m){if(this.isFormData(m))return m;if(this.isFormElement(m))return new FormData(m);if(this.isObject(m)){var x=new FormData;return Object.keys(m).forEach(function(w){var v=m[w];x.append(w,v)}),x}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(m){return Object.prototype.toString.call(m)==="[object Object]"}},{key:"isFormData",value:function(m){return m instanceof FormData}},{key:"isFormElement",value:function(m){return m instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(x,w){var v=document.createElement("INPUT");v.type="file",m.multiple&&v.setAttribute("multiple","multiple"),m.accept&&v.setAttribute("accept",m.accept),v.style.display="none",document.body.appendChild(v),v.addEventListener("change",function(y){var k=y.target.files;x(k),document.body.removeChild(v)},!1),v.click()})}},{key:"parseHeaders",value:function(m){var x=m.trim().split(/[\r\n]+/),w={};return x.forEach(function(v){var y=v.split(": "),k=y.shift(),C=y.join(": ");k&&(w[k]=C)}),w}}],(h=null)&&o(u.prototype,h),f&&o(u,f),l})()},function(n,r){var s=function(i){return encodeURIComponent(i).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},o=function(i,l,u,h){return l=l||null,u=u||"&",h=h||null,i?(function(f){for(var m=new Array,x=0;x<f.length;x++)f[x]&&m.push(f[x]);return m})(Object.keys(i).map(function(f){var m,x,w=f;if(h&&(w=h+"["+w+"]"),typeof i[f]=="object"&&i[f]!==null)m=o(i[f],null,u,w);else{l&&(x=w,w=!isNaN(parseFloat(x))&&isFinite(x)?l+Number(w):w);var v=i[f];v=(v=(v=(v=v===!0?"1":v)===!1?"0":v)===0?"0":v)||"",m=s(w)+"="+s(v)}return m})).join(u).replace(/[!'()*]/g,""):""};n.exports=o}])})})(KA);var jte=KA.exports;const ul=Nte(jte);function zv(t){return t!==void 0&&typeof t.then=="function"}class Tte{constructor({config:e,onUpload:n,onError:r}){this.config=e,this.onUpload=n,this.onError=r}uploadSelectedFile({onPreview:e}){const n=function(s){const o=new FileReader;o.readAsDataURL(s),o.onload=i=>{e(i.target.result)}};let r;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"){const s=this.config.uploader.uploadByFile;r=ul.selectFiles({accept:this.config.types??"image/*"}).then(o=>{n(o[0]);const i=s(o[0]);return zv(i)||console.warn("Custom uploader method uploadByFile should return a Promise"),i})}else r=ul.transport({url:this.config.endpoints.byFile,data:this.config.additionalRequestData,accept:this.config.types??"image/*",headers:this.config.additionalRequestHeaders,beforeSend:s=>{n(s[0])},fieldName:this.config.field??"image"}).then(s=>s.body);r.then(s=>{this.onUpload(s)}).catch(s=>{this.onError(s)})}uploadByUrl(e){let n;this.config.uploader&&typeof this.config.uploader.uploadByUrl=="function"?(n=this.config.uploader.uploadByUrl(e),zv(n)||console.warn("Custom uploader method uploadByUrl should return a Promise")):n=ul.post({url:this.config.endpoints.byUrl,data:Object.assign({url:e},this.config.additionalRequestData),type:ul.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(r=>r.body),n.then(r=>{this.onUpload(r)}).catch(r=>{this.onError(r)})}uploadByFile(e,{onPreview:n}){const r=new FileReader;r.readAsDataURL(e),r.onload=o=>{n(o.target.result)};let s;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function")s=this.config.uploader.uploadByFile(e),zv(s)||console.warn("Custom uploader method uploadByFile should return a Promise");else{const o=new FormData;o.append(this.config.field??"image",e),this.config.additionalRequestData&&Object.keys(this.config.additionalRequestData).length&&Object.entries(this.config.additionalRequestData).forEach(([i,l])=>{o.append(i,l)}),s=ul.post({url:this.config.endpoints.byFile,data:o,type:ul.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(i=>i.body)}s.then(o=>{this.onUpload(o)}).catch(o=>{this.onError(o)})}}/**
 * Image Tool for the Editor.js
 * @author CodeX <team@codex.so>
 * @license MIT
 * @see {@link https://github.com/editor-js/image}
 *
 * To developers.
 * To simplify Tool structure, we split it to 4 parts:
 *  1) index.ts  main Tool's interface, public API and methods for working with data
 *  2) uploader.ts  module that has methods for sending files via AJAX: from device, by URL or File pasting
 *  3) ui.ts  module for UI manipulations: render, showing preloader, etc
 *
 * For debug purposes there is a testing server
 * that can save uploaded files and return a Response {@link UploadResponseFormat}
 *
 *       $ node dev/server.js
 *
 * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
 *
 * image: {
 *   class: ImageTool,
 *   config: {
 *     endpoints: {
 *       byFile: 'http://localhost:8008/uploadFile',
 *       byUrl: 'http://localhost:8008/fetchUrl',
 *     }
 *   },
 * },
 */class Mp{constructor({data:e,config:n,api:r,readOnly:s,block:o}){this.isCaptionEnabled=null,this.api=r,this.block=o,this.config={endpoints:n.endpoints,additionalRequestData:n.additionalRequestData,additionalRequestHeaders:n.additionalRequestHeaders,field:n.field,types:n.types,captionPlaceholder:this.api.i18n.t(n.captionPlaceholder??"Caption"),buttonContent:n.buttonContent,uploader:n.uploader,actions:n.actions,features:n.features||{}},this.uploader=new Tte({config:this.config,onUpload:i=>this.onUpload(i),onError:i=>this.uploadingFailed(i)}),this.ui=new Ete({api:r,config:this.config,onSelectFile:()=>{this.uploader.uploadSelectedFile({onPreview:i=>{this.ui.showPreloader(i)}})},readOnly:s}),this._data={caption:"",withBorder:!1,withBackground:!1,stretched:!1,file:{url:""}},this.data=e}static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:qA,title:"Image"}}static get tunes(){return[{name:"withBorder",icon:Ste,title:"With border",toggle:!0},{name:"stretched",icon:Cte,title:"Stretch image",toggle:!0},{name:"withBackground",icon:kte,title:"With background",toggle:!0}]}render(){var e,n,r;return(((e=this.config.features)==null?void 0:e.caption)===!0||((n=this.config.features)==null?void 0:n.caption)===void 0||((r=this.config.features)==null?void 0:r.caption)==="optional"&&this.data.caption)&&(this.isCaptionEnabled=!0,this.ui.applyTune("caption",!0)),this.ui.render()}validate(e){return!!e.file.url}save(){const e=this.ui.nodes.caption;return this._data.caption=e.innerHTML,this.data}renderSettings(){var e;const n=Mp.tunes.concat(this.config.actions||[]),r={border:"withBorder",background:"withBackground",stretch:"stretched",caption:"caption"};((e=this.config.features)==null?void 0:e.caption)==="optional"&&n.push({name:"caption",icon:_te,title:"With caption",toggle:!0});const s=n.filter(i=>{var l,u;const h=Object.keys(r).find(f=>r[f]===i.name);return h==="caption"?((l=this.config.features)==null?void 0:l.caption)!==!1:h==null||((u=this.config.features)==null?void 0:u[h])!==!1}),o=i=>{let l=this.data[i.name];return i.name==="caption"&&(l=this.isCaptionEnabled??l),l};return s.map(i=>({icon:i.icon,label:this.api.i18n.t(i.title),name:i.name,toggle:i.toggle,isActive:o(i),onActivate:()=>{if(typeof i.action=="function"){i.action(i.name);return}let l=!o(i);i.name==="caption"&&(this.isCaptionEnabled=!(this.isCaptionEnabled??!1),l=this.isCaptionEnabled),this.tuneToggled(i.name,l)}}))}appendCallback(){this.ui.nodes.fileButton.click()}static get pasteConfig(){return{tags:[{img:{src:!0}}],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|svg|webp)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["image/*"]}}}async onPaste(e){switch(e.type){case"tag":{const n=e.detail.data;if(/^blob:/.test(n.src)){const r=await(await fetch(n.src)).blob();this.uploadFile(r);break}this.uploadUrl(n.src);break}case"pattern":{const n=e.detail.data;this.uploadUrl(n);break}case"file":{const n=e.detail.file;this.uploadFile(n);break}}}set data(e){var n;this.image=e.file,this._data.caption=e.caption||"",this.ui.fillCaption(this._data.caption),Mp.tunes.forEach(({name:r})=>{const s=typeof e[r]<"u"?e[r]===!0||e[r]==="true":!1;this.setTune(r,s)}),e.caption?this.setTune("caption",!0):((n=this.config.features)==null?void 0:n.caption)===!0&&this.setTune("caption",!0)}get data(){return this._data}set image(e){this._data.file=e||{url:""},e&&e.url&&this.ui.fillImage(e.url)}onUpload(e){e.success&&e.file?this.image=e.file:this.uploadingFailed("incorrect response: "+JSON.stringify(e))}uploadingFailed(e){console.log("Image Tool: uploading failed because of",e),this.api.notifier.show({message:this.api.i18n.t("Couldnt upload image. Please try another."),style:"error"}),this.ui.hidePreloader()}tuneToggled(e,n){e==="caption"?(this.ui.applyTune(e,n),n==!1&&(this._data.caption="",this.ui.fillCaption(""))):this.setTune(e,n)}setTune(e,n){this._data[e]=n,this.ui.applyTune(e,n),e==="stretched"&&Promise.resolve().then(()=>{this.block.stretched=n}).catch(r=>{console.error(r)})}uploadFile(e){this.uploader.uploadByFile(e,{onPreview:n=>{this.ui.showPreloader(n)}})}uploadUrl(e){this.ui.showPreloader(e),this.uploader.uploadByUrl(e)}}const Tr={time:new Date().getTime(),blocks:[{type:"header",data:{text:"Product Vision",level:1}},{type:"paragraph",data:{text:"Our goal is to become the leading collaborative workspace platform by the end of 2025."}},{type:"header",data:{text:"Key Objectives",level:2}},{type:"list",data:{style:"ordered",items:["<b>User Growth</b>: Reach 1M active users","<b>Feature Expansion</b>: Launch AI-powered collaboration tools","<b>Enterprise Focus</b>: Onboard 500+ enterprise customers"]}},{type:"header",data:{text:"Q4 Priorities",level:2}},{type:"list",data:{style:"unordered",items:["Complete design system overhaul","Launch mobile applications","Integrate with major productivity tools","Improve real-time collaboration features"]}},{type:"header",data:{text:"Success Metrics",level:2}},{type:"list",data:{style:"unordered",items:["40% increase in user engagement","25% reduction in churn rate","95%+ customer satisfaction score"]}}]};function Mte(){const{id:t}=m0(),e=Wr(),n=b.useRef(null),r=b.useRef(null),[s,o]=b.useState("Product Roadmap 2025"),[i,l]=b.useState(["strategy","product","roadmap"]),[u,h]=b.useState(!1),[f,m]=b.useState(!1),[x,w]=b.useState(!0),[v,y]=b.useState(!1),[k,C]=b.useState(""),[_,j]=b.useState(null),[M,O]=b.useState(!0),[T,I]=b.useState(!1),A=b.useRef(null),F=b.useRef(null),U=b.useRef(!1),W=b.useRef(null),Z=b.useRef(!0),{isConnected:oe,connectedUsers:ee,setConnected:re,setCurrentDocument:J,setConnectedUsers:z,removeUser:R,updateUserCursor:D,isSaving:G,setSaving:N,setLastSaved:L,hasUnsavedChanges:V,setHasUnsavedChanges:Q,reset:ce}=nb();b.useEffect(()=>{if(!t){O(!1);return}(async()=>{O(!0);try{console.log(" Loading document:",t);const ae=new Promise((ue,fe)=>setTimeout(()=>fe(new Error("Request timeout")),15e3));let ge=null,ke=null;try{if(ge=await Promise.race([xt.getById(t),ae]),console.log(" Document loaded:",ge),!ge||!ge._id)throw new Error("Invalid document response");let ue,fe;ge.folderId&&(typeof ge.folderId=="string"?ue=ge.folderId:typeof ge.folderId=="object"&&ge.folderId._id&&(ue=String(ge.folderId._id),fe=ge.folderId.Name||ge.folderId.name)),j({_id:ge._id,Title:ge.Title||"Untitled Document",folderId:ue,folderName:fe,createdBy:ge.createdBy,updatedDate:ge.updatedDate,contentType:ge.contentType||[],...ge}),ue&&!fe&&Ht.getById(ue).then(Se=>{j(ze=>({...ze,folderName:Se.Name||Se.Name}))}).catch(Se=>{console.warn("Failed to fetch folder name:",Se)}),o(ge.Title||"Untitled Document"),l(ge.contentType||[])}catch(ue){console.error("Failed to load document metadata:",ue);const fe=ue?.response?.status===404?"Document not found":ue?.message||"Failed to load document";de.error(fe),j({_id:t,Title:"Untitled Document",content:Tr}),o("Untitled Document"),l([])}try{if(ke=await Promise.race([xt.getContent(t),new Promise((ue,fe)=>setTimeout(()=>fe(new Error("Content timeout")),5e3))]),console.log(" Content loaded:",ke),ke&&ke.content)try{const ue=typeof ke.content=="string"?JSON.parse(ke.content):ke.content;j(fe=>({...fe,content:ue})),W.current=typeof ke.content=="string"?ke.content:JSON.stringify(ke.content)}catch(ue){console.warn("Failed to parse content, using initial data:",ue),j(fe=>({...fe,content:Tr})),W.current=JSON.stringify(Tr)}else j(ue=>({...ue,content:Tr})),W.current=JSON.stringify(Tr)}catch(ue){console.warn("No content found, using initial data:",ue),j(fe=>({...fe,content:Tr})),W.current=JSON.stringify(Tr)}Z.current=!1,O(!1)}catch(ae){console.error("Unexpected error loading document:",ae),de.error("Failed to load document: "+(ae?.message||"Unknown error")),O(!1),j(ge=>({_id:t,Title:"Untitled Document",content:Tr})),o("Untitled Document"),l([]),W.current=JSON.stringify(Tr),Z.current=!1}})()},[t]),b.useEffect(()=>{if(!t||!_||M)return;const he=localStorage.getItem(On);if(!he){de.error("Not authenticated"),e("/login");return}let ae=null;return(async()=>{try{I(!0),ae=new Hq({documentId:t,token:he,userId:"user-"+Date.now(),onSync:()=>{console.log(" Document synced"),I(!1),re(!0),J(t)},onUpdate:async ue=>{console.log(" Document updated by remote user - applying changes..."),U.current=!0;try{if(Q(!0),n.current&&ae)try{let fe=ue;if(!fe){const We=ae.getDocument().getMap("content").get("data");We&&typeof We=="string"&&(fe=JSON.parse(We))}if(fe&&fe.blocks){console.log(" Applying remote changes to editor");const Se=await n.current.save(),ze=nn=>nn.map(yn=>{const rr={type:yn.type,data:{...yn.data}};return delete rr.data.id,delete rr.data.time,rr}),We=ze(Se.blocks||[]),mt=ze(fe.blocks||[]),Ze=JSON.stringify(We),at=JSON.stringify(mt);if(Ze!==at){console.log(" Content differs, rendering remote changes"),console.log("Current blocks:",We.length,"Remote blocks:",mt.length);const nn={time:fe.time||Date.now(),version:fe.version||"2.28.0",blocks:fe.blocks||[]};try{await n.current.render(nn),console.log(" Successfully applied remote changes")}catch(yn){console.error("Render error, trying to clear first:",yn);const rr=await n.current.save();rr.blocks&&rr.blocks.length>0?(await n.current.render({time:Date.now(),blocks:[]}),await new Promise(Yr=>setTimeout(Yr,100)),await n.current.render(nn)):await n.current.render(nn)}}else console.log(" Content is identical, skipping render")}}catch(fe){console.error("Failed to apply remote changes:",fe)}}finally{A.current&&(clearTimeout(A.current),A.current=null),setTimeout(()=>{U.current=!1,console.log(" Remote update applied, onChange enabled again")},1500)}},onError:ue=>{console.warn(" Real-time collaboration unavailable:",ue),I(!1)},onCursorUpdate:(ue,fe)=>{D(ue,fe)},onPresenceUpdate:ue=>{z(ue.map(fe=>({id:fe.id,name:fe.name||"Anonymous",color:fe.color||"#3b82f6"})))},onUserLeft:ue=>{R(ue)}}),r.current=ae;const ke=(ue,fe=20,Se=100)=>new Promise((ze,We)=>{let mt=0;const Ze=()=>{const at=window.document.getElementById(ue);at?ze(at):mt<fe?(mt++,setTimeout(Ze,Se)):We(new Error(`Element with ID "${ue}" not found after ${fe} attempts`))};Ze()});try{await ke("editorjs",30,100),console.log(" Editor container element found")}catch(ue){console.error(" Editor container element not found:",ue),I(!1);return}if(!n.current){const ue=new PJ({holder:"editorjs",placeholder:"Start writing your document...",readOnly:!1,tools:{header:{class:$J,config:{placeholder:"Enter a header",levels:[1,2,3,4],defaultLevel:2}},list:{class:IZ,inlineToolbar:!0,config:{defaultStyle:"unordered"}},checklist:{class:FZ,inlineToolbar:!0},quote:{class:rte,inlineToolbar:!0,config:{quotePlaceholder:"Enter a quote",captionPlaceholder:"Quote author"}},delimiter:{class:ote},table:{class:yte,inlineToolbar:!0,config:{rows:2,cols:3}},code:{class:V1,config:{placeholder:"Enter code"}},image:{class:Mp,config:{uploader:(()=>{const fe=async Se=>{try{const ze=await WP.uploadImage(Se);if(ze.success===1&&ze.file?.url){const We=en.replace("/api","");return{success:1,file:{url:ze.file.url.startsWith("http")?ze.file.url:`${We}${ze.file.url}`}}}else throw new Error(ze.message||"Upload failed")}catch(ze){return console.error("Image upload error:",ze),de.error(ze.message||"Failed to upload image"),{success:0}}};return{uploadByFile:fe,async uploadByUrl(Se){try{if(Se.startsWith(en.replace("/api",""))||Se.startsWith("/uploads/")){const Ze=en.replace("/api","");return{success:1,file:{url:Se.startsWith("http")?Se:`${Ze}${Se}`}}}const ze=await fetch(Se);if(!ze.ok)throw new Error("Failed to fetch image from URL");const We=await ze.blob(),mt=new File([We],"image.jpg",{type:We.type});return await fe(mt)}catch(ze){return console.error("URL upload error:",ze),de.error("Failed to upload image from URL"),{success:0}}}}})(),captionPlaceholder:"Enter image caption",buttonContent:"Select an Image",field:"file",types:"image/*"}}},data:_.content||Tr,onReady:async()=>{if(n.current=ue,y(!0),console.log(" Editor ready"),_.content)try{const fe=await ue.save(),Se=JSON.stringify(fe),ze=JSON.stringify(_.content);if(Se!==ze){const We=JSON.stringify(Tr);(Se===We||ze!==We)&&(console.log(" Rendering loaded content into editor..."),await ue.render(_.content),console.log(" Loaded content rendered successfully"),W.current=ze)}}catch(fe){console.error(" Failed to render loaded content:",fe)}},onChange:async()=>{if(U.current){console.log(" Skipping onChange - applying remote update");return}Q(!0),A.current&&clearTimeout(A.current),A.current=setTimeout(async()=>{if(U.current){console.log(" Skipping onChange sync - still applying remote update");return}if(n.current&&ae&&ae.isReady())try{const fe=await n.current.save();if(!fe||!fe.blocks||!Array.isArray(fe.blocks)){console.warn(" Invalid editor data, skipping sync");return}console.log(" Syncing document changes to other users",fe.blocks.length,"blocks"),ae.getSocket()&&ae.getSocket()?.emit("content_update",{documentId:t,content:fe,operation:"update"})}catch(fe){console.error("Failed to sync content:",fe)}},500),F.current&&clearTimeout(F.current),F.current=setTimeout(async()=>{if(n.current&&t&&!U.current)try{N(!0);const fe=await n.current.save();if(!fe||!fe.blocks){console.warn(" Invalid editor data for auto-save, skipping");return}const Se=JSON.stringify(fe);if(W.current!==Se){console.log(" Auto-saving document to backend...",{blocks:fe.blocks.length,contentLength:Se.length}),await xt.update(t,{Title:s,contentType:i});const ze=await xt.saveContent({documentId:t,content:Se});console.log(" Document auto-saved successfully:",ze?._id||"no id"),W.current=Se,L(new Date),Q(!1)}else console.log(" Content unchanged, skipping auto-save")}catch(fe){console.error(" Failed to auto-save document:",fe),console.error("Auto-save error details:",{message:fe?.message,response:fe?.response?.data,status:fe?.response?.status})}finally{N(!1)}},2e3)}})}}catch(ke){console.warn("Real-time collaboration unavailable, continuing in offline mode:",ke),I(!1),re(!1)}})(),()=>{F.current&&clearTimeout(F.current),A.current&&clearTimeout(A.current),n.current&&t&&!U.current&&n.current.save().then(async ke=>{try{const ue=JSON.stringify(ke);W.current!==ue&&(await xt.update(t,{Title:s,contentType:i}),await xt.saveContent({documentId:t,content:ue}))}catch(ue){console.error("Failed to save on cleanup:",ue)}}).catch(console.error),ae&&ae.disconnect(),n.current&&n.current.destroy&&(n.current.destroy(),n.current=null),ce()}},[t,_,e,re,J,Q,z,R,D,ce,s,i,M]);const H=b.useCallback(async()=>{if(!n.current||!t){console.error(" Cannot save: editor or id is missing",{hasEditor:!!n.current,hasId:!!t}),de.error("Editor is not ready. Please wait...");return}N(!0);try{console.log(" Starting save process...");const he=await n.current.save();if(console.log(" Editor data saved, blocks:",he.blocks?.length||0),!he||!he.blocks)throw new Error("Invalid editor data: no blocks found");const ae=JSON.stringify(he);console.log(" Content stringified, length:",ae.length),console.log(" Updating document metadata..."),await xt.update(t,{Title:s,contentType:i}),console.log(" Document metadata updated"),console.log(" Saving document content...");const ge=await xt.saveContent({documentId:t,content:ae});console.log(" Document content saved:",ge),W.current=ae,L(new Date),Q(!1),de.success("Document saved successfully"),console.log(" Save completed successfully")}catch(he){console.error(" Saving failed:",he),console.error("Error details:",{message:he?.message,response:he?.response?.data,status:he?.response?.status}),de.error(`Failed to save document: ${he?.message||"Unknown error"}`)}finally{N(!1)}},[t,s,i,N,L,Q]),B=async he=>{if(n.current)try{const ae=await n.current.save(),ge=[...ae.blocks,{type:"paragraph",data:{text:he}}];await n.current.render({...ae,blocks:ge}),de.success("Voice text inserted")}catch(ae){console.error("Failed to insert voice text:",ae),de.error("Failed to insert voice text")}},K=he=>he?he.replace(/style="[^"]*"/gi,"").replace(/class="[^"]*"/gi,"").replace(/style='[^']*'/gi,"").replace(/class='[^']*'/gi,""):"",q=he=>{let ae=`
      <div style="max-width: 700px; margin: 0 auto; padding: 32px; font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; color: #111827; line-height: 1.6;">
        <h1 style="font-size: 32px; font-weight: 700; margin-bottom: 16px;">${s}</h1>
    `;return i.length>0&&(ae+=`<p style="color: #4b5563; margin-bottom: 24px; font-size: 14px;">Tags: ${i.join(", ")}</p>`),ae+='<div style="border-top: 1px solid #e5e7eb; padding-top: 24px;">',(he.blocks||[]).forEach(ge=>{switch(ge.type){case"header":{const ke=ge.data.level??2,fe={1:"28px",2:"24px",3:"20px",4:"18px",5:"16px",6:"14px"}[ke]||"20px";ae+=`<h${ke} style="font-size: ${fe}; font-weight: 600; margin: 24px 0 12px; color: #111827;">${K(ge.data.text)}</h${ke}>`;break}case"paragraph":ae+=`<p style="margin: 12px 0; color: #1f2937;">${K(ge.data.text)}</p>`;break;case"list":{const ke=ge.data.style==="ordered"?"ol":"ul";ae+=`<${ke} style="margin: 12px 0; padding-left: 28px;">`,(ge.data.items||[]).forEach(ue=>{ae+=`<li style="margin: 6px 0; color: #1f2937;">${K(ue)}</li>`}),ae+=`</${ke}>`;break}case"checklist":ae+='<ul style="margin: 12px 0; padding-left: 0; list-style: none;">',(ge.data.items||[]).forEach(ke=>{const ue=ke.checked?"":"";ae+=`<li style="margin: 6px 0; color: #1f2937;">${ue} ${K(ke.text)}</li>`}),ae+="</ul>";break;case"quote":ae+=`<blockquote style="border-left: 4px solid #6366f1; padding-left: 20px; margin: 20px 0; color: #374151; font-style: italic;">
            <p style="margin: 0;">${K(ge.data.text)}</p>
            ${ge.data.caption?`<cite style="display: block; margin-top: 8px; font-size: 14px; color: #6b7280;"> ${K(ge.data.caption)}</cite>`:""}
          </blockquote>`;break;case"code":ae+=`<pre style="background-color: #f3f4f6; padding: 16px; border-radius: 10px; overflow-x: auto; margin: 16px 0; border: 1px solid #e5e7eb;">
            <code style="font-family: 'Fira Code', 'Courier New', monospace; font-size: 13px; color: #111827;">${K(ge.data.code)}</code>
          </pre>`;break;case"table":if(ae+='<table style="border-collapse: collapse; width: 100%; margin: 20px 0; font-size: 14px;">',ge.data.content&&ge.data.content.length>0){const[ke,...ue]=ge.data.content;ke&&(ae+="<thead><tr>",ke.forEach(fe=>{ae+=`<th style="border: 1px solid #d1d5db; padding: 10px; background-color: #f3f4f6; font-weight: 600; text-align: left;">${K(fe)}</th>`}),ae+="</tr></thead>"),ue.length&&(ae+="<tbody>",ue.forEach(fe=>{ae+="<tr>",fe.forEach(Se=>{ae+=`<td style="border: 1px solid #d1d5db; padding: 10px; color: #1f2937;">${K(Se)}</td>`}),ae+="</tr>"}),ae+="</tbody>")}ae+="</table>";break;case"image":ae+='<div style="margin: 24px 0; text-align: center;">',ge.data.file?.url&&(ae+=`<img src="${ge.data.file.url}" alt="${ge.data.caption||""}" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 10px 30px rgba(15, 23, 42, 0.1);" />`),ge.data.caption&&(ae+=`<p style="text-align: center; color: #6b7280; margin-top: 10px; font-size: 14px;">${K(ge.data.caption)}</p>`),ae+="</div>";break;case"delimiter":ae+='<div style="text-align: center; margin: 28px 0; font-size: 24px; color: #d1d5db;">***</div>';break;case"codeTool":default:ge.data?.text&&(ae+=`<p style="margin: 12px 0; color: #1f2937;">${K(ge.data.text)}</p>`)}}),ae+="</div></div>",ae},se=async()=>{if(!n.current||!s){de.error("Please wait for the document to load");return}const he="pdf-export";de.loading("Generating PDF...",{id:he});let ae=null,ge=null;try{const[ke,ue]=await Promise.all([w2(()=>import("./html2canvas.esm-B0tyYwQk.js"),[]),w2(()=>import("./jspdf.es.min-BXUTpwFa.js").then(sr=>sr.j),[])]),fe=ke.default,Se=ue.jsPDF;window.html2canvas||(window.html2canvas=fe);const ze=await n.current.save(),We=q(ze),mt=window.document,Ze=mt.createElement("iframe");Ze.style.position="fixed",Ze.style.left="-10000px",Ze.style.top="0",Ze.style.width="842px",Ze.style.height="595px",Ze.style.border="0",Ze.style.opacity="0",mt.body.appendChild(Ze);const at=Ze.contentDocument,nn=Ze.contentWindow;if(!at||!nn)throw new Error("Failed to prepare PDF renderer");at.open(),at.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <meta charset="utf-8" />
            <style>
              *, *::before, *::after {
                box-sizing: border-box;
              }
              body {
                margin: 0;
                padding: 0;
                background: #ffffff;
                color: #111827;
                font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
              }
              img {
                max-width: 100%;
                height: auto;
              }
            </style>
          </head>
          <body></body>
        </html>
      `),at.close(),await new Promise(sr=>{Ze.contentWindow?.document?.readyState==="complete"?sr():Ze?Ze.addEventListener("load",()=>sr(),{once:!0}):sr()});const yn=at.createElement("div");yn.innerHTML=We,yn.style.padding="32px",yn.style.backgroundColor="#ffffff",at.body.appendChild(yn),ge=yn,ae=()=>{Ze.remove()};const rr=new Se("p","pt","a4"),Yr={windowWidth:794,windowHeight:1123,useCORS:!0,allowTaint:!1,backgroundColor:"#ffffff",scale:1,logging:!1};await new Promise((sr,Vs)=>{try{rr.html(yn,{callback:fs=>{const Fn=`${(s||"document").replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`;fs.save(Fn),sr()},margin:[40,40,40,40],autoPaging:"text",html2canvas:{...Yr,window:nn,document:at},x:0,y:0})}catch(fs){Vs(fs)}}),de.success("PDF downloaded",{id:he})}catch(ke){console.error("Failed to export PDF:",ke),de.error("Failed to export PDF",{id:he})}finally{ae&&ae()}};return b.useEffect(()=>{if(!v||!n.current||!_?.content||M||Z.current)return;(async()=>{try{if(U.current){console.log(" Skipping content render - applying remote update");return}const ae=await n.current.save(),ge=JSON.stringify(ae),ke=JSON.stringify(_.content),ue=JSON.stringify(Tr);(ge===ue&&ke!==ue||ge!==ke&&ke!==ue)&&(console.log(" Content loaded after editor ready, rendering...",{currentBlocks:ae.blocks?.length||0,loadedBlocks:_.content?.blocks?.length||0}),U.current=!0,await n.current.render(_.content),console.log(" Loaded content rendered successfully"),W.current=ke,setTimeout(()=>{U.current=!1},500))}catch(ae){console.error(" Failed to render loaded content:",ae),U.current=!1}})()},[_?.content,v,M]),b.useEffect(()=>{if(!t||M||!v||Z.current)return;const he=setTimeout(async()=>{try{const ae=await xt.update(t,{Title:s.trim()||"Untitled Document",contentType:i});j(ge=>({...ge,Title:ae.Title||s.trim()||"Untitled Document",updatedDate:ae.updatedDate||new Date().toISOString()})),console.log(" Title/tags auto-saved:",ae.Title)}catch(ae){console.error("Failed to auto-save title/tags:",ae),ae?.response?.status===404&&de.error("Document not found. Please refresh the page.")}},2e3);return()=>clearTimeout(he)},[t,s,i,M,v]),b.useEffect(()=>{if(M||!v)return;const he=()=>{const ke=window.getSelection?.();ke&&C(ke.toString())},ae=()=>he(),ge=window.document;if(!ge){console.warn(" window.document is not available");return}try{ge.addEventListener("selectionchange",ae)}catch(ke){console.error("Failed to add selection change listener:",ke);return}return()=>{if(ge)try{ge.removeEventListener("selectionchange",ae)}catch(ke){console.error("Failed to remove selection change listener:",ke)}}},[M,v]),M?c.jsx("div",{className:"max-w-5xl mx-auto space-y-6 flex items-center justify-center py-12",children:c.jsx("div",{className:"text-muted-foreground",children:"Loading document..."})}):c.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[c.jsx(rW,{}),c.jsx(NO,{children:c.jsxs(jO,{children:[c.jsx(kl,{children:c.jsx(cp,{asChild:!0,children:c.jsx(lt,{to:"/dashboard",children:c.jsx(Jp,{className:"w-4 h-4"})})})}),c.jsx(dp,{children:c.jsx(hi,{className:"w-4 h-4"})}),_?.folderId&&c.jsxs(c.Fragment,{children:[c.jsx(kl,{children:c.jsx(cp,{asChild:!0,children:c.jsx(lt,{to:`/folders/${_.folderId}`,children:_.folderName||"Folder"})})}),c.jsx(dp,{children:c.jsx(hi,{className:"w-4 h-4"})})]}),c.jsx(kl,{children:c.jsx(TO,{children:s||"Untitled Document"})})]})}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"flex items-center gap-2 px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-800",children:oe?c.jsxs(c.Fragment,{children:[c.jsx(d$,{className:"w-4 h-4 text-green-500"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Connected"})]}):c.jsxs(c.Fragment,{children:[c.jsx(l$,{className:"w-4 h-4 text-red-500"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Offline"})]})}),c.jsx(pe,{variant:"ghost",size:"icon",className:"rounded-lg",onClick:()=>w(!x),children:c.jsx(Zf,{className:`w-5 h-5 ${x?"fill-yellow-400 text-yellow-400":""}`})}),c.jsx(nW,{}),ee.length>0&&c.jsxs("span",{className:"text-sm text-muted-foreground",children:[ee.length," online"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(pe,{variant:"outline",className:"rounded-xl",onClick:se,children:[c.jsx(YF,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),c.jsx(pe,{variant:"outline",className:"rounded-xl",onClick:()=>{console.log(" Save button clicked"),H()},disabled:G||T,children:G?c.jsxs(c.Fragment,{children:[c.jsx(fy,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):T?c.jsxs(c.Fragment,{children:[c.jsx(fy,{className:"w-4 h-4 mr-2 animate-pulse"}),"Syncing..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Pl,{className:"w-4 h-4 mr-2"}),"Save"]})}),c.jsxs(pe,{variant:"outline",className:"rounded-xl",onClick:()=>h(!0),children:[c.jsx(py,{className:"w-4 h-4 mr-2"}),"Share"]}),c.jsxs(pe,{variant:f?"default":"outline",className:"rounded-xl",onClick:()=>m(!f),children:[c.jsx(Rl,{className:"w-4 h-4 mr-2"}),"Comments"]}),c.jsxs(Ad,{children:[c.jsx(Id,{asChild:!0,children:c.jsx(pe,{variant:"outline",size:"icon",className:"rounded-xl",children:c.jsx(hy,{className:"w-4 h-4"})})}),c.jsxs(Dd,{align:"end",className:"rounded-xl",children:[c.jsx(ra,{children:"Duplicate"}),c.jsx(ra,{children:"View History"}),c.jsx(ra,{className:"text-red-600",children:"Delete"})]})]})]})]}),c.jsx(JH,{selectedText:k,onVoiceText:B}),v&&n.current&&c.jsx(sW,{editor:n.current,onHeadingChange:()=>{Q(!0)}}),c.jsxs("div",{className:"bg-white dark:bg-card rounded-xl shadow-sm p-8 space-y-6",children:[c.jsx(Ke,{type:"text",value:s,onChange:he=>{o(he.target.value),Q(!0)},onBlur:async()=>{if(t&&s.trim()&&!M)try{const he=await xt.update(t,{Title:s.trim()||"Untitled Document",contentType:i});j(ae=>({...ae,Title:he.Title||s.trim()||"Untitled Document",updatedDate:he.updatedDate||new Date().toISOString()})),Q(!1)}catch(he){console.error("Failed to save title:",he),de.error("Failed to save document name")}},className:"border-0 p-0 text-[32px] focus-visible:ring-0 font-semibold",placeholder:"Untitled Document"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.map(he=>c.jsx(St,{variant:"secondary",className:"text-[14px] rounded-lg",children:he},he)),c.jsx(pe,{variant:"ghost",size:"sm",className:"rounded-lg h-7 text-[14px]",children:"+ Add tag"})]}),c.jsx("div",{id:"editorjs",className:"prose prose-slate dark:prose-invert max-w-none"})]}),c.jsxs("div",{className:"flex items-center justify-between text-[14px] text-muted-foreground",children:[c.jsx("p",{children:_?.updatedAt&&`Last edited ${new Date(_.updatedAt).toLocaleString()}`}),c.jsxs("div",{className:"flex items-center gap-4",children:[G&&c.jsx("span",{className:"text-blue-500",children:"Saving..."}),T&&!G&&c.jsx("span",{className:"text-blue-500",children:"Syncing..."}),!G&&!T&&oe&&!V&&c.jsx("span",{className:"text-green-500",children:"All changes saved"}),!G&&!T&&V&&c.jsx("span",{className:"text-amber-500",children:"Unsaved changes"}),c.jsx("p",{children:v?"Editor ready":"Loading editor..."})]})]}),u&&t&&c.jsx(KH,{itemName:s,itemType:"document",itemId:t,onClose:()=>h(!1)}),t&&c.jsx(GH,{documentId:t,isOpen:f,onClose:()=>m(!1)})]})}function Ote({className:t,...e}){return c.jsx("textarea",{"data-slot":"textarea",className:He("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}const Pte=async t=>{const e={...t,startDate:t.startDate instanceof Date?t.startDate.toISOString():t.startDate,endDate:t.endDate instanceof Date?t.endDate.toISOString():t.endDate};return(await Le.post("/calendar",e)).data},Rte=async()=>(await Le.get("/calendar")).data;function Ate({onClose:t,onEventCreated:e,initialDate:n}){const[r,s]=b.useState(""),[o,i]=b.useState(""),[l,u]=b.useState(""),[h,f]=b.useState(""),[m,x]=b.useState(""),[w,v]=b.useState(""),[y,k]=b.useState(!1);b.useEffect(()=>{if(n){const _=n.toISOString().split("T")[0];i(_),u("09:00"),f("10:00")}else i(""),u(""),f("")},[n]);const C=async()=>{if(!r.trim()){de.error("Please enter an event title");return}if(!o){de.error("Please select a date");return}if(!l){de.error("Please select a start time");return}if(!h){de.error("Please select an end time");return}try{k(!0);const _=new Date(`${o}T${l}`),j=new Date(`${o}T${h}`),M=w.split(",").map(O=>O.trim()).filter(O=>O.length>0);await Pte({title:r,description:m,startDate:_,endDate:j,participants:M.length>0?M:void 0}),de.success("Event created successfully!"),e?.(),t()}catch(_){de.error(_?.response?.data?.message||"Failed to create event")}finally{k(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-card rounded-2xl shadow-2xl max-w-2xl w-full",children:[c.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[c.jsx("h2",{className:"text-[20px]",children:"Add New Event"}),c.jsx(pe,{variant:"ghost",size:"icon",onClick:t,className:"rounded-lg",children:c.jsx(us,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 space-y-5",children:[c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"eventTitle",children:"Event Title"}),c.jsx(Ke,{id:"eventTitle",type:"text",value:r,onChange:_=>s(_.target.value),placeholder:"e.g., Team Standup",className:"mt-1.5 rounded-xl",autoFocus:!0})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"eventDate",children:"Date"}),c.jsx(Ke,{id:"eventDate",type:"date",value:o,onChange:_=>i(_.target.value),className:"mt-1.5 rounded-xl"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"startTime",children:"Start Time"}),c.jsx(Ke,{id:"startTime",type:"time",value:l,onChange:_=>u(_.target.value),className:"mt-1.5 rounded-xl"})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"endTime",children:"End Time"}),c.jsx(Ke,{id:"endTime",type:"time",value:h,onChange:_=>f(_.target.value),className:"mt-1.5 rounded-xl"})]})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"eventDescription",children:"Description"}),c.jsx(Ote,{id:"eventDescription",value:m,onChange:_=>x(_.target.value),placeholder:"Add event details...",className:"mt-1.5 rounded-xl min-h-[100px]"})]})]}),c.jsxs("div",{className:"p-6 border-t border-border flex justify-end space-x-3",children:[c.jsx(pe,{variant:"outline",onClick:t,className:"rounded-xl",disabled:y,children:"Cancel"}),c.jsx(pe,{onClick:C,className:"rounded-xl",disabled:y,children:y?"Creating...":"Create Event"})]})]})})}const sf=["bg-blue-500","bg-purple-500","bg-green-500","bg-orange-500","bg-red-500","bg-pink-500","bg-yellow-500"];function Ite(){const[t,e]=b.useState(new Date),[n,r]=b.useState("month"),[s,o]=b.useState(!1),[i,l]=b.useState(null),[u,h]=b.useState([]),[f,m]=b.useState(!0),[x,w]=b.useState(null);b.useEffect(()=>{v()},[]);const v=async()=>{try{m(!0),w(null);const z=await Rte();h(z)}catch(z){console.error("Failed to load events:",z),w(z?.response?.data?.message||"Failed to load calendar events"),de.error("Failed to load calendar events")}finally{m(!1)}},y=()=>{v()},k=z=>{l(z),o(!0)},C=()=>{o(!1),l(null)},_=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),j=new Date(t.getFullYear(),t.getMonth(),1).getDay(),M=t.toLocaleDateString("en-US",{month:"long",year:"numeric"}),O=z=>{e(R=>{const D=new Date(R);return z==="prev"?D.setMonth(R.getMonth()-1):D.setMonth(R.getMonth()+1),D})},T=z=>{e(R=>{const D=new Date(R),G=z==="next"?7:-7;return D.setDate(R.getDate()+G),D})},I=z=>{e(R=>{const D=new Date(R),G=z==="next"?1:-1;return D.setDate(R.getDate()+G),D})},A=z=>sf[z%sf.length],F=z=>{const R=z.toISOString().split("T")[0];return u.filter(D=>new Date(D.startDate).toISOString().split("T")[0]===R)},U=(z,R)=>u.filter(D=>{const G=new Date(D.startDate),N=G.getHours(),L=G.toISOString().split("T")[0],V=z.toISOString().split("T")[0];return L===V&&N===R}),W=z=>new Date(z).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),Z=()=>{const z=new Date;return u.filter(R=>new Date(R.startDate)>=z).sort((R,D)=>new Date(R.startDate).getTime()-new Date(D.startDate).getTime()).slice(0,5)},oe=b.useMemo(()=>{const z=[],R=t.getDay(),D=new Date(t);D.setDate(D.getDate()-R);for(let G=0;G<7;G++){const N=new Date(D);N.setDate(D.getDate()+G),z.push(N)}return z},[t]),ee=Array.from({length:24},(z,R)=>R);if(f)return c.jsx("div",{className:"max-w-7xl mx-auto space-y-6 flex items-center justify-center min-h-[400px]",children:c.jsx(Rr,{className:"w-8 h-8 animate-spin text-primary"})});const re=()=>{if(n==="week"){const z=oe[0],R=oe[6];return`${z.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${R.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else if(n==="day")return t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});return M},J=()=>n==="week"?c.jsxs(c.Fragment,{children:[c.jsx(pe,{variant:"outline",size:"icon",className:"rounded-lg",onClick:()=>T("prev"),children:c.jsx(Cf,{className:"w-4 h-4"})}),c.jsx(pe,{variant:"outline",size:"icon",className:"rounded-lg",onClick:()=>T("next"),children:c.jsx(hi,{className:"w-4 h-4"})})]}):n==="day"?c.jsxs(c.Fragment,{children:[c.jsx(pe,{variant:"outline",size:"icon",className:"rounded-lg",onClick:()=>I("prev"),children:c.jsx(Cf,{className:"w-4 h-4"})}),c.jsx(pe,{variant:"outline",size:"icon",className:"rounded-lg",onClick:()=>I("next"),children:c.jsx(hi,{className:"w-4 h-4"})})]}):c.jsxs(c.Fragment,{children:[c.jsx(pe,{variant:"outline",size:"icon",className:"rounded-lg",onClick:()=>O("prev"),children:c.jsx(Cf,{className:"w-4 h-4"})}),c.jsx(pe,{variant:"outline",size:"icon",className:"rounded-lg",onClick:()=>O("next"),children:c.jsx(hi,{className:"w-4 h-4"})})]});return c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-[24px] mb-2",children:"Calendar"}),c.jsx("p",{className:"text-muted-foreground",children:"Manage your schedule and tasks"})]}),c.jsxs(pe,{className:"rounded-xl",onClick:()=>o(!0),children:[c.jsx(jd,{className:"w-4 h-4 mr-2"}),"Add Event"]})]}),x&&c.jsx(Pe,{className:"p-4 border-red-500 bg-red-50 dark:bg-red-900/20",children:c.jsx("p",{className:"text-red-600",children:x})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx(Pe,{className:"lg:col-span-2 p-6 rounded-xl",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("h2",{className:"text-[20px]",children:re()}),c.jsx("div",{className:"flex space-x-1",children:J()})]}),c.jsx(pm,{value:n,onValueChange:z=>r(z),children:c.jsxs(mm,{className:"rounded-xl",children:[c.jsx(gr,{value:"month",className:"rounded-lg",children:"Month"}),c.jsx(gr,{value:"week",className:"rounded-lg",children:"Week"}),c.jsx(gr,{value:"day",className:"rounded-lg",children:"Day"})]})})]}),n==="month"&&c.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(z=>c.jsx("div",{className:"text-center text-[14px] text-muted-foreground py-2",children:z},z)),Array.from({length:j}).map((z,R)=>c.jsx("div",{className:"aspect-square"},`empty-${R}`)),Array.from({length:_}).map((z,R)=>{const D=R+1,G=new Date(t.getFullYear(),t.getMonth(),D),N=F(G),L=new Date,V=G.toDateString()===L.toDateString();return c.jsxs("div",{onClick:()=>k(G),className:`aspect-square p-2 rounded-xl border border-border hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer ${V?"bg-blue-50 dark:bg-blue-900/20 border-blue-500":""}`,children:[c.jsx("div",{className:`text-[14px] mb-1 ${V?"text-blue-600":""}`,children:D}),c.jsxs("div",{className:"space-y-0.5",children:[N.slice(0,2).map(Q=>c.jsx("div",{className:`${A(D%sf.length)} text-white text-[10px] px-1.5 py-0.5 rounded truncate`,title:Q.title,children:Q.title},Q._id)),N.length>2&&c.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["+",N.length-2," more"]})]})]},D)})]}),n==="week"&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[c.jsx("div",{className:"text-[14px] text-muted-foreground"}),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(z=>c.jsx("div",{className:"text-center text-[14px] text-muted-foreground py-2 font-medium",children:z},z))]}),ee.map(z=>c.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[c.jsxs("div",{className:"text-[12px] text-muted-foreground py-2 text-right pr-2",children:[z.toString().padStart(2,"0"),":00"]}),oe.map((R,D)=>{const G=U(R,z),N=R.toDateString()===new Date().toDateString(),L=R.getDate();return c.jsxs("div",{onClick:()=>k(R),className:`min-h-[80px] p-1 rounded border border-border hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer ${N?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[c.jsx("div",{className:`text-[12px] mb-1 ${N?"text-blue-600 font-medium":"text-muted-foreground"}`,children:D===0&&L}),c.jsx("div",{className:"space-y-1",children:G.map(V=>c.jsx("div",{className:`${A(D%sf.length)} text-white text-[10px] px-1.5 py-0.5 rounded truncate`,title:`${V.title} - ${W(V.startDate)}`,children:W(V.startDate)},V._id))})]},`${D}-${z}`)})]},z))]}),n==="day"&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-center text-[14px] text-muted-foreground mb-2",children:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),c.jsx("div",{className:"space-y-2",children:ee.map(z=>{const R=U(t,z);return c.jsxs("div",{onClick:()=>k(t),className:"flex border border-border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",children:[c.jsxs("div",{className:"text-[12px] text-muted-foreground py-3 px-4 min-w-[80px] text-right",children:[z.toString().padStart(2,"0"),":00"]}),c.jsxs("div",{className:"flex-1 p-3",children:[R.map(D=>c.jsxs("div",{className:`${A(0)} text-white text-[12px] px-3 py-2 rounded mb-1`,children:[c.jsx("div",{className:"font-medium",children:D.title}),c.jsxs("div",{className:"text-[10px] opacity-90",children:[W(D.startDate)," - ",W(D.endDate)]}),D.description&&c.jsx("div",{className:"text-[10px] opacity-80 mt-1",children:D.description}),D.participants&&D.participants.length>0&&c.jsxs("div",{className:"text-[10px] opacity-80 mt-1",children:[D.participants.length," participant",D.participants.length===1?"":"s"]})]},D._id)),R.length===0&&c.jsx("div",{className:"text-[14px] text-muted-foreground",children:""})]})]},z)})})]})]})}),c.jsx("div",{className:"space-y-6",children:c.jsxs(Pe,{className:"p-6 rounded-xl",children:[c.jsx("h3",{className:"mb-4",children:"Upcoming Events"}),c.jsx("div",{className:"space-y-3",children:Z().length>0?Z().map((z,R)=>c.jsxs("div",{className:"p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx("div",{className:`w-3 h-3 rounded-full ${A(R)}`}),c.jsx("p",{className:"font-medium",children:z.title})]}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:W(z.startDate)}),c.jsxs("p",{className:"text-[12px] text-muted-foreground",children:[z.participants?.length||0," participant",z.participants?.length===1?"":"s"]})]},z._id)):c.jsx("p",{className:"text-muted-foreground text-[14px]",children:"No upcoming events"})})]})})]}),s&&c.jsx(Ate,{onClose:C,onEventCreated:y,initialDate:i||void 0})]})}var Xm="Popover",[XA]=nr(Xm,[nc]),Eu=nc(),[Dte,Ti]=XA(Xm),GA=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!1}=t,l=Eu(e),u=b.useRef(null),[h,f]=b.useState(!1),[m,x]=go({prop:r,defaultProp:s??!1,onChange:o,caller:Xm});return c.jsx($0,{...l,children:c.jsx(Dte,{scope:e,contentId:os(),triggerRef:u,open:m,onOpenChange:x,onOpenToggle:b.useCallback(()=>x(w=>!w),[x]),hasCustomAnchor:h,onCustomAnchorAdd:b.useCallback(()=>f(!0),[]),onCustomAnchorRemove:b.useCallback(()=>f(!1),[]),modal:i,children:n})})};GA.displayName=Xm;var JA="PopoverAnchor",Lte=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ti(JA,n),o=Eu(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return b.useEffect(()=>(i(),()=>l()),[i,l]),c.jsx(om,{...o,...r,ref:e})});Lte.displayName=JA;var QA="PopoverTrigger",ZA=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ti(QA,n),o=Eu(n),i=Xe(e,s.triggerRef),l=c.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":sI(s.open),...r,ref:i,onClick:Ce(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:c.jsx(om,{asChild:!0,...o,children:l})});ZA.displayName=QA;var Y1="PopoverPortal",[Bte,Fte]=XA(Y1,{forceMount:void 0}),eI=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,o=Ti(Y1,e);return c.jsx(Bte,{scope:e,forceMount:n,children:c.jsx(Pn,{present:n||o.open,children:c.jsx(fu,{asChild:!0,container:s,children:r})})})};eI.displayName=Y1;var Hl="PopoverContent",tI=b.forwardRef((t,e)=>{const n=Fte(Hl,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,o=Ti(Hl,t.__scopePopover);return c.jsx(Pn,{present:r||o.open,children:o.modal?c.jsx(zte,{...s,ref:e}):c.jsx(Ute,{...s,ref:e})})});tI.displayName=Hl;var $te=gi("PopoverContent.RemoveScroll"),zte=b.forwardRef((t,e)=>{const n=Ti(Hl,t.__scopePopover),r=b.useRef(null),s=Xe(e,r),o=b.useRef(!1);return b.useEffect(()=>{const i=r.current;if(i)return am(i)},[]),c.jsx(mu,{as:$te,allowPinchZoom:!0,children:c.jsx(nI,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(t.onCloseAutoFocus,i=>{i.preventDefault(),o.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Ce(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,h=l.button===2||u;o.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:Ce(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ute=b.forwardRef((t,e)=>{const n=Ti(Hl,t.__scopePopover),r=b.useRef(!1),s=b.useRef(!1);return c.jsx(nI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;n.triggerRef.current?.contains(i)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),nI=b.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,...m}=t,x=Ti(Hl,n),w=Eu(n);return em(),c.jsx(uu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:c.jsx(du,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:h,onDismiss:()=>x.onOpenChange(!1),children:c.jsx(z0,{"data-state":sI(x.open),role:"dialog",id:x.contentId,...w,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),rI="PopoverClose",Hte=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ti(rI,n);return c.jsx(Ae.button,{type:"button",...r,ref:e,onClick:Ce(t.onClick,()=>s.onOpenChange(!1))})});Hte.displayName=rI;var Wte="PopoverArrow",Vte=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Eu(n);return c.jsx(U0,{...s,...r,ref:e})});Vte.displayName=Wte;function sI(t){return t?"open":"closed"}var Yte=GA,qte=ZA,Kte=eI,Xte=tI;function Gte({...t}){return c.jsx(Yte,{"data-slot":"popover",...t})}function Jte({...t}){return c.jsx(qte,{"data-slot":"popover-trigger",...t})}function Qte({className:t,align:e="center",sideOffset:n=4,...r}){return c.jsx(Kte,{children:c.jsx(Xte,{"data-slot":"popover-content",align:e,sideOffset:n,className:He("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...r})})}const Or={getConversations:async()=>(await Le.get("/chat/conversations")).data,getConversation:async t=>(await Le.get(`/chat/conversations/${t}`)).data,getMessages:async(t,e=50,n=0)=>(await Le.get(`/chat/conversations/${t}/messages`,{params:{limit:e,skip:n}})).data,createConversation:async t=>(await Le.post("/chat/conversations",t)).data,sendMessage:async t=>(await Le.post("/chat/messages",t)).data,getUnreadCount:async()=>(await Le.get("/chat/unread")).data,markAsRead:async t=>{await Le.post(`/chat/conversations/${t}/read`)},getSharedUsers:async()=>(await Le.get("/folder/shared-users")).data};class Zte{socket=null;isConnected=!1;callbacks={};currentConversationId=null;reconnectAttempts=0;maxReconnectAttempts=5;getToken(){return localStorage.getItem(On)}connect(){const e=this.getToken();if(!e){console.error(" ChatService: No authentication token found");return}if(this.socket&&this.isConnected){console.log(" ChatService: Already connected");return}this.socket&&(this.socket.disconnect(),this.socket=null);const s=`${en.replace("/api","").replace("http","ws")}/ws/chat`;console.log(" ChatService: Connecting to WebSocket:",s),this.socket=Nl(s,{auth:{token:e},query:{token:e},transports:["websocket","polling"],reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:this.maxReconnectAttempts,timeout:3e4,forceNew:!0}),this.setupEventHandlers()}setupEventHandlers(){this.socket&&(this.socket.on("connect",()=>{this.isConnected=!0,this.reconnectAttempts=0,console.log(" ChatService: Connected to chat server"),this.currentConversationId&&this.joinConversation(this.currentConversationId)}),this.socket.on("disconnect",e=>{this.isConnected=!1,console.log(" ChatService: Disconnected from server:",e),e!=="io client disconnect"&&(this.reconnectAttempts++,this.reconnectAttempts<=this.maxReconnectAttempts&&console.log(` ChatService: Reconnection attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts}`))}),this.socket.on("connect_error",e=>{console.error(" ChatService: Connection error:",e),this.callbacks.onError?.(e)}),this.socket.on("conversation_joined",e=>{console.log(" ChatService: Joined conversation:",e.conversationId),this.callbacks.onConversationJoined?.(e)}),this.socket.on("new_message",e=>{console.log(" ChatService: New message received:",e),this.callbacks.onMessage?.(e)}),this.socket.on("messages_read",e=>{this.callbacks.onMessagesRead?.(e)}),this.socket.on("user_online",e=>{this.callbacks.onUserOnline?.(e)}),this.socket.on("user_offline",e=>{this.callbacks.onUserOffline?.(e)}),this.socket.on("online_users",e=>{this.callbacks.onOnlineUsers?.(e)}),this.socket.on("error",e=>{console.error(" ChatService: Error:",e),this.callbacks.onError?.(e)}))}disconnect(){this.socket&&(this.currentConversationId&&this.leaveConversation(this.currentConversationId),this.socket.disconnect(),this.socket=null,this.isConnected=!1,this.currentConversationId=null,console.log(" ChatService: Disconnected"))}joinConversation(e){if(!this.socket||!this.isConnected){console.warn(" ChatService: Not connected, cannot join conversation");return}this.currentConversationId=e,this.socket.emit("join_conversation",{conversationId:e}),console.log(` ChatService: Joining conversation ${e}`)}leaveConversation(e){!this.socket||!this.isConnected||(this.currentConversationId===e&&(this.currentConversationId=null),this.socket.emit("leave_conversation",{conversationId:e}),console.log(` ChatService: Left conversation ${e}`))}sendMessage(e,n,r="text",s){if(!this.socket||!this.isConnected)return console.warn(" ChatService: Not connected, sending via REST API"),Or.sendMessage({conversationId:e,content:n,type:r,metadata:s});this.socket.emit("send_message",{conversationId:e,content:n,type:r,metadata:s}),console.log(` ChatService: Sending message to conversation ${e}`)}markAsRead(e){if(!this.socket||!this.isConnected)return Or.markAsRead(e);this.socket.emit("mark_read",{conversationId:e})}getOnlineUsers(e){!this.socket||!this.isConnected||this.socket.emit("get_online_users",{conversationId:e})}on(e){this.callbacks={...this.callbacks,...e}}off(){this.callbacks={}}get connected(){return this.isConnected}}const ur=new Zte;function ene(){const[t,e]=b.useState(""),[n,r]=b.useState([]),[s,o]=b.useState(null),[i,l]=b.useState([]),[u,h]=b.useState([]),[f,m]=b.useState([]),[x,w]=b.useState(new Set),[v,y]=b.useState(null),[k,C]=b.useState(!0),[_,j]=b.useState({}),[M,O]=b.useState(!1),[T,I]=b.useState(null),[A,F]=b.useState(!1),U=b.useRef(null),W=b.useRef(null),Z={Smileys:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Gestures:["","","","","","","","","","","","","","","","","","","","","","",""],Hearts:["","","","","","","","","","","","","","","","","","",""],Objects:["","","","","","","","","","","","","","","",""]},oe=H=>{e(B=>B+H),F(!1)},ee=H=>{if(H==null)return"";if(typeof H=="string")return H;if(typeof H=="number")return H.toString();if(typeof H=="object"){const B=H;if(B._id)return ee(B._id);if(B.id)return ee(B.id);if(B.$oid)return ee(B.$oid);if(typeof H.toString=="function")return H.toString()}return""},re=H=>{const B=new Map;for(const K of H){const q=K.participants.map(ge=>ee(ge)).filter(ge=>ge&&ge!==ee(v?._id)).sort().join("|")||ee(K._id),se=B.get(q);if(!se){B.set(q,K);continue}const he=new Date(se.lastActivity||se.updatedAt||se.createdAt).getTime();new Date(K.lastActivity||K.updatedAt||K.createdAt).getTime()>he&&B.set(q,K)}return Array.from(B.values()).sort((K,q)=>{const se=new Date(K.lastActivity||K.updatedAt||K.createdAt).getTime();return new Date(q.lastActivity||q.updatedAt||q.createdAt).getTime()-se})};b.useEffect(()=>{(async()=>{try{const B=localStorage.getItem("access_token");if(!B)return;const q=B.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),se=decodeURIComponent(atob(q).split("").map(ke=>"%"+("00"+ke.charCodeAt(0).toString(16)).slice(-2)).join("")),he=JSON.parse(se),ae=he.id||he._id||he.userId,ge=await pa(ae);y(ge)}catch(B){console.error("Error loading current user:",B)}})()},[]),b.useEffect(()=>{(async()=>{try{C(!0);const B=await Or.getConversations(),K=re(B);r(K);const q=await Or.getUnreadCount();j(q);const se=await Or.getSharedUsers();m(se),B.length>0&&o(B[0])}catch(B){console.error("Error loading conversations:",B);try{const K=await Or.getSharedUsers();m(K)}catch(K){console.error("Error loading shared users:",K)}de.error("Failed to load conversations")}finally{C(!1)}})()},[]),b.useEffect(()=>{if(!s)return;(async()=>{try{const B=await Or.getMessages(s._id);l(B),await Or.markAsRead(s._id);const K=await Or.getUnreadCount();j(K)}catch(B){console.error("Error loading messages:",B),de.error("Failed to load messages")}})()},[s?._id]),b.useEffect(()=>{if(!v)return;ur.connect(),ur.on({onMessage:B=>{const K=ee(B.conversationId),q=ee(s?._id);if(K===q){if(l(se=>{const he=ee(B._id);if(se.some(ue=>ee(ue._id).startsWith("temp_")&&ue.content===B.content))return se.filter(ue=>!ee(ue._id).startsWith("temp_")||ue.content!==B.content).concat([B]).sort((ue,fe)=>new Date(ue.createdAt).getTime()-new Date(fe.createdAt).getTime());if(se.some(ue=>ee(ue._id)===he&&ue.content===B.content))return se;const ke=se.findIndex(ue=>ee(ue._id)===he);if(ke!==-1){const ue=[...se];return ue[ke]=B,ue.sort((fe,Se)=>new Date(fe.createdAt).getTime()-new Date(Se.createdAt).getTime())}return[...se,B].sort((ue,fe)=>new Date(ue.createdAt).getTime()-new Date(fe.createdAt).getTime())}),v){const se=typeof B.senderId=="object"&&B.senderId._id||B.senderId.toString(),he=v._id.toString();se!==he&&ur.markAsRead(B.conversationId)}}else j(se=>({...se,[K]:(se[K]||0)+1}));r(se=>re(se.map(he=>ee(he._id)===K?{...he,lastMessage:B,lastActivity:new Date}:he)))},onUserOnline:B=>{w(K=>new Set([...K,B.userId]))},onUserOffline:B=>{w(K=>{const q=new Set(K);return q.delete(B.userId),q})},onOnlineUsers:B=>{w(new Set(B.userIds))},onError:B=>{console.error("Chat WebSocket error:",B),O(!1)},onConversationJoined:B=>{const K=B.conversationId;O(!0),K&&I(q=>q===K?null:q)}});const H=setInterval(()=>{O(ur.connected)},3e3);return()=>{clearInterval(H),ur.off(),ur.disconnect()}},[s?._id,v]),b.useEffect(()=>{if(!s){I(null);return}const H=ee(s._id);H&&(ur.connected?(ur.joinConversation(H),ur.getOnlineUsers(H),I(null)):(I(H),ur.connect()))},[s?._id]),b.useEffect(()=>{M&&T&&(ur.joinConversation(T),ur.getOnlineUsers(T),I(null))},[M,T]);const J=b.useRef(!0),z=b.useRef(0);b.useEffect(()=>{if(J.current){J.current=!1,z.current=i.length;return}i.length>z.current&&U.current?.scrollIntoView({behavior:"smooth"}),z.current=i.length},[i]),b.useEffect(()=>{if(!s){h([]);return}const H=s.participants.map(K=>ee(K)),B=f.filter(K=>{const q=ee(K._id);return H.includes(q)&&x.has(q)});h(B)},[s,f,x]);const R=async()=>{if(!t.trim()||!s||!v)return;const H=t.trim(),B=ee(s._id);if(!B)return;const K=`temp_${Date.now()}`,q={_id:K,conversationId:B,senderId:{_id:v._id,firstName:v.firstName,lastName:v.lastName,email:v.email,picture:v.picture},content:H,read:!1,type:"text",createdAt:new Date,updatedAt:new Date};l(se=>[...se,q]),e("");try{ur.sendMessage(B,H),setTimeout(async()=>{try{const se=await Or.getMessages(B);l(he=>{const ae=he.filter(fe=>fe._id!==K),ge=new Set(ae.map(fe=>fe._id?.toString())),ke=se.filter(fe=>!ge.has(fe._id?.toString()));return[...ae,...ke].sort((fe,Se)=>new Date(fe.createdAt).getTime()-new Date(Se.createdAt).getTime())})}catch(se){console.error("Error reloading messages:",se)}},1500)}catch(se){console.error("Error sending message:",se),de.error("Failed to send message"),l(he=>he.filter(ae=>ae._id!==K)),e(H)}},D=H=>{const B=new Date(H),q=new Date().getTime()-B.getTime(),se=Math.floor(q/6e4),he=Math.floor(se/60),ae=Math.floor(he/24);return se<1?"just now":se<60?`${se}m ago`:he<24?`${he}h ago`:ae<7?`${ae}d ago`:B.toLocaleDateString()},G=H=>new Date(H).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),N=H=>{if(H.name)return H.name;if(H.type==="direct"&&H.participants.length===2){const K=H.participants.find(q=>ee(q)!==ee(v?._id));if(K&&typeof K=="object")return`${K.firstName} ${K.lastName}`}const B=H.participants.filter(K=>ee(K)!==ee(v?._id)).map(K=>typeof K=="object"?`${K.firstName} ${K.lastName}`:"").filter(Boolean);return B.length>0?B.slice(0,3).join(", ")+(B.length>3?"":""):H.type==="group"?`Group (${H.participants.length})`:`Chat (${H.participants.length})`},L=H=>{if(typeof H.senderId=="object")return`${H.senderId.firstName} ${H.senderId.lastName}`;const B=n.flatMap(K=>K.participants).find(K=>ee(K)===ee(H.senderId));return B&&typeof B=="object"?`${B.firstName} ${B.lastName}`:"Unknown User"},V=H=>{if(typeof H.senderId=="object")return`${H.senderId.firstName[0]}${H.senderId.lastName[0]}`;const B=n.flatMap(K=>K.participants).find(K=>ee(K)===ee(H.senderId));return B&&typeof B=="object"?`${B.firstName[0]}${B.lastName[0]}`:"U"},Q=H=>{const B=ee(H.senderId);return v?B===ee(v._id):!1},ce=async H=>{try{const B=n.find(q=>q.type==="direct"&&q.participants.some(se=>ee(se)===H));if(B){o(B);return}const K=await Or.createConversation({participantIds:[H],type:"direct"});r(q=>re([K,...q])),o(K)}catch(B){console.error("Failed to start chat:",B),de.error("Failed to start chat")}};return k?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx(Pe,{className:"rounded-xl overflow-hidden w-full max-w-4xl h-[600px] p-8",children:c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-muted-foreground",children:"Loading conversations..."})})})}):c.jsx("div",{className:"flex items-center justify-center px-4 py-6 min-h-screen",children:c.jsx(Pe,{className:"relative rounded-xl w-full max-w-5xl h-[700px] overflow-hidden",children:c.jsxs("div",{className:"grid grid-cols-12 h-full min-h-0",children:[c.jsxs("div",{className:"col-span-12 md:col-span-3 border-r border-border flex flex-col min-h-0",children:[c.jsx("div",{className:"p-4 border-b border-border",children:c.jsx("h2",{className:"text-[20px]",children:"Messages"})}),c.jsx("div",{className:"divide-y divide-border flex-1 overflow-y-auto pr-1 chat-scroll min-h-0",children:n.length===0?c.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[c.jsx("p",{className:"text-[14px] font-medium",children:"No conversations found"}),c.jsx("p",{className:"text-[12px] mt-2",children:"Start a chat with someone new"}),c.jsx("div",{className:"mt-4 space-y-2 text-left",children:f.length===0?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("p",{className:"text-[12px] text-muted-foreground",children:"No available users to chat"}),c.jsx("p",{className:"text-[11px] text-muted-foreground mt-1",children:"Share a folder with someone to start chatting!"})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-[11px] text-muted-foreground mb-2",children:"Users with shared folders:"}),f.map(H=>c.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(yr,{className:"w-8 h-8",children:c.jsxs(er,{className:"bg-gradient-to-br from-blue-400 to-purple-500 text-white text-[11px]",children:[H.firstName[0],H.lastName[0]]})}),c.jsxs("span",{className:"text-[14px]",children:[H.firstName," ",H.lastName]})]}),c.jsx(pe,{size:"sm",variant:"outline",className:"rounded-xl text-[12px]",onClick:()=>ce(H._id),children:"Chat"})]},H._id))]})})]}):n.map(H=>{const B=ee(H._id),K=_[B]||0,q=ee(s?._id)===B;return c.jsxs("div",{onClick:()=>o(H),className:`p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${q?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("p",{className:"font-medium",children:N(H)}),K>0&&c.jsx(St,{className:"bg-blue-600 text-white rounded-full w-5 h-5 p-0 flex items-center justify-center text-[12px]",children:K})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-[14px] text-muted-foreground truncate",children:H.lastMessage?.content||"No messages yet"}),H.lastActivity&&c.jsx("span",{className:"text-[12px] text-muted-foreground ml-2 flex-shrink-0",children:D(H.lastActivity)})]})]},B)})})]}),c.jsx("div",{className:"col-span-12 md:col-span-6 flex flex-col min-h-0",children:s?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-4 border-b border-border",children:[c.jsx("h3",{children:N(s)}),c.jsxs("p",{className:"text-[14px] text-muted-foreground",children:[s.participants.length," ",s.participants.length===1?"member":"members"]})]}),c.jsxs("div",{ref:W,className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0 pr-2 pb-6 chat-scroll",children:[i.length===0?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-muted-foreground",children:"No messages yet. Start the conversation!"})}):i.map(H=>{const B=Q(H);return c.jsx("div",{className:`flex ${B?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`flex ${B?"flex-row-reverse":"flex-row"} items-start space-x-3 max-w-[70%] break-words`,children:[!B&&c.jsx(yr,{className:"w-8 h-8 mt-1",children:c.jsx(er,{className:"bg-gradient-to-br from-blue-400 to-purple-500 text-white text-[12px]",children:V(H)})}),c.jsxs("div",{className:B?"mr-3":"",children:[!B&&c.jsx("p",{className:"text-[14px] mb-1",children:L(H)}),c.jsx("div",{className:`px-4 py-2.5 rounded-2xl ${B?"bg-blue-600 text-white rounded-br-sm":"bg-gray-100 dark:bg-gray-800 rounded-bl-sm"}`,children:c.jsx("p",{className:"whitespace-pre-wrap break-words",children:H.content})}),c.jsx("p",{className:"text-[12px] text-muted-foreground mt-1",children:G(H.createdAt)})]})]})},H._id)}),c.jsx("div",{ref:U})]}),c.jsx("div",{className:"p-4 border-t border-border",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(pe,{variant:"ghost",size:"icon",className:"rounded-xl",children:c.jsx(_8,{className:"w-5 h-5"})}),c.jsxs(Gte,{open:A,onOpenChange:F,children:[c.jsx(Jte,{asChild:!0,children:c.jsx(pe,{variant:"ghost",size:"icon",className:"rounded-xl",type:"button",children:c.jsx(H8,{className:"w-5 h-5"})})}),c.jsx(Qte,{className:"w-80 p-2 max-h-[400px] overflow-y-auto",align:"start",children:c.jsx("div",{className:"space-y-3",children:Object.entries(Z).map(([H,B])=>c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-2 px-1",children:H}),c.jsx("div",{className:"grid grid-cols-8 gap-1",children:B.map((K,q)=>c.jsx("button",{onClick:()=>oe(K),className:"text-2xl hover:bg-gray-100 dark:hover:bg-gray-800 rounded p-1 transition-colors cursor-pointer flex items-center justify-center aspect-square",type:"button",title:K,children:K},`${H}-${q}`))})]},H))})})]}),c.jsx(Ke,{type:"text",value:t,onChange:H=>e(H.target.value),onKeyPress:H=>H.key==="Enter"&&R(),placeholder:"Type a message...",className:"flex-1 rounded-xl"}),c.jsx(pe,{onClick:R,className:"rounded-xl",children:c.jsx(T0,{className:"w-4 h-4"})})]})})]}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-muted-foreground",children:"Select a conversation to start chatting"})})}),c.jsxs("div",{className:"col-span-12 md:col-span-3 border-l border-border hidden lg:flex flex-col min-h-0",children:[c.jsx("div",{className:"p-4 border-b border-border",children:c.jsxs("h3",{children:["Online (",u.length,")"]})}),c.jsx("div",{className:"p-4 space-y-3 overflow-y-auto flex-1 pr-1 chat-scroll min-h-0",children:u.length===0?c.jsx("p",{className:"text-[14px] text-muted-foreground text-center mt-4",children:"No online users in this conversation"}):u.map(H=>c.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",children:[c.jsxs("div",{className:"relative",children:[c.jsx(yr,{className:"w-10 h-10",children:c.jsx(er,{className:"bg-gradient-to-br from-blue-400 to-purple-500 text-white",children:`${H.firstName[0]}${H.lastName[0]}`})}),c.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white dark:border-card bg-green-500"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-[14px]",children:`${H.firstName} ${H.lastName}`}),c.jsx("p",{className:"text-[12px] text-muted-foreground capitalize",children:"online"})]})]},H._id))})]})]})})})}const tne=en.replace("/api",""),oI=gt.create({baseURL:tne,headers:{"Content-Type":"application/json"}});oI.interceptors.request.use(t=>{const e=localStorage.getItem(On);return e&&(t.headers.Authorization=`Bearer ${e}`),t});const nne={askQuestion:(t,e,n)=>oI.post("/openai",{question:t,documentIds:e,folderIds:n}).then(r=>r.data)};var Gm="Checkbox",[rne]=nr(Gm),[sne,q1]=rne(Gm);function one(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:o,form:i,name:l,onCheckedChange:u,required:h,value:f="on",internal_do_not_use_render:m}=t,[x,w]=go({prop:n,defaultProp:s??!1,onChange:u,caller:Gm}),[v,y]=b.useState(null),[k,C]=b.useState(null),_=b.useRef(!1),j=v?!!i||!!v.closest("form"):!0,M={checked:x,disabled:o,setChecked:w,control:v,setControl:y,name:l,form:i,value:f,hasConsumerStoppedPropagationRef:_,required:h,defaultChecked:pi(s)?!1:s,isFormControl:j,bubbleInput:k,setBubbleInput:C};return c.jsx(sne,{scope:e,...M,children:ine(m)?m(M):r})}var iI="CheckboxTrigger",aI=b.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:o,value:i,disabled:l,checked:u,required:h,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:x,isFormControl:w,bubbleInput:v}=q1(iI,t),y=Xe(s,f),k=b.useRef(u);return b.useEffect(()=>{const C=o?.form;if(C){const _=()=>m(k.current);return C.addEventListener("reset",_),()=>C.removeEventListener("reset",_)}},[o,m]),c.jsx(Ae.button,{type:"button",role:"checkbox","aria-checked":pi(u)?"mixed":u,"aria-required":h,"data-state":fI(u),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:y,onKeyDown:Ce(e,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Ce(n,C=>{m(_=>pi(_)?!0:!_),v&&w&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})})});aI.displayName=iI;var lI=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:i,disabled:l,value:u,onCheckedChange:h,form:f,...m}=t;return c.jsx(one,{__scopeCheckbox:n,checked:s,defaultChecked:o,disabled:l,required:i,onCheckedChange:h,name:r,form:f,value:u,internal_do_not_use_render:({isFormControl:x})=>c.jsxs(c.Fragment,{children:[c.jsx(aI,{...m,ref:e,__scopeCheckbox:n}),x&&c.jsx(hI,{__scopeCheckbox:n})]})})});lI.displayName=Gm;var cI="CheckboxIndicator",dI=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,o=q1(cI,n);return c.jsx(Pn,{present:r||pi(o.checked)||o.checked===!0,children:c.jsx(Ae.span,{"data-state":fI(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});dI.displayName=cI;var uI="CheckboxBubbleInput",hI=b.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:i,required:l,disabled:u,name:h,value:f,form:m,bubbleInput:x,setBubbleInput:w}=q1(uI,t),v=Xe(n,w),y=eb(o),k=L0(r);b.useEffect(()=>{const _=x;if(!_)return;const j=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(j,"checked").set,T=!s.current;if(y!==o&&O){const I=new Event("click",{bubbles:T});_.indeterminate=pi(o),O.call(_,pi(o)?!1:o),_.dispatchEvent(I)}},[x,y,o,s]);const C=b.useRef(pi(o)?!1:o);return c.jsx(Ae.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??C.current,required:l,disabled:u,name:h,value:f,form:m,...e,tabIndex:-1,ref:v,style:{...e.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});hI.displayName=uI;function ine(t){return typeof t=="function"}function pi(t){return t==="indeterminate"}function fI(t){return pi(t)?"indeterminate":t?"checked":"unchecked"}function ane({className:t,...e}){return c.jsx(lI,{"data-slot":"checkbox",className:He("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:c.jsx(dI,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:c.jsx(Pl,{className:"size-3.5"})})})}function lne(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var K1="ScrollArea",[pI]=nr(K1),[cne,Vr]=pI(K1),mI=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...i}=t,[l,u]=b.useState(null),[h,f]=b.useState(null),[m,x]=b.useState(null),[w,v]=b.useState(null),[y,k]=b.useState(null),[C,_]=b.useState(0),[j,M]=b.useState(0),[O,T]=b.useState(!1),[I,A]=b.useState(!1),F=Xe(e,W=>u(W)),U=cu(s);return c.jsx(cne,{scope:n,type:r,dir:U,scrollHideDelay:o,scrollArea:l,viewport:h,onViewportChange:f,content:m,onContentChange:x,scrollbarX:w,onScrollbarXChange:v,scrollbarXEnabled:O,onScrollbarXEnabledChange:T,scrollbarY:y,onScrollbarYChange:k,scrollbarYEnabled:I,onScrollbarYEnabledChange:A,onCornerWidthChange:_,onCornerHeightChange:M,children:c.jsx(Ae.div,{dir:U,...i,ref:F,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":j+"px",...t.style}})})});mI.displayName=K1;var gI="ScrollAreaViewport",xI=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=t,i=Vr(gI,n),l=b.useRef(null),u=Xe(e,l,i.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(Ae.div,{"data-radix-scroll-area-viewport":"",...o,ref:u,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:c.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});xI.displayName=gI;var Ws="ScrollAreaScrollbar",vI=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Vr(Ws,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=s,l=t.orientation==="horizontal";return b.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),s.type==="hover"?c.jsx(dne,{...r,ref:e,forceMount:n}):s.type==="scroll"?c.jsx(une,{...r,ref:e,forceMount:n}):s.type==="auto"?c.jsx(yI,{...r,ref:e,forceMount:n}):s.type==="always"?c.jsx(X1,{...r,ref:e}):null});vI.displayName=Ws;var dne=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Vr(Ws,t.__scopeScrollArea),[o,i]=b.useState(!1);return b.useEffect(()=>{const l=s.scrollArea;let u=0;if(l){const h=()=>{window.clearTimeout(u),i(!0)},f=()=>{u=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),c.jsx(Pn,{present:n||o,children:c.jsx(yI,{"data-state":o?"visible":"hidden",...r,ref:e})})}),une=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Vr(Ws,t.__scopeScrollArea),o=t.orientation==="horizontal",i=Qm(()=>u("SCROLL_END"),100),[l,u]=lne("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,s.scrollHideDelay,u]),b.useEffect(()=>{const h=s.viewport,f=o?"scrollLeft":"scrollTop";if(h){let m=h[f];const x=()=>{const w=h[f];m!==w&&(u("SCROLL"),i()),m=w};return h.addEventListener("scroll",x),()=>h.removeEventListener("scroll",x)}},[s.viewport,o,u,i]),c.jsx(Pn,{present:n||l!=="hidden",children:c.jsx(X1,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ce(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Ce(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),yI=b.forwardRef((t,e)=>{const n=Vr(Ws,t.__scopeScrollArea),{forceMount:r,...s}=t,[o,i]=b.useState(!1),l=t.orientation==="horizontal",u=Qm(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?h:f)}},10);return Wl(n.viewport,u),Wl(n.content,u),c.jsx(Pn,{present:r||o,children:c.jsx(X1,{"data-state":o?"visible":"hidden",...s,ref:e})})}),X1=b.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Vr(Ws,t.__scopeScrollArea),o=b.useRef(null),i=b.useRef(0),[l,u]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=CI(l.viewport,l.content),f={...r,sizes:l,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:x=>o.current=x,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:x=>i.current=x};function m(x,w){return xne(x,i.current,l,w)}return n==="horizontal"?c.jsx(hne,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const x=s.viewport.scrollLeft,w=_E(x,l,s.dir);o.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:x=>{s.viewport&&(s.viewport.scrollLeft=x)},onDragScroll:x=>{s.viewport&&(s.viewport.scrollLeft=m(x,s.dir))}}):n==="vertical"?c.jsx(fne,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const x=s.viewport.scrollTop,w=_E(x,l);o.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:x=>{s.viewport&&(s.viewport.scrollTop=x)},onDragScroll:x=>{s.viewport&&(s.viewport.scrollTop=m(x))}}):null}),hne=b.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=Vr(Ws,t.__scopeScrollArea),[i,l]=b.useState(),u=b.useRef(null),h=Xe(e,u,o.onScrollbarXChange);return b.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),c.jsx(wI,{"data-orientation":"horizontal",...s,ref:h,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Jm(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(o.viewport){const x=o.viewport.scrollLeft+f.deltaX;t.onWheelScroll(x),EI(x,m)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&i&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Pp(i.paddingLeft),paddingEnd:Pp(i.paddingRight)}})}})}),fne=b.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=Vr(Ws,t.__scopeScrollArea),[i,l]=b.useState(),u=b.useRef(null),h=Xe(e,u,o.onScrollbarYChange);return b.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),c.jsx(wI,{"data-orientation":"vertical",...s,ref:h,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Jm(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(o.viewport){const x=o.viewport.scrollTop+f.deltaY;t.onWheelScroll(x),EI(x,m)&&f.preventDefault()}},onResize:()=>{u.current&&o.viewport&&i&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Pp(i.paddingTop),paddingEnd:Pp(i.paddingBottom)}})}})}),[pne,bI]=pI(Ws),wI=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:f,onResize:m,...x}=t,w=Vr(Ws,n),[v,y]=b.useState(null),k=Xe(e,F=>y(F)),C=b.useRef(null),_=b.useRef(""),j=w.viewport,M=r.content-r.viewport,O=hn(f),T=hn(u),I=Qm(m,10);function A(F){if(C.current){const U=F.clientX-C.current.left,W=F.clientY-C.current.top;h({x:U,y:W})}}return b.useEffect(()=>{const F=U=>{const W=U.target;v?.contains(W)&&O(U,M)};return document.addEventListener("wheel",F,{passive:!1}),()=>document.removeEventListener("wheel",F,{passive:!1})},[j,v,M,O]),b.useEffect(T,[r,T]),Wl(v,I),Wl(w.content,I),c.jsx(pne,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:hn(o),onThumbPointerUp:hn(i),onThumbPositionChange:T,onThumbPointerDown:hn(l),children:c.jsx(Ae.div,{...x,ref:k,style:{position:"absolute",...x.style},onPointerDown:Ce(t.onPointerDown,F=>{F.button===0&&(F.target.setPointerCapture(F.pointerId),C.current=v.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),A(F))}),onPointerMove:Ce(t.onPointerMove,A),onPointerUp:Ce(t.onPointerUp,F=>{const U=F.target;U.hasPointerCapture(F.pointerId)&&U.releasePointerCapture(F.pointerId),document.body.style.webkitUserSelect=_.current,w.viewport&&(w.viewport.style.scrollBehavior=""),C.current=null})})})}),Op="ScrollAreaThumb",kI=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=bI(Op,t.__scopeScrollArea);return c.jsx(Pn,{present:n||s.hasThumb,children:c.jsx(mne,{ref:e,...r})})}),mne=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,o=Vr(Op,n),i=bI(Op,n),{onThumbPositionChange:l}=i,u=Xe(e,m=>i.onThumbChange(m)),h=b.useRef(void 0),f=Qm(()=>{h.current&&(h.current(),h.current=void 0)},100);return b.useEffect(()=>{const m=o.viewport;if(m){const x=()=>{if(f(),!h.current){const w=vne(m,l);h.current=w,l()}};return l(),m.addEventListener("scroll",x),()=>m.removeEventListener("scroll",x)}},[o.viewport,f,l]),c.jsx(Ae.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ce(t.onPointerDownCapture,m=>{const w=m.target.getBoundingClientRect(),v=m.clientX-w.left,y=m.clientY-w.top;i.onThumbPointerDown({x:v,y})}),onPointerUp:Ce(t.onPointerUp,i.onThumbPointerUp)})});kI.displayName=Op;var G1="ScrollAreaCorner",SI=b.forwardRef((t,e)=>{const n=Vr(G1,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?c.jsx(gne,{...t,ref:e}):null});SI.displayName=G1;var gne=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Vr(G1,n),[o,i]=b.useState(0),[l,u]=b.useState(0),h=!!(o&&l);return Wl(s.scrollbarX,()=>{const f=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(f),u(f)}),Wl(s.scrollbarY,()=>{const f=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(f),i(f)}),h?c.jsx(Ae.div,{...r,ref:e,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Pp(t){return t?parseInt(t,10):0}function CI(t,e){const n=t/e;return isNaN(n)?0:n}function Jm(t){const e=CI(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function xne(t,e,n,r="ltr"){const s=Jm(n),o=s/2,i=e||o,l=s-i,u=n.scrollbar.paddingStart+i,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,m=r==="ltr"?[0,f]:[f*-1,0];return _I([u,h],m)(t)}function _E(t,e,n="ltr"){const r=Jm(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,i=e.content-e.viewport,l=o-r,u=n==="ltr"?[0,i]:[i*-1,0],h=ky(t,u);return _I([0,i],[0,l])(h)}function _I(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function EI(t,e){return t>0&&t<e}var vne=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function s(){const o={left:t.scrollLeft,top:t.scrollTop},i=n.left!==o.left,l=n.top!==o.top;(i||l)&&e(),n=o,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function Qm(t,e){const n=hn(t),r=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),b.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Wl(t,e){const n=hn(e);Vt(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var yne=mI,bne=xI,wne=SI;function kne({className:t,children:e,...n}){return c.jsxs(yne,{"data-slot":"scroll-area",className:He("relative",t),...n,children:[c.jsx(bne,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),c.jsx(Sne,{}),c.jsx(wne,{})]})}function Sne({className:t,orientation:e="vertical",...n}){return c.jsx(vI,{"data-slot":"scroll-area-scrollbar",orientation:e,className:He("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:c.jsx(kI,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var Zm="Dialog",[NI]=nr(Zm),[Cne,hs]=NI(Zm),jI=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!0}=t,l=b.useRef(null),u=b.useRef(null),[h,f]=go({prop:r,defaultProp:s??!1,onChange:o,caller:Zm});return c.jsx(Cne,{scope:e,triggerRef:l,contentRef:u,contentId:os(),titleId:os(),descriptionId:os(),open:h,onOpenChange:f,onOpenToggle:b.useCallback(()=>f(m=>!m),[f]),modal:i,children:n})};jI.displayName=Zm;var TI="DialogTrigger",_ne=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hs(TI,n),o=Xe(e,s.triggerRef);return c.jsx(Ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Z1(s.open),...r,ref:o,onClick:Ce(t.onClick,s.onOpenToggle)})});_ne.displayName=TI;var J1="DialogPortal",[Ene,MI]=NI(J1,{forceMount:void 0}),OI=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,o=hs(J1,e);return c.jsx(Ene,{scope:e,forceMount:n,children:b.Children.map(r,i=>c.jsx(Pn,{present:n||o.open,children:c.jsx(fu,{asChild:!0,container:s,children:i})}))})};OI.displayName=J1;var Rp="DialogOverlay",PI=b.forwardRef((t,e)=>{const n=MI(Rp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=hs(Rp,t.__scopeDialog);return o.modal?c.jsx(Pn,{present:r||o.open,children:c.jsx(jne,{...s,ref:e})}):null});PI.displayName=Rp;var Nne=gi("DialogOverlay.RemoveScroll"),jne=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hs(Rp,n);return c.jsx(mu,{as:Nne,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(Ae.div,{"data-state":Z1(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ka="DialogContent",RI=b.forwardRef((t,e)=>{const n=MI(ka,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=hs(ka,t.__scopeDialog);return c.jsx(Pn,{present:r||o.open,children:o.modal?c.jsx(Tne,{...s,ref:e}):c.jsx(Mne,{...s,ref:e})})});RI.displayName=ka;var Tne=b.forwardRef((t,e)=>{const n=hs(ka,t.__scopeDialog),r=b.useRef(null),s=Xe(e,n.contentRef,r);return b.useEffect(()=>{const o=r.current;if(o)return am(o)},[]),c.jsx(AI,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ce(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Ce(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:Ce(t.onFocusOutside,o=>o.preventDefault())})}),Mne=b.forwardRef((t,e)=>{const n=hs(ka,t.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return c.jsx(AI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;n.triggerRef.current?.contains(i)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),AI=b.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=t,l=hs(ka,n),u=b.useRef(null),h=Xe(e,u);return em(),c.jsxs(c.Fragment,{children:[c.jsx(uu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:c.jsx(du,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Z1(l.open),...i,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(Pne,{titleId:l.titleId}),c.jsx(Ane,{contentRef:u,descriptionId:l.descriptionId})]})]})}),Q1="DialogTitle",II=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hs(Q1,n);return c.jsx(Ae.h2,{id:s.titleId,...r,ref:e})});II.displayName=Q1;var DI="DialogDescription",One=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hs(DI,n);return c.jsx(Ae.p,{id:s.descriptionId,...r,ref:e})});One.displayName=DI;var LI="DialogClose",BI=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hs(LI,n);return c.jsx(Ae.button,{type:"button",...r,ref:e,onClick:Ce(t.onClick,()=>s.onOpenChange(!1))})});BI.displayName=LI;function Z1(t){return t?"open":"closed"}var FI="DialogTitleWarning",[$le,$I]=b$(FI,{contentName:ka,titleName:Q1,docsSlug:"dialog"}),Pne=({titleId:t})=>{const e=$I(FI),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Rne="DialogDescriptionWarning",Ane=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${$I(Rne).contentName}}.`;return b.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Ine=jI,Dne=OI,Lne=PI,Bne=RI,Fne=II,$ne=BI;function zne({...t}){return c.jsx(Ine,{"data-slot":"sheet",...t})}function Une({...t}){return c.jsx(Dne,{"data-slot":"sheet-portal",...t})}function Hne({className:t,...e}){return c.jsx(Lne,{"data-slot":"sheet-overlay",className:He("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function Wne({className:t,children:e,side:n="right",...r}){return c.jsxs(Une,{children:[c.jsx(Hne,{}),c.jsxs(Bne,{"data-slot":"sheet-content",className:He("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...r,children:[e,c.jsxs($ne,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[c.jsx(us,{className:"size-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Vne({className:t,...e}){return c.jsx("div",{"data-slot":"sheet-header",className:He("flex flex-col gap-1.5 p-4",t),...e})}function Yne({className:t,...e}){return c.jsx(Fne,{"data-slot":"sheet-title",className:He("text-foreground font-semibold",t),...e})}const EE=t=>{let e=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/^\d+\.\s+(.+)$/gm,"<li>$1</li>").replace(/^[-]\s+(.+)$/gm,"<li>$1</li>").replace(/\n/g,"<br>");return e=e.replace(/(<li>.*<\/li>)/gs,'<ul class="list-disc list-inside space-y-1">$1</ul>'),e};function qne(){const[t,e]=b.useState(""),[n,r]=b.useState(!1),[s,o]=b.useState([]),[i,l]=b.useState(!1),[u,h]=b.useState(""),[f,m]=b.useState(!1),[x,w]=b.useState([]),[v,y]=b.useState([]),[k,C]=b.useState([]),[_,j]=b.useState([]),[M,O]=b.useState(""),[T,I]=b.useState(""),[A,F]=b.useState(!1);b.useEffect(()=>{(async()=>{try{const[L,V]=await Promise.all([xt.getAll(),Ht.getAll(1,100)]),Q=new Map;V.forEach(H=>{Q.set(H._id,H)});const ce=L.map(H=>{const B=typeof H.folderId=="string"?H.folderId:H.folderId?._id?.toString?.()||"",K=B?Q.get(B):null;return{...H,folderId:B,folderName:K?.Name||"Uncategorized"}});w(ce),y(V)}catch(L){if(L?.code==="ERR_NETWORK"||L?.code==="ECONNREFUSED"||L?.message?.includes("ERR_CONNECTION_REFUSED")||L?.message?.includes("Network Error")||!L?.response)console.warn("Backend connection unavailable. AI Assistant will work without document context."),w([]),y([]);else{console.error("Failed to fetch documents and folders:",L);const Q=L?.response?.data?.message||"Failed to load documents";de.error(Q)}}})()},[]);const U=b.useCallback(N=>v.find(L=>L._id===N)?.Name||"Uncategorized",[v]),W=b.useCallback(N=>{if(I(""),N==="all"){O("");return}O(N),j(L=>L.includes(N)?L:[...L,N])},[]),Z=b.useCallback(N=>{j(L=>L.filter(V=>V!==N)),C(L=>L.filter(V=>x.find(ce=>ce._id===V)?.folderId!==N)),O(L=>L===N?"":L)},[x]),oe=b.useCallback((N,L)=>{const V=L===!0||L==="indeterminate";C(Q=>V?Q.includes(N)?Q:[...Q,N]:Q.filter(ce=>ce!==N))},[]),ee=b.useCallback(()=>{C([]),j([]),O("")},[]),re=b.useMemo(()=>{let N=x;if(M?N=N.filter(L=>L.folderId===M):_.length>0&&(N=N.filter(L=>L.folderId&&_.includes(L.folderId))),T.trim()){const L=T.toLowerCase();N=N.filter(V=>V.Title?.toLowerCase().includes(L)||V.folderName?.toLowerCase().includes(L)||V.contentType?.some(Q=>Q.toLowerCase().includes(L)))}return N.slice().sort((L,V)=>new Date(V.updatedDate||V.createdDate).getTime()-new Date(L.updatedDate||L.createdDate).getTime())},[x,M,_,T]),z=[{id:1,text:"Summarize my recent documents",icon:Xn,action:()=>{const L=x.filter(V=>(Date.now()-new Date(V.updatedDate||V.createdDate).getTime())/864e5<7).slice(0,5).map(V=>V._id);C(L),e("Summarize my recent documents")}},{id:2,text:"Who last edited my documents?",icon:Xn,action:()=>{e("Who last edited my documents?")}},{id:3,text:"Analyze documents in a specific folder",icon:un,action:()=>{v.length>0?(j([v[0]._id]),O(v[0]._id),I(""),F(!0),e(`Analyze all documents in the "${v[0].Name}" folder`)):e("Analyze documents in a specific folder")}},{id:4,text:"Find documents by content or tags",icon:Qp,action:()=>{e("Find documents by content or tags")}}],R=c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-[18px] font-semibold",children:"Context filters"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Narrow down AI responses by focusing on folders and documents."})]}),(k.length>0||_.length>0)&&c.jsx(pe,{variant:"ghost",size:"sm",onClick:ee,className:"rounded-lg",children:"Clear all"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Choose a folder"}),c.jsxs(sa,{value:M||"all",onValueChange:W,children:[c.jsx(ia,{className:"rounded-xl",children:c.jsx(oa,{placeholder:"All folders"})}),c.jsxs(aa,{className:"rounded-xl",children:[c.jsx(Gt,{value:"all",children:"All folders"}),v.map(N=>c.jsx(Gt,{value:N._id,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(un,{className:"w-4 h-4"}),c.jsx("span",{children:N.Name})]})},N._id))]})]}),_.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(N=>c.jsxs(St,{variant:"secondary",className:"rounded-lg px-3 py-1",children:[c.jsx(un,{className:"w-3 h-3 mr-1"}),U(N),c.jsx("button",{onClick:()=>Z(N),className:"ml-2 hover:text-destructive","aria-label":`Remove folder ${U(N)}`,children:c.jsx(us,{className:"w-3 h-3"})})]},N))})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("label",{className:"text-sm font-medium",children:["Documents ",M?`in ${U(M)}`:"(all)"]}),k.length>0&&c.jsxs("span",{className:"text-xs text-muted-foreground",children:[k.length," selected"]})]}),c.jsx(Ke,{type:"text",value:T,onChange:N=>I(N.target.value),placeholder:"Search documents...",className:"rounded-xl"}),c.jsx(kne,{className:"h-64 rounded-xl border border-dashed border-border",children:c.jsx("div",{className:"p-3 space-y-2",children:re.length===0?c.jsx("div",{className:"text-sm text-muted-foreground text-center py-6",children:T?"No documents match your search.":"No documents found in this selection."}):re.map(N=>c.jsxs("label",{className:"flex items-start gap-3 rounded-lg px-3 py-2 transition-colors cursor-pointer hover:bg-muted/60",children:[c.jsx(ane,{checked:k.includes(N._id),onCheckedChange:L=>oe(N._id,L)}),c.jsxs("div",{className:"space-y-1 overflow-hidden",children:[c.jsx("p",{className:"text-sm font-medium leading-tight truncate",children:N.Title}),c.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[U(N.folderId||""),N.contentType&&N.contentType.length>0&&c.jsxs(c.Fragment,{children:["  ",N.contentType.slice(0,2).join(", "),N.contentType.length>2?"":""]})]})]})]},N._id))})})]})]}),D=async()=>{if(!t.trim()||i)return;const N={id:Date.now(),type:"user",content:t,time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};o(V=>[...V,N]);const L=t;e(""),l(!0);try{let V;try{V=await nne.askQuestion(L,k.length>0?k:void 0,_.length>0?_:void 0)}catch(B){throw B?.code==="ERR_NETWORK"||B?.code==="ECONNREFUSED"||B?.message?.includes("ERR_CONNECTION_REFUSED")||B?.message?.includes("Network Error")||!B?.response?new Error("Unable to connect to the AI service. Please make sure the backend is running."):B}m(!0);const Q=V;let ce=0;const H=setInterval(()=>{if(ce<=Q.length)h(Q.substring(0,ce)),ce+=2;else{clearInterval(H),m(!1);const B={id:Date.now()+1,type:"ai",content:Q,time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};o(K=>[...K,B]),h("")}},20)}catch(V){console.error("Error getting AI response:",V);let Q="Sorry, I encountered an error. Please try again.";V?.message?Q=V.message:V?.response?.data&&(Q=V.response.data.message||Q),de.error(Q);const ce={id:Date.now()+1,type:"ai",content:Q,time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};o(H=>[...H,ce])}finally{l(!1)}},G=()=>{r(!n),de.info("Voice input is coming soon!")};return c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsxs(Pe,{className:"lg:col-span-3 rounded-xl overflow-hidden flex flex-col h-[calc(100vh-12rem)]",children:[c.jsx("div",{className:"p-6 border-b border-border",children:c.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:c.jsx(ii,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-[24px]",children:"AI Assistant"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Ask me anything about your workspace"})]})]}),c.jsxs(pe,{variant:"outline",className:"rounded-xl lg:hidden",onClick:()=>F(!0),children:[c.jsx(z_,{className:"w-4 h-4 mr-2"}),"Filters"]})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:s.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mb-4",children:c.jsx(ii,{className:"w-10 h-10 text-white"})}),c.jsx("h2",{className:"text-[20px] mb-2",children:"How can I help you today?"}),c.jsx("p",{className:"text-muted-foreground mb-8",children:"I can help you find documents, summarize content, and answer questions about your workspace"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 w-full max-w-2xl",children:z.map(N=>c.jsxs(pe,{variant:"outline",className:"h-auto p-4 rounded-xl text-left justify-start",onClick:()=>{N.action?N.action():e(N.text)},children:[c.jsx(N.icon,{className:"w-5 h-5 mr-3 flex-shrink-0"}),c.jsx("span",{children:N.text})]},N.id))})]}):c.jsxs(c.Fragment,{children:[s.map(N=>c.jsx("div",{className:`flex ${N.type==="user"?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`flex ${N.type==="user"?"flex-row-reverse":"flex-row"} items-start space-x-3 max-w-[85%]`,children:[c.jsx(yr,{className:"w-10 h-10 mt-1",children:N.type==="ai"?c.jsx(er,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:c.jsx(ii,{className:"w-5 h-5"})}):c.jsx(er,{className:"bg-gray-200 dark:bg-gray-700",children:"JD"})}),c.jsxs("div",{className:N.type==="user"?"mr-3":"",children:[c.jsx("div",{className:`px-5 py-3 rounded-2xl ${N.type==="user"?"bg-blue-600 text-white rounded-br-sm":"bg-gray-100 dark:bg-gray-800 rounded-bl-sm"}`,children:c.jsx("div",{dangerouslySetInnerHTML:{__html:N.type==="ai"?EE(N.content):N.content.replace(/\n/g,"<br>")}})}),c.jsx("p",{className:"text-[12px] text-muted-foreground mt-2",children:N.time})]})]})},N.id)),f&&c.jsx("div",{className:"flex justify-start",children:c.jsxs("div",{className:"flex flex-row items-start space-x-3 max-w-[85%]",children:[c.jsx(yr,{className:"w-10 h-10 mt-1",children:c.jsx(er,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:c.jsx(ii,{className:"w-5 h-5 animate-pulse"})})}),c.jsx("div",{children:c.jsxs("div",{className:"px-5 py-3 rounded-2xl bg-gray-100 dark:bg-gray-800 rounded-bl-sm",children:[c.jsx("div",{dangerouslySetInnerHTML:{__html:EE(u)}}),c.jsx("span",{className:"inline-block w-2 h-4 bg-blue-600 ml-1 animate-pulse"})]})})]})})]})}),c.jsxs("div",{className:"p-6 border-t border-border space-y-3",children:[(k.length>0||_.length>0)&&c.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-blue-200 dark:border-blue-800 bg-blue-50/70 dark:bg-blue-900/20 px-4 py-2 text-sm",children:[c.jsxs("p",{className:"text-blue-900 dark:text-blue-200",children:[k.length>0&&`${k.length} document${k.length>1?"s":""}`,k.length>0&&_.length>0&&"  ",_.length>0&&`${_.length} folder${_.length>1?"s":""}`," ","selected"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(pe,{variant:"ghost",size:"sm",className:"rounded-lg",onClick:()=>F(!0),children:"Adjust"}),c.jsx(pe,{variant:"ghost",size:"sm",onClick:ee,className:"rounded-lg text-blue-900 dark:text-blue-200",children:"Clear"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(pe,{variant:"outline",size:"icon",className:"rounded-xl lg:hidden",onClick:()=>F(!0),children:c.jsx(z_,{className:"w-4 h-4"})}),c.jsx(pe,{variant:n?"default":"ghost",size:"icon",className:"rounded-xl",onClick:G,children:c.jsx(j0,{className:`w-5 h-5 ${n?"animate-pulse":""}`})}),c.jsx(Ke,{type:"text",value:t,onChange:N=>e(N.target.value),onKeyPress:N=>N.key==="Enter"&&D(),placeholder:"Ask me anything about your documents...",className:"flex-1 rounded-xl"}),c.jsx(pe,{onClick:D,className:"rounded-xl",disabled:i||!t.trim(),children:c.jsx(T0,{className:"w-4 h-4"})})]}),n&&c.jsxs("p",{className:"text-[14px] text-blue-600 mt-2 flex items-center",children:[c.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mr-2 animate-pulse"}),"Listening..."]})]})]}),c.jsx(Pe,{className:"rounded-xl p-6 h-fit hidden lg:block",children:R})]}),c.jsx(zne,{open:A,onOpenChange:F,children:c.jsxs(Wne,{side:"right",className:"p-0",children:[c.jsx(Vne,{children:c.jsx(Yne,{className:"px-6 pt-6",children:"Context filters"})}),c.jsx("div",{className:"px-6 pb-8 space-y-6 overflow-y-auto",children:R})]})})]})}const Kne=en.replace("/api",""),es=gt.create({baseURL:Kne,headers:{"Content-Type":"application/json"}});es.interceptors.request.use(t=>{const e=localStorage.getItem(On);return e&&(t.headers.Authorization=`Bearer ${e}`),t});const Ap={startMeeting:t=>es.post("/meetings/start",t).then(e=>e.data),joinMeeting:t=>es.post("/meetings/join",{meetingRoomId:t}).then(e=>e.data),endMeeting:(t,e)=>es.post(`/meetings/end/${t}`,e).then(n=>n.data),getMeetingByRoom:t=>es.get(`/meetings/room/${t}`).then(e=>e.data),getMeetingsByDocument:t=>es.get(`/meetings/byDoc/${t}`).then(e=>e.data),getMeetingsByFolder:t=>es.get(`/meetings/byFolder/${t}`).then(e=>e.data),updateMeetingTranscript:(t,e)=>es.patch(`/meetings/${t}/transcript`,{transcript:e}).then(n=>n.data),getMeetingById:t=>es.get(`/meetings/${t}`).then(e=>e.data),getUserMeetings:(t,e)=>es.get(`/meetings/user/${t}${e?`?limit=${e}`:""}`).then(n=>n.data),getUpcomingMeetings:t=>es.get(`/meetings/upcoming/${t}`).then(e=>e.data)};function Xne(){const[t,e]=b.useState("Quick Sync"),[n,r]=b.useState([]),[s,o]=b.useState([]),[i,l]=b.useState(!1),[u,h]=b.useState(!1),[f,m]=b.useState(null),[x,w]=b.useState(""),[v,y]=b.useState(!1),[k,C]=b.useState(null);b.useEffect(()=>{(async()=>{try{const I=await Le.get("/users");o(I.data)}catch(I){console.error("Failed to fetch users:",I)}})()},[]);const _=T=>{n.find(I=>I._id===T._id)||r([...n,T]),l(!1)},j=T=>{r(n.filter(I=>I._id!==T))},M=async()=>{if(!u){m(null),h(!0);try{const T=n.map(W=>W._id),I={title:t||"Quick Sync",participants:T,startTime:new Date,folderId:"standalone-meeting"},A=await Ap.startMeeting(I),F=`${window.location.origin}/meet?room=${A.meetingRoomId||""}&title=${encodeURIComponent(A.title)}`;if(n.length>0){let W=0,Z=0;for(const oe of n)try{const ee=A.createdBy?`${A.createdBy.firstName||""} ${A.createdBy.lastName||""}`.trim():"Meeting Organizer";await aF(oe.email,{title:A.title,startTime:A.startTime,createdBy:ee,description:A.description,joinUrl:F}),W++}catch(ee){console.error(`Failed to send email to ${oe.email}:`,ee),Z++}W>0&&de.success(`Meeting started! ${W} invitation email(s) sent.`),Z>0&&de.error(`Failed to send ${Z} invitation email(s).`)}else de.success("Meeting started successfully!");const U=new URLSearchParams({room:A.meetingRoomId||"",title:A.title});window.location.href=`/meet?${U.toString()}`}catch(T){console.error("Error starting meeting:",T);const I=T?.response?.data?.message||T?.message||"Failed to start meeting";m(I),de.error(I)}finally{h(!1)}}},O=async()=>{if(v)return;const T=x.trim();if(!T){const I="Please enter a meeting room ID.";C(I),de.error(I);return}C(null),y(!0);try{const I=await Ap.joinMeeting(T);de.success(`Joining "${I.title}"`);const A=new URLSearchParams({room:I.meetingRoomId||T,title:I.title});w(""),window.location.href=`/meet?${A.toString()}`}catch(I){console.error("Error joining meeting:",I);const A=I?.response?.data?.message||I?.message||"Failed to join meeting";C(A),de.error(A)}finally{y(!1)}};return c.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("h1",{className:"text-2xl font-semibold",children:"Meetings"})}),c.jsxs("div",{className:"bg-white dark:bg-card rounded-xl shadow-sm p-6 space-y-4 border border-border",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Zp,{className:"w-5 h-5"}),c.jsx("h2",{className:"text-lg font-medium",children:"Start a meeting"})]}),f&&c.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm",children:[c.jsx(D_,{className:"w-4 h-4"}),c.jsx("span",{children:f})]}),c.jsxs("div",{className:"grid gap-3",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ft,{htmlFor:"title",children:"Meeting Title"}),c.jsx(Ke,{id:"title",value:t,onChange:T=>e(T.target.value),placeholder:"Enter meeting title",disabled:u})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ft,{htmlFor:"participants",children:"Participants"}),c.jsxs("div",{className:"relative",children:[c.jsx(pe,{type:"button",variant:"outline",onClick:()=>l(!i),className:"w-full justify-start",disabled:u,children:"Add Participants"}),i&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-card border border-border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:s.map(T=>c.jsx("button",{onClick:()=>_(T),disabled:n.some(I=>I._id===T._id),className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-sm",children:[T.firstName[0],T.lastName[0]]}),c.jsxs("div",{children:[c.jsxs("div",{className:"font-medium",children:[T.firstName," ",T.lastName]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:T.email})]})]})},T._id))})]}),n.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:n.map(T=>c.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-lg",children:[c.jsxs("span",{className:"text-sm",children:[T.firstName," ",T.lastName]}),c.jsx("button",{onClick:()=>j(T._id),disabled:u,className:"hover:text-red-500",children:c.jsx(us,{className:"w-3 h-3"})})]},T._id))}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Select participants to receive meeting invitations via email"})]}),c.jsx(pe,{onClick:M,disabled:u,className:"rounded-xl w-full",children:u?"Starting Meeting...":"Start Meeting"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-card rounded-xl shadow-sm p-6 space-y-4 border border-border",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(f8,{className:"w-5 h-5"}),c.jsx("h2",{className:"text-lg font-medium",children:"Join a meeting"})]}),k&&c.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm",children:[c.jsx(D_,{className:"w-4 h-4"}),c.jsx("span",{children:k})]}),c.jsxs("div",{className:"grid gap-3",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ft,{htmlFor:"roomId",children:"Meeting Room ID"}),c.jsx(Ke,{id:"roomId",value:x,onChange:T=>{k&&C(null),w(T.target.value)},placeholder:"Enter room ID",disabled:v})]}),c.jsx(pe,{onClick:O,disabled:v,className:"rounded-xl w-full",children:v?"Joining...":"Join Meeting"})]})]})]})}class Gne{socket=null;isConnected=!1;currentRoomId=null;callbacks={};getToken(){return localStorage.getItem(On)}connect(){const e=this.getToken();if(!e){console.error(" MeetingService: No authentication token found");return}if(this.socket&&this.isConnected)return;this.socket&&(this.socket.disconnect(),this.socket=null);const s=`${en.replace("/api","").replace("http","ws")}/ws/meetings`;this.socket=Nl(s,{auth:{token:e},query:{token:e},transports:["websocket","polling"],reconnection:!0,reconnectionDelay:2e3,reconnectionAttempts:5,timeout:3e4,forceNew:!0}),this.setupEventHandlers()}setupEventHandlers(){this.socket&&(this.socket.on("connect",()=>{this.isConnected=!0,this.callbacks.onConnected?.(),this.currentRoomId&&this.joinMeeting(this.currentRoomId)}),this.socket.on("disconnect",e=>{this.isConnected=!1,this.callbacks.onDisconnected?.(e)}),this.socket.on("connect_error",e=>{console.error(" MeetingService: Connection error:",e),this.callbacks.onError?.(e)}),this.socket.on("error",e=>{console.error(" MeetingService error event:",e),this.callbacks.onError?.(e)}),this.socket.on("meeting_state",e=>{this.callbacks.onMeetingState?.(e)}),this.socket.on("participant_joined",e=>{this.callbacks.onParticipantJoined?.(e)}),this.socket.on("participant_left",e=>{this.callbacks.onParticipantLeft?.(e)}),this.socket.on("meeting_message",e=>{this.callbacks.onMeetingMessage?.(e)}))}disconnect(){this.socket&&(this.currentRoomId&&this.leaveMeeting(this.currentRoomId),this.socket.disconnect(),this.socket=null,this.isConnected=!1,this.currentRoomId=null)}joinMeeting(e){e&&((!this.socket||!this.isConnected)&&this.connect(),this.currentRoomId=e,!(!this.socket||!this.isConnected)&&this.socket.emit("join_meeting",{meetingRoomId:e}))}leaveMeeting(e){!this.socket||!this.isConnected||(this.currentRoomId===e&&(this.currentRoomId=null),this.socket.emit("leave_meeting",{meetingRoomId:e}))}sendMessage(e,n){if(!this.socket||!this.isConnected){console.warn(" MeetingService: Not connected, cannot send message");return}this.socket.emit("send_message",{meetingRoomId:e,content:n})}on(e){this.callbacks={...this.callbacks,...e}}off(){this.callbacks={}}get connected(){return this.isConnected}}const Yi=new Gne,NE=(t,e,n)=>{const s=(`${t||""} ${e||""}`.trim()||n||"").split(" ").filter(Boolean);return s.length===0?(n||"??").slice(0,2).toUpperCase():s.length===1?s[0].slice(0,2).toUpperCase():`${s[0][0]}${s[s.length-1][0]}`.toUpperCase()},Jne=t=>{try{return new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}};function Qne(){const[t]=sB(),e=Wr(),n=t.get("room")||"",r=t.get("title"),[s,o]=b.useState(null),[i,l]=b.useState(null),[u,h]=b.useState([]),[f,m]=b.useState([]),[x,w]=b.useState(""),[v,y]=b.useState(!1),[k,C]=b.useState("participants"),[_,j]=b.useState(!1),[M,O]=b.useState({}),[T,I]=b.useState(!1),[A,F]=b.useState(!1),[U,W]=b.useState(!1),Z=b.useRef(null),oe=b.useRef(null),ee=b.useRef(null),re=b.useRef(new Set),J=s?.title||r||"Meeting",z=i?._id||"";b.useEffect(()=>{(async()=>{try{const se=localStorage.getItem("access_token");if(!se)return;const ae=se.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),ge=decodeURIComponent(atob(ae).split("").map(Se=>"%"+("00"+Se.charCodeAt(0).toString(16)).slice(-2)).join("")),ke=JSON.parse(ge),ue=ke.id||ke._id||ke.userId;if(!ue)return;const fe=await pa(ue);l({_id:fe._id||ue,firstName:fe.firstName,lastName:fe.lastName,email:fe.email}),O(Se=>({...Se,[fe._id||ue]:{firstName:fe.firstName,lastName:fe.lastName,email:fe.email}}))}catch(se){console.error("Failed to load current user:",se)}})()},[]),b.useEffect(()=>{const q=ue=>ue.map(fe=>({...fe,isYou:fe._id===z})),se=ue=>{ue.length&&O(fe=>{let Se=!1;const ze={...fe};for(const We of ue){if(!We?._id)continue;const mt=ze[We._id]||{},Ze={firstName:We.firstName??mt.firstName,lastName:We.lastName??mt.lastName,email:We.email??mt.email};(Ze.firstName!==mt.firstName||Ze.lastName!==mt.lastName||Ze.email!==mt.email)&&(ze[We._id]=Ze,Se=!0)}return Se?ze:fe})},he=ue=>{o(fe=>fe?{...fe,...ue.meeting}:ue.meeting),h(q(ue.participants)),m(ue.messages),se(ue.participants)},ae=ue=>{h(fe=>{const Se=[...fe],ze=Se.findIndex(mt=>mt._id===ue.participant._id),We={...ue.participant,isYou:ue.participant._id===z};return ze>=0?Se[ze]=We:Se.push(We),Se}),se([ue.participant])},ge=ue=>{h(fe=>fe.map(Se=>Se._id===ue.participantId?{...Se,isConnected:!1}:Se))},ke=ue=>{m(fe=>[...fe,ue]),ue?.userId&&ue.user&&se([{_id:ue.userId,firstName:ue.user.firstName,lastName:ue.user.lastName,email:ue.user.email,isConnected:!0}])};return Yi.on({onMeetingState:he,onParticipantJoined:ae,onParticipantLeft:ge,onMeetingMessage:ke,onConnected:()=>j(!1),onDisconnected:()=>j(!0),onError:ue=>{ue?.message&&de.error(ue.message)}}),()=>{Yi.off()}},[z]),b.useEffect(()=>((async()=>{try{const se=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});oe.current=se,Z.current&&(Z.current.srcObject=se)}catch(se){console.error("Error accessing media devices:",se),de.error("Unable to access camera or microphone.")}})(),()=>{oe.current&&oe.current.getTracks().forEach(se=>se.stop()),ee.current&&ee.current.getTracks().forEach(se=>se.stop())}),[]),b.useEffect(()=>{if(!n){de.error("Missing meeting room identifier."),e("/meetings");return}let q=!0;return(async()=>{j(!0);try{const he=await Ap.getMeetingByRoom(n);if(!q)return;o(he),O(ae=>{if(!he?.participants?.length)return ae;let ge=!1;const ke={...ae};for(const ue of he.participants){if(!ue?._id)continue;const fe=ke[ue._id]||{},Se={firstName:ue.firstName??fe.firstName,lastName:ue.lastName??fe.lastName,email:ue.email??fe.email};(Se.firstName!==fe.firstName||Se.lastName!==fe.lastName||Se.email!==fe.email)&&(ke[ue._id]=Se,ge=!0)}return ge?ke:ae});try{await Ap.joinMeeting(n)}catch(ae){const ge=ae?.response?.status;ge&&ge!==400&&ge!==409&&console.error("Join meeting via REST failed:",ae)}}catch(he){console.error("Failed to load meeting:",he);const ae=he?.response?.data?.message||he?.message||"Unable to load meeting";de.error(ae),e("/meetings");return}Yi.connect(),Yi.joinMeeting(n)})(),()=>{q=!1,Yi.leaveMeeting(n)}},[e,n]),b.useEffect(()=>{z&&h(q=>q.map(se=>({...se,isYou:se._id===z})))},[z]),b.useEffect(()=>{const q=u.filter(he=>!he?._id||he.firstName||he.lastName||he.email||M[he._id]?!1:!re.current.has(he._id));if(!q.length)return;q.forEach(he=>{re.current.add(he._id)});let se=!0;return(async()=>{const he=await Promise.all(q.map(async ae=>{try{const ge=await pa(ae._id);return{id:ae._id,info:{firstName:ge.firstName,lastName:ge.lastName,email:ge.email}}}catch(ge){return console.error(`Failed to fetch participant ${ae._id}`,ge),re.current.delete(ae._id),null}}));se&&O(ae=>{let ge=!1;const ke={...ae};for(const ue of he){if(!ue?.id||!ue.info)continue;const fe=ke[ue.id]||{},Se={firstName:ue.info.firstName??fe.firstName,lastName:ue.info.lastName??fe.lastName,email:ue.info.email??fe.email};(Se.firstName!==fe.firstName||Se.lastName!==fe.lastName||Se.email!==fe.email)&&(ke[ue.id]=Se,ge=!0)}return ge?ke:ae})})(),()=>{se=!1}},[u,M]);const R=()=>{oe.current&&oe.current.getAudioTracks().forEach(q=>{q.enabled=T}),I(q=>!q)},D=()=>{oe.current&&oe.current.getVideoTracks().forEach(q=>{q.enabled=A}),F(q=>!q)},G=async()=>{if(U){ee.current&&(ee.current.getTracks().forEach(q=>q.stop()),ee.current=null),oe.current&&Z.current&&(Z.current.srcObject=oe.current),W(!1);return}try{const q=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});ee.current=q,Z.current&&(Z.current.srcObject=q);const[se]=q.getVideoTracks();se&&se.addEventListener("ended",()=>{G()}),W(!0)}catch(q){console.error("Error sharing screen:",q),de.error("Failed to start screen sharing.")}},N=()=>{Yi.leaveMeeting(n),oe.current&&oe.current.getTracks().forEach(q=>q.stop()),ee.current&&ee.current.getTracks().forEach(q=>q.stop()),e("/meetings")},L=async()=>{const q=window.location.href;try{await navigator.clipboard.writeText(q),de.success("Meeting link copied to clipboard!")}catch{de.error("Failed to copy link. Please copy manually from the address bar.")}},V=()=>{x.trim()&&(Yi.sendMessage(n,x.trim()),w(""))},Q=b.useMemo(()=>u.filter(q=>q.isConnected),[u]),ce=q=>{if(v&&k===q){y(!1);return}y(!0),C(q)},H=q=>{const se=M[q._id]||{};return{...q,firstName:q.firstName??se.firstName,lastName:q.lastName??se.lastName,email:q.email??se.email}},B=q=>{const se=H(q);return se.firstName||se.lastName?`${se.firstName||""} ${se.lastName||""}`.trim():se.email||"Participant"},K=q=>{if(q.user?.firstName||q.user?.lastName)return`${q.user?.firstName||""} ${q.user?.lastName||""}`.trim();if(q.user?.email)return q.user.email;const se=M[q.userId];return se?.firstName||se?.lastName?`${se.firstName||""} ${se.lastName||""}`.trim():se?.email||"Participant"};return c.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gray-900 dark:bg-gray-950 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800 dark:bg-gray-900 border-b border-gray-700 dark:border-gray-800 flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsx("h1",{className:"text-white text-lg font-semibold truncate",children:J}),c.jsxs("span",{className:"text-gray-400 text-sm whitespace-nowrap flex-shrink-0",children:[" Room ID: ",n]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[_&&c.jsx("span",{className:"text-xs text-amber-300",children:"Reconnecting"}),c.jsxs(pe,{onClick:L,variant:"outline",size:"sm",className:"text-white border-gray-600 flex-shrink-0",children:[c.jsx(oT,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]}),c.jsxs("div",{className:"flex-1 flex gap-4 p-4 min-h-0 overflow-hidden",children:[c.jsxs("div",{className:"flex-1 relative bg-black rounded-lg overflow-hidden min-w-0",children:[c.jsx("video",{ref:Z,autoPlay:!0,muted:T,playsInline:!0,className:"w-full h-full object-cover"}),A&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/70",children:c.jsx("div",{className:"w-32 h-32 bg-gray-800 rounded-full flex items-center justify-center",children:c.jsx(ha,{className:"w-16 h-16 text-gray-600"})})}),c.jsxs("div",{className:"absolute top-4 left-4 right-4 flex flex-wrap gap-2 pointer-events-none",children:[u.map(q=>{const se=H(q),he=B(q);return c.jsxs("div",{className:"pointer-events-auto flex items-center gap-2 bg-gray-800/80 backdrop-blur rounded-full px-3 py-1",children:[c.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-xs font-semibold text-white",children:NE(se.firstName,se.lastName,se.email)}),c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{className:"text-xs font-medium text-white leading-tight",children:[he,q.isYou?" (You)":""]}),c.jsx("span",{className:`text-[10px] ${q.isConnected?"text-emerald-400":"text-gray-400"}`,children:q.isConnected?"Online":"Offline"})]})]},q._id)}),u.length===0&&c.jsx("span",{className:"text-xs text-gray-300 bg-gray-800/70 px-3 py-1 rounded-full",children:"Waiting for participants..."})]})]}),v&&c.jsxs("div",{className:"w-80 bg-gray-800 rounded-lg flex flex-col flex-shrink-0 min-h-0 border border-gray-700/60",children:[c.jsxs("div",{className:"flex items-center border-b border-gray-700",children:[c.jsxs("button",{className:`flex-1 py-3 text-sm font-medium ${k==="participants"?"text-white border-b-2 border-white":"text-gray-400"}`,onClick:()=>C("participants"),children:["Participants (",u.length,")"]}),c.jsxs("button",{className:`flex-1 py-3 text-sm font-medium ${k==="chat"?"text-white border-b-2 border-white":"text-gray-400"}`,onClick:()=>C("chat"),children:["Chat (",f.length,")"]})]}),k==="participants"?c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[u.length===0&&c.jsx("p",{className:"text-sm text-gray-400",children:"No participants yet."}),u.map(q=>{const se=H(q),he=B(q);return c.jsxs("div",{className:"flex items-center gap-3 bg-gray-700/40 rounded-lg p-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-sm font-semibold text-white",children:NE(se.firstName,se.lastName,se.email)}),c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("span",{className:"text-white text-sm font-medium",children:[he,q.isYou?" (You)":""]})}),c.jsx("span",{className:`text-xs ${q.isConnected?"text-emerald-400":"text-gray-400"}`,children:q.isConnected?"Online":"Offline"})]})]},q._id)})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0",children:[f.length===0&&c.jsx("p",{className:"text-sm text-gray-400",children:"No messages yet. Say hello!"}),f.map(q=>c.jsxs("div",{className:"text-white",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsxs("span",{className:"font-semibold text-blue-400",children:[K(q),q.userId===z?" (You)":""]}),c.jsx("span",{className:"text-xs text-gray-400",children:Jne(q.createdAt)})]}),c.jsx("p",{className:"text-gray-300 text-sm whitespace-pre-wrap break-words",children:q.content})]},q.id))]}),c.jsx("div",{className:"p-4 border-t border-gray-700 flex-shrink-0",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ke,{value:x,onChange:q=>w(q.target.value),onKeyDown:q=>{q.key==="Enter"&&(q.preventDefault(),V())},placeholder:"Type a message...",className:"bg-gray-700 border-gray-600 text-white"}),c.jsx(pe,{onClick:V,size:"sm",disabled:!x.trim(),children:"Send"})]})})]})]})]}),c.jsx("div",{className:"bg-gray-800 border-t border-gray-700 p-4 flex-shrink-0",children:c.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx(pe,{onClick:R,variant:T?"destructive":"default",size:"sm",children:T?c.jsx(y8,{className:"w-5 h-5"}):c.jsx(j0,{className:"w-5 h-5"})}),c.jsx(pe,{onClick:D,variant:A?"destructive":"default",size:"sm",children:A?c.jsx(r$,{className:"w-5 h-5"}):c.jsx(Zp,{className:"w-5 h-5"})}),c.jsxs(pe,{onClick:()=>ce("participants"),variant:v&&k==="participants"?"default":"outline",size:"sm",children:[c.jsx(ha,{className:"w-5 h-5"}),Q.length>0&&c.jsx("span",{className:"ml-2 text-xs",children:Q.length})]}),c.jsx(pe,{onClick:()=>ce("chat"),variant:v&&k==="chat"?"default":"outline",size:"sm",children:c.jsx(Rl,{className:"w-5 h-5"})}),c.jsx(pe,{onClick:G,variant:U?"default":"outline",size:"sm",title:U?"Stop sharing screen":"Share screen",children:c.jsx(k8,{className:"w-5 h-5"})})]}),c.jsxs(pe,{onClick:N,variant:"destructive",size:"sm",children:[c.jsx(T8,{className:"w-5 h-5 mr-2"}),"Leave"]})]})})]})}var eg="Switch",[Zne]=nr(eg),[ere,tre]=Zne(eg),zI=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:i,disabled:l,value:u="on",onCheckedChange:h,form:f,...m}=t,[x,w]=b.useState(null),v=Xe(e,j=>w(j)),y=b.useRef(!1),k=x?f||!!x.closest("form"):!0,[C,_]=go({prop:s,defaultProp:o??!1,onChange:h,caller:eg});return c.jsxs(ere,{scope:n,checked:C,disabled:l,children:[c.jsx(Ae.button,{type:"button",role:"switch","aria-checked":C,"aria-required":i,"data-state":VI(C),"data-disabled":l?"":void 0,disabled:l,value:u,...m,ref:v,onClick:Ce(t.onClick,j=>{_(M=>!M),k&&(y.current=j.isPropagationStopped(),y.current||j.stopPropagation())})}),k&&c.jsx(WI,{control:x,bubbles:!y.current,name:r,value:u,checked:C,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});zI.displayName=eg;var UI="SwitchThumb",HI=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=tre(UI,n);return c.jsx(Ae.span,{"data-state":VI(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});HI.displayName=UI;var nre="SwitchBubbleInput",WI=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},o)=>{const i=b.useRef(null),l=Xe(i,o),u=eb(n),h=L0(e);return b.useEffect(()=>{const f=i.current;if(!f)return;const m=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&w){const v=new Event("click",{bubbles:r});w.call(f,n),f.dispatchEvent(v)}},[u,n,r]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});WI.displayName=nre;function VI(t){return t?"checked":"unchecked"}var rre=zI,sre=HI;function ore({className:t,...e}){return c.jsx(rre,{"data-slot":"switch",className:He("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:c.jsx(sre,{"data-slot":"switch-thumb",className:He("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function jE(){const{theme:t,toggleTheme:e}=DM(),[n,r]=b.useState(null),[s,o]=b.useState(null),[i,l]=b.useState(!0),[u,h]=b.useState(null),[f,m]=b.useState([]),[x,w]=b.useState(!1),[v,y]=b.useState([]),[k,C]=b.useState(!1),[_,j]=b.useState(!1),M=b.useRef(null),O=Wr(),[T,I]=b.useState({currentPassword:"",newPassword:"",confirmPassword:""});b.useEffect(()=>{F(),U(),A()},[]);const A=async()=>{try{C(!0);const z=await Ht.getSharedUsers();y(z||[])}catch(z){console.error("Error loading team members:",z)}finally{C(!1)}},F=async()=>{try{const z=localStorage.getItem("access_token");if(!z){O("/login");return}const D=z.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),G=decodeURIComponent(atob(D).split("").map(Q=>"%"+("00"+Q.charCodeAt(0).toString(16)).slice(-2)).join("")),N=JSON.parse(G),L=N.id||N._id||N.userId,V=await pa(L);r(V),o({...V})}catch(z){console.error("Error loading user:",z),de.error("Failed to load profile")}finally{l(!1)}},U=async()=>{try{w(!0);const z=new Date,R=new Date;R.setDate(R.getDate()-30);const[D,G,N]=await Promise.all([ns.getDailySessions(R.toISOString().split("T")[0],z.toISOString().split("T")[0]),ns.getStats("weekly"),ns.getRecentSessions(100)]);if(D.dailyStats.length===0&&N.length>0){const L={};N.filter(Q=>Q.type==="work"&&Q.endTime).forEach(Q=>{const ce=new Date(Q.startTime).toISOString().split("T")[0];L[ce]||(L[ce]=[]),L[ce].push(Q)});const V=Object.entries(L).map(([Q,ce])=>{const H=ce.reduce((K,q)=>K+(q.duration||0),0),B=ce.length>0?H/ce.length:0;return{date:Q,sessionCount:ce.length,totalMinutes:H,averageMinutes:Math.round(B*10)/10,sessions:ce.map(K=>({id:K._id,duration:K.duration,startTime:K.startTime,endTime:K.endTime}))}}).sort((Q,ce)=>new Date(ce.date).getTime()-new Date(Q.date).getTime());m(V)}else m(D.dailyStats);h(G)}catch(z){console.error("Error loading Pomodoro data:",z)}finally{w(!1)}},W=async()=>{if(n)try{const D=localStorage.getItem("access_token").split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),G=decodeURIComponent(atob(D).split("").map(V=>"%"+("00"+V.charCodeAt(0).toString(16)).slice(-2)).join("")),N=JSON.parse(G),L=N.id||N._id||N.userId;await fv(L,n),de.success("Profile updated successfully!"),o({...n}),window.dispatchEvent(new CustomEvent("userProfileUpdated"))}catch{de.error("Failed to update profile")}},Z=async z=>{const R=z.target.files?.[0];if(R){if(!R.type.match(/^image\/(jpg|jpeg|png|gif|webp)$/)){de.error("Please select a valid image file (JPG, PNG, GIF, or WEBP)");return}if(R.size>5*1024*1024){de.error("Image size must be less than 5MB");return}try{j(!0);const D=await WP.uploadImage(R);if(D.success===1&&D.file?.url){const G=en.replace("/api",""),N=D.file.url.startsWith("http")?D.file.url:`${G}${D.file.url}`,Q=localStorage.getItem("access_token").split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),ce=decodeURIComponent(atob(Q).split("").map(K=>"%"+("00"+K.charCodeAt(0).toString(16)).slice(-2)).join("")),H=JSON.parse(ce),B=H.id||H._id||H.userId;await fv(B,{avatar:N,picture:N}),n&&(r({...n,avatar:N,picture:N}),o({...n,avatar:N,picture:N})),de.success("Avatar updated successfully!"),window.dispatchEvent(new CustomEvent("userProfileUpdated"))}else throw new Error(D.message||"Upload failed")}catch(D){console.error("Error uploading avatar:",D),de.error(D?.message||"Failed to upload avatar")}finally{j(!1),M.current&&(M.current.value="")}}},oe=()=>{M.current?.click()},ee=async()=>{if(!T.currentPassword||!T.newPassword||!T.confirmPassword){de.error("Please fill in all password fields");return}if(T.newPassword!==T.confirmPassword){de.error("New passwords do not match");return}if(T.newPassword.length<8){de.error("Password must be at least 8 characters long");return}try{const D=localStorage.getItem("access_token").split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),G=decodeURIComponent(atob(D).split("").map(V=>"%"+("00"+V.charCodeAt(0).toString(16)).slice(-2)).join("")),N=JSON.parse(G),L=N.id||N._id||N.userId;await fv(L,{currentPassword:T.currentPassword,password:T.newPassword}),de.success("Password updated successfully!"),I({currentPassword:"",newPassword:"",confirmPassword:""})}catch(z){const R=z?.response?.data?.message||z?.message||"Failed to update password. Please check your current password.";de.error(R)}};if(i)return c.jsx("div",{className:"max-w-5xl mx-auto space-y-6 flex items-center justify-center min-h-[400px]",children:c.jsx(Rr,{className:"w-8 h-8 animate-spin text-primary"})});if(!n)return c.jsx("div",{className:"max-w-5xl mx-auto space-y-6",children:c.jsx(Pe,{className:"p-8 rounded-xl",children:c.jsx("p",{className:"text-center text-muted-foreground",children:"User not found"})})});const re=`${n.firstName} ${n.lastName}`,J=Il(n.firstName,n.lastName);return c.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[c.jsx(Pe,{className:"p-8 rounded-xl",children:c.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"file",ref:M,onChange:Z,accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",className:"hidden"}),c.jsxs("div",{className:"relative group",children:[c.jsxs(yr,{className:"w-24 h-24 cursor-pointer",onClick:oe,children:[c.jsx(hm,{src:(()=>{const z=n.avatar||n.picture;if(z)return z.startsWith("http")?z:`${en.replace("/api","")}${z}`})(),alt:re}),c.jsx(er,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-[32px]",children:J})]}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:oe,children:_?c.jsx(Rr,{className:"w-6 h-6 animate-spin text-white"}):c.jsx(I_,{className:"w-6 h-6 text-white"})})]})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-[28px] mb-2",children:re}),c.jsx("p",{className:"text-muted-foreground mb-4",children:n.email}),c.jsxs("div",{className:"flex flex-wrap gap-4 text-[14px] text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(iT,{className:"w-4 h-4 mr-2"}),n.email]}),c.jsx("div",{className:"flex items-center",children:c.jsx(St,{variant:"secondary",children:"Active"})})]})]})]})}),c.jsxs(pm,{defaultValue:"profile",className:"space-y-6",children:[c.jsxs(mm,{className:"rounded-xl bg-muted/50 p-1 w-full md:w-auto",children:[c.jsx(gr,{value:"profile",className:"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"Profile"}),c.jsx(gr,{value:"pomodoro",className:"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"Pomodoro History"}),c.jsx(gr,{value:"workspace",className:"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"Workspace"})]}),c.jsxs(js,{value:"profile",className:"space-y-6",children:[c.jsxs(Pe,{className:"p-6 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx(I_,{className:"w-6 h-6 text-blue-600"}),c.jsx("h2",{className:"text-[20px] font-semibold",children:"Profile Information"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"firstName",children:"First Name"}),c.jsx(Ke,{id:"firstName",value:n.firstName,onChange:z=>r({...n,firstName:z.target.value}),className:"mt-1.5 rounded-xl"})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"lastName",children:"Last Name"}),c.jsx(Ke,{id:"lastName",value:n.lastName,onChange:z=>r({...n,lastName:z.target.value}),className:"mt-1.5 rounded-xl"})]})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"email",children:"Email"}),c.jsx(Ke,{id:"email",type:"email",value:n.email,onChange:z=>r({...n,email:z.target.value}),className:"mt-1.5 rounded-xl"})]}),c.jsx("div",{className:"flex gap-2 pt-2",children:c.jsxs(pe,{onClick:W,className:"rounded-xl",children:[c.jsx(fy,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]}),c.jsxs(Pe,{className:"p-6 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx($_,{className:"w-6 h-6 text-blue-600"}),c.jsx("h2",{className:"text-[20px] font-semibold",children:"Change Password"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"currentPassword",children:"Current Password"}),c.jsx(Ke,{id:"currentPassword",type:"password",value:T.currentPassword,onChange:z=>I({...T,currentPassword:z.target.value}),className:"mt-1.5 rounded-xl"})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"newPassword",children:"New Password"}),c.jsx(Ke,{id:"newPassword",type:"password",value:T.newPassword,onChange:z=>I({...T,newPassword:z.target.value}),className:"mt-1.5 rounded-xl"})]}),c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"confirmNewPassword",children:"Confirm New Password"}),c.jsx(Ke,{id:"confirmNewPassword",type:"password",value:T.confirmPassword,onChange:z=>I({...T,confirmPassword:z.target.value}),className:"mt-1.5 rounded-xl"})]}),c.jsxs(pe,{onClick:ee,className:"rounded-xl",children:[c.jsx($_,{className:"w-4 h-4 mr-2"}),"Update Password"]})]})]})]}),c.jsx(js,{value:"pomodoro",className:"space-y-6",children:c.jsxs(Pe,{className:"p-6 rounded-xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:c.jsx(yd,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-[20px] font-semibold",children:"Pomodoro History"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Your productivity tracking"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[x&&c.jsx(Rr,{className:"w-4 h-4 animate-spin text-muted-foreground"}),c.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>{localStorage.setItem("pomodoro_timer_visible","true"),window.dispatchEvent(new Event("showPomodoroTimer"))},className:"rounded-xl",children:[c.jsx(yd,{className:"w-4 h-4 mr-2"}),"Open Timer"]})]})]}),x?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx(Rr,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):u&&f.length>0?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[c.jsx("p",{className:"text-[12px] text-muted-foreground mb-1",children:"Total Sessions"}),c.jsx("p",{className:"text-[24px] font-bold",children:u.totalSessions})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[c.jsx("p",{className:"text-[12px] text-muted-foreground mb-1",children:"Completed"}),c.jsx("p",{className:"text-[24px] font-bold",children:u.completedSessions})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[c.jsx("p",{className:"text-[12px] text-muted-foreground mb-1",children:"Total Work Time"}),c.jsx("p",{className:"text-[24px] font-bold",children:u.totalWorkTime}),c.jsx("p",{className:"text-[10px] text-muted-foreground",children:"minutes"})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[c.jsx("p",{className:"text-[12px] text-muted-foreground mb-1",children:"Avg Session"}),c.jsx("p",{className:"text-[24px] font-bold",children:u.averageSessionLength.toFixed(1)}),c.jsx("p",{className:"text-[10px] text-muted-foreground",children:"minutes"})]})]}),(()=>{const z=new Date().toISOString().split("T")[0],R=f.find(G=>G.date===z),D=R?.sessionCount||0;return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-[14px] font-medium",children:"Today's Sessions"}),c.jsxs("span",{className:"text-[12px] text-muted-foreground",children:[D," ",D===1?"session":"sessions"]})]}),c.jsx("div",{className:"flex gap-1",children:Array.from({length:8}).map((G,N)=>c.jsx("div",{className:`h-10 flex-1 rounded transition-colors ${N<D?"bg-blue-600 dark:bg-blue-500":"bg-muted"}`,title:N<D?`Session ${N+1}`:"Not completed"},N))}),R&&c.jsxs("div",{className:"flex items-center justify-between text-[12px] text-muted-foreground",children:[c.jsxs("span",{children:[R.totalMinutes," minutes today"]}),c.jsxs("span",{children:["Avg: ",R.averageMinutes.toFixed(1)," min/session"]})]})]})})(),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-[14px] font-medium",children:"Last 14 Days"}),c.jsxs("span",{className:"text-[12px] text-muted-foreground",children:[f.slice(0,14).reduce((z,R)=>z+R.sessionCount,0)," total sessions"]})]}),c.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[f.slice(0,14).map(z=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx("div",{className:"text-[12px] font-medium min-w-[100px]",children:new Date(z.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),c.jsxs("div",{className:"flex gap-1 flex-1 max-w-[200px]",children:[Array.from({length:Math.min(z.sessionCount,8)}).map((R,D)=>c.jsx("div",{className:"h-6 w-6 rounded bg-blue-600 dark:bg-blue-500",title:`Session ${D+1}`},D)),z.sessionCount>8&&c.jsxs("div",{className:"h-6 px-2 rounded bg-blue-400 dark:bg-blue-600 flex items-center justify-center text-[10px] text-white font-medium",children:["+",z.sessionCount-8]}),z.sessionCount===0&&c.jsx("span",{className:"text-[12px] text-muted-foreground italic",children:"No sessions"})]})]}),c.jsxs("div",{className:"flex items-center gap-4 text-[12px]",children:[c.jsxs("span",{className:"text-muted-foreground min-w-[60px] text-right",children:[z.totalMinutes," min"]}),c.jsxs("span",{className:"font-medium min-w-[70px] text-right",children:["Avg: ",z.averageMinutes.toFixed(1)," min"]})]})]},z.date)),f.length===0&&c.jsx("p",{className:"text-center text-[14px] text-muted-foreground py-4",children:"No Pomodoro sessions yet. Start your first session to see your history here!"})]})]}),u&&c.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Td,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),c.jsx("p",{className:"text-[14px] font-semibold",children:"Weekly Summary"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[12px] text-muted-foreground",children:"Productivity Score"}),c.jsxs("p",{className:"text-[20px] font-bold",children:[u.productivityScore,"/100"]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[12px] text-muted-foreground",children:"Avg Work Time/Day"}),c.jsxs("p",{className:"text-[20px] font-bold",children:[f.length>0?(f.reduce((z,R)=>z+R.totalMinutes,0)/Math.min(f.length,7)).toFixed(0):"0"," ","min"]})]})]})]})]}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(yd,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"No Pomodoro sessions yet"}),c.jsx("p",{className:"text-[12px] text-muted-foreground mt-1",children:"Start using the Pomodoro Timer to track your productivity"})]})]})}),c.jsxs(js,{value:"workspace",className:"space-y-6",children:[c.jsxs(Pe,{className:"p-6 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx(aT,{className:"w-6 h-6 text-blue-600"}),c.jsx("h2",{className:"text-[20px] font-semibold",children:"Appearance"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Dark Mode"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Toggle dark mode theme"})]}),c.jsx(ore,{checked:t==="dark",onCheckedChange:e})]})]}),c.jsxs(Pe,{className:"p-6 rounded-xl",children:[c.jsx("h2",{className:"text-[20px] font-semibold mb-6",children:"Team Members"}),k?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsx(Rr,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):v.length>0?c.jsx("div",{className:"space-y-3 mb-4",children:v.map(z=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-gray-50 dark:bg-gray-800",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(yr,{className:"w-10 h-10",children:c.jsx(er,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:Il(z.firstName,z.lastName)})}),c.jsxs("div",{children:[c.jsxs("p",{className:"font-medium",children:[z.firstName," ",z.lastName]}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:z.email})]})]}),c.jsx(St,{variant:"secondary",children:"Collaborator"})]},z._id))}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(ha,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"No team members yet"}),c.jsx("p",{className:"text-[12px] text-muted-foreground mt-1",children:"Share folders with others to build your team"})]})]})]})]})]})}const ire=async()=>{try{const t=await Le.get("/analytics/team");let e=0;try{e=(await Le.get("/folder/shared/count")).data.length||0}catch(x){console.warn("Could not fetch shared folders count",x)}let n=0;try{n=(await Le.get("/users")).data.length||0}catch(x){console.warn("Could not fetch users count",x)}let r=[];try{r=(await Le.get("/document")).data||[]}catch(x){console.warn("Could not fetch documents",x)}const o=(await Le.get("/analytics/versions")).data||{},i=t.data||{},l=r.length,u=new Date;u.setHours(0,0,0,0);const h=r.filter(x=>new Date(x.createdDate||x.createdAt)>=u).length,f=r.filter(x=>new Date(x.updatedDate||x.updatedAt)>=u).length,m=r.filter(x=>x.sharedWith&&x.sharedWith.length>0).length;return{activeEditors:i.activeEditors||0,totalComments:o.totalComments||i.totalComments||0,totalCoEdits:i.totalCoEdits||0,averageSessionDuration:i.averageSessionDuration||0,mostActiveUsers:i.mostActiveUsers||[],totalDocuments:l,sharedFolders:e,totalUsers:n,documentsCreatedToday:h,documentsEditedToday:f,activeCollaborations:m,totalVersions:o.totalVersions||0,versionsCreatedToday:o.versionsCreatedToday||0,versionsCreatedThisWeek:o.versionsCreatedThisWeek||0,mostActiveEditors:o.mostActiveEditors||[],versionTrends:o.versionTrends||[],commentsCreatedToday:o.commentsCreatedToday||0}}catch(t){return console.error("Error fetching real analytics:",t),t.code==="ERR_NETWORK"||t.message==="Network Error"?(console.warn("Backend server may not be running. Using sample data for demo."),{activeEditors:2,totalComments:5,totalCoEdits:3,averageSessionDuration:1.5,mostActiveUsers:[{userId:"1",userName:"John Doe",hoursActive:2.5},{userId:"2",userName:"Jane Smith",hoursActive:1.8}],totalDocuments:8,sharedFolders:3,totalUsers:4,documentsCreatedToday:2,documentsEditedToday:4,activeCollaborations:3,totalVersions:12,versionsCreatedToday:3,versionsCreatedThisWeek:8,mostActiveEditors:[{userId:"1",userName:"John Doe",versionsCreated:5},{userId:"2",userName:"Jane Smith",versionsCreated:4},{userId:"3",userName:"Bob Wilson",versionsCreated:3}],versionTrends:[{date:new Date(Date.now()-8640*60*1e3).toISOString().split("T")[0],versions:2,comments:1},{date:new Date(Date.now()-7200*60*1e3).toISOString().split("T")[0],versions:1,comments:0},{date:new Date(Date.now()-5760*60*1e3).toISOString().split("T")[0],versions:3,comments:2},{date:new Date(Date.now()-4320*60*1e3).toISOString().split("T")[0],versions:2,comments:1},{date:new Date(Date.now()-2880*60*1e3).toISOString().split("T")[0],versions:4,comments:3},{date:new Date(Date.now()-1440*60*1e3).toISOString().split("T")[0],versions:1,comments:1},{date:new Date().toISOString().split("T")[0],versions:3,comments:2}],commentsCreatedToday:2}):{activeEditors:0,totalComments:0,totalCoEdits:0,averageSessionDuration:0,mostActiveUsers:[],totalDocuments:0,sharedFolders:0,totalUsers:0,documentsCreatedToday:0,documentsEditedToday:0,activeCollaborations:0,totalVersions:0,versionsCreatedToday:0,versionsCreatedThisWeek:0,mostActiveEditors:[],versionTrends:[],commentsCreatedToday:0}}};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Nu(t){return t+.5|0}const li=(t,e,n)=>Math.max(Math.min(t,n),e);function gd(t){return li(Nu(t*2.55),0,255)}function mi(t){return li(Nu(t*255),0,255)}function co(t){return li(Nu(t/2.55)/100,0,1)}function TE(t){return li(Nu(t*100),0,100)}const Mr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},r0=[..."0123456789ABCDEF"],are=t=>r0[t&15],lre=t=>r0[(t&240)>>4]+r0[t&15],of=t=>(t&240)>>4===(t&15),cre=t=>of(t.r)&&of(t.g)&&of(t.b)&&of(t.a);function dre(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Mr[t[1]]*17,g:255&Mr[t[2]]*17,b:255&Mr[t[3]]*17,a:e===5?Mr[t[4]]*17:255}:(e===7||e===9)&&(n={r:Mr[t[1]]<<4|Mr[t[2]],g:Mr[t[3]]<<4|Mr[t[4]],b:Mr[t[5]]<<4|Mr[t[6]],a:e===9?Mr[t[7]]<<4|Mr[t[8]]:255})),n}const ure=(t,e)=>t<255?e(t):"";function hre(t){var e=cre(t)?are:lre;return t?"#"+e(t.r)+e(t.g)+e(t.b)+ure(t.a,e):void 0}const fre=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function YI(t,e,n){const r=e*Math.min(n,1-n),s=(o,i=(o+t/30)%12)=>n-r*Math.max(Math.min(i-3,9-i,1),-1);return[s(0),s(8),s(4)]}function pre(t,e,n){const r=(s,o=(s+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function mre(t,e,n){const r=YI(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function gre(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function ek(t){const n=t.r/255,r=t.g/255,s=t.b/255,o=Math.max(n,r,s),i=Math.min(n,r,s),l=(o+i)/2;let u,h,f;return o!==i&&(f=o-i,h=l>.5?f/(2-o-i):f/(o+i),u=gre(n,r,s,f,o),u=u*60+.5),[u|0,h||0,l]}function tk(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(mi)}function nk(t,e,n){return tk(YI,t,e,n)}function xre(t,e,n){return tk(mre,t,e,n)}function vre(t,e,n){return tk(pre,t,e,n)}function qI(t){return(t%360+360)%360}function yre(t){const e=fre.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?gd(+e[5]):mi(+e[5]));const s=qI(+e[2]),o=+e[3]/100,i=+e[4]/100;return e[1]==="hwb"?r=xre(s,o,i):e[1]==="hsv"?r=vre(s,o,i):r=nk(s,o,i),{r:r[0],g:r[1],b:r[2],a:n}}function bre(t,e){var n=ek(t);n[0]=qI(n[0]+e),n=nk(n),t.r=n[0],t.g=n[1],t.b=n[2]}function wre(t){if(!t)return;const e=ek(t),n=e[0],r=TE(e[1]),s=TE(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${co(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const ME={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},OE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function kre(){const t={},e=Object.keys(OE),n=Object.keys(ME);let r,s,o,i,l;for(r=0;r<e.length;r++){for(i=l=e[r],s=0;s<n.length;s++)o=n[s],l=l.replace(o,ME[o]);o=parseInt(OE[i],16),t[l]=[o>>16&255,o>>8&255,o&255]}return t}let af;function Sre(t){af||(af=kre(),af.transparent=[0,0,0,0]);const e=af[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Cre=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function _re(t){const e=Cre.exec(t);let n=255,r,s,o;if(e){if(e[7]!==r){const i=+e[7];n=e[8]?gd(i):li(i*255,0,255)}return r=+e[1],s=+e[3],o=+e[5],r=255&(e[2]?gd(r):li(r,0,255)),s=255&(e[4]?gd(s):li(s,0,255)),o=255&(e[6]?gd(o):li(o,0,255)),{r,g:s,b:o,a:n}}}function Ere(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${co(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Uv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,hl=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Nre(t,e,n){const r=hl(co(t.r)),s=hl(co(t.g)),o=hl(co(t.b));return{r:mi(Uv(r+n*(hl(co(e.r))-r))),g:mi(Uv(s+n*(hl(co(e.g))-s))),b:mi(Uv(o+n*(hl(co(e.b))-o))),a:t.a+n*(e.a-t.a)}}function lf(t,e,n){if(t){let r=ek(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=nk(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function KI(t,e){return t&&Object.assign(e||{},t)}function PE(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=mi(t[3]))):(e=KI(t,{r:0,g:0,b:0,a:1}),e.a=mi(e.a)),e}function jre(t){return t.charAt(0)==="r"?_re(t):yre(t)}class Kd{constructor(e){if(e instanceof Kd)return e;const n=typeof e;let r;n==="object"?r=PE(e):n==="string"&&(r=dre(e)||Sre(e)||jre(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=KI(this._rgb);return e&&(e.a=co(e.a)),e}set rgb(e){this._rgb=PE(e)}rgbString(){return this._valid?Ere(this._rgb):void 0}hexString(){return this._valid?hre(this._rgb):void 0}hslString(){return this._valid?wre(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let o;const i=n===o?.5:n,l=2*i-1,u=r.a-s.a,h=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;o=1-h,r.r=255&h*r.r+o*s.r+.5,r.g=255&h*r.g+o*s.g+.5,r.b=255&h*r.b+o*s.b+.5,r.a=i*r.a+(1-i)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Nre(this._rgb,e._rgb,n)),this}clone(){return new Kd(this.rgb)}alpha(e){return this._rgb.a=mi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Nu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return lf(this._rgb,2,e),this}darken(e){return lf(this._rgb,2,-e),this}saturate(e){return lf(this._rgb,1,e),this}desaturate(e){return lf(this._rgb,1,-e),this}rotate(e){return bre(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ro(){}const Tre=(()=>{let t=0;return()=>t++})();function dt(t){return t==null}function Jt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ot(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function zr(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ks(t,e){return zr(t)?t:e}function qe(t,e){return typeof t>"u"?e:t}const Mre=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,XI=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ct(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ht(t,e,n,r){let s,o,i;if(Jt(t))for(o=t.length,s=0;s<o;s++)e.call(n,t[s],s);else if(ot(t))for(i=Object.keys(t),o=i.length,s=0;s<o;s++)e.call(n,t[i[s]],i[s])}function Ip(t,e){let n,r,s,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],o=e[n],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Dp(t){if(Jt(t))return t.map(Dp);if(ot(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Dp(t[n[s]]);return e}return t}function GI(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Ore(t,e,n,r){if(!GI(t))return;const s=e[t],o=n[t];ot(s)&&ot(o)?Xd(s,o,r):e[t]=Dp(o)}function Xd(t,e,n){const r=Jt(e)?e:[e],s=r.length;if(!ot(t))return t;n=n||{};const o=n.merger||Ore;let i;for(let l=0;l<s;++l){if(i=r[l],!ot(i))continue;const u=Object.keys(i);for(let h=0,f=u.length;h<f;++h)o(u[h],t,i,n)}return t}function Sd(t,e){return Xd(t,e,{merger:Pre})}function Pre(t,e,n){if(!GI(t))return;const r=e[t],s=n[t];ot(r)&&ot(s)?Sd(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Dp(s))}const RE={"":t=>t,x:t=>t.x,y:t=>t.y};function Rre(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Are(t){const e=Rre(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Sa(t,e){return(RE[e]||(RE[e]=Are(e)))(t)}function rk(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Gd=t=>typeof t<"u",_i=t=>typeof t=="function",AE=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Ire(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const pt=Math.PI,At=2*pt,Dre=At+pt,Lp=Number.POSITIVE_INFINITY,Lre=pt/180,Zt=pt/2,qi=pt/4,IE=pt*2/3,JI=Math.log10,Ds=Math.sign;function Cd(t,e,n){return Math.abs(t-e)<n}function DE(t){const e=Math.round(t);t=Cd(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(JI(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Bre(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,o)=>s-o).pop(),e}function Fre(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Jd(t){return!Fre(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function $re(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function zre(t,e,n){let r,s,o;for(r=0,s=t.length;r<s;r++)o=t[r][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function ho(t){return t*(pt/180)}function Ure(t){return t*(180/pt)}function LE(t){if(!zr(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function QI(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*pt&&(o+=At),{angle:o,distance:s}}function s0(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Hre(t,e){return(t-e+Dre)%At-pt}function ss(t){return(t%At+At)%At}function Qd(t,e,n,r){const s=ss(t),o=ss(e),i=ss(n),l=ss(o-s),u=ss(i-s),h=ss(s-o),f=ss(s-i);return s===o||s===i||r&&o===i||l>u&&h<f}function jn(t,e,n){return Math.max(e,Math.min(n,t))}function Wre(t){return jn(t,-32768,32767)}function ci(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function sk(t,e,n){n=n||(i=>t[i]<e);let r=t.length-1,s=0,o;for(;r-s>1;)o=s+r>>1,n(o)?s=o:r=o;return{lo:s,hi:r}}const ta=(t,e,n,r)=>sk(t,n,r?s=>{const o=t[s][e];return o<n||o===n&&t[s+1][e]===n}:s=>t[s][e]<n),Vre=(t,e,n)=>sk(t,n,r=>t[r][e]>=n);function Yre(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const ZI=["push","pop","shift","splice","unshift"];function qre(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ZI.forEach(n=>{const r="_onData"+rk(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...o){const i=s.apply(this,o);return t._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...o)}),i}})})}function BE(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(ZI.forEach(o=>{delete t[o]}),delete t._chartjs)}function eD(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const tD=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function nD(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,tD.call(window,()=>{r=!1,t.apply(e,n)}))}}function Kre(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const ok=t=>t==="start"?"left":t==="end"?"right":"center",_n=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Xre=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function Gre(t,e,n){const r=e.length;let s=0,o=r;if(t._sorted){const{iScale:i,vScale:l,_parsed:u}=t,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,f=i.axis,{min:m,max:x,minDefined:w,maxDefined:v}=i.getUserBounds();if(w){if(s=Math.min(ta(u,f,m).lo,n?r:ta(e,f,i.getPixelForValue(m)).lo),h){const y=u.slice(0,s+1).reverse().findIndex(k=>!dt(k[l.axis]));s-=Math.max(0,y)}s=jn(s,0,r-1)}if(v){let y=Math.max(ta(u,i.axis,x,!0).hi+1,n?0:ta(e,f,i.getPixelForValue(x),!0).hi+1);if(h){const k=u.slice(y-1).findIndex(C=>!dt(C[l.axis]));y+=Math.max(0,k)}o=jn(y,s,r)-s}else o=r-s}return{start:s,count:o}}function Jre(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),o}const cf=t=>t===0||t===1,FE=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*At/n)),$E=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*At/n)+1,_d={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Zt)+1,easeOutSine:t=>Math.sin(t*Zt),easeInOutSine:t=>-.5*(Math.cos(pt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>cf(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>cf(t)?t:FE(t,.075,.3),easeOutElastic:t=>cf(t)?t:$E(t,.075,.3),easeInOutElastic(t){return cf(t)?t:t<.5?.5*FE(t*2,.1125,.45):.5+.5*$E(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-_d.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?_d.easeInBounce(t*2)*.5:_d.easeOutBounce(t*2-1)*.5+.5};function ik(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function zE(t){return ik(t)?t:new Kd(t)}function Hv(t){return ik(t)?t:new Kd(t).saturate(.5).darken(.1).hexString()}const Qre=["x","y","borderWidth","radius","tension"],Zre=["color","borderColor","backgroundColor"];function ese(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Zre},numbers:{type:"number",properties:Qre}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function tse(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const UE=new Map;function nse(t,e){e=e||{};const n=t+JSON.stringify(e);let r=UE.get(n);return r||(r=new Intl.NumberFormat(t,e),UE.set(n,r)),r}function ak(t,e,n){return nse(e,n).format(t)}const rse={values(t){return Jt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,o=t;if(n.length>1){const h=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(h<1e-4||h>1e15)&&(s="scientific"),o=sse(t,n)}const i=JI(Math.abs(o)),l=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),u={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),ak(t,r,u)}};function sse(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var rD={formatters:rse};function ose(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ca=Object.create(null),o0=Object.create(null);function Ed(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const o=n[r];t=t[o]||(t[o]=Object.create(null))}return t}function Wv(t,e,n){return typeof e=="string"?Xd(Ed(t,e),n):Xd(Ed(t,""),e)}class ise{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Hv(s.backgroundColor),this.hoverBorderColor=(r,s)=>Hv(s.borderColor),this.hoverColor=(r,s)=>Hv(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Wv(this,e,n)}get(e){return Ed(this,e)}describe(e,n){return Wv(o0,e,n)}override(e,n){return Wv(Ca,e,n)}route(e,n,r,s){const o=Ed(this,e),i=Ed(this,r),l="_"+n;Object.defineProperties(o,{[l]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[l],h=i[s];return ot(u)?Object.assign({},h,u):qe(u,h)},set(u){this[l]=u}}})}apply(e){e.forEach(n=>n(this))}}var $t=new ise({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ese,tse,ose]);function ase(t){return!t||dt(t.size)||dt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function HE(t,e,n,r,s){let o=e[s];return o||(o=e[s]=t.measureText(s).width,n.push(s)),o>r&&(r=o),r}function Ki(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function WE(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function i0(t,e,n,r){sD(t,e,n,r,null)}function sD(t,e,n,r,s){let o,i,l,u,h,f,m,x;const w=e.pointStyle,v=e.rotation,y=e.radius;let k=(v||0)*Lre;if(w&&typeof w=="object"&&(o=w.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(k),t.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),w){default:s?t.ellipse(n,r,s/2,y,0,0,At):t.arc(n,r,y,0,At),t.closePath();break;case"triangle":f=s?s/2:y,t.moveTo(n+Math.sin(k)*f,r-Math.cos(k)*y),k+=IE,t.lineTo(n+Math.sin(k)*f,r-Math.cos(k)*y),k+=IE,t.lineTo(n+Math.sin(k)*f,r-Math.cos(k)*y),t.closePath();break;case"rectRounded":h=y*.516,u=y-h,i=Math.cos(k+qi)*u,m=Math.cos(k+qi)*(s?s/2-h:u),l=Math.sin(k+qi)*u,x=Math.sin(k+qi)*(s?s/2-h:u),t.arc(n-m,r-l,h,k-pt,k-Zt),t.arc(n+x,r-i,h,k-Zt,k),t.arc(n+m,r+l,h,k,k+Zt),t.arc(n-x,r+i,h,k+Zt,k+pt),t.closePath();break;case"rect":if(!v){u=Math.SQRT1_2*y,f=s?s/2:u,t.rect(n-f,r-u,2*f,2*u);break}k+=qi;case"rectRot":m=Math.cos(k)*(s?s/2:y),i=Math.cos(k)*y,l=Math.sin(k)*y,x=Math.sin(k)*(s?s/2:y),t.moveTo(n-m,r-l),t.lineTo(n+x,r-i),t.lineTo(n+m,r+l),t.lineTo(n-x,r+i),t.closePath();break;case"crossRot":k+=qi;case"cross":m=Math.cos(k)*(s?s/2:y),i=Math.cos(k)*y,l=Math.sin(k)*y,x=Math.sin(k)*(s?s/2:y),t.moveTo(n-m,r-l),t.lineTo(n+m,r+l),t.moveTo(n+x,r-i),t.lineTo(n-x,r+i);break;case"star":m=Math.cos(k)*(s?s/2:y),i=Math.cos(k)*y,l=Math.sin(k)*y,x=Math.sin(k)*(s?s/2:y),t.moveTo(n-m,r-l),t.lineTo(n+m,r+l),t.moveTo(n+x,r-i),t.lineTo(n-x,r+i),k+=qi,m=Math.cos(k)*(s?s/2:y),i=Math.cos(k)*y,l=Math.sin(k)*y,x=Math.sin(k)*(s?s/2:y),t.moveTo(n-m,r-l),t.lineTo(n+m,r+l),t.moveTo(n+x,r-i),t.lineTo(n-x,r+i);break;case"line":i=s?s/2:Math.cos(k)*y,l=Math.sin(k)*y,t.moveTo(n-i,r-l),t.lineTo(n+i,r+l);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(k)*(s?s/2:y),r+Math.sin(k)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Zd(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function lk(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ck(t){t.restore()}function lse(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const o=(e.x+n.x)/2;t.lineTo(o,e.y),t.lineTo(o,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function cse(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function dse(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),dt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function use(t,e,n,r,s){if(s.strikethrough||s.underline){const o=t.measureText(r),i=e-o.actualBoundingBoxLeft,l=e+o.actualBoundingBoxRight,u=n-o.actualBoundingBoxAscent,h=n+o.actualBoundingBoxDescent,f=s.strikethrough?(u+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(i,f),t.lineTo(l,f),t.stroke()}}function hse(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function eu(t,e,n,r,s,o={}){const i=Jt(e)?e:[e],l=o.strokeWidth>0&&o.strokeColor!=="";let u,h;for(t.save(),t.font=s.string,dse(t,o),u=0;u<i.length;++u)h=i[u],o.backdrop&&hse(t,o.backdrop),l&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),dt(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(h,n,r,o.maxWidth)),t.fillText(h,n,r,o.maxWidth),use(t,n,r,h,o),r+=Number(s.lineHeight);t.restore()}function Bp(t,e){const{x:n,y:r,w:s,h:o,radius:i}=e;t.arc(n+i.topLeft,r+i.topLeft,i.topLeft,1.5*pt,pt,!0),t.lineTo(n,r+o-i.bottomLeft),t.arc(n+i.bottomLeft,r+o-i.bottomLeft,i.bottomLeft,pt,Zt,!0),t.lineTo(n+s-i.bottomRight,r+o),t.arc(n+s-i.bottomRight,r+o-i.bottomRight,i.bottomRight,Zt,0,!0),t.lineTo(n+s,r+i.topRight),t.arc(n+s-i.topRight,r+i.topRight,i.topRight,0,-Zt,!0),t.lineTo(n+i.topLeft,r)}const fse=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,pse=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mse(t,e){const n=(""+t).match(fse);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const gse=t=>+t||0;function dk(t,e){const n={},r=ot(e),s=r?Object.keys(e):e,o=ot(t)?r?i=>qe(t[i],t[e[i]]):i=>t[i]:()=>t;for(const i of s)n[i]=gse(o(i));return n}function oD(t){return dk(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Tl(t){return dk(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ur(t){const e=oD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Tn(t,e){t=t||{},e=e||$t.font;let n=qe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=qe(t.style,e.style);r&&!(""+r).match(pse)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:qe(t.family,e.family),lineHeight:mse(qe(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:qe(t.weight,e.weight),string:""};return s.string=ase(s),s}function df(t,e,n,r){let s,o,i;for(s=0,o=t.length;s<o;++s)if(i=t[s],i!==void 0&&i!==void 0)return i}function xse(t,e,n){const{min:r,max:s}=t,o=XI(e,(s-r)/2),i=(l,u)=>n&&l===0?0:l+u;return{min:i(r,-Math.abs(o)),max:i(s,o)}}function Aa(t,e){return Object.assign(Object.create(t),e)}function uk(t,e=[""],n,r,s=()=>t[0]){const o=n||t;typeof r>"u"&&(r=cD("_fallback",t));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:r,_getTarget:s,override:l=>uk([l,...t],e,o,r)};return new Proxy(i,{deleteProperty(l,u){return delete l[u],delete l._keys,delete t[0][u],!0},get(l,u){return aD(l,u,()=>_se(u,e,t,l))},getOwnPropertyDescriptor(l,u){return Reflect.getOwnPropertyDescriptor(l._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,u){return YE(l).includes(u)},ownKeys(l){return YE(l)},set(l,u,h){const f=l._storage||(l._storage=s());return l[u]=f[u]=h,delete l._keys,!0}})}function Vl(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:iD(t,r),setContext:o=>Vl(t,o,n,r),override:o=>Vl(t.override(o),e,n,r)};return new Proxy(s,{deleteProperty(o,i){return delete o[i],delete t[i],!0},get(o,i,l){return aD(o,i,()=>yse(o,i,l))},getOwnPropertyDescriptor(o,i){return o._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,i){return Reflect.has(t,i)},ownKeys(){return Reflect.ownKeys(t)},set(o,i,l){return t[i]=l,delete o[i],!0}})}function iD(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:_i(n)?n:()=>n,isIndexable:_i(r)?r:()=>r}}const vse=(t,e)=>t?t+rk(e):e,hk=(t,e)=>ot(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function aD(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function yse(t,e,n){const{_proxy:r,_context:s,_subProxy:o,_descriptors:i}=t;let l=r[e];return _i(l)&&i.isScriptable(e)&&(l=bse(e,l,t,n)),Jt(l)&&l.length&&(l=wse(e,l,t,i.isIndexable)),hk(e,l)&&(l=Vl(l,s,o&&o[e],i)),l}function bse(t,e,n,r){const{_proxy:s,_context:o,_subProxy:i,_stack:l}=n;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let u=e(o,i||r);return l.delete(t),hk(t,u)&&(u=fk(s._scopes,s,t,u)),u}function wse(t,e,n,r){const{_proxy:s,_context:o,_subProxy:i,_descriptors:l}=n;if(typeof o.index<"u"&&r(t))return e[o.index%e.length];if(ot(e[0])){const u=e,h=s._scopes.filter(f=>f!==u);e=[];for(const f of u){const m=fk(h,s,t,f);e.push(Vl(m,o,i&&i[t],l))}}return e}function lD(t,e,n){return _i(t)?t(e,n):t}const kse=(t,e)=>t===!0?e:typeof t=="string"?Sa(e,t):void 0;function Sse(t,e,n,r,s){for(const o of e){const i=kse(n,o);if(i){t.add(i);const l=lD(i._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(i===!1&&typeof r<"u"&&n!==r)return null}return!1}function fk(t,e,n,r){const s=e._rootScopes,o=lD(e._fallback,n,r),i=[...t,...s],l=new Set;l.add(r);let u=VE(l,i,n,o||n,r);return u===null||typeof o<"u"&&o!==n&&(u=VE(l,i,o,u,r),u===null)?!1:uk(Array.from(l),[""],s,o,()=>Cse(e,n,r))}function VE(t,e,n,r,s){for(;n;)n=Sse(t,e,n,r,s);return n}function Cse(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Jt(s)&&ot(n)?n:s||{}}function _se(t,e,n,r){let s;for(const o of e)if(s=cD(vse(o,t),n),typeof s<"u")return hk(t,s)?fk(n,r,t,s):s}function cD(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function YE(t){let e=t._keys;return e||(e=t._keys=Ese(t._scopes)),e}function Ese(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const Nse=Number.EPSILON||1e-14,Yl=(t,e)=>e<t.length&&!t[e].skip&&t[e],dD=t=>t==="x"?"y":"x";function jse(t,e,n,r){const s=t.skip?e:t,o=e,i=n.skip?e:n,l=s0(o,s),u=s0(i,o);let h=l/(l+u),f=u/(l+u);h=isNaN(h)?0:h,f=isNaN(f)?0:f;const m=r*h,x=r*f;return{previous:{x:o.x-m*(i.x-s.x),y:o.y-m*(i.y-s.y)},next:{x:o.x+x*(i.x-s.x),y:o.y+x*(i.y-s.y)}}}function Tse(t,e,n){const r=t.length;let s,o,i,l,u,h=Yl(t,0);for(let f=0;f<r-1;++f)if(u=h,h=Yl(t,f+1),!(!u||!h)){if(Cd(e[f],0,Nse)){n[f]=n[f+1]=0;continue}s=n[f]/e[f],o=n[f+1]/e[f],l=Math.pow(s,2)+Math.pow(o,2),!(l<=9)&&(i=3/Math.sqrt(l),n[f]=s*i*e[f],n[f+1]=o*i*e[f])}}function Mse(t,e,n="x"){const r=dD(n),s=t.length;let o,i,l,u=Yl(t,0);for(let h=0;h<s;++h){if(i=l,l=u,u=Yl(t,h+1),!l)continue;const f=l[n],m=l[r];i&&(o=(f-i[n])/3,l[`cp1${n}`]=f-o,l[`cp1${r}`]=m-o*e[h]),u&&(o=(u[n]-f)/3,l[`cp2${n}`]=f+o,l[`cp2${r}`]=m+o*e[h])}}function Ose(t,e="x"){const n=dD(e),r=t.length,s=Array(r).fill(0),o=Array(r);let i,l,u,h=Yl(t,0);for(i=0;i<r;++i)if(l=u,u=h,h=Yl(t,i+1),!!u){if(h){const f=h[e]-u[e];s[i]=f!==0?(h[n]-u[n])/f:0}o[i]=l?h?Ds(s[i-1])!==Ds(s[i])?0:(s[i-1]+s[i])/2:s[i-1]:s[i]}Tse(t,s,o),Mse(t,o,e)}function uf(t,e,n){return Math.max(Math.min(t,n),e)}function Pse(t,e){let n,r,s,o,i,l=Zd(t[0],e);for(n=0,r=t.length;n<r;++n)i=o,o=l,l=n<r-1&&Zd(t[n+1],e),o&&(s=t[n],i&&(s.cp1x=uf(s.cp1x,e.left,e.right),s.cp1y=uf(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=uf(s.cp2x,e.left,e.right),s.cp2y=uf(s.cp2y,e.top,e.bottom)))}function Rse(t,e,n,r,s){let o,i,l,u;if(e.spanGaps&&(t=t.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")Ose(t,s);else{let h=r?t[t.length-1]:t[0];for(o=0,i=t.length;o<i;++o)l=t[o],u=jse(h,l,t[Math.min(o+1,i-(r?0:1))%i],e.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,h=l}e.capBezierPoints&&Pse(t,n)}function pk(){return typeof window<"u"&&typeof document<"u"}function mk(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Fp(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const tg=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Ase(t,e){return tg(t).getPropertyValue(e)}const Ise=["top","right","bottom","left"];function da(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const o=Ise[s];r[o]=parseFloat(t[e+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Dse=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Lse(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:o}=r;let i=!1,l,u;if(Dse(s,o,t.target))l=s,u=o;else{const h=e.getBoundingClientRect();l=r.clientX-h.left,u=r.clientY-h.top,i=!0}return{x:l,y:u,box:i}}function Ji(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=tg(n),o=s.boxSizing==="border-box",i=da(s,"padding"),l=da(s,"border","width"),{x:u,y:h,box:f}=Lse(t,n),m=i.left+(f&&l.left),x=i.top+(f&&l.top);let{width:w,height:v}=e;return o&&(w-=i.width+l.width,v-=i.height+l.height),{x:Math.round((u-m)/w*n.width/r),y:Math.round((h-x)/v*n.height/r)}}function Bse(t,e,n){let r,s;if(e===void 0||n===void 0){const o=t&&mk(t);if(!o)e=t.clientWidth,n=t.clientHeight;else{const i=o.getBoundingClientRect(),l=tg(o),u=da(l,"border","width"),h=da(l,"padding");e=i.width-h.width-u.width,n=i.height-h.height-u.height,r=Fp(l.maxWidth,o,"clientWidth"),s=Fp(l.maxHeight,o,"clientHeight")}}return{width:e,height:n,maxWidth:r||Lp,maxHeight:s||Lp}}const di=t=>Math.round(t*10)/10;function Fse(t,e,n,r){const s=tg(t),o=da(s,"margin"),i=Fp(s.maxWidth,t,"clientWidth")||Lp,l=Fp(s.maxHeight,t,"clientHeight")||Lp,u=Bse(t,e,n);let{width:h,height:f}=u;if(s.boxSizing==="content-box"){const x=da(s,"border","width"),w=da(s,"padding");h-=w.width+x.width,f-=w.height+x.height}return h=Math.max(0,h-o.width),f=Math.max(0,r?h/r:f-o.height),h=di(Math.min(h,i,u.maxWidth)),f=di(Math.min(f,l,u.maxHeight)),h&&!f&&(f=di(h/2)),(e!==void 0||n!==void 0)&&r&&u.height&&f>u.height&&(f=u.height,h=di(Math.floor(f*r))),{width:h,height:f}}function qE(t,e,n){const r=e||1,s=di(t.height*r),o=di(t.width*r);t.height=di(t.height),t.width=di(t.width);const i=t.canvas;return i.style&&(n||!i.style.height&&!i.style.width)&&(i.style.height=`${t.height}px`,i.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||i.height!==s||i.width!==o?(t.currentDevicePixelRatio=r,i.height=s,i.width=o,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const $se=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};pk()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function KE(t,e){const n=Ase(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Qi(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function zse(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Use(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},i=Qi(t,s,n),l=Qi(s,o,n),u=Qi(o,e,n),h=Qi(i,l,n),f=Qi(l,u,n);return Qi(h,f,n)}const Hse=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},Wse=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ml(t,e,n){return t?Hse(e,n):Wse()}function uD(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function hD(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function fD(t){return t==="angle"?{between:Qd,compare:Hre,normalize:ss}:{between:ci,compare:(e,n)=>e-n,normalize:e=>e}}function XE({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function Vse(t,e,n){const{property:r,start:s,end:o}=n,{between:i,normalize:l}=fD(r),u=e.length;let{start:h,end:f,loop:m}=t,x,w;if(m){for(h+=u,f+=u,x=0,w=u;x<w&&i(l(e[h%u][r]),s,o);++x)h--,f--;h%=u,f%=u}return f<h&&(f+=u),{start:h,end:f,loop:m,style:t.style}}function Yse(t,e,n){if(!n)return[t];const{property:r,start:s,end:o}=n,i=e.length,{compare:l,between:u,normalize:h}=fD(r),{start:f,end:m,loop:x,style:w}=Vse(t,e,n),v=[];let y=!1,k=null,C,_,j;const M=()=>u(s,j,C)&&l(s,j)!==0,O=()=>l(o,C)===0||u(o,j,C),T=()=>y||M(),I=()=>!y||O();for(let A=f,F=f;A<=m;++A)_=e[A%i],!_.skip&&(C=h(_[r]),C!==j&&(y=u(C,s,o),k===null&&T()&&(k=l(C,s)===0?A:F),k!==null&&I()&&(v.push(XE({start:k,end:A,loop:x,count:i,style:w})),k=null),F=A,j=C));return k!==null&&v.push(XE({start:k,end:m,loop:x,count:i,style:w})),v}function qse(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const o=Yse(r[s],t.points,e);o.length&&n.push(...o)}return n}function Kse(t,e,n,r){let s=0,o=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(o+=s);o>s&&t[o%e].skip;)o--;return o%=e,{start:s,end:o}}function Xse(t,e,n,r){const s=t.length,o=[];let i=e,l=t[e],u;for(u=e+1;u<=n;++u){const h=t[u%s];h.skip||h.stop?l.skip||(r=!1,o.push({start:e%s,end:(u-1)%s,loop:r}),e=i=h.stop?u:null):(i=u,l.skip&&(e=u)),l=h}return i!==null&&o.push({start:e%s,end:i%s,loop:r}),o}function Gse(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const o=!!t._loop,{start:i,end:l}=Kse(n,s,o,r);if(r===!0)return GE(t,[{start:i,end:l,loop:o}],n,e);const u=l<i?l+s:l,h=!!t._fullLoop&&i===0&&l===s-1;return GE(t,Xse(n,i,u,h),n,e)}function GE(t,e,n,r){return!r||!r.setContext||!n?e:Jse(t,e,n,r)}function Jse(t,e,n,r){const s=t._chart.getContext(),o=JE(t.options),{_datasetIndex:i,options:{spanGaps:l}}=t,u=n.length,h=[];let f=o,m=e[0].start,x=m;function w(v,y,k,C){const _=l?-1:1;if(v!==y){for(v+=u;n[v%u].skip;)v-=_;for(;n[y%u].skip;)y+=_;v%u!==y%u&&(h.push({start:v%u,end:y%u,loop:k,style:C}),f=C,m=y%u)}}for(const v of e){m=l?m:v.start;let y=n[m%u],k;for(x=m+1;x<=v.end;x++){const C=n[x%u];k=JE(r.setContext(Aa(s,{type:"segment",p0:y,p1:C,p0DataIndex:(x-1)%u,p1DataIndex:x%u,datasetIndex:i}))),Qse(k,f)&&w(m,x-1,v.loop,f),y=C,f=k}m<x-1&&w(m,x-1,v.loop,f)}return h}function JE(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Qse(t,e){if(!e)return!1;const n=[],r=function(s,o){return ik(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function hf(t,e,n){return t.options.clip?t[n]:e[n]}function Zse(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:hf(n,e,"left"),right:hf(n,e,"right"),top:hf(r,e,"top"),bottom:hf(r,e,"bottom")}:e}function eoe(t,e){const n=e._clip;if(n.disabled)return!1;const r=Zse(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class toe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const o=n.listeners[s],i=n.duration;o.forEach(l=>l({chart:e,initial:n.initial,numSteps:i,currentStep:Math.min(r-n.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=tD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const o=r.items;let i=o.length-1,l=!1,u;for(;i>=0;--i)u=o[i],u._active?(u._total>r.duration&&(r.duration=u._total),u.tick(e),l=!0):(o[i]=o[o.length-1],o.pop());l&&(s.draw(),this._notify(s,r,e,"progress")),o.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=o.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var oo=new toe;const QE="transparent",noe={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=zE(t||QE),s=r.valid&&zE(e||QE);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class roe{constructor(e,n,r,s){const o=n[r];s=df([e.to,s,o,e.from]);const i=df([e.from,o,s]);this._active=!0,this._fn=e.fn||noe[e.type||typeof i],this._easing=_d[e.easing]||_d.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=i,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],o=r-this._start,i=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=df([e.to,n,s,e.from]),this._from=df([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,o=this._from,i=this._loop,l=this._to;let u;if(this._active=o!==l&&(i||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=o;return}u=n/r%2,u=i&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[s]=this._fn(o,l,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class pD{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ot(e))return;const n=Object.keys($t.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const o=e[s];if(!ot(o))return;const i={};for(const l of n)i[l]=o[l];(Jt(o.properties)&&o.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,i)})})}_animateOptions(e,n){const r=n.options,s=ooe(e,r);if(!s)return[];const o=this._createAnimations(s,r);return r.$shared&&soe(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,n){const r=this._properties,s=[],o=e.$animations||(e.$animations={}),i=Object.keys(n),l=Date.now();let u;for(u=i.length-1;u>=0;--u){const h=i[u];if(h.charAt(0)==="$")continue;if(h==="options"){s.push(...this._animateOptions(e,n));continue}const f=n[h];let m=o[h];const x=r.get(h);if(m)if(x&&m.active()){m.update(x,f,l);continue}else m.cancel();if(!x||!x.duration){e[h]=f;continue}o[h]=m=new roe(x,e,h,f),s.push(m)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return oo.add(this._chart,r),!0}}function soe(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const o=t[r[s]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function ooe(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function ZE(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,o=n.max===void 0?e:0;return{start:r?o:s,end:r?s:o}}function ioe(t,e,n){if(n===!1)return!1;const r=ZE(t,n),s=ZE(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function aoe(t){let e,n,r,s;return ot(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function mD(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,o;for(s=0,o=r.length;s<o;++s)n.push(r[s].index);return n}function eN(t,e,n,r={}){const s=t.keys,o=r.mode==="single";let i,l,u,h;if(e===null)return;let f=!1;for(i=0,l=s.length;i<l;++i){if(u=+s[i],u===n){if(f=!0,r.all)continue;break}h=t.values[u],zr(h)&&(o||e===0||Ds(e)===Ds(h))&&(e+=h)}return!f&&!r.all?0:e}function loe(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",i=Object.keys(t),l=new Array(i.length);let u,h,f;for(u=0,h=i.length;u<h;++u)f=i[u],l[u]={[s]:f,[o]:t[f]};return l}function Vv(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function coe(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function doe(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function uoe(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function tN(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const o=t[s.index];if(n&&o>0||!n&&o<0)return s.index}return null}function nN(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:o,vScale:i,index:l}=r,u=o.axis,h=i.axis,f=coe(o,i,r),m=e.length;let x;for(let w=0;w<m;++w){const v=e[w],{[u]:y,[h]:k}=v,C=v._stacks||(v._stacks={});x=C[h]=uoe(s,f,y),x[l]=k,x._top=tN(x,i,!0,r.type),x._bottom=tN(x,i,!1,r.type);const _=x._visualValues||(x._visualValues={});_[l]=k}}function Yv(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function hoe(t,e){return Aa(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function foe(t,e,n){return Aa(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function od(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const o=s._stacks;if(!o||o[r]===void 0||o[r][n]===void 0)return;delete o[r][n],o[r]._visualValues!==void 0&&o[r]._visualValues[n]!==void 0&&delete o[r]._visualValues[n]}}}const qv=t=>t==="reset"||t==="none",rN=(t,e)=>e?t:Object.assign({},t),poe=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:mD(n,!0),values:null};class ng{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Vv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&od(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(m,x,w,v)=>m==="x"?x:m==="r"?v:w,o=n.xAxisID=qe(r.xAxisID,Yv(e,"x")),i=n.yAxisID=qe(r.yAxisID,Yv(e,"y")),l=n.rAxisID=qe(r.rAxisID,Yv(e,"r")),u=n.indexAxis,h=n.iAxisID=s(u,o,i,l),f=n.vAxisID=s(u,i,o,l);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(i),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(h),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&BE(this._data,this),e._stacked&&od(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ot(n)){const s=this._cachedMeta;this._data=loe(n,s)}else if(r!==n){if(r){BE(r,this);const s=this._cachedMeta;od(s),s._parsed=[]}n&&Object.isExtensible(n)&&qre(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=n._stacked;n._stacked=Vv(n.vScale,n),n.stack!==r.stack&&(s=!0,od(n),n.stack=r.stack),this._resyncElements(e),(s||o!==n._stacked)&&(nN(this,n._parsed),n._stacked=Vv(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:i}=r,l=o.axis;let u=e===0&&n===s.length?!0:r._sorted,h=e>0&&r._parsed[e-1],f,m,x;if(this._parsing===!1)r._parsed=s,r._sorted=!0,x=s;else{Jt(s[e])?x=this.parseArrayData(r,s,e,n):ot(s[e])?x=this.parseObjectData(r,s,e,n):x=this.parsePrimitiveData(r,s,e,n);const w=()=>m[l]===null||h&&m[l]<h[l];for(f=0;f<n;++f)r._parsed[f+e]=m=x[f],u&&(w()&&(u=!1),h=m);r._sorted=u}i&&nN(this,x)}parsePrimitiveData(e,n,r,s){const{iScale:o,vScale:i}=e,l=o.axis,u=i.axis,h=o.getLabels(),f=o===i,m=new Array(s);let x,w,v;for(x=0,w=s;x<w;++x)v=x+r,m[x]={[l]:f||o.parse(h[v],v),[u]:i.parse(n[v],v)};return m}parseArrayData(e,n,r,s){const{xScale:o,yScale:i}=e,l=new Array(s);let u,h,f,m;for(u=0,h=s;u<h;++u)f=u+r,m=n[f],l[u]={x:o.parse(m[0],f),y:i.parse(m[1],f)};return l}parseObjectData(e,n,r,s){const{xScale:o,yScale:i}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,h=new Array(s);let f,m,x,w;for(f=0,m=s;f<m;++f)x=f+r,w=n[x],h[f]={x:o.parse(Sa(w,l),x),y:i.parse(Sa(w,u),x)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,o=this._cachedMeta,i=n[e.axis],l={keys:mD(s,!0),values:n._stacks[e.axis]._visualValues};return eN(l,i,o.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const o=r[n.axis];let i=o===null?NaN:o;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,i=eN(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,i=s.length,l=this._getOtherScale(e),u=poe(n,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:m}=doe(l);let x,w;function v(){w=s[x];const y=w[l.axis];return!zr(w[e.axis])||f>y||m<y}for(x=0;x<i&&!(!v()&&(this.updateRangeFromParsed(h,e,w,u),o));++x);if(o){for(x=i-1;x>=0;--x)if(!v()){this.updateRangeFromParsed(h,e,w,u);break}}return h}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,o,i;for(s=0,o=n.length;s<o;++s)i=n[s][e.axis],zr(i)&&r.push(i);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=aoe(qe(this.options.clip,ioe(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],o=n.chartArea,i=[],l=this._drawStart||0,u=this._drawCount||s.length-l,h=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,o,l,u),f=l;f<l+u;++f){const m=s[f];m.hidden||(m.active&&h?i.push(m):m.draw(e,o))}for(f=0;f<i.length;++f)i[f].draw(e,o)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const i=this._cachedMeta.data[e];o=i.$context||(i.$context=foe(this.getContext(),e,i)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=hoe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",o=this._cachedDataOpts,i=e+"-"+n,l=o[i],u=this.enableOptionSharing&&Gd(r);if(l)return rN(l,u);const h=this.chart.config,f=h.datasetElementScopeKeys(this._type,e),m=s?[`${e}Hover`,"hover",e,""]:[e,""],x=h.getOptionScopes(this.getDataset(),f),w=Object.keys($t.elements[e]),v=()=>this.getContext(r,s,n),y=h.resolveNamedOptions(x,w,v,m);return y.$shared&&(y.$shared=u,o[i]=Object.freeze(rN(y,u))),y}_resolveAnimations(e,n,r){const s=this.chart,o=this._cachedDataOpts,i=`animation-${n}`,l=o[i];if(l)return l;let u;if(s.options.animation!==!1){const f=this.chart.config,m=f.datasetAnimationScopeKeys(this._type,n),x=f.getOptionScopes(this.getDataset(),m);u=f.createResolver(x,this.getContext(e,r,n))}const h=new pD(s,u&&u.animations);return u&&u._cacheable&&(o[i]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||qv(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,o=this.getSharedOptions(r),i=this.includeOptions(n,o)||o!==s;return this.updateSharedOptions(o,n,r),{sharedOptions:o,includeOptions:i}}updateElement(e,n,r,s){qv(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!qv(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const o=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[l,u,h]of this._syncList)this[l](u,h);this._syncList=[];const s=r.length,o=n.length,i=Math.min(o,s);i&&this.parse(0,i),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,n,r=!0){const s=this._cachedMeta,o=s.data,i=e+n;let l;const u=h=>{for(h.length+=n,l=h.length-1;l>=i;l--)h[l]=h[l-n]};for(u(o),l=e;l<i;++l)o[l]=new this.dataElementType;this._parsing&&u(s._parsed),this.parse(e,n),r&&this.updateElements(o,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&od(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function moe(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,o=n.length;s<o;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=eD(r.sort((s,o)=>s-o))}return t._cache.$bar}function goe(t){const e=t.iScale,n=moe(e,t.type);let r=e._length,s,o,i,l;const u=()=>{i===32767||i===-32768||(Gd(l)&&(r=Math.min(r,Math.abs(i-l)||r)),l=i)};for(s=0,o=n.length;s<o;++s)i=e.getPixelForValue(n[s]),u();for(l=void 0,s=0,o=e.ticks.length;s<o;++s)i=e.getPixelForTick(s),u();return r}function xoe(t,e,n,r){const s=n.barThickness;let o,i;return dt(s)?(o=e.min*n.categoryPercentage,i=n.barPercentage):(o=s*r,i=1),{chunk:o/r,ratio:i,start:e.pixels[t]-o/2}}function voe(t,e,n,r){const s=e.pixels,o=s[t];let i=t>0?s[t-1]:null,l=t<s.length-1?s[t+1]:null;const u=n.categoryPercentage;i===null&&(i=o-(l===null?e.end-e.start:l-o)),l===null&&(l=o+o-i);const h=o-(o-Math.min(i,l))/2*u;return{chunk:Math.abs(l-i)/2*u/r,ratio:n.barPercentage,start:h}}function yoe(t,e,n,r){const s=n.parse(t[0],r),o=n.parse(t[1],r),i=Math.min(s,o),l=Math.max(s,o);let u=i,h=l;Math.abs(i)>Math.abs(l)&&(u=l,h=i),e[n.axis]=h,e._custom={barStart:u,barEnd:h,start:s,end:o,min:i,max:l}}function gD(t,e,n,r){return Jt(t)?yoe(t,e,n,r):e[n.axis]=n.parse(t,r),e}function sN(t,e,n,r){const s=t.iScale,o=t.vScale,i=s.getLabels(),l=s===o,u=[];let h,f,m,x;for(h=n,f=n+r;h<f;++h)x=e[h],m={},m[s.axis]=l||s.parse(i[h],h),u.push(gD(x,m,o,h));return u}function Kv(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function boe(t,e,n){return t!==0?Ds(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function woe(t){let e,n,r,s,o;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",o="start"):(s="start",o="end"),{start:n,end:r,reverse:e,top:s,bottom:o}}function koe(t,e,n,r){let s=e.borderSkipped;const o={};if(!s){t.borderSkipped=o;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:i,end:l,reverse:u,top:h,bottom:f}=woe(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=h:(n._bottom||0)===r?s=f:(o[oN(f,i,l,u)]=!0,s=h)),o[oN(s,i,l,u)]=!0,t.borderSkipped=o}function oN(t,e,n,r){return r?(t=Soe(t,e,n),t=iN(t,n,e)):t=iN(t,e,n),t}function Soe(t,e,n){return t===e?n:t===n?e:t}function iN(t,e,n){return t==="start"?e:t==="end"?n:t}function Coe(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class _oe extends ng{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,r,s){return sN(e,n,r,s)}parseArrayData(e,n,r,s){return sN(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:o,vScale:i}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,h=o.axis==="x"?l:u,f=i.axis==="x"?l:u,m=[];let x,w,v,y;for(x=r,w=r+s;x<w;++x)y=n[x],v={},v[o.axis]=o.parse(Sa(y,h),x),m.push(gD(Sa(y,f),v,i,x));return m}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const o=r._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,o=this.getParsed(e),i=o._custom,l=Kv(i)?"["+i.start+", "+i.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const o=s==="reset",{index:i,_cachedMeta:{vScale:l}}=this,u=l.getBasePixel(),h=l.isHorizontal(),f=this._getRuler(),{sharedOptions:m,includeOptions:x}=this._getSharedOptions(n,s);for(let w=n;w<n+r;w++){const v=this.getParsed(w),y=o||dt(v[l.axis])?{base:u,head:u}:this._calculateBarValuePixels(w),k=this._calculateBarIndexPixels(w,f),C=(v._stacks||{})[l.axis],_={horizontal:h,base:y.base,enableBorderRadius:!C||Kv(v._custom)||i===C._top||i===C._bottom,x:h?y.head:k.center,y:h?k.center:y.head,height:h?k.size:Math.abs(y.size),width:h?Math.abs(y.size):k.size};x&&(_.options=m||this.resolveDataElementOptions(w,e[w].active?"active":s));const j=_.options||e[w].options;koe(_,j,C,i),Coe(_,j,f.ratio),this.updateElement(e[w],w,_,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),o=r.options.stacked,i=[],l=this._cachedMeta.controller.getParsed(n),u=l&&l[r.axis],h=f=>{const m=f._parsed.find(w=>w[r.axis]===u),x=m&&m[f.vScale.axis];if(dt(x)||isNaN(x))return!0};for(const f of s)if(!(n!==void 0&&h(f))&&((o===!1||i.indexOf(f.stack)===-1||o===void 0&&f.stack===void 0)&&i.push(f.stack),f.index===e))break;return i.length||i.push(void 0),i}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[qe(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const s=this._getStacks(e,r),o=n!==void 0?s.indexOf(n):-1;return o===-1?s.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let o,i;for(o=0,i=n.data.length;o<i;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const l=e.barThickness;return{min:l||goe(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:o,minBarLength:i}}=this,l=o||0,u=this.getParsed(e),h=u._custom,f=Kv(h);let m=u[n.axis],x=0,w=r?this.applyStack(n,u,r):m,v,y;w!==m&&(x=w-m,w=m),f&&(m=h.barStart,w=h.barEnd-h.barStart,m!==0&&Ds(m)!==Ds(h.barEnd)&&(x=0),x+=m);const k=!dt(o)&&!f?o:x;let C=n.getPixelForValue(k);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(x+w):v=C,y=v-C,Math.abs(y)<i){y=boe(y,n,l)*i,m===l&&(C-=y/2);const _=n.getPixelForDecimal(0),j=n.getPixelForDecimal(1),M=Math.min(_,j),O=Math.max(_,j);C=Math.max(Math.min(C,O),M),v=C+y,r&&!f&&(u._stacks[n.axis]._visualValues[s]=n.getValueForPixel(v)-n.getValueForPixel(C))}if(C===n.getPixelForValue(l)){const _=Ds(y)*n.getLineWidthForValue(l)/2;C+=_,y-=_}return{size:y,base:C,head:v,center:v+y/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,o=s.skipNull,i=qe(s.maxBarThickness,1/0);let l,u;const h=this._getAxisCount();if(n.grouped){const f=o?this._getStackCount(e):n.stackCount,m=s.barThickness==="flex"?voe(e,n,s,f*h):xoe(e,n,s,f*h),x=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf(qe(x,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+w;l=m.start+m.chunk*v+m.chunk/2,u=Math.min(i,m.chunk*m.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),u=Math.min(i,n.min*n.ratio);return{base:l-u/2,head:l+u/2,center:l,size:u}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let o=0;for(;o<s;++o)this.getParsed(o)[n.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}function Eoe(t,e,n){let r=1,s=1,o=0,i=0;if(e<At){const l=t,u=l+e,h=Math.cos(l),f=Math.sin(l),m=Math.cos(u),x=Math.sin(u),w=(j,M,O)=>Qd(j,l,u,!0)?1:Math.max(M,M*n,O,O*n),v=(j,M,O)=>Qd(j,l,u,!0)?-1:Math.min(M,M*n,O,O*n),y=w(0,h,m),k=w(Zt,f,x),C=v(pt,h,m),_=v(pt+Zt,f,x);r=(y-C)/2,s=(k-_)/2,o=-(y+C)/2,i=-(k+_)/2}return{ratioX:r,ratioY:s,offsetX:o,offsetY:i}}class Noe extends ng{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:o,useBorderRadius:i,borderRadius:l}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((u,h)=>{const m=e.getDatasetMeta(0).controller.getStyle(h);return{text:u,fillStyle:m.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(h),lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:m.borderWidth,strokeStyle:m.borderColor,textAlign:s,pointStyle:r,borderRadius:i&&(l||m.borderRadius),index:h}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=u=>+r[u];if(ot(r[e])){const{key:u="value"}=this._parsing;o=h=>+Sa(r[h],u)}let i,l;for(i=e,l=e+n;i<l;++i)s._parsed[i]=o(i)}}_getRotation(){return ho(this.options.rotation-90)}_getCircumference(){return ho(this.options.circumference)}_getRotationExtents(){let e=At,n=-At;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),i=s._getCircumference();e=Math.min(e,o),n=Math.max(n,o+i)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,o=s.data,i=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-i)/2,0),u=Math.min(Mre(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:f,rotation:m}=this._getRotationExtents(),{ratioX:x,ratioY:w,offsetX:v,offsetY:y}=Eoe(m,f,u),k=(r.width-i)/x,C=(r.height-i)/w,_=Math.max(Math.min(k,C)/2,0),j=XI(this.options.radius,_),M=Math.max(j*u,0),O=(j-M)/this._getVisibleDatasetWeightTotal();this.offsetX=v*j,this.offsetY=y*j,s.total=this.calculateTotal(),this.outerRadius=j-O*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-O*h,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/At)}updateElements(e,n,r,s){const o=s==="reset",i=this.chart,l=i.chartArea,h=i.options.animation,f=(l.left+l.right)/2,m=(l.top+l.bottom)/2,x=o&&h.animateScale,w=x?0:this.innerRadius,v=x?0:this.outerRadius,{sharedOptions:y,includeOptions:k}=this._getSharedOptions(n,s);let C=this._getRotation(),_;for(_=0;_<n;++_)C+=this._circumference(_,o);for(_=n;_<n+r;++_){const j=this._circumference(_,o),M=e[_],O={x:f+this.offsetX,y:m+this.offsetY,startAngle:C,endAngle:C+j,circumference:j,outerRadius:v,innerRadius:w};k&&(O.options=y||this.resolveDataElementOptions(_,M.active?"active":s)),C+=j,this.updateElement(M,_,O,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?At*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=ak(n._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,o,i,l,u;if(!e){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){i=r.getDatasetMeta(s),e=i.data,l=i.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)u=l.resolveDataElementOptions(s),u.borderAlign!=="inner"&&(n=Math.max(n,u.borderWidth||0,u.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const o=this.resolveDataElementOptions(r);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(qe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class joe extends ng{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=n,i=this.chart._animationsDisabled;let{start:l,count:u}=Gre(n,s,i);this._drawStart=l,this._drawCount=u,Jre(n)&&(l=0,u=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:h},e),this.updateElements(s,l,u,e)}updateElements(e,n,r,s){const o=s==="reset",{iScale:i,vScale:l,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(n,s),x=i.axis,w=l.axis,{spanGaps:v,segment:y}=this.options,k=Jd(v)?v:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||o||s==="none",_=n+r,j=e.length;let M=n>0&&this.getParsed(n-1);for(let O=0;O<j;++O){const T=e[O],I=C?T:{};if(O<n||O>=_){I.skip=!0;continue}const A=this.getParsed(O),F=dt(A[w]),U=I[x]=i.getPixelForValue(A[x],O),W=I[w]=o||F?l.getBasePixel():l.getPixelForValue(u?this.applyStack(l,A,u):A[w],O);I.skip=isNaN(U)||isNaN(W)||F,I.stop=O>0&&Math.abs(A[x]-M[x])>k,y&&(I.parsed=A,I.raw=h.data[O]),m&&(I.options=f||this.resolveDataElementOptions(O,T.active?"active":s)),C||this.updateElement(T,O,I,s),M=A}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),i=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,i)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class Toe extends Noe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Xi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class gk{static override(e){Object.assign(gk.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Xi()}parse(){return Xi()}format(){return Xi()}add(){return Xi()}diff(){return Xi()}startOf(){return Xi()}endOf(){return Xi()}}var Moe={_date:gk};function Ooe(t,e,n,r){const{controller:s,data:o,_sorted:i}=t,l=s._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&i&&o.length){const h=l._reversePixels?Vre:ta;if(r){if(s._sharedOptions){const f=o[0],m=typeof f.getRange=="function"&&f.getRange(e);if(m){const x=h(o,e,n-m),w=h(o,e,n+m);return{lo:x.lo,hi:w.hi}}}}else{const f=h(o,e,n);if(u){const{vScale:m}=s._cachedMeta,{_parsed:x}=t,w=x.slice(0,f.lo+1).reverse().findIndex(y=>!dt(y[m.axis]));f.lo-=Math.max(0,w);const v=x.slice(f.hi).findIndex(y=>!dt(y[m.axis]));f.hi+=Math.max(0,v)}return f}}return{lo:0,hi:o.length-1}}function rg(t,e,n,r,s){const o=t.getSortedVisibleDatasetMetas(),i=n[e];for(let l=0,u=o.length;l<u;++l){const{index:h,data:f}=o[l],{lo:m,hi:x}=Ooe(o[l],e,i,s);for(let w=m;w<=x;++w){const v=f[w];v.skip||r(v,h,w)}}}function Poe(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const o=e?Math.abs(r.x-s.x):0,i=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(i,2))}}function Xv(t,e,n,r,s){const o=[];return!s&&!t.isPointInArea(e)||rg(t,n,e,function(l,u,h){!s&&!Zd(l,t.chartArea,0)||l.inRange(e.x,e.y,r)&&o.push({element:l,datasetIndex:u,index:h})},!0),o}function Roe(t,e,n,r){let s=[];function o(i,l,u){const{startAngle:h,endAngle:f}=i.getProps(["startAngle","endAngle"],r),{angle:m}=QI(i,{x:e.x,y:e.y});Qd(m,h,f)&&s.push({element:i,datasetIndex:l,index:u})}return rg(t,n,e,o),s}function Aoe(t,e,n,r,s,o){let i=[];const l=Poe(n);let u=Number.POSITIVE_INFINITY;function h(f,m,x){const w=f.inRange(e.x,e.y,s);if(r&&!w)return;const v=f.getCenterPoint(s);if(!(!!o||t.isPointInArea(v))&&!w)return;const k=l(e,v);k<u?(i=[{element:f,datasetIndex:m,index:x}],u=k):k===u&&i.push({element:f,datasetIndex:m,index:x})}return rg(t,n,e,h),i}function Gv(t,e,n,r,s,o){return!o&&!t.isPointInArea(e)?[]:n==="r"&&!r?Roe(t,e,n,s):Aoe(t,e,n,r,s,o)}function aN(t,e,n,r,s){const o=[],i=n==="x"?"inXRange":"inYRange";let l=!1;return rg(t,n,e,(u,h,f)=>{u[i]&&u[i](e[n],s)&&(o.push({element:u,datasetIndex:h,index:f}),l=l||u.inRange(e.x,e.y,s))}),r&&!l?[]:o}var Ioe={modes:{index(t,e,n,r){const s=Ji(e,t),o=n.axis||"x",i=n.includeInvisible||!1,l=n.intersect?Xv(t,s,o,r,i):Gv(t,s,o,!1,r,i),u=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(h=>{const f=l[0].index,m=h.data[f];m&&!m.skip&&u.push({element:m,datasetIndex:h.index,index:f})}),u):[]},dataset(t,e,n,r){const s=Ji(e,t),o=n.axis||"xy",i=n.includeInvisible||!1;let l=n.intersect?Xv(t,s,o,r,i):Gv(t,s,o,!1,r,i);if(l.length>0){const u=l[0].datasetIndex,h=t.getDatasetMeta(u).data;l=[];for(let f=0;f<h.length;++f)l.push({element:h[f],datasetIndex:u,index:f})}return l},point(t,e,n,r){const s=Ji(e,t),o=n.axis||"xy",i=n.includeInvisible||!1;return Xv(t,s,o,r,i)},nearest(t,e,n,r){const s=Ji(e,t),o=n.axis||"xy",i=n.includeInvisible||!1;return Gv(t,s,o,n.intersect,r,i)},x(t,e,n,r){const s=Ji(e,t);return aN(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Ji(e,t);return aN(t,s,"y",n.intersect,r)}}};const xD=["left","top","right","bottom"];function id(t,e){return t.filter(n=>n.pos===e)}function lN(t,e){return t.filter(n=>xD.indexOf(n.pos)===-1&&n.box.axis===e)}function ad(t,e){return t.sort((n,r)=>{const s=e?r:n,o=e?n:r;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function Doe(t){const e=[];let n,r,s,o,i,l;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:o,options:{stack:i,stackWeight:l=1}}=s,e.push({index:n,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:i&&o+i,stackWeight:l});return e}function Loe(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:o}=n;if(!r||!xD.includes(s))continue;const i=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=o}return e}function Boe(t,e){const n=Loe(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let o,i,l;for(o=0,i=t.length;o<i;++o){l=t[o];const{fullSize:u}=l.box,h=n[l.stack],f=h&&l.stackWeight/h.weight;l.horizontal?(l.width=f?f*r:u&&e.availableWidth,l.height=s):(l.width=r,l.height=f?f*s:u&&e.availableHeight)}return n}function Foe(t){const e=Doe(t),n=ad(e.filter(h=>h.box.fullSize),!0),r=ad(id(e,"left"),!0),s=ad(id(e,"right")),o=ad(id(e,"top"),!0),i=ad(id(e,"bottom")),l=lN(e,"x"),u=lN(e,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:s.concat(u).concat(i).concat(l),chartArea:id(e,"chartArea"),vertical:r.concat(s).concat(u),horizontal:o.concat(i).concat(l)}}function cN(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function vD(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function $oe(t,e,n,r){const{pos:s,box:o}=n,i=t.maxPadding;if(!ot(s)){n.size&&(t[s]-=n.size);const m=r[n.stack]||{size:0,count:1};m.size=Math.max(m.size,n.horizontal?o.height:o.width),n.size=m.size/m.count,t[s]+=n.size}o.getPadding&&vD(i,o.getPadding());const l=Math.max(0,e.outerWidth-cN(i,t,"left","right")),u=Math.max(0,e.outerHeight-cN(i,t,"top","bottom")),h=l!==t.w,f=u!==t.h;return t.w=l,t.h=u,n.horizontal?{same:h,other:f}:{same:f,other:h}}function zoe(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Uoe(t,e){const n=e.maxPadding;function r(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(i=>{o[i]=Math.max(e[i],n[i])}),o}return r(t?["left","right"]:["top","bottom"])}function xd(t,e,n,r){const s=[];let o,i,l,u,h,f;for(o=0,i=t.length,h=0;o<i;++o){l=t[o],u=l.box,u.update(l.width||e.w,l.height||e.h,Uoe(l.horizontal,e));const{same:m,other:x}=$oe(e,n,l,r);h|=m&&s.length,f=f||x,u.fullSize||s.push(l)}return h&&xd(s,e,n,r)||f}function ff(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function dN(t,e,n,r){const s=n.padding;let{x:o,y:i}=e;for(const l of t){const u=l.box,h=r[l.stack]||{placed:0,weight:1},f=l.stackWeight/h.weight||1;if(l.horizontal){const m=e.w*f,x=h.size||u.height;Gd(h.start)&&(i=h.start),u.fullSize?ff(u,s.left,i,n.outerWidth-s.right-s.left,x):ff(u,e.left+h.placed,i,m,x),h.start=i,h.placed+=m,i=u.bottom}else{const m=e.h*f,x=h.size||u.width;Gd(h.start)&&(o=h.start),u.fullSize?ff(u,o,s.top,x,n.outerHeight-s.bottom-s.top):ff(u,o,e.top+h.placed,x,m),h.start=o,h.placed+=m,o=u.right}}e.x=o,e.y=i}var Lr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Ur(t.options.layout.padding),o=Math.max(e-s.width,0),i=Math.max(n-s.height,0),l=Foe(t.boxes),u=l.vertical,h=l.horizontal;ht(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const f=u.reduce((y,k)=>k.box.options&&k.box.options.display===!1?y:y+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:o,availableHeight:i,vBoxMaxWidth:o/2/f,hBoxMaxHeight:i/2}),x=Object.assign({},s);vD(x,Ur(r));const w=Object.assign({maxPadding:x,w:o,h:i,x:s.left,y:s.top},s),v=Boe(u.concat(h),m);xd(l.fullSize,w,m,v),xd(u,w,m,v),xd(h,w,m,v)&&xd(u,w,m,v),zoe(w),dN(l.leftAndTop,w,m,v),w.x+=w.w,w.y+=w.h,dN(l.rightAndBottom,w,m,v),t.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},ht(l.chartArea,y=>{const k=y.box;Object.assign(k,t.chartArea),k.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class yD{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class Hoe extends yD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const qf="$chartjs",Woe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},uN=t=>t===null||t==="";function Voe(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[qf]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",uN(s)){const o=KE(t,"width");o!==void 0&&(t.width=o)}if(uN(r))if(t.style.height==="")t.height=t.width/(e||2);else{const o=KE(t,"height");o!==void 0&&(t.height=o)}return t}const bD=$se?{passive:!0}:!1;function Yoe(t,e,n){t&&t.addEventListener(e,n,bD)}function qoe(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,bD)}function Koe(t,e){const n=Woe[t.type]||t.type,{x:r,y:s}=Ji(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function $p(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Xoe(t,e,n){const r=t.canvas,s=new MutationObserver(o=>{let i=!1;for(const l of o)i=i||$p(l.addedNodes,r),i=i&&!$p(l.removedNodes,r);i&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function Goe(t,e,n){const r=t.canvas,s=new MutationObserver(o=>{let i=!1;for(const l of o)i=i||$p(l.removedNodes,r),i=i&&!$p(l.addedNodes,r);i&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const tu=new Map;let hN=0;function wD(){const t=window.devicePixelRatio;t!==hN&&(hN=t,tu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Joe(t,e){tu.size||window.addEventListener("resize",wD),tu.set(t,e)}function Qoe(t){tu.delete(t),tu.size||window.removeEventListener("resize",wD)}function Zoe(t,e,n){const r=t.canvas,s=r&&mk(r);if(!s)return;const o=nD((l,u)=>{const h=s.clientWidth;n(l,u),h<s.clientWidth&&n()},window),i=new ResizeObserver(l=>{const u=l[0],h=u.contentRect.width,f=u.contentRect.height;h===0&&f===0||o(h,f)});return i.observe(s),Joe(t,o),i}function Jv(t,e,n){n&&n.disconnect(),e==="resize"&&Qoe(t)}function eie(t,e,n){const r=t.canvas,s=nD(o=>{t.ctx!==null&&n(Koe(o,t))},t);return Yoe(r,e,s),s}class tie extends yD{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Voe(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[qf])return!1;const r=n[qf].initial;["height","width"].forEach(o=>{const i=r[o];dt(i)?n.removeAttribute(o):n.setAttribute(o,i)});const s=r.style||{};return Object.keys(s).forEach(o=>{n.style[o]=s[o]}),n.width=n.width,delete n[qf],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),i={attach:Xoe,detach:Goe,resize:Zoe}[n]||eie;s[n]=i(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Jv,detach:Jv,resize:Jv}[n]||qoe)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return Fse(e,n,r,s)}isAttached(e){const n=e&&mk(e);return!!(n&&n.isConnected)}}function nie(t){return!pk()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Hoe:tie}let Co=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Jd(this.x)&&Jd(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(o=>{s[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),s}};function rie(t,e){const n=t.options.ticks,r=sie(t),s=Math.min(n.maxTicksLimit||r,r),o=n.major.enabled?iie(e):[],i=o.length,l=o[0],u=o[i-1],h=[];if(i>s)return aie(e,h,o,i/s),h;const f=oie(o,e,s);if(i>0){let m,x;const w=i>1?Math.round((u-l)/(i-1)):null;for(pf(e,h,f,dt(w)?0:l-w,l),m=0,x=i-1;m<x;m++)pf(e,h,f,o[m],o[m+1]);return pf(e,h,f,u,dt(w)?e.length:u+w),h}return pf(e,h,f),h}function sie(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function oie(t,e,n){const r=lie(t),s=e.length/n;if(!r)return Math.max(s,1);const o=Bre(r);for(let i=0,l=o.length-1;i<l;i++){const u=o[i];if(u>s)return u}return Math.max(s,1)}function iie(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function aie(t,e,n,r){let s=0,o=n[0],i;for(r=Math.ceil(r),i=0;i<t.length;i++)i===o&&(e.push(t[i]),s++,o=n[s*r])}function pf(t,e,n,r,s){const o=qe(r,0),i=Math.min(qe(s,t.length),t.length);let l=0,u,h,f;for(n=Math.ceil(n),s&&(u=s-r,n=u/Math.floor(u/n)),f=o;f<0;)l++,f=Math.round(o+l*n);for(h=Math.max(o,0);h<i;h++)h===f&&(e.push(t[h]),l++,f=Math.round(o+l*n))}function lie(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const cie=t=>t==="left"?"right":t==="right"?"left":t,fN=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,pN=(t,e)=>Math.min(e||t,t);function mN(t,e){const n=[],r=t.length/e,s=t.length;let o=0;for(;o<s;o+=r)n.push(t[Math.floor(o)]);return n}function die(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),o=t._startPixel,i=t._endPixel,l=1e-6;let u=t.getPixelForTick(s),h;if(!(n&&(r===1?h=Math.max(u-o,i-u):e===0?h=(t.getPixelForTick(1)-u)/2:h=(u-t.getPixelForTick(s-1))/2,u+=s<e?h:-h,u<o-l||u>i+l)))return u}function uie(t,e){ht(t,n=>{const r=n.gc,s=r.length/2;let o;if(s>e){for(o=0;o<s;++o)delete n.data[r[o]];r.splice(0,s)}})}function ld(t){return t.drawTicks?t.tickLength:0}function gN(t,e){if(!t.display)return 0;const n=Tn(t.font,e),r=Ur(t.padding);return(Jt(t.text)?t.text.length:1)*n.lineHeight+r.height}function hie(t,e){return Aa(t,{scale:e,type:"scale"})}function fie(t,e,n){return Aa(t,{tick:n,index:e,type:"tick"})}function pie(t,e,n){let r=ok(t);return(n&&e!=="right"||!n&&e==="right")&&(r=cie(r)),r}function mie(t,e,n,r){const{top:s,left:o,bottom:i,right:l,chart:u}=t,{chartArea:h,scales:f}=u;let m=0,x,w,v;const y=i-s,k=l-o;if(t.isHorizontal()){if(w=_n(r,o,l),ot(n)){const C=Object.keys(n)[0],_=n[C];v=f[C].getPixelForValue(_)+y-e}else n==="center"?v=(h.bottom+h.top)/2+y-e:v=fN(t,n,e);x=l-o}else{if(ot(n)){const C=Object.keys(n)[0],_=n[C];w=f[C].getPixelForValue(_)-k+e}else n==="center"?w=(h.left+h.right)/2-k+e:w=fN(t,n,e);v=_n(r,i,s),m=n==="left"?-Zt:Zt}return{titleX:w,titleY:v,maxWidth:x,rotation:m}}class uc extends Co{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=ks(e,Number.POSITIVE_INFINITY),n=ks(n,Number.NEGATIVE_INFINITY),r=ks(r,Number.POSITIVE_INFINITY),s=ks(s,Number.NEGATIVE_INFINITY),{min:ks(e,r),max:ks(n,s),minDefined:zr(e),maxDefined:zr(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:o}=this.getUserBounds(),i;if(s&&o)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let u=0,h=l.length;u<h;++u)i=l[u].controller.getMinMax(this,e),s||(n=Math.min(n,i.min)),o||(r=Math.max(r,i.max));return n=o&&n>r?r:n,r=s&&n>r?n:r,{min:ks(n,ks(r,n)),max:ks(r,ks(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ct(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:o,ticks:i}=this.options,l=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=xse(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?mN(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||i.source==="auto")&&(this.ticks=rie(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ct(this.options.afterUpdate,[this])}beforeSetDimensions(){Ct(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ct(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ct(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ct(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,o;for(r=0,s=e.length;r<s;r++)o=e[r],o.label=Ct(n.callback,[o.value,r,e],this)}afterTickToLabelConversion(){Ct(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ct(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=pN(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,o=n.maxRotation;let i=s,l,u,h;if(!this._isVisible()||!n.display||s>=o||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const f=this._getLabelSizes(),m=f.widest.width,x=f.highest.height,w=jn(this.chart.width-m,0,this.maxWidth);l=e.offset?this.maxWidth/r:w/(r-1),m+6>l&&(l=w/(r-(e.offset?.5:1)),u=this.maxHeight-ld(e.grid)-n.padding-gN(e.title,this.chart.options.font),h=Math.sqrt(m*m+x*x),i=Ure(Math.min(Math.asin(jn((f.highest.height+6)/l,-1,1)),Math.asin(jn(u/h,-1,1))-Math.asin(jn(x/h,-1,1)))),i=Math.max(s,Math.min(o,i))),this.labelRotation=i}afterCalculateLabelRotation(){Ct(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ct(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:o}}=this,i=this._isVisible(),l=this.isHorizontal();if(i){const u=gN(s,n.options.font);if(l?(e.width=this.maxWidth,e.height=ld(o)+u):(e.height=this.maxHeight,e.width=ld(o)+u),r.display&&this.ticks.length){const{first:h,last:f,widest:m,highest:x}=this._getLabelSizes(),w=r.padding*2,v=ho(this.labelRotation),y=Math.cos(v),k=Math.sin(v);if(l){const C=r.mirror?0:k*m.width+y*x.height;e.height=Math.min(this.maxHeight,e.height+C+w)}else{const C=r.mirror?0:y*m.width+k*x.height;e.width=Math.min(this.maxWidth,e.width+C+w)}this._calculatePadding(h,f,k,y)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:o,padding:i},position:l}=this.options,u=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,w=0;u?h?(x=s*e.width,w=r*n.height):(x=r*e.height,w=s*n.width):o==="start"?w=n.width:o==="end"?x=e.width:o!=="inner"&&(x=e.width/2,w=n.width/2),this.paddingLeft=Math.max((x-f+i)*this.width/(this.width-f),0),this.paddingRight=Math.max((w-m+i)*this.width/(this.width-m),0)}else{let f=n.height/2,m=e.height/2;o==="start"?(f=0,m=e.height):o==="end"&&(f=n.height,m=0),this.paddingTop=f+i,this.paddingBottom=m+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ct(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)dt(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=mN(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:o}=this,i=[],l=[],u=Math.floor(n/pN(n,r));let h=0,f=0,m,x,w,v,y,k,C,_,j,M,O;for(m=0;m<n;m+=u){if(v=e[m].label,y=this._resolveTickFontOptions(m),s.font=k=y.string,C=o[k]=o[k]||{data:{},gc:[]},_=y.lineHeight,j=M=0,!dt(v)&&!Jt(v))j=HE(s,C.data,C.gc,j,v),M=_;else if(Jt(v))for(x=0,w=v.length;x<w;++x)O=v[x],!dt(O)&&!Jt(O)&&(j=HE(s,C.data,C.gc,j,O),M+=_);i.push(j),l.push(M),h=Math.max(j,h),f=Math.max(M,f)}uie(o,n);const T=i.indexOf(h),I=l.indexOf(f),A=F=>({width:i[F]||0,height:l[F]||0});return{first:A(0),last:A(n-1),widest:A(T),highest:A(I),widths:i,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Wre(this._alignToPixels?Ki(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=fie(this.getContext(),e,r))}return this.$context||(this.$context=hie(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ho(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),o=this._getLabelSizes(),i=e.autoSkipPadding||0,l=o?o.widest.width+i:0,u=o?o.highest.height+i:0;return this.isHorizontal()?u*r>l*s?l/r:u/s:u*s<l*r?u/r:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:o,position:i,border:l}=s,u=o.offset,h=this.isHorizontal(),m=this.ticks.length+(u?1:0),x=ld(o),w=[],v=l.setContext(this.getContext()),y=v.display?v.width:0,k=y/2,C=function(J){return Ki(r,J,y)};let _,j,M,O,T,I,A,F,U,W,Z,oe;if(i==="top")_=C(this.bottom),I=this.bottom-x,F=_-k,W=C(e.top)+k,oe=e.bottom;else if(i==="bottom")_=C(this.top),W=e.top,oe=C(e.bottom)-k,I=_+k,F=this.top+x;else if(i==="left")_=C(this.right),T=this.right-x,A=_-k,U=C(e.left)+k,Z=e.right;else if(i==="right")_=C(this.left),U=e.left,Z=C(e.right)-k,T=_+k,A=this.left+x;else if(n==="x"){if(i==="center")_=C((e.top+e.bottom)/2+.5);else if(ot(i)){const J=Object.keys(i)[0],z=i[J];_=C(this.chart.scales[J].getPixelForValue(z))}W=e.top,oe=e.bottom,I=_+k,F=I+x}else if(n==="y"){if(i==="center")_=C((e.left+e.right)/2);else if(ot(i)){const J=Object.keys(i)[0],z=i[J];_=C(this.chart.scales[J].getPixelForValue(z))}T=_-k,A=T-x,U=e.left,Z=e.right}const ee=qe(s.ticks.maxTicksLimit,m),re=Math.max(1,Math.ceil(m/ee));for(j=0;j<m;j+=re){const J=this.getContext(j),z=o.setContext(J),R=l.setContext(J),D=z.lineWidth,G=z.color,N=R.dash||[],L=R.dashOffset,V=z.tickWidth,Q=z.tickColor,ce=z.tickBorderDash||[],H=z.tickBorderDashOffset;M=die(this,j,u),M!==void 0&&(O=Ki(r,M,D),h?T=A=U=Z=O:I=F=W=oe=O,w.push({tx1:T,ty1:I,tx2:A,ty2:F,x1:U,y1:W,x2:Z,y2:oe,width:D,color:G,borderDash:N,borderDashOffset:L,tickWidth:V,tickColor:Q,tickBorderDash:ce,tickBorderDashOffset:H}))}return this._ticksLength=m,this._borderValue=_,w}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:o}=r,i=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:h,padding:f,mirror:m}=o,x=ld(r.grid),w=x+f,v=m?-f:w,y=-ho(this.labelRotation),k=[];let C,_,j,M,O,T,I,A,F,U,W,Z,oe="middle";if(s==="top")T=this.bottom-v,I=this._getXAxisLabelAlignment();else if(s==="bottom")T=this.top+v,I=this._getXAxisLabelAlignment();else if(s==="left"){const re=this._getYAxisLabelAlignment(x);I=re.textAlign,O=re.x}else if(s==="right"){const re=this._getYAxisLabelAlignment(x);I=re.textAlign,O=re.x}else if(n==="x"){if(s==="center")T=(e.top+e.bottom)/2+w;else if(ot(s)){const re=Object.keys(s)[0],J=s[re];T=this.chart.scales[re].getPixelForValue(J)+w}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")O=(e.left+e.right)/2-w;else if(ot(s)){const re=Object.keys(s)[0],J=s[re];O=this.chart.scales[re].getPixelForValue(J)}I=this._getYAxisLabelAlignment(x).textAlign}n==="y"&&(u==="start"?oe="top":u==="end"&&(oe="bottom"));const ee=this._getLabelSizes();for(C=0,_=l.length;C<_;++C){j=l[C],M=j.label;const re=o.setContext(this.getContext(C));A=this.getPixelForTick(C)+o.labelOffset,F=this._resolveTickFontOptions(C),U=F.lineHeight,W=Jt(M)?M.length:1;const J=W/2,z=re.color,R=re.textStrokeColor,D=re.textStrokeWidth;let G=I;i?(O=A,I==="inner"&&(C===_-1?G=this.options.reverse?"left":"right":C===0?G=this.options.reverse?"right":"left":G="center"),s==="top"?h==="near"||y!==0?Z=-W*U+U/2:h==="center"?Z=-ee.highest.height/2-J*U+U:Z=-ee.highest.height+U/2:h==="near"||y!==0?Z=U/2:h==="center"?Z=ee.highest.height/2-J*U:Z=ee.highest.height-W*U,m&&(Z*=-1),y!==0&&!re.showLabelBackdrop&&(O+=U/2*Math.sin(y))):(T=A,Z=(1-W)*U/2);let N;if(re.showLabelBackdrop){const L=Ur(re.backdropPadding),V=ee.heights[C],Q=ee.widths[C];let ce=Z-L.top,H=0-L.left;switch(oe){case"middle":ce-=V/2;break;case"bottom":ce-=V;break}switch(I){case"center":H-=Q/2;break;case"right":H-=Q;break;case"inner":C===_-1?H-=Q:C>0&&(H-=Q/2);break}N={left:H,top:ce,width:Q+L.width,height:V+L.height,color:re.backdropColor}}k.push({label:M,font:F,textOffset:Z,options:{rotation:y,color:z,strokeColor:R,strokeWidth:D,textAlign:G,textBaseline:oe,translation:[O,T],backdrop:N}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ho(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:o}}=this.options,i=this._getLabelSizes(),l=e+o,u=i.widest.width;let h,f;return n==="left"?s?(f=this.right+o,r==="near"?h="left":r==="center"?(h="center",f+=u/2):(h="right",f+=u)):(f=this.right-l,r==="near"?h="right":r==="center"?(h="center",f-=u/2):(h="left",f=this.left)):n==="right"?s?(f=this.left+o,r==="near"?h="right":r==="center"?(h="center",f-=u/2):(h="left",f-=u)):(f=this.left+l,r==="near"?h="left":r==="center"?(h="center",f+=u/2):(h="right",f=this.right)):h="right",{textAlign:h,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:o,height:i}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,o,i),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(o=>o.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,i;const l=(u,h,f)=>{!f.width||!f.color||(r.save(),r.lineWidth=f.width,r.strokeStyle=f.color,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset,r.beginPath(),r.moveTo(u.x,u.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(n.display)for(o=0,i=s.length;o<i;++o){const u=s[o];n.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,o=r.setContext(this.getContext()),i=r.display?o.width:0;if(!i)return;const l=s.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,f,m,x;this.isHorizontal()?(h=Ki(e,this.left,i)-i/2,f=Ki(e,this.right,l)+l/2,m=x=u):(m=Ki(e,this.top,i)-i/2,x=Ki(e,this.bottom,l)+l/2,h=f=u),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(h,m),n.lineTo(f,x),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&lk(r,s);const o=this.getLabelItems(e);for(const i of o){const l=i.options,u=i.font,h=i.label,f=i.textOffset;eu(r,h,0,f,u,l)}s&&ck(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const o=Tn(r.font),i=Ur(r.padding),l=r.align;let u=o.lineHeight/2;n==="bottom"||n==="center"||ot(n)?(u+=i.bottom,Jt(r.text)&&(u+=o.lineHeight*(r.text.length-1))):u+=i.top;const{titleX:h,titleY:f,maxWidth:m,rotation:x}=mie(this,u,n,l);eu(e,r.text,0,0,o,{color:r.color,maxWidth:m,rotation:x,textAlign:pie(l,n,s),textBaseline:"middle",translation:[h,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=qe(e.grid&&e.grid.z,-1),s=qe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==uc.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let o,i;for(o=0,i=n.length;o<i;++o){const l=n[o];l[r]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Tn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class mf{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;vie(n)&&(r=this.register(n));const s=this.items,o=e.id,i=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,gie(e,i,r),this.override&&$t.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in $t[s]&&(delete $t[s][r],this.override&&delete Ca[r])}}function gie(t,e,n){const r=Xd(Object.create(null),[n?$t.get(n):{},$t.get(e),t.defaults]);$t.set(e,r),t.defaultRoutes&&xie(e,t.defaultRoutes),t.descriptors&&$t.describe(e,t.descriptors)}function xie(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),o=[t].concat(r).join("."),i=e[n].split("."),l=i.pop(),u=i.join(".");$t.route(o,s,u,l)})}function vie(t){return"id"in t&&"defaults"in t}class yie{constructor(){this.controllers=new mf(ng,"datasets",!0),this.elements=new mf(Co,"elements"),this.plugins=new mf(Object,"plugins"),this.scales=new mf(uc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const o=r||this._getRegistryForType(s);r||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):ht(s,i=>{const l=r||this._getRegistryForType(i);this._exec(e,l,i)})})}_exec(e,n,r){const s=rk(e);Ct(r["before"+s],[],r),n[e](r),Ct(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Es=new yie;class bie{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=s?this._descriptors(e).filter(s):this._descriptors(e),i=this._notify(o,e,n,r);return n==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),i}_notify(e,n,r,s){s=s||{};for(const o of e){const i=o.plugin,l=i[r],u=[n,s,o.options];if(Ct(l,u,i)===!1&&s.cancelable)return!1}return!0}invalidate(){dt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=qe(r.options&&r.options.plugins,{}),o=wie(r);return s===!1&&!n?[]:Sie(e,o,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(o,i)=>o.filter(l=>!i.some(u=>l.plugin.id===u.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function wie(t){const e={},n=[],r=Object.keys(Es.plugins.items);for(let o=0;o<r.length;o++)n.push(Es.getPlugin(r[o]));const s=t.plugins||[];for(let o=0;o<s.length;o++){const i=s[o];n.indexOf(i)===-1&&(n.push(i),e[i.id]=!0)}return{plugins:n,localIds:e}}function kie(t,e){return!e&&t===!1?null:t===!0?{}:t}function Sie(t,{plugins:e,localIds:n},r,s){const o=[],i=t.getContext();for(const l of e){const u=l.id,h=kie(r[u],s);h!==null&&o.push({plugin:l,options:Cie(t.config,{plugin:l,local:n[u]},h,i)})}return o}function Cie(t,{plugin:e,local:n},r,s){const o=t.pluginScopeKeys(e),i=t.getOptionScopes(r,o);return n&&e.defaults&&i.push(e.defaults),t.createResolver(i,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function a0(t,e){const n=$t.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function _ie(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Eie(t,e){return t===e?"_index_":"_value_"}function xN(t){if(t==="x"||t==="y"||t==="r")return t}function Nie(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function l0(t,...e){if(xN(t))return t;for(const n of e){const r=n.axis||Nie(n.position)||t.length>1&&xN(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function vN(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function jie(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return vN(t,"x",n[0])||vN(t,"y",n[0])}return{}}function Tie(t,e){const n=Ca[t.type]||{scales:{}},r=e.scales||{},s=a0(t.type,e),o=Object.create(null);return Object.keys(r).forEach(i=>{const l=r[i];if(!ot(l))return console.error(`Invalid scale configuration for scale: ${i}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${i}`);const u=l0(i,l,jie(i,t),$t.scales[l.type]),h=Eie(u,s),f=n.scales||{};o[i]=Sd(Object.create(null),[{axis:u},l,f[u],f[h]])}),t.data.datasets.forEach(i=>{const l=i.type||t.type,u=i.indexAxis||a0(l,e),f=(Ca[l]||{}).scales||{};Object.keys(f).forEach(m=>{const x=_ie(m,u),w=i[x+"AxisID"]||x;o[w]=o[w]||Object.create(null),Sd(o[w],[{axis:x},r[w],f[m]])})}),Object.keys(o).forEach(i=>{const l=o[i];Sd(l,[$t.scales[l.type],$t.scale])}),o}function kD(t){const e=t.options||(t.options={});e.plugins=qe(e.plugins,{}),e.scales=Tie(t,e)}function SD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Mie(t){return t=t||{},t.data=SD(t.data),kD(t),t}const yN=new Map,CD=new Set;function gf(t,e){let n=yN.get(t);return n||(n=e(),yN.set(t,n),CD.add(n)),n}const cd=(t,e,n)=>{const r=Sa(e,n);r!==void 0&&t.add(r)};class Oie{constructor(e){this._config=Mie(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=SD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return gf(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return gf(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return gf(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return gf(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:o}=this,i=this._cachedScopes(e,r),l=i.get(n);if(l)return l;const u=new Set;n.forEach(f=>{e&&(u.add(e),f.forEach(m=>cd(u,e,m))),f.forEach(m=>cd(u,s,m)),f.forEach(m=>cd(u,Ca[o]||{},m)),f.forEach(m=>cd(u,$t,m)),f.forEach(m=>cd(u,o0,m))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),CD.has(n)&&i.set(n,h),h}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ca[n]||{},$t.datasets[n]||{},{type:n},$t,o0]}resolveNamedOptions(e,n,r,s=[""]){const o={$shared:!0},{resolver:i,subPrefixes:l}=bN(this._resolverCache,e,s);let u=i;if(Rie(i,n)){o.$shared=!1,r=_i(r)?r():r;const h=this.createResolver(e,r,l);u=Vl(i,r,h)}for(const h of n)o[h]=u[h];return o}createResolver(e,n,r=[""],s){const{resolver:o}=bN(this._resolverCache,e,r);return ot(n)?Vl(o,n,void 0,s):o}}function bN(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let o=r.get(s);return o||(o={resolver:uk(e,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,o)),o}const Pie=t=>ot(t)&&Object.getOwnPropertyNames(t).some(e=>_i(t[e]));function Rie(t,e){const{isScriptable:n,isIndexable:r}=iD(t);for(const s of e){const o=n(s),i=r(s),l=(i||o)&&t[s];if(o&&(_i(l)||Pie(l))||i&&Jt(l))return!0}return!1}var Aie="4.5.1";const Iie=["top","bottom","left","right","chartArea"];function wN(t,e){return t==="top"||t==="bottom"||Iie.indexOf(t)===-1&&e==="x"}function kN(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function SN(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ct(n&&n.onComplete,[t],e)}function Die(t){const e=t.chart,n=e.options.animation;Ct(n&&n.onProgress,[t],e)}function _D(t){return pk()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Kf={},CN=t=>{const e=_D(t);return Object.values(Kf).filter(n=>n.canvas===e).pop()};function Lie(t,e,n){const r=Object.keys(t);for(const s of r){const o=+s;if(o>=e){const i=t[s];delete t[s],(n>0||o>e)&&(t[o+n]=i)}}}function Bie(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}let sg=class{static defaults=$t;static instances=Kf;static overrides=Ca;static registry=Es;static version=Aie;static getChart=CN;static register(...e){Es.add(...e),_N()}static unregister(...e){Es.remove(...e),_N()}constructor(e,n){const r=this.config=new Oie(n),s=_D(e),o=CN(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const i=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||nie(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,i.aspectRatio),u=l&&l.canvas,h=u&&u.height,f=u&&u.width;if(this.id=Tre(),this.ctx=l,this.canvas=u,this.width=f,this.height=h,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bie,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Kre(m=>this.update(m),i.resizeDelay||0),this._dataChanges=[],Kf[this.id]=this,!l||!u){console.error("Failed to create chart: can't acquire context from the given item");return}oo.listen(this,"complete",SN),oo.listen(this,"progress",Die),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:o}=this;return dt(e)?n&&o?o:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Es}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return WE(this.canvas,this.ctx),this}stop(){return oo.stop(this),this}resize(e,n){oo.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(s,e,n,o),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,qE(this,l,!0)&&(this.notifyPlugins("resize",{size:i}),Ct(r.onResize,[this,i],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ht(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((i,l)=>(i[l]=!1,i),{});let o=[];n&&(o=o.concat(Object.keys(n).map(i=>{const l=n[i],u=l0(i,l),h=u==="r",f=u==="x";return{options:l,dposition:h?"chartArea":f?"bottom":"left",dtype:h?"radialLinear":f?"category":"linear"}}))),ht(o,i=>{const l=i.options,u=l.id,h=l0(u,l),f=qe(l.type,i.dtype);(l.position===void 0||wN(l.position,h)!==wN(i.dposition))&&(l.position=i.dposition),s[u]=!0;let m=null;if(u in r&&r[u].type===f)m=r[u];else{const x=Es.getScale(f);m=new x({id:u,type:f,ctx:this.ctx,chart:this}),r[m.id]=m}m.init(l,e)}),ht(s,(i,l)=>{i||delete r[l]}),ht(r,i=>{Lr.configure(this,i,i.options),Lr.addBox(this,i)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,o)=>s.index-o.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(kN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const o=n[r];let i=this.getDatasetMeta(r);const l=o.type||this.config.type;if(i.type&&i.type!==l&&(this._destroyDatasetMeta(r),i=this.getDatasetMeta(r)),i.type=l,i.indexAxis=o.indexAxis||a0(l,this.options),i.order=o.order||0,i.index=r,i.label=""+o.label,i.visible=this.isDatasetVisible(r),i.controller)i.controller.updateIndex(r),i.controller.linkScales();else{const u=Es.getController(l),{datasetElementType:h,dataElementType:f}=$t.datasets[l];Object.assign(u,{dataElementType:Es.getElement(f),datasetElementType:h&&Es.getElement(h)}),i.controller=new u(this,r),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){ht(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let h=0,f=this.data.datasets.length;h<f;h++){const{controller:m}=this.getDatasetMeta(h),x=!s&&o.indexOf(m)===-1;m.buildOrUpdateElements(x),i=Math.max(+m.getMaxOverflow(),i)}i=this._minPadding=r.layout.autoPadding?i:0,this._updateLayout(i),s||ht(o,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(kN("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ht(this.scales,e=>{Lr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!AE(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:o}of n){const i=r==="_removeElements"?-o:o;Lie(e,s,i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=o=>new Set(e.filter(i=>i[0]===o).map((i,l)=>l+","+i.splice(1).join(","))),s=r(0);for(let o=1;o<n;o++)if(!AE(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Lr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ht(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,_i(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(oo.has(this)?this.attached&&!oo.running(this)&&oo.start(this):(this.draw(),SN({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,o;for(s=0,o=n.length;s<o;++s){const i=n[s];(!e||i.visible)&&r.push(i)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=eoe(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&lk(n,s),e.controller.draw(),s&&ck(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Zd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const o=Ioe.modes[n];return typeof o=="function"?o(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(o=>o&&o._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Aa(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",o=this.getDatasetMeta(e),i=o.controller._resolveAnimations(void 0,s);Gd(n)?(o.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),i.update(o,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),oo.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),WE(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Kf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(o,i)=>{n.addEventListener(this,o,i),e[o]=i},s=(o,i,l)=>{o.offsetX=i,o.offsetY=l,this._eventHandler(o)};ht(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(u,h)=>{n.addEventListener(this,u,h),e[u]=h},s=(u,h)=>{e[u]&&(n.removeEventListener(this,u,h),delete e[u])},o=(u,h)=>{this.canvas&&this.resize(u,h)};let i;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",o),r("detach",i)};i=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():i()}unbindEvents(){ht(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ht(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let o,i,l,u;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,u=e.length;l<u;++l){i=e[l];const h=i&&this.getDatasetMeta(i.datasetIndex).controller;h&&h[s+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:o,index:i})=>{const l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[i],index:i}});!Ip(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,o=(u,h)=>u.filter(f=>!h.some(m=>f.datasetIndex===m.datasetIndex&&f.index===m.index)),i=o(n,e),l=r?e:o(e,n);i.length&&this.updateHoverStyle(i,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=i=>(i.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const o=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:o}=this,i=n,l=this._getActiveElements(e,s,r,i),u=Ire(e),h=Bie(e,this._lastEvent,r,u);r&&(this._lastEvent=null,Ct(o.onHover,[e,l,this],this),u&&Ct(o.onClick,[e,l,this],this));const f=!Ip(l,s);return(f||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=h,f}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}};function _N(){return ht(sg.instances,t=>t._plugins.invalidate())}function Fie(t,e,n){const{startAngle:r,x:s,y:o,outerRadius:i,innerRadius:l,options:u}=e,{borderWidth:h,borderJoinStyle:f}=u,m=Math.min(h/i,ss(r-n));if(t.beginPath(),t.arc(s,o,i-h/2,r+m/2,n-m/2),l>0){const x=Math.min(h/l,ss(r-n));t.arc(s,o,l+h/2,n-x/2,r+x/2,!0)}else{const x=Math.min(h/2,i*ss(r-n));if(f==="round")t.arc(s,o,x,n-pt/2,r+pt/2,!0);else if(f==="bevel"){const w=2*x*x,v=-w*Math.cos(n+pt/2)+s,y=-w*Math.sin(n+pt/2)+o,k=w*Math.cos(r+pt/2)+s,C=w*Math.sin(r+pt/2)+o;t.lineTo(v,y),t.lineTo(k,C)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function $ie(t,e,n){const{startAngle:r,pixelMargin:s,x:o,y:i,outerRadius:l,innerRadius:u}=e;let h=s/l;t.beginPath(),t.arc(o,i,l,r-h,n+h),u>s?(h=s/u,t.arc(o,i,u,n+h,r-h,!0)):t.arc(o,i,s,n+Zt,r-Zt),t.closePath(),t.clip()}function zie(t){return dk(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Uie(t,e,n,r){const s=zie(t.options.borderRadius),o=(n-e)/2,i=Math.min(o,r*e/2),l=u=>{const h=(n-Math.min(o,u))*r/2;return jn(u,0,Math.min(o,h))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:jn(s.innerStart,0,i),innerEnd:jn(s.innerEnd,0,i)}}function fl(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function zp(t,e,n,r,s,o){const{x:i,y:l,startAngle:u,pixelMargin:h,innerRadius:f}=e,m=Math.max(e.outerRadius+r+n-h,0),x=f>0?f+r+n+h:0;let w=0;const v=s-u;if(r){const re=f>0?f-r:0,J=m>0?m-r:0,z=(re+J)/2,R=z!==0?v*z/(z+r):v;w=(v-R)/2}const y=Math.max(.001,v*m-n/pt)/m,k=(v-y)/2,C=u+k+w,_=s-k-w,{outerStart:j,outerEnd:M,innerStart:O,innerEnd:T}=Uie(e,x,m,_-C),I=m-j,A=m-M,F=C+j/I,U=_-M/A,W=x+O,Z=x+T,oe=C+O/W,ee=_-T/Z;if(t.beginPath(),o){const re=(F+U)/2;if(t.arc(i,l,m,F,re),t.arc(i,l,m,re,U),M>0){const D=fl(A,U,i,l);t.arc(D.x,D.y,M,U,_+Zt)}const J=fl(Z,_,i,l);if(t.lineTo(J.x,J.y),T>0){const D=fl(Z,ee,i,l);t.arc(D.x,D.y,T,_+Zt,ee+Math.PI)}const z=(_-T/x+(C+O/x))/2;if(t.arc(i,l,x,_-T/x,z,!0),t.arc(i,l,x,z,C+O/x,!0),O>0){const D=fl(W,oe,i,l);t.arc(D.x,D.y,O,oe+Math.PI,C-Zt)}const R=fl(I,C,i,l);if(t.lineTo(R.x,R.y),j>0){const D=fl(I,F,i,l);t.arc(D.x,D.y,j,C-Zt,F)}}else{t.moveTo(i,l);const re=Math.cos(F)*m+i,J=Math.sin(F)*m+l;t.lineTo(re,J);const z=Math.cos(U)*m+i,R=Math.sin(U)*m+l;t.lineTo(z,R)}t.closePath()}function Hie(t,e,n,r,s){const{fullCircles:o,startAngle:i,circumference:l}=e;let u=e.endAngle;if(o){zp(t,e,n,r,u,s);for(let h=0;h<o;++h)t.fill();isNaN(l)||(u=i+(l%At||At))}return zp(t,e,n,r,u,s),t.fill(),u}function Wie(t,e,n,r,s){const{fullCircles:o,startAngle:i,circumference:l,options:u}=e,{borderWidth:h,borderJoinStyle:f,borderDash:m,borderDashOffset:x,borderRadius:w}=u,v=u.borderAlign==="inner";if(!h)return;t.setLineDash(m||[]),t.lineDashOffset=x,v?(t.lineWidth=h*2,t.lineJoin=f||"round"):(t.lineWidth=h,t.lineJoin=f||"bevel");let y=e.endAngle;if(o){zp(t,e,n,r,y,s);for(let k=0;k<o;++k)t.stroke();isNaN(l)||(y=i+(l%At||At))}v&&$ie(t,e,y),u.selfJoin&&y-i>=pt&&w===0&&f!=="miter"&&Fie(t,e,y),o||(zp(t,e,n,r,y,s),t.stroke())}class Vie extends Co{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.getProps(["x","y"],r),{angle:o,distance:i}=QI(s,{x:e,y:n}),{startAngle:l,endAngle:u,innerRadius:h,outerRadius:f,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),x=(this.options.spacing+this.options.borderWidth)/2,w=qe(m,u-l),v=Qd(o,l,u)&&l!==u,y=w>=At||v,k=ci(i,h+x,f+x);return y&&k}getCenterPoint(e){const{x:n,y:r,startAngle:s,endAngle:o,innerRadius:i,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:h}=this.options,f=(s+o)/2,m=(i+l+h+u)/2;return{x:n+Math.cos(f)*m,y:r+Math.sin(f)*m}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:r}=this,s=(n.offset||0)/4,o=(n.spacing||0)/2,i=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>At?Math.floor(r/At):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*s,Math.sin(l)*s);const u=1-Math.sin(Math.min(pt,r||0)),h=s*u;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,Hie(e,this,h,o,i),Wie(e,this,h,o,i),e.restore()}}function ED(t,e,n=e){t.lineCap=qe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(qe(n.borderDash,e.borderDash)),t.lineDashOffset=qe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=qe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=qe(n.borderWidth,e.borderWidth),t.strokeStyle=qe(n.borderColor,e.borderColor)}function Yie(t,e,n){t.lineTo(n.x,n.y)}function qie(t){return t.stepped?lse:t.tension||t.cubicInterpolationMode==="monotone"?cse:Yie}function ND(t,e,n={}){const r=t.length,{start:s=0,end:o=r-1}=n,{start:i,end:l}=e,u=Math.max(s,i),h=Math.min(o,l),f=s<i&&o<i||s>l&&o>l;return{count:r,start:u,loop:e.loop,ilen:h<u&&!f?r+h-u:h-u}}function Kie(t,e,n,r){const{points:s,options:o}=e,{count:i,start:l,loop:u,ilen:h}=ND(s,n,r),f=qie(o);let{move:m=!0,reverse:x}=r||{},w,v,y;for(w=0;w<=h;++w)v=s[(l+(x?h-w:w))%i],!v.skip&&(m?(t.moveTo(v.x,v.y),m=!1):f(t,y,v,x,o.stepped),y=v);return u&&(v=s[(l+(x?h:0))%i],f(t,y,v,x,o.stepped)),!!u}function Xie(t,e,n,r){const s=e.points,{count:o,start:i,ilen:l}=ND(s,n,r),{move:u=!0,reverse:h}=r||{};let f=0,m=0,x,w,v,y,k,C;const _=M=>(i+(h?l-M:M))%o,j=()=>{y!==k&&(t.lineTo(f,k),t.lineTo(f,y),t.lineTo(f,C))};for(u&&(w=s[_(0)],t.moveTo(w.x,w.y)),x=0;x<=l;++x){if(w=s[_(x)],w.skip)continue;const M=w.x,O=w.y,T=M|0;T===v?(O<y?y=O:O>k&&(k=O),f=(m*f+M)/++m):(j(),t.lineTo(M,O),v=T,m=0,y=k=O),C=O}j()}function c0(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Xie:Kie}function Gie(t){return t.stepped?zse:t.tension||t.cubicInterpolationMode==="monotone"?Use:Qi}function Jie(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),ED(t,e.options),t.stroke(s)}function Qie(t,e,n,r){const{segments:s,options:o}=e,i=c0(e);for(const l of s)ED(t,o,l.style),t.beginPath(),i(t,e,l,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Zie=typeof Path2D=="function";function eae(t,e,n,r){Zie&&!e.options.segment?Jie(t,e,n,r):Qie(t,e,n,r)}class tae extends Co{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;Rse(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Gse(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],o=this.points,i=qse(this,{property:n,start:s,end:s});if(!i.length)return;const l=[],u=Gie(r);let h,f;for(h=0,f=i.length;h<f;++h){const{start:m,end:x}=i[h],w=o[m],v=o[x];if(w===v){l.push(w);continue}const y=Math.abs((s-w[n])/(v[n]-w[n])),k=u(w,v,y,r.stepped);k[n]=e[n],l.push(k)}return l.length===1?l[0]:l}pathSegment(e,n,r){return c0(this)(e,this,n,r)}path(e,n,r){const s=this.segments,o=c0(this);let i=this._loop;n=n||0,r=r||this.points.length-n;for(const l of s)i&=o(e,this,l,{start:n,end:n+r-1});return!!i}draw(e,n,r,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),eae(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function EN(t,e,n,r){const s=t.options,{[n]:o}=t.getProps([n],r);return Math.abs(e-o)<s.radius+s.hitRadius}class nae extends Co{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:o,y:i}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(n-i,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return EN(this,e,"x",n)}inYRange(e,n){return EN(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!Zd(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,i0(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function jD(t,e){const{x:n,y:r,base:s,width:o,height:i}=t.getProps(["x","y","base","width","height"],e);let l,u,h,f,m;return t.horizontal?(m=i/2,l=Math.min(n,s),u=Math.max(n,s),h=r-m,f=r+m):(m=o/2,l=n-m,u=n+m,h=Math.min(r,s),f=Math.max(r,s)),{left:l,top:h,right:u,bottom:f}}function ui(t,e,n,r){return t?0:jn(e,n,r)}function rae(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,o=oD(r);return{t:ui(s.top,o.top,0,n),r:ui(s.right,o.right,0,e),b:ui(s.bottom,o.bottom,0,n),l:ui(s.left,o.left,0,e)}}function sae(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,o=Tl(s),i=Math.min(e,n),l=t.borderSkipped,u=r||ot(s);return{topLeft:ui(!u||l.top||l.left,o.topLeft,0,i),topRight:ui(!u||l.top||l.right,o.topRight,0,i),bottomLeft:ui(!u||l.bottom||l.left,o.bottomLeft,0,i),bottomRight:ui(!u||l.bottom||l.right,o.bottomRight,0,i)}}function oae(t){const e=jD(t),n=e.right-e.left,r=e.bottom-e.top,s=rae(t,n/2,r/2),o=sae(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:o},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function Qv(t,e,n,r){const s=e===null,o=n===null,l=t&&!(s&&o)&&jD(t,r);return l&&(s||ci(e,l.left,l.right))&&(o||ci(n,l.top,l.bottom))}function iae(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function aae(t,e){t.rect(e.x,e.y,e.w,e.h)}function Zv(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-r,i=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+o,h:t.h+i,radius:t.radius}}class lae extends Co{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:o,outer:i}=oae(this),l=iae(i.radius)?Bp:aae;e.save(),(i.w!==o.w||i.h!==o.h)&&(e.beginPath(),l(e,Zv(i,n,o)),e.clip(),l(e,Zv(o,-n,i)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),l(e,Zv(o,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return Qv(this,e,n,r)}inXRange(e,n){return Qv(this,e,null,n)}inYRange(e,n){return Qv(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(n+s)/2:n,y:o?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const NN=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},cae=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jN extends Co{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ct(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Tn(r.font),o=s.size,i=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=NN(r,o);let h,f;n.font=s.string,this.isHorizontal()?(h=this.maxWidth,f=this._fitRows(i,o,l,u)+10):(f=this.maxHeight,h=this._fitCols(i,s,l,u)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:o,maxWidth:i,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],f=s+l;let m=e;o.textAlign="left",o.textBaseline="middle";let x=-1,w=-f;return this.legendItems.forEach((v,y)=>{const k=r+n/2+o.measureText(v.text).width;(y===0||h[h.length-1]+k+2*l>i)&&(m+=f,h[h.length-(y>0?0:1)]=0,w+=f,x++),u[y]={left:0,top:w,row:x,width:k,height:s},h[h.length-1]+=k+l}),m}_fitCols(e,n,r,s){const{ctx:o,maxHeight:i,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],f=i-e;let m=l,x=0,w=0,v=0,y=0;return this.legendItems.forEach((k,C)=>{const{itemWidth:_,itemHeight:j}=dae(r,n,o,k,s);C>0&&w+j+2*l>f&&(m+=x+l,h.push({width:x,height:w}),v+=x+l,y++,x=w=0),u[C]={left:v,top:w,col:y,width:_,height:j},x=Math.max(x,_),w+=j+l}),m+=x,h.push({width:x,height:w}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:o}}=this,i=Ml(o,this.left,this.width);if(this.isHorizontal()){let l=0,u=_n(r,this.left+s,this.right-this.lineWidths[l]);for(const h of n)l!==h.row&&(l=h.row,u=_n(r,this.left+s,this.right-this.lineWidths[l])),h.top+=this.top+e+s,h.left=i.leftForLtr(i.x(u),h.width),u+=h.width+s}else{let l=0,u=_n(r,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const h of n)h.col!==l&&(l=h.col,u=_n(r,this.top+e+s,this.bottom-this.columnSizes[l].height)),h.top=u,h.left+=this.left+s,h.left=i.leftForLtr(i.x(h.left),h.width),u+=h.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;lk(e,this),this._draw(),ck(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:o,labels:i}=e,l=$t.color,u=Ml(e.rtl,this.left,this.width),h=Tn(i.font),{padding:f}=i,m=h.size,x=m/2;let w;this.drawTitle(),s.textAlign=u.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;const{boxWidth:v,boxHeight:y,itemHeight:k}=NN(i,m),C=function(T,I,A){if(isNaN(v)||v<=0||isNaN(y)||y<0)return;s.save();const F=qe(A.lineWidth,1);if(s.fillStyle=qe(A.fillStyle,l),s.lineCap=qe(A.lineCap,"butt"),s.lineDashOffset=qe(A.lineDashOffset,0),s.lineJoin=qe(A.lineJoin,"miter"),s.lineWidth=F,s.strokeStyle=qe(A.strokeStyle,l),s.setLineDash(qe(A.lineDash,[])),i.usePointStyle){const U={radius:y*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:F},W=u.xPlus(T,v/2),Z=I+x;sD(s,U,W,Z,i.pointStyleWidth&&v)}else{const U=I+Math.max((m-y)/2,0),W=u.leftForLtr(T,v),Z=Tl(A.borderRadius);s.beginPath(),Object.values(Z).some(oe=>oe!==0)?Bp(s,{x:W,y:U,w:v,h:y,radius:Z}):s.rect(W,U,v,y),s.fill(),F!==0&&s.stroke()}s.restore()},_=function(T,I,A){eu(s,A.text,T,I+k/2,h,{strikethrough:A.hidden,textAlign:u.textAlign(A.textAlign)})},j=this.isHorizontal(),M=this._computeTitleHeight();j?w={x:_n(o,this.left+f,this.right-r[0]),y:this.top+f+M,line:0}:w={x:this.left+f,y:_n(o,this.top+M+f,this.bottom-n[0].height),line:0},uD(this.ctx,e.textDirection);const O=k+f;this.legendItems.forEach((T,I)=>{s.strokeStyle=T.fontColor,s.fillStyle=T.fontColor;const A=s.measureText(T.text).width,F=u.textAlign(T.textAlign||(T.textAlign=i.textAlign)),U=v+x+A;let W=w.x,Z=w.y;u.setWidth(this.width),j?I>0&&W+U+f>this.right&&(Z=w.y+=O,w.line++,W=w.x=_n(o,this.left+f,this.right-r[w.line])):I>0&&Z+O>this.bottom&&(W=w.x=W+n[w.line].width+f,w.line++,Z=w.y=_n(o,this.top+M+f,this.bottom-n[w.line].height));const oe=u.x(W);if(C(oe,Z,T),W=Xre(F,W+v+x,j?W+U:this.right,e.rtl),_(u.x(W),Z,T),j)w.x+=U+f;else if(typeof T.text!="string"){const ee=h.lineHeight;w.y+=TD(T,ee)+f}else w.y+=O}),hD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Tn(n.font),s=Ur(n.padding);if(!n.display)return;const o=Ml(e.rtl,this.left,this.width),i=this.ctx,l=n.position,u=r.size/2,h=s.top+u;let f,m=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),f=this.top+h,m=_n(e.align,m,this.right-x);else{const v=this.columnSizes.reduce((y,k)=>Math.max(y,k.height),0);f=h+_n(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const w=_n(l,m,m+x);i.textAlign=o.textAlign(ok(l)),i.textBaseline="middle",i.strokeStyle=n.color,i.fillStyle=n.color,i.font=r.string,eu(i,n.text,w,f,r)}_computeTitleHeight(){const e=this.options.title,n=Tn(e.font),r=Ur(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,o;if(ci(e,this.left,this.right)&&ci(n,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(s=o[r],ci(e,s.left,s.left+s.width)&&ci(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!fae(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,o=cae(s,r);s&&!o&&Ct(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!o&&Ct(n.onHover,[e,r,this],this)}else r&&Ct(n.onClick,[e,r,this],this)}}function dae(t,e,n,r,s){const o=uae(r,t,e,n),i=hae(s,r,e.lineHeight);return{itemWidth:o,itemHeight:i}}function uae(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((o,i)=>o.length>i.length?o:i)),e+n.size/2+r.measureText(s).width}function hae(t,e,n){let r=t;return typeof e.text!="string"&&(r=TD(e,n)),r}function TD(t,e){const n=t.text?t.text.length:0;return e*n}function fae(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var pae={id:"legend",_element:jN,start(t,e,n){const r=t.legend=new jN({ctx:t.ctx,options:n,chart:t});Lr.configure(t,r,n),Lr.addBox(t,r)},stop(t){Lr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Lr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:o,useBorderRadius:i,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(n?0:void 0),f=Ur(h.borderWidth);return{text:e[u.index].label,fillStyle:h.backgroundColor,fontColor:o,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:s||h.textAlign,borderRadius:i&&(l||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class MD extends Co{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Jt(r.text)?r.text.length:1;this._padding=Ur(r.padding);const o=s*Tn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:o,options:i}=this,l=i.align;let u=0,h,f,m;return this.isHorizontal()?(f=_n(l,r,o),m=n+e,h=o-r):(i.position==="left"?(f=r+e,m=_n(l,s,n),u=pt*-.5):(f=o-e,m=_n(l,n,s),u=pt*.5),h=s-n),{titleX:f,titleY:m,maxWidth:h,rotation:u}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Tn(n.font),o=r.lineHeight/2+this._padding.top,{titleX:i,titleY:l,maxWidth:u,rotation:h}=this._drawArgs(o);eu(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:ok(n.align),textBaseline:"middle",translation:[i,l]})}}function mae(t,e){const n=new MD({ctx:t.ctx,options:e,chart:t});Lr.configure(t,n,e),Lr.addBox(t,n),t.titleBlock=n}var gae={id:"title",_element:MD,start(t,e,n){mae(t,n)},stop(t){const e=t.titleBlock;Lr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Lr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vd={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,o=0;for(e=0,n=t.length;e<n;++e){const l=t[e].element;if(l&&l.hasValue()){const u=l.tooltipPosition();r.add(u.x),s+=u.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((l,u)=>l+u)/r.size,y:s/o}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,o,i,l;for(o=0,i=t.length;o<i;++o){const u=t[o].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),f=s0(e,h);f<s&&(s=f,l=u)}}if(l){const u=l.tooltipPosition();n=u.x,r=u.y}return{x:n,y:r}}};function Cs(t,e){return e&&(Jt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function io(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function xae(t,e){const{element:n,datasetIndex:r,index:s}=e,o=t.getDatasetMeta(r).controller,{label:i,value:l}=o.getLabelAndValue(s);return{chart:t,label:i,parsed:o.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:l,dataset:o.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function TN(t,e){const n=t.chart.ctx,{body:r,footer:s,title:o}=t,{boxWidth:i,boxHeight:l}=e,u=Tn(e.bodyFont),h=Tn(e.titleFont),f=Tn(e.footerFont),m=o.length,x=s.length,w=r.length,v=Ur(e.padding);let y=v.height,k=0,C=r.reduce((M,O)=>M+O.before.length+O.lines.length+O.after.length,0);if(C+=t.beforeBody.length+t.afterBody.length,m&&(y+=m*h.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),C){const M=e.displayColors?Math.max(l,u.lineHeight):u.lineHeight;y+=w*M+(C-w)*u.lineHeight+(C-1)*e.bodySpacing}x&&(y+=e.footerMarginTop+x*f.lineHeight+(x-1)*e.footerSpacing);let _=0;const j=function(M){k=Math.max(k,n.measureText(M).width+_)};return n.save(),n.font=h.string,ht(t.title,j),n.font=u.string,ht(t.beforeBody.concat(t.afterBody),j),_=e.displayColors?i+2+e.boxPadding:0,ht(r,M=>{ht(M.before,j),ht(M.lines,j),ht(M.after,j)}),_=0,n.font=f.string,ht(t.footer,j),n.restore(),k+=v.width,{width:k,height:y}}function vae(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function yae(t,e,n,r){const{x:s,width:o}=r,i=n.caretSize+n.caretPadding;if(t==="left"&&s+o+i>e.width||t==="right"&&s-o-i<0)return!0}function bae(t,e,n,r){const{x:s,width:o}=n,{width:i,chartArea:{left:l,right:u}}=t;let h="center";return r==="center"?h=s<=(l+u)/2?"left":"right":s<=o/2?h="left":s>=i-o/2&&(h="right"),yae(h,t,e,n)&&(h="center"),h}function MN(t,e,n){const r=n.yAlign||e.yAlign||vae(t,n);return{xAlign:n.xAlign||e.xAlign||bae(t,e,n,r),yAlign:r}}function wae(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function kae(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function ON(t,e,n,r){const{caretSize:s,caretPadding:o,cornerRadius:i}=t,{xAlign:l,yAlign:u}=n,h=s+o,{topLeft:f,topRight:m,bottomLeft:x,bottomRight:w}=Tl(i);let v=wae(e,l);const y=kae(e,u,h);return u==="center"?l==="left"?v+=h:l==="right"&&(v-=h):l==="left"?v-=Math.max(f,x)+s:l==="right"&&(v+=Math.max(m,w)+s),{x:jn(v,0,r.width-e.width),y:jn(y,0,r.height-e.height)}}function xf(t,e,n){const r=Ur(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function PN(t){return Cs([],io(t))}function Sae(t,e,n){return Aa(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function RN(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const OD={beforeTitle:ro,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:ro,beforeBody:ro,beforeLabel:ro,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return dt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ro,afterBody:ro,beforeFooter:ro,footer:ro,afterFooter:ro};function Yn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?OD[e].call(n,r):s}class AN extends Co{static positioners=vd;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,o=new pD(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Sae(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Yn(r,"beforeTitle",this,e),o=Yn(r,"title",this,e),i=Yn(r,"afterTitle",this,e);let l=[];return l=Cs(l,io(s)),l=Cs(l,io(o)),l=Cs(l,io(i)),l}getBeforeBody(e,n){return PN(Yn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return ht(e,o=>{const i={before:[],lines:[],after:[]},l=RN(r,o);Cs(i.before,io(Yn(l,"beforeLabel",this,o))),Cs(i.lines,Yn(l,"label",this,o)),Cs(i.after,io(Yn(l,"afterLabel",this,o))),s.push(i)}),s}getAfterBody(e,n){return PN(Yn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Yn(r,"beforeFooter",this,e),o=Yn(r,"footer",this,e),i=Yn(r,"afterFooter",this,e);let l=[];return l=Cs(l,io(s)),l=Cs(l,io(o)),l=Cs(l,io(i)),l}_createItems(e){const n=this._active,r=this.chart.data,s=[],o=[],i=[];let l=[],u,h;for(u=0,h=n.length;u<h;++u)l.push(xae(this.chart,n[u]));return e.filter&&(l=l.filter((f,m,x)=>e.filter(f,m,x,r))),e.itemSort&&(l=l.sort((f,m)=>e.itemSort(f,m,r))),ht(l,f=>{const m=RN(e.callbacks,f);s.push(Yn(m,"labelColor",this,f)),o.push(Yn(m,"labelPointStyle",this,f)),i.push(Yn(m,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=i,this.dataPoints=l,l}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let o,i=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const l=vd[r.position].call(this,s,this._eventPosition);i=this._createItems(r),this.title=this.getTitle(i,r),this.beforeBody=this.getBeforeBody(i,r),this.body=this.getBody(i,r),this.afterBody=this.getAfterBody(i,r),this.footer=this.getFooter(i,r);const u=this._size=TN(this,r),h=Object.assign({},l,u),f=MN(this.chart,r,h),m=ON(r,h,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:m.x,y:m.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}this._tooltipItems=i,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const o=this.getCaretPosition(e,r,s);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:o}=this,{caretSize:i,cornerRadius:l}=r,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=Tl(l),{x,y:w}=e,{width:v,height:y}=n;let k,C,_,j,M,O;return o==="center"?(M=w+y/2,s==="left"?(k=x,C=k-i,j=M+i,O=M-i):(k=x+v,C=k+i,j=M-i,O=M+i),_=k):(s==="left"?C=x+Math.max(u,f)+i:s==="right"?C=x+v-Math.max(h,m)-i:C=this.caretX,o==="top"?(j=w,M=j-i,k=C-i,_=C+i):(j=w+y,M=j+i,k=C+i,_=C-i),O=j),{x1:k,x2:C,x3:_,y1:j,y2:M,y3:O}}drawTitle(e,n,r){const s=this.title,o=s.length;let i,l,u;if(o){const h=Ml(r.rtl,this.x,this.width);for(e.x=xf(this,r.titleAlign,r),n.textAlign=h.textAlign(r.titleAlign),n.textBaseline="middle",i=Tn(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=i.string,u=0;u<o;++u)n.fillText(s[u],h.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+l,u+1===o&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,n,r,s,o){const i=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:u,boxWidth:h}=o,f=Tn(o.bodyFont),m=xf(this,"left",o),x=s.x(m),w=u<f.lineHeight?(f.lineHeight-u)/2:0,v=n.y+w;if(o.usePointStyle){const y={radius:Math.min(h,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},k=s.leftForLtr(x,h)+h/2,C=v+u/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,i0(e,y,k,C),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,i0(e,y,k,C)}else{e.lineWidth=ot(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const y=s.leftForLtr(x,h),k=s.leftForLtr(s.xPlus(x,1),h-2),C=Tl(i.borderRadius);Object.values(C).some(_=>_!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Bp(e,{x:y,y:v,w:h,h:u,radius:C}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),Bp(e,{x:k,y:v+1,w:h-2,h:u-2,radius:C}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(y,v,h,u),e.strokeRect(y,v,h,u),e.fillStyle=i.backgroundColor,e.fillRect(k,v+1,h-2,u-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:o,bodyAlign:i,displayColors:l,boxHeight:u,boxWidth:h,boxPadding:f}=r,m=Tn(r.bodyFont);let x=m.lineHeight,w=0;const v=Ml(r.rtl,this.x,this.width),y=function(A){n.fillText(A,v.x(e.x+w),e.y+x/2),e.y+=x+o},k=v.textAlign(i);let C,_,j,M,O,T,I;for(n.textAlign=i,n.textBaseline="middle",n.font=m.string,e.x=xf(this,k,r),n.fillStyle=r.bodyColor,ht(this.beforeBody,y),w=l&&k!=="right"?i==="center"?h/2+f:h+2+f:0,M=0,T=s.length;M<T;++M){for(C=s[M],_=this.labelTextColors[M],n.fillStyle=_,ht(C.before,y),j=C.lines,l&&j.length&&(this._drawColorBox(n,e,M,v,r),x=Math.max(m.lineHeight,u)),O=0,I=j.length;O<I;++O)y(j[O]),x=m.lineHeight;ht(C.after,y)}w=0,x=m.lineHeight,ht(this.afterBody,y),e.y-=o}drawFooter(e,n,r){const s=this.footer,o=s.length;let i,l;if(o){const u=Ml(r.rtl,this.x,this.width);for(e.x=xf(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=u.textAlign(r.footerAlign),n.textBaseline="middle",i=Tn(r.footerFont),n.fillStyle=r.footerColor,n.font=i.string,l=0;l<o;++l)n.fillText(s[l],u.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:o,yAlign:i}=this,{x:l,y:u}=e,{width:h,height:f}=r,{topLeft:m,topRight:x,bottomLeft:w,bottomRight:v}=Tl(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+m,u),i==="top"&&this.drawCaret(e,n,r,s),n.lineTo(l+h-x,u),n.quadraticCurveTo(l+h,u,l+h,u+x),i==="center"&&o==="right"&&this.drawCaret(e,n,r,s),n.lineTo(l+h,u+f-v),n.quadraticCurveTo(l+h,u+f,l+h-v,u+f),i==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(l+w,u+f),n.quadraticCurveTo(l,u+f,l,u+f-w),i==="center"&&o==="left"&&this.drawCaret(e,n,r,s),n.lineTo(l,u+m),n.quadraticCurveTo(l,u,l+m,u),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const i=vd[e.position].call(this,this._active,this._eventPosition);if(!i)return;const l=this._size=TN(this,e),u=Object.assign({},i,this._size),h=MN(n,e,u),f=ON(e,u,h,n);(s._to!==f.x||o._to!==f.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const i=Ur(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,n),uD(e,n.textDirection),o.y+=i.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),hD(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:l,index:u})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[u],index:u}}),o=!Ip(r,s),i=this._positionChanged(s,n);(o||i)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],i=this._getActiveElements(e,o,n,r),l=this._positionChanged(i,e),u=n||!Ip(i,o)||l;return u&&(this._active=i,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),u}_getActiveElements(e,n,r,s){const o=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const i=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&i.reverse(),i}_positionChanged(e,n){const{caretX:r,caretY:s,options:o}=this,i=vd[o.position].call(this,e,n);return i!==!1&&(r!==i.x||s!==i.y)}}var Cae={id:"tooltip",_element:AN,positioners:vd,afterInit(t,e,n){n&&(t.tooltip=new AN({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:OD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const _ae=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Eae(t,e,n,r){const s=t.indexOf(e);if(s===-1)return _ae(t,e,n,r);const o=t.lastIndexOf(e);return s!==o?n:s}const Nae=(t,e)=>t===null?null:jn(Math.round(t),0,e);function IN(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class jae extends uc{static id="category";static defaults={ticks:{callback:IN}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:o}of n)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(dt(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Eae(r,e,qe(n,e),this._addedLabels),Nae(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let i=e;i<=n;i++)s.push({value:i});return s}getLabelForValue(e){return IN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Tae(t,e){const n=[],{bounds:s,step:o,min:i,max:l,precision:u,count:h,maxTicks:f,maxDigits:m,includeBounds:x}=t,w=o||1,v=f-1,{min:y,max:k}=e,C=!dt(i),_=!dt(l),j=!dt(h),M=(k-y)/(m+1);let O=DE((k-y)/v/w)*w,T,I,A,F;if(O<1e-14&&!C&&!_)return[{value:y},{value:k}];F=Math.ceil(k/O)-Math.floor(y/O),F>v&&(O=DE(F*O/v/w)*w),dt(u)||(T=Math.pow(10,u),O=Math.ceil(O*T)/T),s==="ticks"?(I=Math.floor(y/O)*O,A=Math.ceil(k/O)*O):(I=y,A=k),C&&_&&o&&$re((l-i)/o,O/1e3)?(F=Math.round(Math.min((l-i)/O,f)),O=(l-i)/F,I=i,A=l):j?(I=C?i:I,A=_?l:A,F=h-1,O=(A-I)/F):(F=(A-I)/O,Cd(F,Math.round(F),O/1e3)?F=Math.round(F):F=Math.ceil(F));const U=Math.max(LE(O),LE(I));T=Math.pow(10,dt(u)?U:u),I=Math.round(I*T)/T,A=Math.round(A*T)/T;let W=0;for(C&&(x&&I!==i?(n.push({value:i}),I<i&&W++,Cd(Math.round((I+W*O)*T)/T,i,DN(i,M,t))&&W++):I<i&&W++);W<F;++W){const Z=Math.round((I+W*O)*T)/T;if(_&&Z>l)break;n.push({value:Z})}return _&&x&&A!==l?n.length&&Cd(n[n.length-1].value,l,DN(l,M,t))?n[n.length-1].value=l:n.push({value:l}):(!_||A===l)&&n.push({value:A}),n}function DN(t,e,{horizontal:n,minRotation:r}){const s=ho(r),o=(n?Math.sin(s):Math.cos(s))||.001,i=.75*e*(""+t).length;return Math.min(e/o,i)}class Mae extends uc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return dt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:o}=this;const i=u=>s=n?s:u,l=u=>o=r?o:u;if(e){const u=Ds(s),h=Ds(o);u<0&&h<0?l(0):u>0&&h>0&&i(0)}if(s===o){let u=o===0?1:Math.abs(o*.05);l(o+u),e||i(s-u)}this.min=s,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,i=Tae(s,o);return e.bounds==="ticks"&&zre(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return ak(e,this.chart.options.locale,this.options.ticks.format)}}class Oae extends Mae{static id="linear";static defaults={ticks:{callback:rD.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=zr(e)?e:0,this.max=zr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ho(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const og={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jn=Object.keys(og);function LN(t,e){return t-e}function BN(t,e){if(dt(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:o}=t._parseOpts;let i=e;return typeof r=="function"&&(i=r(i)),zr(i)||(i=typeof r=="string"?n.parse(i,r):n.parse(i)),i===null?null:(s&&(i=s==="week"&&(Jd(o)||o===!0)?n.startOf(i,"isoWeek",o):n.startOf(i,s)),+i)}function FN(t,e,n,r){const s=Jn.length;for(let o=Jn.indexOf(t);o<s-1;++o){const i=og[Jn[o]],l=i.steps?i.steps:Number.MAX_SAFE_INTEGER;if(i.common&&Math.ceil((n-e)/(l*i.size))<=r)return Jn[o]}return Jn[s-1]}function Pae(t,e,n,r,s){for(let o=Jn.length-1;o>=Jn.indexOf(n);o--){const i=Jn[o];if(og[i].common&&t._adapter.diff(s,r,i)>=e-1)return i}return Jn[n?Jn.indexOf(n):0]}function Rae(t){for(let e=Jn.indexOf(t)+1,n=Jn.length;e<n;++e)if(og[Jn[e]].common)return Jn[e]}function $N(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=sk(n,e),o=n[r]>=e?n[r]:n[s];t[o]=!0}}function Aae(t,e,n,r){const s=t._adapter,o=+s.startOf(e[0].value,r),i=e[e.length-1].value;let l,u;for(l=o;l<=i;l=+s.add(l,1,r))u=n[l],u>=0&&(e[u].major=!0);return e}function zN(t,e,n){const r=[],s={},o=e.length;let i,l;for(i=0;i<o;++i)l=e[i],s[l]=i,r.push({value:l,major:!1});return o===0||!n?r:Aae(t,r,s,n)}class UN extends uc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new Moe._date(e.adapters.date);s.init(n),Sd(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:BN(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:o,minDefined:i,maxDefined:l}=this.getUserBounds();function u(h){!i&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!l&&!isNaN(h.max)&&(o=Math.max(o,h.max))}(!i||!l)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),s=zr(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),o=zr(o)&&!isNaN(o)?o:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,i=this.max,l=Yre(s,o,i);return this._unit=n.unit||(r.autoSkip?FN(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):Pae(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Rae(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),zN(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);const i=e.length<3?.5:.25;n=jn(n,0,i),r=jn(r,0,i),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,o=s.time,i=o.unit||FN(o.minUnit,n,r,this._getLabelCapacity(n)),l=qe(s.ticks.stepSize,1),u=i==="week"?o.isoWeekday:!1,h=Jd(u)||u===!0,f={};let m=n,x,w;if(h&&(m=+e.startOf(m,"isoWeek",u)),m=+e.startOf(m,h?"day":i),e.diff(r,n,i)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+i);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(x=m,w=0;x<r;x=+e.add(x,l,i),w++)$N(f,x,v);return(x===r||s.bounds==="ticks"||w===1)&&$N(f,x,v),Object.keys(f).sort(LN).map(y=>+y)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,o=this._unit,i=n||s[o];return this._adapter.format(e,i)}_tickFormatFunction(e,n,r,s){const o=this.options,i=o.ticks.callback;if(i)return Ct(i,[e,n,r],this);const l=o.time.displayFormats,u=this._unit,h=this._majorUnit,f=u&&l[u],m=h&&l[h],x=r[n],w=h&&m&&x&&x.major;return this._adapter.format(e,s||(w?m:f))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=ho(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(s),i=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*i,h:r*i+l*o}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,o=this._tickFormatFunction(e,0,zN(this,[e],this._majorUnit),s),i=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(BN(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return eD(e.sort(LN))}}function vf(t,e,n){let r=0,s=t.length-1,o,i,l,u;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=ta(t,"pos",e)),{pos:o,time:l}=t[r],{pos:i,time:u}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=ta(t,"time",e)),{time:o,pos:l}=t[r],{time:i,pos:u}=t[s]);const h=i-o;return h?l+(u-l)*(e-o)/h:l}class Hle extends UN{static id="timeseries";static defaults=UN.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=vf(n,this.min),this._tableRange=vf(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],o=[];let i,l,u,h,f;for(i=0,l=e.length;i<l;++i)h=e[i],h>=n&&h<=r&&s.push(h);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(i=0,l=s.length;i<l;++i)f=s[i+1],u=s[i-1],h=s[i],Math.round((f+u)/2)!==h&&o.push({time:h,pos:i/(l-1)});return o}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,o)=>s-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(vf(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return vf(this._table,r*this._tableRange+this._minPos,!0)}}const PD="label";function HN(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Iae(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function RD(t,e){t.labels=e}function AD(t,e,n=PD){const r=[];t.datasets=e.map(s=>{const o=t.datasets.find(i=>i[n]===s[n]);return!o||!s.data||r.includes(o)?{...s}:(r.push(o),Object.assign(o,s),o)})}function Dae(t,e=PD){const n={labels:[],datasets:[]};return RD(n,t.labels),AD(n,t.datasets,e),n}function Lae(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:o,type:i,data:l,options:u,plugins:h=[],fallbackContent:f,updateMode:m,...x}=t,w=b.useRef(null),v=b.useRef(null),y=()=>{w.current&&(v.current=new sg(w.current,{type:i,data:Dae(l,o),options:u&&{...u},plugins:h}),HN(e,v.current))},k=()=>{HN(e,null),v.current&&(v.current.destroy(),v.current=null)};return b.useEffect(()=>{!s&&v.current&&u&&Iae(v.current,u)},[s,u]),b.useEffect(()=>{!s&&v.current&&RD(v.current.config.data,l.labels)},[s,l.labels]),b.useEffect(()=>{!s&&v.current&&l.datasets&&AD(v.current.config.data,l.datasets,o)},[s,l.datasets]),b.useEffect(()=>{v.current&&(s?(k(),setTimeout(y)):v.current.update(m))},[s,u,l.labels,l.datasets,m]),b.useEffect(()=>{v.current&&(k(),setTimeout(y))},[i]),b.useEffect(()=>(y(),()=>k()),[]),c.jsx("canvas",{ref:w,role:"img",height:n,width:r,...x,children:f})}const Bae=b.forwardRef(Lae);function xk(t,e){return sg.register(e),b.forwardRef((n,r)=>c.jsx(Bae,{...n,ref:r,type:t}))}const d0=xk("line",joe),Xf=xk("bar",_oe),u0=xk("pie",Toe),WN={getProductivity:async(t,e,n)=>{const r=new URLSearchParams;return t&&r.append("userId",t),e&&r.append("start",e),n&&r.append("end",n),(await Le.get(`/analytics/productivity?${r.toString()}`)).data},getTeamCollaboration:async(t,e,n)=>{const r=new URLSearchParams;return t&&r.append("organizationId",t),e&&r.append("start",e),n&&r.append("end",n),(await Le.get(`/analytics/team?${r.toString()}`)).data},getProjectOverview:async t=>{const e=new URLSearchParams;return t&&e.append("folderId",t),(await Le.get(`/analytics/projectOverview?${e.toString()}`)).data},getCalendarLinks:async(t,e)=>{const n=new URLSearchParams;return n.append("start",t),n.append("end",e),(await Le.get(`/analytics/calendarLinks?${n.toString()}`)).data},getVersionAnalytics:async(t,e)=>{const n=new URLSearchParams;return t&&n.append("start",t),e&&n.append("end",e),(await Le.get(`/analytics/versions?${n.toString()}`)).data},getFolderAnalytics:async()=>(await Le.get("/analytics/folders")).data};(!d0||!Xf||!u0)&&console.error("Chart.js components are not available. Please install chart.js and react-chartjs-2");const VN=["#3b82f6","#10b981","#8b5cf6","#f59e0b","#ef4444"];sg.register(jae,Oae,nae,tae,lae,Vie,Cae,pae,gae);const Ss="#cbd5f0",pl="rgba(148, 163, 184, 0.25)",Fae="rgba(15, 23, 42, 0.6)",YN=(t,e=24)=>t?t.length<=e?t:`${t.slice(0,Math.max(0,e-3))}...`:"";function $ae(){const[t,e]=b.useState(null),[n,r]=b.useState("line"),[s,o]=b.useState(!0),[i,l]=b.useState(null),[u,h]=b.useState(null),[f,m]=b.useState([]);b.useEffect(()=>{x()},[]);const x=async()=>{o(!0);try{const[T,I,A,F]=await Promise.all([ire(),WN.getProjectOverview(),WN.getFolderAnalytics(),Or.getConversations().catch(U=>(console.error("Failed to fetch chat conversations:",U),[]))]);e(T),l(I),h(A),m(Array.isArray(F)?F:[])}catch(T){console.error("Failed to fetch analytics:",T),de.error("Failed to load analytics data")}finally{o(!1)}},w=async()=>{await x(),de.success("Data refreshed")},v=()=>{if(!t)return;const T=JSON.stringify({metrics:{totalDocuments:t.totalDocuments,totalVersions:t.totalVersions,versionsCreatedToday:t.versionsCreatedToday,activeEditors:t.activeEditors},analytics:t,timestamp:new Date().toISOString()},null,2),I=new Blob([T],{type:"application/json"}),A=URL.createObjectURL(I),F=document.createElement("a");F.href=A,F.download=`analytics-export-${new Date().toISOString().split("T")[0]}.json`,F.click(),URL.revokeObjectURL(A),de.success("Analytics data exported")},y=[{key:"versions",label:"Versions Created",color:"#3b82f6"},{key:"comments",label:"Comments Added",color:"#10b981"}],k=(T=7)=>Array.from({length:T}).map((I,A)=>{const F=new Date;return F.setDate(F.getDate()-(T-A-1)),{date:F.toLocaleDateString(void 0,{weekday:"short"}),versions:0,comments:0}}),_=(()=>{switch(n){case"line":{if(!t)return{data:k(),series:y};const T=t.versionTrends||[],I=k(Math.max(7,T.length||7)),A=new Map(T.map(U=>[new Date(U.date).toLocaleDateString(void 0,{weekday:"short"}),{versions:U.versions??0,comments:U.comments??0}]));return{data:I.map(U=>{const W=A.get(U.date);return W?{date:U.date,versions:W.versions,comments:W.comments}:U}),series:t.versionTrends&&t.versionTrends.length>0?[{key:"versions",label:"Versions Created",color:"#3b82f6"},{key:"comments",label:"Comments Added",color:"#10b981"}]:y}}case"bar":return f.length>0?{data:f.slice(0,8).map(A=>({name:YN(M(A)),participants:A.participants?.length||0})),series:[{key:"participants",label:"Participants",color:"#3b82f6"}]}:!t||t.mostActiveEditors.length===0?u&&u.folderStats.length>0?{data:u.folderStats.slice(0,8).map(A=>({name:YN(A.folderName),documents:A.totalDocuments,recent:A.recentDocuments})),series:[{key:"documents",label:"Total Documents",color:"#3b82f6"},{key:"recent",label:"Recent Documents",color:"#10b981"}]}:{data:[{name:"Activity",value:0}],series:[{key:"value",label:"Activity",color:"#3b82f6"}]}:{data:t.mostActiveEditors.map(I=>({name:I.userName,versions:I.versionsCreated,comments:I.commentsAdded||0})),series:[{key:"versions",label:"Versions Created",color:"#3b82f6"},{key:"comments",label:"Comments Added",color:"#10b981"}]};case"pie":{if(f.length>0){const T=f.filter(W=>W.type==="direct").length,I=f.filter(W=>W.type==="group").length,A=f.filter(W=>!W.lastMessage).length;let F=[{name:"Direct Chats",value:T},{name:"Group Chats",value:I},{name:"Inactive Chats",value:A}];return F.reduce((W,Z)=>W+Z.value,0)===0&&(F=[{name:"Conversations",value:f.length},{name:"Active Chats",value:Math.ceil(f.length/2)},{name:"Inactive Chats",value:Math.floor(f.length/2)}]),{data:F}}if(u){const T=u.totalSharedFolders||0,I=Math.max(u.totalFolders-T,0),A=[{name:"Shared Folders",value:T},{name:"Private Folders",value:I},{name:"Total Documents",value:u.totalDocuments||0}];if(A.reduce((U,W)=>U+W.value,0)>0)return{data:A}}if(t){const T=[{name:"Versions Today",value:t.versionsCreatedToday||0},{name:"Versions This Week",value:t.versionsCreatedThisWeek||0},{name:"Comments Today",value:t.commentsCreatedToday||0},{name:"Total Comments",value:t.totalComments||0}];if(T.reduce((A,F)=>A+F.value,0)>0)return{data:T}}return{data:[{name:"Documents",value:1}]}}default:return null}})(),j=u?u.averageDocumentsPerFolder.toFixed(1):"0.0",M=T=>T.name&&T.name.trim().length>0?T.name:T.participants&&T.participants.length>0?T.participants.map(I=>`${I.firstName} ${I.lastName}`.trim()).join(", "):"Conversation",O=T=>{if(!d0||!Xf||!u0)return c.jsx("div",{className:"flex h-full items-center justify-center text-sm text-red-500 dark:text-red-400",children:"Chart.js is not installed. Please run: npm install chart.js react-chartjs-2"});if(!T||!T.data||T.data.length===0)return c.jsx("div",{className:"flex h-full items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:"No chart data available yet. Try collaborating or starting new chats to generate insights."});try{switch(n){case"line":{const I=T.data.map(W=>W.date??""),F=(T.series&&T.series.length>0?T.series:y).map(W=>({label:W.label,data:T.data.map(Z=>Number(Z[W.key]??0)),borderColor:W.color,backgroundColor:W.color,tension:.35,pointRadius:4,pointHoverRadius:6,fill:!1})),U={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:Ss,boxWidth:12,boxHeight:12}},tooltip:{mode:"index",intersect:!1}},scales:{x:{ticks:{color:Ss},grid:{color:pl}},y:{beginAtZero:!0,ticks:{color:Ss},grid:{color:pl}}}};return c.jsx(d0,{data:{labels:I,datasets:F},options:U})}case"bar":{const I=T.data.map(W=>W.name??""),F=(T.series&&T.series.length>0?T.series:[{key:"value",label:"Value",color:"#3b82f6"}]).map(W=>({label:W.label,data:T.data.map(Z=>Number(Z[W.key]??0)),backgroundColor:W.color,borderRadius:8,maxBarThickness:48})),U={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:Ss,boxWidth:12,boxHeight:12}},tooltip:{mode:"index",intersect:!1}},scales:{x:{ticks:{color:Ss},grid:{color:pl}},y:{beginAtZero:!0,ticks:{color:Ss},grid:{color:pl}}}};return c.jsx(Xf,{data:{labels:I,datasets:F},options:U})}case"pie":default:{const I=T.data.map(W=>W.name??""),A=T.data.map(W=>Number(W.value??0)),F={label:"Share",data:A.length>0?A:[1],backgroundColor:T.data.map((W,Z)=>VN[Z%VN.length]),borderColor:Fae,borderWidth:1},U={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:Ss,boxWidth:12,boxHeight:12}},tooltip:{mode:"nearest",intersect:!1}}};return c.jsx(u0,{data:{labels:I,datasets:[F]},options:U})}}}catch(I){return console.error("Error rendering chart:",I),c.jsx("div",{className:"flex h-full items-center justify-center text-sm text-red-500 dark:text-red-400",children:"Error rendering chart. Please check the console for details."})}};return s?c.jsx("div",{className:"p-6 min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Qf,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):t?c.jsxs("div",{className:"p-6 min-h-screen",children:[c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Analytics Dashboard"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Live collaboration and productivity insights"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(lt,{to:"/business-analytics",children:c.jsxs(pe,{variant:"outline",children:[c.jsx(Td,{className:"h-4 w-4 mr-2"}),"Business Analytics"]})}),c.jsxs(pe,{onClick:w,variant:"outline",disabled:s,children:[c.jsx(Qf,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),c.jsxs(pe,{onClick:v,variant:"outline",children:[c.jsx(zF,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[c.jsx(Pe,{className:"p-6 border-l-4 border-blue-500",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Folders"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:u?.totalFolders||0}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u?.totalSharedFolders||0," shared"]})]}),c.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:c.jsx(un,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),c.jsx(Pe,{className:"p-6 border-l-4 border-green-500",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Documents"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:u?.totalDocuments||t.totalDocuments}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Avg: ",j," per folder"]})]}),c.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full",children:c.jsx(N0,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),c.jsx(Pe,{className:"p-6 border-l-4 border-purple-500",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Versions Today"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t.versionsCreatedToday}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.versionsCreatedThisWeek," this week"]})]}),c.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-full",children:c.jsx(Td,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})})]})}),c.jsx(Pe,{className:"p-6 border-l-4 border-orange-500",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Editors"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t.activeEditors}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Collaborating now"})]}),c.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/20 rounded-full",children:c.jsx(ha,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})})]})})]}),c.jsxs(Pe,{className:"p-6 mb-6",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Analytics Chart"}),c.jsxs("div",{className:"flex gap-2 mt-2 md:mt-0",children:[c.jsx(pe,{onClick:()=>r("line"),variant:n==="line"?"default":"outline",size:"sm",children:"Trends"}),c.jsx(pe,{onClick:()=>r("bar"),variant:n==="bar"?"default":"outline",size:"sm",children:"Collaboration"}),c.jsx(pe,{onClick:()=>r("pie"),variant:n==="pie"?"default":"outline",size:"sm",children:"Distribution"})]})]}),c.jsx("div",{className:"h-[400px] w-full",children:_&&_.data&&Array.isArray(_.data)&&_.data.length>0?c.jsx(c.Fragment,{children:O(_)}):c.jsx("div",{className:"flex h-full items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:"No chart data available yet. Try collaborating or starting new chats to generate insights."})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[i&&i.length>0&&c.jsxs(Pe,{className:"p-6",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Documents per Folder"})}),c.jsx("div",{className:"h-[300px] w-full",children:i&&i.length>0?(()=>{const T=i.slice(0,10),I={labels:T.map(F=>F.folderName),datasets:[{label:"Documents",data:T.map(F=>F.totalDocuments),backgroundColor:"#3b82f6",borderRadius:8,maxBarThickness:48}]},A={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:Ss,boxWidth:12,boxHeight:12}},tooltip:{mode:"index",intersect:!1}},scales:{x:{ticks:{color:Ss,maxRotation:0,minRotation:0},grid:{color:pl}},y:{beginAtZero:!0,ticks:{color:Ss},grid:{color:pl}}}};return c.jsx(Xf,{data:I,options:A})})():c.jsx("div",{className:"flex h-full items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:"No folder data available"})})]}),u&&u.mostActiveFolders.length>0&&c.jsxs(Pe,{className:"p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Most Active Folders"}),c.jsx("div",{className:"space-y-3",children:u.mostActiveFolders.map((T,I)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold",children:I+1}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:T.folderName}),c.jsxs("p",{className:"text-xs text-gray-500",children:[T.recentDocuments," recent documents"]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-400",children:T.totalDocuments}),c.jsx("p",{className:"text-xs text-gray-500",children:"documents"})]})]},T.folderId))})]})]}),u&&u.folderStats.length>0&&c.jsxs(Pe,{className:"p-6 mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Folder Statistics"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[c.jsx("th",{className:"text-left p-3 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Folder Name"}),c.jsx("th",{className:"text-center p-3 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Documents"}),c.jsx("th",{className:"text-center p-3 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Recent (7d)"}),c.jsx("th",{className:"text-center p-3 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Comments"}),c.jsx("th",{className:"text-center p-3 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Collaborators"}),c.jsx("th",{className:"text-center p-3 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Shared With"})]})}),c.jsx("tbody",{children:u.folderStats.slice(0,10).map(T=>c.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[c.jsx("td",{className:"p-3",children:c.jsx(lt,{to:`/folders/${T.folderId}`,className:"font-medium text-blue-600 dark:text-blue-400 hover:underline",children:T.folderName})}),c.jsx("td",{className:"p-3 text-center text-gray-900 dark:text-gray-100",children:T.totalDocuments}),c.jsx("td",{className:"p-3 text-center text-green-600 dark:text-green-400",children:T.recentDocuments}),c.jsx("td",{className:"p-3 text-center text-gray-600 dark:text-gray-400",children:T.totalComments}),c.jsx("td",{className:"p-3 text-center text-purple-600 dark:text-purple-400",children:T.activeCollaborators}),c.jsx("td",{className:"p-3 text-center text-orange-600 dark:text-orange-400",children:T.sharedWith})]},T.folderId))})]})})]})]}):c.jsx("div",{className:"p-6 min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600",children:"No analytics data available"}),c.jsx(pe,{onClick:x,className:"mt-4",children:"Try Again"})]})})}var zae="Separator",qN="horizontal",Uae=["horizontal","vertical"],ID=b.forwardRef((t,e)=>{const{decorative:n,orientation:r=qN,...s}=t,o=Hae(r)?r:qN,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return c.jsx(Ae.div,{"data-orientation":o,...l,...s,ref:e})});ID.displayName=zae;function Hae(t){return Uae.includes(t)}var Wae=ID;function KN({className:t,orientation:e="horizontal",decorative:n=!0,...r}){return c.jsx(Wae,{"data-slot":"separator-root",decorative:n,orientation:e,className:He("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}class Vae{static async getProductivityScores(){try{return(await Le.get("/analytics/productivity-scores")).data}catch(e){throw console.error("Error fetching productivity scores:",e),e}}static async getCollaborationHealth(){try{return(await Le.get("/analytics/collaboration-health")).data}catch(e){throw console.error("Error fetching collaboration health:",e),e}}static async getSmartRecommendations(){try{return(await Le.get("/analytics/smart-recommendations")).data}catch(e){throw console.error("Error fetching smart recommendations:",e),e}}static async getROIMetrics(){try{return(await Le.get("/analytics/roi-metrics")).data}catch(e){throw console.error("Error fetching ROI metrics:",e),e}}static async getDocumentLifecycle(){try{return(await Le.get("/analytics/document-lifecycle")).data}catch(e){throw console.error("Error fetching document lifecycle:",e),e}}static async getTeamPerformanceInsights(){try{return(await Le.get("/analytics/team-performance")).data}catch(e){throw console.error("Error fetching team performance insights:",e),e}}static async getAllBusinessAnalytics(){try{const[e,n,r,s,o,i]=await Promise.all([this.getProductivityScores(),this.getCollaborationHealth(),this.getSmartRecommendations(),this.getROIMetrics(),this.getDocumentLifecycle(),this.getTeamPerformanceInsights()]);return{productivityScores:e,collaborationHealth:n,smartRecommendations:r,roiMetrics:s,documentLifecycle:o,teamPerformance:i}}catch(e){throw console.error("Error fetching business analytics:",e),e}}}function Yae(){const[t,e]=b.useState(null),[n,r]=b.useState(!0),[s,o]=b.useState("overview"),[i,l]=b.useState(null),[u,h]=b.useState(!1);b.useEffect(()=>{f()},[]),b.useEffect(()=>{if(u){const C=setInterval(()=>{f(!0)},3e4);return()=>clearInterval(C)}},[u]);const f=async(C=!1)=>{C||r(!0);try{const _=await Vae.getAllBusinessAnalytics();e(_),l(new Date),C&&de.success("Analytics refreshed",{duration:2e3})}catch(_){console.error("Failed to fetch business analytics:",_),C||de.error("Could not load business analytics")}finally{r(!1)}},m=C=>C>=80?"text-green-600 dark:text-green-400":C>=60?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",x=C=>C>=80?"bg-green-100 dark:bg-green-900/20":C>=60?"bg-yellow-100 dark:bg-yellow-900/20":"bg-red-100 dark:bg-red-900/20",w=C=>{switch(C){case"high":return"text-red-600 bg-red-100 dark:bg-red-900/20 dark:text-red-400";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-400";case"low":return"text-green-600 bg-green-100 dark:bg-green-900/20 dark:text-green-400";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/20 dark:text-gray-400"}},v=C=>Math.max(0,Math.min(100,C)),y=C=>{if(!C)return"NA";const _=C.trim().split(/\s+/);return _.length===1?_[0].slice(0,2).toUpperCase():`${_[0][0]}${_[_.length-1][0]}`.toUpperCase()},k=b.useMemo(()=>{if(!t)return null;const C=t.teamPerformance.topPerformers.averageScore,_=t.collaborationHealth.overallScore,j=t.smartRecommendations.length,M=t.collaborationHealth.bottlenecks.length,O=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t.roiMetrics.costSavings),T=t.teamPerformance.topPerformers.users[0]?.strengths[0]||"Consistent output from top performers.",I=t.roiMetrics.beforeAfterComparison.after.collaborationRate-t.roiMetrics.beforeAfterComparison.before.collaborationRate,A=t.teamPerformance.topPerformers.users.slice(0,5),F=t.smartRecommendations.filter(W=>W.priority==="high").slice(0,5),U=t.productivityScores.sort((W,Z)=>Z.score-W.score).slice(0,10);return{productivityScore:C,collaborationScore:_,recommendationsCount:j,bottlenecksCount:M,costSavingsFormatted:O,topPerformerStrength:T,collaborationRateDelta:I,topPerformers:A,priorityRecommendations:F,topProductivityScores:U}},[t]);return n?c.jsx("div",{className:"p-6 min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Qf,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading business analytics..."})]})}):!t||!k?c.jsx("div",{className:"p-6 min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ev,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load analytics data"}),c.jsx(pe,{onClick:()=>f(),className:"mt-4",children:"Try Again"})]})}):c.jsxs("div",{className:"p-6 min-h-screen",children:[c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Business Analytics Dashboard"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real insights for better team performance and business value"}),i&&c.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[c.jsx(yd,{className:"h-3 w-3"}),c.jsxs("span",{children:["Last updated: ",i.toLocaleTimeString()]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsxs(pe,{onClick:()=>h(!u),variant:u?"default":"outline",size:"sm",children:[c.jsx(f$,{className:`h-4 w-4 mr-2 ${u?"animate-pulse":""}`}),u?"Auto-refresh ON":"Auto-refresh OFF"]}),c.jsx(lt,{to:"/analytics",children:c.jsxs(pe,{variant:"outline",size:"sm",children:[c.jsx(Td,{className:"h-4 w-4 mr-2"}),"Analytics"]})}),c.jsxs(pe,{onClick:()=>f(),variant:"outline",size:"sm",disabled:n,children:[c.jsx(Qf,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),"Refresh"]})]})]})}),c.jsxs(pm,{value:s,onValueChange:o,className:"flex flex-col gap-6",children:[c.jsxs(mm,{className:"flex w-full flex-wrap items-center gap-2 rounded-xl border border-border/70 bg-white p-2 dark:bg-card",children:[c.jsx(gr,{value:"overview",className:"w-auto rounded-lg px-4 py-2 text-sm font-medium data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Overview"}),c.jsx(gr,{value:"productivity",className:"w-auto rounded-lg px-4 py-2 text-sm font-medium data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Productivity"}),c.jsx(gr,{value:"collaboration",className:"w-auto rounded-lg px-4 py-2 text-sm font-medium data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Collaboration"}),c.jsx(gr,{value:"roi",className:"w-auto rounded-lg px-4 py-2 text-sm font-medium data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"ROI Impact"}),c.jsx(gr,{value:"recommendations",className:"w-auto rounded-lg px-4 py-2 text-sm font-medium data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Recommendations"})]}),c.jsxs("div",{className:"flex-1 space-y-6",children:[c.jsxs(js,{value:"overview",className:"space-y-6 mt-0",children:[c.jsx(Pe,{className:"border border-border/60 bg-white dark:bg-card shadow-sm",children:c.jsxs("div",{className:"grid gap-8 p-6 md:p-8 lg:grid-cols-[minmax(0,3fr)_minmax(0,2fr)] items-start",children:[c.jsxs("div",{className:"space-y-5",children:[c.jsxs(St,{variant:"outline",className:"w-fit",children:[c.jsx(ii,{className:"mr-2 h-3.5 w-3.5"}),"Executive Snapshot"]}),c.jsx("h2",{className:"text-3xl md:text-4xl font-semibold leading-tight tracking-tight text-gray-900 dark:text-gray-100",children:"Momentum Overview"}),c.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300",children:"Track how your workspace is performing today. Monitor productivity momentum, collaboration strength, and ROI wins so you can focus the team on what moves the needle fastest."}),c.jsxs("div",{className:"flex flex-wrap gap-4 text-xs md:text-sm text-gray-500 dark:text-gray-400",children:[c.jsxs("span",{className:"inline-flex items-center gap-2",children:[c.jsx(yF,{className:"h-4 w-4"}),t.teamPerformance.teamHealth.collaborationScore,"% collaboration pulse"]}),c.jsxs("span",{className:"inline-flex items-center gap-2",children:[c.jsx(F_,{className:"h-4 w-4"}),k.recommendationsCount," smart recommendations"]}),c.jsxs("span",{className:"inline-flex items-center gap-2",children:[c.jsx(ev,{className:"h-4 w-4"}),k.bottlenecksCount," bottlenecks flagged"]})]})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs(Pe,{className:"rounded-2xl border border-border/70 bg-muted/40 dark:bg-muted/10 p-5 shadow-none",children:[c.jsxs("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.2em] text-muted-foreground",children:[c.jsx("span",{children:"Team Productivity"}),c.jsx(St,{variant:"outline",children:k.productivityScore>=70?"On Track":"Needs Focus"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsxs("span",{className:"text-4xl font-semibold text-gray-900 dark:text-gray-100",children:[k.productivityScore,"%"]}),c.jsx(U_,{className:"h-5 w-5 text-muted-foreground"})]}),c.jsx(Qo,{value:v(k.productivityScore),className:"mt-4 h-2"}),c.jsx("p",{className:"mt-3 text-xs text-muted-foreground",children:"Avg score across top performers"})]})]}),c.jsxs(Pe,{className:"rounded-2xl border border-border/70 bg-muted/40 dark:bg-muted/10 p-5 shadow-none",children:[c.jsxs("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.2em] text-muted-foreground",children:[c.jsx("span",{children:"Collaboration Health"}),c.jsx(St,{variant:"outline",children:k.collaborationScore>=70?"Healthy":"Monitor"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsxs("span",{className:"text-4xl font-semibold text-gray-900 dark:text-gray-100",children:[k.collaborationScore,"%"]}),c.jsx(ha,{className:"h-5 w-5 text-muted-foreground"})]}),c.jsx(Qo,{value:v(k.collaborationScore),className:"mt-4 h-2"}),c.jsx("p",{className:"mt-3 text-xs text-muted-foreground",children:"Shared documents & cross-team work"})]})]}),c.jsxs(Pe,{className:"rounded-2xl border border-border/70 bg-muted/40 dark:bg-muted/10 p-5 shadow-none sm:col-span-2",children:[c.jsx("div",{className:"text-[11px] uppercase tracking-[0.2em] text-muted-foreground",children:"ROI Impact"}),c.jsxs("div",{className:"mt-5 grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-muted-foreground uppercase",children:"Time Saved"}),c.jsxs("p",{className:"text-3xl font-semibold text-gray-900 dark:text-gray-100",children:[t.roiMetrics.timeSaved,"h"]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-muted-foreground uppercase",children:"Cost Savings"}),c.jsx("p",{className:"text-3xl font-semibold text-gray-900 dark:text-gray-100",children:k.costSavingsFormatted})]})]}),c.jsx(KN,{className:"my-4"}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[c.jsxs("span",{children:[k.recommendationsCount," smart tips"]}),c.jsxs("span",{children:[t.roiMetrics.efficiencyGain,"% efficiency gain"]})]})]})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[c.jsxs(Pe,{className:"p-5 border border-border/70 shadow-sm hover:shadow-lg transition-all duration-200",children:[c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"rounded-full bg-blue-500/10 text-blue-600 dark:text-blue-300 p-3",children:c.jsx(U_,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Team Productivity"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Latest 7-day trend"})]})]}),c.jsxs(St,{variant:"secondary",className:"border-transparent bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-200",children:[k.productivityScore,"%"]})]}),c.jsx(Qo,{value:v(k.productivityScore),className:"mt-4 h-2"}),c.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:k.topPerformerStrength})]}),c.jsxs(Pe,{className:"p-5 border border-border/70 shadow-sm hover:shadow-lg transition-all duration-200",children:[c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"rounded-full bg-emerald-500/10 text-emerald-600 dark:text-emerald-300 p-3",children:c.jsx(ha,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Collaboration Health"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Active teamwork & sharing"})]})]}),c.jsxs(St,{variant:"secondary",className:"border-transparent bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200",children:[k.collaborationScore,"%"]})]}),c.jsx(Qo,{value:v(k.collaborationScore),className:"mt-4 h-2"}),c.jsx("p",{className:"mt-3 text-sm text-muted-foreground",children:t.collaborationHealth.recommendations[0]||"Keep momentum by encouraging weekly cross-team syncs."})]}),c.jsxs(Pe,{className:"p-5 border border-border/70 shadow-sm hover:shadow-lg transition-all duration-200",children:[c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"rounded-full bg-purple-500/10 text-purple-600 dark:text-purple-300 p-3",children:c.jsx(FF,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Time Saved"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Automation & process wins"})]})]}),c.jsxs(St,{variant:"secondary",className:"border-transparent bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-200",children:[t.roiMetrics.timeSaved,"h"]})]}),c.jsx(Qo,{value:v(t.roiMetrics.efficiencyGain),className:"mt-4 h-2"}),c.jsxs("p",{className:"mt-3 text-sm text-muted-foreground",children:["Efficiency gain at ",t.roiMetrics.efficiencyGain,"% this period."]})]}),c.jsxs(Pe,{className:"p-5 border border-border/70 shadow-sm hover:shadow-lg transition-all duration-200",children:[c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"rounded-full bg-amber-500/10 text-amber-600 dark:text-amber-300 p-3",children:c.jsx(F_,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Active Recommendations"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"AI-powered next steps"})]})]}),c.jsx(St,{variant:"secondary",className:"border-transparent bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-200",children:k.recommendationsCount})]}),c.jsxs("p",{className:"mt-4 text-sm text-muted-foreground",children:["Tackle high-priority actions to unlock additional ",t.roiMetrics.collaborationIncrease,"% collaboration boost."]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[c.jsxs(Pe,{className:"p-6 space-y-5",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Top Performers"}),c.jsxs(St,{variant:"outline",className:"text-xs text-muted-foreground border-dashed",children:[k.topPerformers.length," highlighted"]})]}),c.jsx("div",{className:"space-y-4",children:k.topPerformers.map((C,_)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(yr,{className:"h-10 w-10 border border-border/60 bg-blue-500/10 text-blue-600 dark:text-blue-200",children:c.jsx(er,{children:y(C.name)})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:C.name}),c.jsx("p",{className:"text-xs text-muted-foreground",children:C.strengths[0]||"High performer"})]})]}),c.jsxs("div",{className:"flex flex-col items-end gap-1",children:[c.jsxs(St,{variant:"secondary",className:`${x(C.score)} border-transparent text-sm`,children:[C.score,"%"]}),c.jsxs("span",{className:"text-[11px] uppercase tracking-wide text-muted-foreground",children:["Rank #",_+1]})]})]}),_!==k.topPerformers.length-1&&c.jsx(KN,{className:"mt-4 bg-border"})]},_))})]}),c.jsxs(Pe,{className:"p-6 space-y-5",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Business Impact"}),c.jsx(St,{variant:"outline",className:"border-dashed text-xs text-muted-foreground",children:"ROI pulse"})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{className:"rounded-xl border border-border/60 p-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[c.jsx("span",{children:"Efficiency Gain"}),c.jsxs("span",{className:"inline-flex items-center gap-1 font-semibold text-green-600 dark:text-green-400",children:[c.jsx(Zx,{className:"h-4 w-4"}),t.roiMetrics.efficiencyGain,"%"]})]}),c.jsx(Qo,{value:v(t.roiMetrics.efficiencyGain),className:"mt-3 h-2"})]}),c.jsxs("div",{className:"rounded-xl border border-border/60 p-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[c.jsx("span",{children:"Cost Savings"}),c.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:k.costSavingsFormatted})]}),c.jsxs("p",{className:"mt-2 text-xs text-muted-foreground",children:["Completion rate at ",t.roiMetrics.documentCompletionRate,"%."]})]}),c.jsxs("div",{className:"rounded-xl border border-border/60 p-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[c.jsx("span",{children:"Before vs After"}),c.jsxs(St,{variant:"secondary",className:"border-transparent bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-200",children:[k.collaborationRateDelta>=0?"+":"",k.collaborationRateDelta,"%"]})]}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-xs text-muted-foreground",children:[c.jsxs("div",{children:[c.jsx("span",{className:"block text-[11px] uppercase",children:"Document Time"}),c.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[t.roiMetrics.beforeAfterComparison.after.avgDocumentTime,"h"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"block text-[11px] uppercase",children:"Completion Rate"}),c.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[t.roiMetrics.beforeAfterComparison.after.completionRate,"%"]})]})]})]})]})]}),c.jsxs(Pe,{className:"p-6 space-y-5",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Team Health Snapshot"}),c.jsx(St,{variant:"outline",className:"border-dashed text-xs text-muted-foreground",children:"Live status"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"rounded-xl border border-border/60 p-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[c.jsx("span",{children:"Collaboration Score"}),c.jsxs(St,{variant:"secondary",className:"border-transparent bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-200",children:[t.teamPerformance.teamHealth.collaborationScore,"%"]})]}),c.jsx(Qo,{value:v(t.teamPerformance.teamHealth.collaborationScore),className:"mt-3 h-2"})]}),c.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-border/60 p-4 text-sm text-muted-foreground",children:[c.jsx("span",{children:"Bottlenecks in review"}),c.jsx("span",{className:"font-semibold text-amber-600 dark:text-amber-400",children:t.teamPerformance.teamHealth.bottlenecks})]}),c.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-border/60 p-4 text-sm text-muted-foreground",children:[c.jsx("span",{children:"Recommendations ready"}),c.jsx("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:t.teamPerformance.teamHealth.recommendations})]})]})]})]})]}),c.jsx(js,{value:"productivity",className:"space-y-6 mt-6",children:c.jsxs(Pe,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Productivity Scores"}),c.jsxs(St,{variant:"outline",className:"text-xs",children:["Top ",k.topProductivityScores.length," performers"]})]}),c.jsx("div",{className:"space-y-4",children:k.topProductivityScores.map((C,_)=>c.jsxs(Pe,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${x(C.score)}`,children:c.jsx("span",{className:`text-lg font-bold ${m(C.score)}`,children:C.score})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:C.userName}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Productivity Score"})]})]}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Rank #",_+1]})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-3",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:C.metrics.documentsCreated}),c.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Documents"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:C.metrics.versionsCreated}),c.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Versions"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-lg font-semibold text-purple-600 dark:text-purple-400",children:C.metrics.commentsAdded}),c.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Comments"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400",children:C.metrics.meetingsAttended}),c.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Meetings"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-lg font-semibold text-indigo-600 dark:text-indigo-400",children:C.metrics.collaborationScore}),c.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Collaboration"})]})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:C.insights.map((j,M)=>c.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 text-xs rounded-full",children:j},M))})]},C.userId))})]})}),c.jsx(js,{value:"collaboration",className:"space-y-6 mt-6",children:c.jsxs(Pe,{className:"p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Collaboration Health"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Overall Score"}),c.jsxs("span",{className:`text-2xl font-bold ${m(t.collaborationHealth.overallScore)}`,children:[t.collaborationHealth.overallScore,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full ${t.collaborationHealth.overallScore>=80?"bg-green-500":t.collaborationHealth.overallScore>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${t.collaborationHealth.overallScore}%`}})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[t.collaborationHealth.teamCollaboration.crossTeamWork,"%"]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cross-Team Work"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[t.collaborationHealth.teamCollaboration.sharedDocuments,"%"]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Shared Documents"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.collaborationHealth.teamCollaboration.activeCollaborations}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Collaborations"})]})]}),t.collaborationHealth.bottlenecks.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Bottlenecks"}),c.jsx("div",{className:"space-y-3",children:t.collaborationHealth.bottlenecks.map((C,_)=>c.jsxs("div",{className:"border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20 p-3 rounded",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx(ev,{className:"h-4 w-4 text-red-500"}),c.jsx("span",{className:"font-medium text-red-800 dark:text-red-300",children:C.description})]}),c.jsxs("div",{className:"text-sm text-red-700 dark:text-red-400",children:["Affected users: ",C.users.join(", ")]})]},_))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Recommendations"}),c.jsx("div",{className:"space-y-2",children:t.collaborationHealth.recommendations.map((C,_)=>c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(L_,{className:"h-4 w-4 text-green-500 mt-1"}),c.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:C})]},_))})]})]})}),c.jsxs(js,{value:"roi",className:"space-y-6 mt-6",children:[c.jsxs(Pe,{className:"p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"ROI Impact"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[t.roiMetrics.timeSaved,"h"]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Time Saved"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:[t.roiMetrics.efficiencyGain,"%"]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Efficiency Gain"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[t.roiMetrics.collaborationIncrease,"%"]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Collaboration Increase"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:["$",t.roiMetrics.costSavings]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cost Savings"})]})]}),c.jsxs("div",{className:"border-t pt-6",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Before vs After Comparison"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Document Time"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsxs("span",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:[t.roiMetrics.beforeAfterComparison.before.avgDocumentTime,"h"]}),c.jsx(wF,{className:"h-4 w-4 text-green-500"}),c.jsxs("span",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:[t.roiMetrics.beforeAfterComparison.after.avgDocumentTime,"h"]})]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Collaboration Rate"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsxs("span",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:[t.roiMetrics.beforeAfterComparison.before.collaborationRate,"%"]}),c.jsx(Zx,{className:"h-4 w-4 text-green-500"}),c.jsxs("span",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:[t.roiMetrics.beforeAfterComparison.after.collaborationRate,"%"]})]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Completion Rate"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsxs("span",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:[t.roiMetrics.beforeAfterComparison.before.completionRate,"%"]}),c.jsx(Zx,{className:"h-4 w-4 text-green-500"}),c.jsxs("span",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:[t.roiMetrics.beforeAfterComparison.after.completionRate,"%"]})]})]})]})]})]}),c.jsxs(Pe,{className:"p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Document Lifecycle"}),c.jsx("div",{className:"space-y-4",children:t.documentLifecycle.map(C=>c.jsxs(Pe,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 capitalize",children:C.stage}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:C.count}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"documents"})]})]}),c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Average time: ",C.avgTimeInStage,"h"]}),C.bottlenecks.length>0&&c.jsx("div",{className:"space-y-2",children:C.bottlenecks.map((_,j)=>c.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-2 rounded",children:c.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:_.description})},j))})]},C.stage))})]})]}),c.jsx(js,{value:"recommendations",className:"space-y-6 mt-6",children:c.jsxs(Pe,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Smart Recommendations"}),c.jsxs(St,{variant:"outline",className:"text-xs",children:[k.priorityRecommendations.length," high-priority"]})]}),k.priorityRecommendations.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(L_,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No high-priority recommendations at this time."})]}):c.jsx("div",{className:"space-y-4",children:k.priorityRecommendations.map((C,_)=>c.jsxs(Pe,{className:"p-4",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(C.priority)}`,children:C.priority.toUpperCase()}),c.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",children:C.type.toUpperCase()})]}),c.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:C.title}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:C.description})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Action Required"}),c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.action})]}),c.jsxs("div",{children:[c.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Expected Impact"}),c.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:C.impact})]})]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Affected Users"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:C.users.map((j,M)=>c.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300 text-xs rounded-full",children:j},M))})]})]},_))})]})})]})]})]})}function qae({onComplete:t}){const[e,n]=b.useState(1),[r,s]=b.useState(""),o=()=>{e<3?n(e+1):t()},i=()=>{t()};return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-card rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[c.jsx("h2",{className:"text-[24px]",children:"Welcome to XPlanB"}),c.jsx(pe,{variant:"ghost",size:"icon",onClick:i,className:"rounded-lg",children:c.jsx(us,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-8",children:[e===1&&c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mx-auto mb-6",children:c.jsx(ii,{className:"w-10 h-10 text-white"})}),c.jsx("h3",{className:"text-[24px] mb-3",children:"Let's get started!"}),c.jsx("p",{className:"text-muted-foreground mb-8",children:"XPlanB is your modern collaborative workspace for documents, projects, and team communication. Let's set up your workspace in just a few steps."}),c.jsxs("div",{className:"grid grid-cols-3 gap-6 text-left",children:[c.jsxs("div",{children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center mb-3",children:c.jsx(un,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),c.jsx("h4",{className:"mb-1",children:"Organize"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Create folders and documents"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center mb-3",children:c.jsx(ha,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),c.jsx("h4",{className:"mb-1",children:"Collaborate"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Work together in real-time"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-50 dark:bg-green-900/20 flex items-center justify-center mb-3",children:c.jsx(Pl,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),c.jsx("h4",{className:"mb-1",children:"Achieve"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Track progress and goals"})]})]})]}),e===2&&c.jsxs("div",{children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mx-auto mb-6",children:c.jsx(un,{className:"w-8 h-8 text-white"})}),c.jsx("h3",{className:"text-[24px] mb-3 text-center",children:"Create your workspace"}),c.jsx("p",{className:"text-muted-foreground mb-8 text-center",children:"Give your workspace a name. You can always change this later."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ft,{htmlFor:"workspaceName",children:"Workspace Name"}),c.jsx(Ke,{id:"workspaceName",type:"text",value:r,onChange:l=>s(l.target.value),placeholder:"e.g., My Team Workspace",className:"mt-1.5 rounded-xl"})]}),c.jsx("div",{className:"p-4 rounded-xl bg-blue-50 dark:bg-blue-900/20",children:c.jsxs("p",{className:"text-[14px] text-blue-900 dark:text-blue-200",children:[" ",c.jsx("strong",{children:"Tip:"})," Choose a name that represents your team or project."]})})]})]}),e===3&&c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-20 h-20 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center mx-auto mb-6",children:c.jsx(Pl,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),c.jsx("h3",{className:"text-[24px] mb-3",children:"You're all set!"}),c.jsx("p",{className:"text-muted-foreground mb-8",children:"Your workspace is ready. Start by creating your first document or inviting team members."}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-left",children:[c.jsxs("div",{className:"p-4 rounded-xl border border-border",children:[c.jsx("h4",{className:"mb-2",children:" Create Document"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Start writing and organizing your ideas"})]}),c.jsxs("div",{className:"p-4 rounded-xl border border-border",children:[c.jsx("h4",{className:"mb-2",children:" Invite Team"}),c.jsx("p",{className:"text-[14px] text-muted-foreground",children:"Collaborate with your teammates"})]})]})]})]}),c.jsxs("div",{className:"p-6 border-t border-border flex items-center justify-between",children:[c.jsx("div",{className:"flex space-x-2",children:[1,2,3].map(l=>c.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${l===e?"bg-blue-600":"bg-gray-300 dark:bg-gray-700"}`},l))}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(pe,{variant:"ghost",onClick:i,className:"rounded-xl",children:"Skip"}),c.jsx(pe,{onClick:o,className:"rounded-xl",children:e===3?"Get Started":"Next"})]})]})]})})}var Kae=(t,e,n,r,s,o,i,l)=>{let u=document.documentElement,h=["light","dark"];function f(w){(Array.isArray(t)?t:[t]).forEach(v=>{let y=v==="class",k=y&&o?s.map(C=>o[C]||C):s;y?(u.classList.remove(...k),u.classList.add(o&&o[w]?o[w]:w)):u.setAttribute(v,w)}),m(w)}function m(w){l&&h.includes(w)&&(u.style.colorScheme=w)}function x(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let w=localStorage.getItem(e)||n,v=i&&w==="system"?x():w;f(v)}catch{}},Xae=b.createContext(void 0),Gae={setTheme:t=>{},themes:[]},Jae=()=>{var t;return(t=b.useContext(Xae))!=null?t:Gae};b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:i,themes:l,nonce:u,scriptProps:h})=>{let f=JSON.stringify([n,e,o,t,l,i,r,s]).slice(1,-1);return b.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${Kae.toString()})(${f})`}})});const Qae=({...t})=>{const{theme:e="system"}=Jae();return c.jsx(_3,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};function Zae(){const[t,e]=b.useState(!1),[n,r]=b.useState(!1);b.useEffect(()=>{eT()&&(e(!0),localStorage.getItem("xplanb_onboarding")||r(!0))},[]);const s=()=>{e(!0),localStorage.setItem("xplanb_auth","true"),r(!1)},o=()=>{rF(),e(!1),localStorage.removeItem("xplanb_onboarding")};return c.jsx(DU,{children:c.jsx(Z5,{children:c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsxs(T5,{children:[c.jsx(Pt,{path:"/signup",element:t?c.jsx(ty,{to:"/dashboard"}):c.jsx(iF,{onSignUp:s})}),c.jsx(Pt,{path:"/login",element:c.jsx(p$,{onLogin:s})}),c.jsx(Pt,{path:"/reset-password/:token",element:c.jsx(m$,{})}),c.jsx(Pt,{path:"/meet",element:c.jsx(Qne,{})}),c.jsx(Pt,{element:c.jsx(g$,{}),children:c.jsxs(Pt,{element:c.jsx(ZU,{onLogout:o}),children:[c.jsx(Pt,{path:"/",element:c.jsx(y2,{})}),c.jsx(Pt,{path:"/dashboard",element:c.jsx(y2,{})}),c.jsx(Pt,{path:"/documents",element:c.jsx(zH,{})}),c.jsx(Pt,{path:"/folders",element:c.jsx(UH,{})}),c.jsx(Pt,{path:"/folders/:id",element:c.jsx(VH,{})}),c.jsx(Pt,{path:"/documents/:id",element:c.jsx(Mte,{})}),c.jsx(Pt,{path:"/analytics",element:c.jsx($ae,{})}),c.jsx(Pt,{path:"/business-analytics",element:c.jsx(Yae,{})}),c.jsx(Pt,{path:"/calendar",element:c.jsx(Ite,{})}),c.jsx(Pt,{path:"/chat",element:c.jsx(ene,{})}),c.jsx(Pt,{path:"/meetings",element:c.jsx(Xne,{})}),c.jsx(Pt,{path:"/ai-assistant",element:c.jsx(qne,{})}),c.jsx(Pt,{path:"/settings",element:c.jsx(jE,{})}),c.jsx(Pt,{path:"/profile",element:c.jsx(jE,{})}),c.jsx(Pt,{path:"*",element:c.jsx(ty,{to:"/"})})]})})]}),n&&c.jsx(qae,{onComplete:()=>{r(!1),localStorage.setItem("xplanb_onboarding","true")}}),c.jsx(Qae,{})]})})})}LL.createRoot(document.getElementById("root")).render(c.jsx(Zae,{}));export{w2 as _,ele as c,XN as g};
